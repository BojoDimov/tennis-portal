{"version":3,"sources":["components/DisplayImage.js","app/NotFoundPage.js","services/events.service.js","configuration.js","services/query.service.js","tournaments/TournamentView.js","components/ConfirmationDialog.js","enums.js","services/user.service.js","components/select/components.js","components/select/AsyncSelect.js","components/select/styles.js","components/FormModal.js","schemes/components/SelectTeamModal.js","schemes/components/Enrollments.js","components/EnumSelect.js","components/EnumSelectToggle.js","schemes/SchemeFormModal.js","components/L10n.js","schemes/components/SchemeDetails.js","components/MessageModal.js","users/InvitationsComponent.js","schemes/components/InvitationsModal.js","schemes/components/SchemeDetailsActions.js","schemes/components/ScoresModal.js","schemes/SchemeView.js","schemes/SchemesRoot.js","schemes/brackets/EditGroupModal.js","schemes/components/MatchFormModal.js","schemes/brackets/GroupsBracket.js","schemes/brackets/EliminationBracket.js","components/ImageField.js","components/FileUpload.js","tournaments/TournamentFormModal.js","editions/EditionFormModal.js","editions/EditionsDesktopView.js","editions/EditionsMobileView.js","editions/EditionsList.js","editions/EditionsViewActions.js","editions/EditionView.js","editions/EditionsRoot.js","utils.js","schedule/reservation/EditReservationModal.js","schedule/reservation/styles.js","schedule/reservation/AdminReservation.js","schedule/reservation/ViewReservationModal.js","schedule/reservation/UserReservation.js","schedule/reservation/GuestReservation.js","schedule/reservation/Reservation.js","schedule/reservation/ShuffleItem.js","components/calendar/DateComponent.js","components/calendar/Calendar.js","schedule/Legend.js","schedule/Schedule.js","admin/courts/CourtItem.js","admin/courts/Courts.js","admin/seasons/SeasonItem.js","admin/seasons/Seasons.js","admin/statistics/utils.js","admin/statistics/MonthlyStatistics.js","admin/statistics/Statistics.js","users/user.model.js","admin/users/UserDetailsModal.js","admin/users/UserSubscriptionsModal.js","admin/users/Users.js","users/UserProfileFormModal.js","users/ChangePasswordModal.js","users/components/PlayerInfoComponent.js","users/TeamView.js","menu/Guest.js","menu/Admin.js","menu/navigation.model.js","users/UserProfile.js","users/AccountView.js","login/Activation.js","login/RecoveryStep1.js","login/RecoveryStep2.js","app/app.routing.js","login/Login.js","login/Registration.js","login/SignIn.js","menu/Navigation.js","theme.js","app/App.js","index.js","app/index.js"],"names":["Buffer","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","DisplayImage","_ref","image","style","buffer","content","data","b64","toString","mimeType","a","createElement","src","concat","NotFoundPage","react_default","className","Paper_default","height","display","justifyContent","alignItems","Typography_default","color","variant","React","Component","dispatchEvent","name","options","root","document","getElementById","event","CustomEvent","detail","catchEvent","cb","listener","bind","removeEventListener","addEventListener","events_service","configuration","backend","query_service","QueryService","Object","classCallCheck","this","window","Configuration","console","log","_this","FormData","append","method","mode","body","fetch","then","res","errorHandling","json","fileId","resource","request","headers","Content-Type","JSON","stringify","_this2","token","localStorage","getItem","status","err","setItem","location","replace","item","TournamentView","props","possibleConstructorReturn","getPrototypeOf","call","state","tournament","rankings","get","match","params","id","setState","Card_default","CardContent_default","info","Table_default","TableHead_default","TableRow_default","TableCell_default","padding","TableBody_default","map","ranking","index","Fragment","key","Link","to","team","user1","user2","points","ConfirmationDialog","isOpen","open","e","close","accept","onAccept","_this$props","title","children","classes","Dialog_default","onClose","paper","DialogTitle_default","DialogContent_default","DialogActions_default","btnContainer","Button_default","btn","onClick","withStyles","theme","width","defineProperty","breakpoints","down","flexDirection","marginBottom","ApplicationMode","GUEST","USER","ADMIN","RouteTypeEnum","PUBLIC","PROTECTED","Gender","MALE","FEMALE","Status","DRAFT","PUBLISHED","BracketStatus","UNDRAWN","GROUPS_DRAWN","GROUPS_END","ELIMINATION_DRAWN","ELIMINATION_END","CourtType","CLAY","HARD","GRASS","INDOOR","BackhandType","ONE","TWO","PlayStyle","LEFT","RIGHT","ReservationPayment","SODEXO","MULTISPORT","ABK","CASH","SUBS_ZONE_1","SUBS_ZONE_2","ReservationType","SUBSCRIPTION","COMPETITOR","ELDER_GROUP","TENNIS_SCHOOL","TOURNAMENT","SERVICE","SubscriptionType","ZONE_1","ZONE_2","StatisticsType","MONTHLY","DAILY","EnumLocalization","_BracketStatus","_StatisticsType","_ReservationPayment","_ReservationType","CustomReservationType","_CustomReservationTyp","_SubscriptionType","_Status","FINALIZED","INACTIVE","_Gender","_CourtType","_BackhandType","_PlayStyle","user_service","UserService","_React$createContext","createContext","Provider","Consumer","SetApplicationMode","WithApplicationMode","cached","user","removeItem","inputComponent","inputRef","objectWithoutProperties","assign","ref","cursor","components","ClearIndicator","_props$innerProps","innerProps","restInnerProps","zIndex","Clear_default","Control","TextField_default","fullWidth","InputProps","inputProps","objectSpread","selectProps","input","innerRef","textFieldProps","Menu","marginTop","MultiValue","Chip_default","tabIndex","label","classNames","chip","chipFocused","isFocused","onDelete","removeProps","deleteIcon","Cancel_default","NoOptionsMessage","noOptionsMessage","Option","MenuItem_default","buttonRef","selected","component","fontWeight","isSelected","Placeholder","SingleValue","singleValue","ValueContainer","valueContainer","AsyncSelect","searchTerm","limit","defaultLimit","totalCount","load","prevProps","filter","loadMore","_this$state","length","post","query","result","_this3","disableClear","disableSearch","value","getOptionLabel","getOptionValue","formatOptionLabel","onChange","selectStyles","container","base","position","menuList","paddingBottom","palette","text","primary","& input","font","_getOptionLabel","option","_getOptionValue","_noOptionsMessage","NoSsr_default","react_select_esm","isClearable","isSearchable","InputLabelProps","shrink","Boolean","onInputChange","trim","onMenuScrollToBottom","styles","SelectComponents","customStyles","flexGrow","margin","original","flexWrap","flex","spacing","unit","backgroundColor","emphasize","type","grey","fontSize","placeholder","left","right","divider","withTheme","FormModal","actions","fullScreen","hasError","enableFullWidth","rootClass","rootWithError","closeBtn","boxSizing","border","boxShadow","& button","marginLeft","main","top","&:hover","dark","withMobileDialog","breakpoint","SelectTeamModal","scheme","catch","singleTeams","errTextPrefix","disabled","canSave","save","select_AsyncSelect","email","message","components_FormModal","EnrollmentsComponent","openTeamModal","enrolled","getData","teamId","schemeId","user1Id","user2Id","_this4","delete","_this5","isAdmin","ExpansionPanel_default","defaultExpanded","ExpansionPanelSummary_default","expandIcon","ExpandMore_default","ExpansionPanelDetails_default","components_SelectTeamModal","size","enrollment","borderClass","default","seed","seedDivider","maxPlayerCount","enrolledDivider","removeEnrollment","DeleteForever_default","lighten","borderBottom","light","secondary","EnumSelect","EnumValues","EnumName","required","error","errorText","allowClear","FormControl_default","InputLabel_default","Select_default","keys","i","EnumSelectToggle","enumName","values","Enums","translation","leftRounded","target","borderTopLeftRadius","borderBottomLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderRight","rightRounded","borderRadius","borderLeft","SchemeFormModal","model","errors","assertThisInitialized","handleChange","prop","handleCustomChange","mixedTeams","groupCount","teamsPerGroup","edition","components_EnumSelectToggle","multiline","FormControlLabel_default","control","Checkbox_default","checked","maleTeams","femaleTeams","hasGroupPhase","ageFrom","ageTo","DatePicker_default","autoOk","labelFunc","date","moment","format","clearable","DateTimePicker_default","registrationStart","ampm","registrationEnd","pPoints","wPoints","cPoints","l10n_text","translate","L10n","SchemeDetails","enableEditionLink","CardProps","editionId","Reply_default","paddingRight","traits","push","ageTrait","join","getSchemeTraits","bracketStatus","CardActions_default","disableActionSpacing","MessageModal","activation","show","duration","setTimeout","InvitationsComponent","userId","page","rowsPerPage","setUserId","getAuthenticatedUser","invitation","invitations","components_MessageModal","List_default","slice","inv","ListItem_default","inviterId","invited","invitedId","inviter","cancel","TablePagination_default","count","rowsPerPageOptions","labelRowsPerPage","labelDisplayedRows","from","onChangePage","onChangeRowsPerPage","InvitationsModal","selectedUser","invite","users_InvitationsComponent","SchemeDetailsActions","hasEnrolled","hasCancelledEnrollment","invitationsModal","hasEnrollmentError","reload","isBetween","enableViewLink","components_InvitationsModal","registrationOpen","enroll","components_ConfirmationDialog","cancelEnroll","ScoresModal","scores","score","parseInt","maxWidth","SchemeView","schemeModel","history","_this6","_this7","schemes_SchemeFormModal","components_ScoresModal","drawBracket","getScores","deleteScheme","components_SchemeDetails","components_SchemeDetailsActions","Enrollments","SchemesRoot","Switch","Route","path","render","schemes_SchemeView","EditGroupModal","teams","setTeam","groupId","order","splice","groupOrder","group","undefined","String","fromCharCode","charCodeAt","groupTeam","marginRight","IconButton_default","removeTeam","addTeam","MatchFormModal","sets","team1","team1Id","team2","team2Id","withdraw","handleSetsChange","formatSets","existingSet","find","set","tiebreaker","matchId","doubles","enableTeamChange","round","GroupsBracket","groups","groupModel","matchModel","enableActions","matches","elevation","brackets_EditGroupModal","components_MatchFormModal","align","addGroup","GroupsBracket_Group","onEdit","deleteGroup","onAddMatch","addMatch","onEditMatch","onDeleteMatch","deleteMatch","Group","getGroupHeader","Tabs_default","indicatorColor","textColor","Tab_default","transition","GroupsBracket_GroupRankingView","groupTeams","GroupsBracket_GroupMatchesView","GroupRankingView","flexBasis","fontStyle","GroupsBracket_GroupTeamInfo","rank","stats","GroupMatchesView","_this$props2","Edit_default","GroupTeamInfo","_this$props3","wonMatches","totalMatches","EliminationBracket","bracket","constructBracket","roundSize","rounds","Math","log2","_loop","_loop2","currentMatch","constructMatch","pow","getRoundName","EliminationBracket_Match","onEvent","Match","Tooltip_default","placement","TransitionComponent","Zoom","enterDelay","EliminationBracket_TeamInfo","pos","TeamInfo","enemyPos","composeScore","ImageField","imageStyle","getFileUrl","Photo_default","click","TournamentFormModal","handleThumbnail","files","uploadFile","file","thumbnail","thumbnailId","components_ImageField","EditionFormModal","startDate","endDate","tournamentId","Date","toLocaleDateString","truncateInfo","whiteSpace","overflow","textOverflow","EditionsDesktopView","editions","EditionsMobileView","EditionsList","editionModel","tournamentModel","handleOpenModal","handleRemoveEdition","onRemove","_React$Component","_class","apply","arguments","inherits","createClass","editions_EditionFormModal","tournaments_TournamentFormModal","Hidden_default","smDown","editions_EditionsDesktopView","mdUp","editions_EditionsMobileView","EditionView","schemes","initSchemeModel","remove","schemesRoot","schemesItem","EditionsRoot","editions_EditionView","exact","editions_EditionsList","getHour","hour","EditReservationModal","reservation","court","season","payments","administrator","customer","customerId","subscription","subscriptionId","handlePaymentChange","handlePaymentSubscriptionChange","parse","_","onAction","unshift","amount","reservationId","DialogContentText_default","components_EnumSelect","seasonId","remainingHours","addPayment","Add_default","payment","paymentCell","endAdornment","InputAdornment_default","onlyAvailable","ErrorTexts","action","cancelReservation","exist","typeRequired","customerRequired","subscriptionRequired","usedHoursExceedTotalHours","paymentSubscriptionRequired","typeSubscriptionAndHasPaymentSubscription","maxAllowedTimeDiff","reservationInThePast","up","cell","textAlign","button","opacity","AdminReservation","modal","free","paidReservation","unpaidReservation","unavaliable","components_L10n","reservation_EditReservationModal","ReservationStyles","contrastText","background","ViewReservationModal","makeReservation","UserReservation","reserved","reservation_ViewReservationModal","GuestReservation","available","taken","Reservation","workingHoursEnd","workingHoursStart","reservation_AdminReservation","reservation_GuestReservation","reservation_UserReservation","ShuffleItem","shuffle","onSelect","onUnselect","findIndex","courtId","select","service","DateComponent","getDate","previousSelected","weekDays","day","month","year","getDay","end","toConsumableArray","Array","k","availiableDaysAhead","targetDate","today","diff","floor","getFullYear","getMonth","_this$props4","tabsRoot","scroller","tabsScroller","indicator","tabsIndicator","scrollButtons","tabsScrollButtons","scrollable","getDays","tab","isToday","todayTab","selectedTab","disabledTab","labelContainer","isDisabled","getLabel","minWidth","minHeight","Calendar","startOf","years","monts","emitDateOnAnyChange","formControl","calendar_DateComponent","paddingLeft","Legend","unavailiable","& div","scrollButton","Schedule","counter","courts","reservations","rootRef","onscroll","tableRef","needScrollBtns","clientWidth","tableInViewport","scrollTop","offsetTop","btnContainerRef","getAdministrator","getConfig","config","sameReservation","constructReservation","shuffleErrors","scrollLeft","gutterBottom","calendar_Calendar","schedule_Legend","index_es","Replay_default","Shuffle_default","overflowX","scrollBehavior","scroll","ChevronLeft_default","scrollRight","ChevronRight_default","start","hours","reservation_ShuffleItem","getReservation","shuffleOnSelect","shuffleOnUnselect","reservation_Reservation","invalid","invalidTime","CourtItem","onCreateCancel","CourtItem_CourtEdit","onCancel","handleCancel","card","isActive","cardContent","cardActions","CourtEdit","Switch_default","rowsMax","Courts","addCourt","courts_CourtItem","updateModel","removeCourt","SeasonItem","SeasonItem_SeasonEdit","seasonStart","seasonEnd","SeasonEdit","Seasons","seasons","addSeason","seasons_SeasonItem","removeSeason","SortableTableCell","active","direction","handleClick","orderHandler","TableSortLabel_default","orderData","ordering","sort","b","UserPlayedHours","handleOrder","users","forEach","totalHours","transformToUserPlayedHours","utils_SortableTableCell","reduce","acc","curr","StatisticByClassifier","_React$Component2","classifier","label1","label2","customFn","customValueSuffix","transformed","customValue","custom","transformByClassifier","reduceToPayments","paymentsAmountAccumulator","current","parseFloat","StatisticsRoot","handleCalendarChange","handleStatisticsChange","MonthlyStatistics_UserPlayedHours","MonthlyStatistics_StatisticByClassifier","UserModel","UserAccountData","UserAccountSecondaryData","UserPlayerMainData","UserPlayerSecondaryData","password","confirmPassword","firstName","lastName","telephone","gender","birthDate","startedPlaying","playStyle","courtType","backhandType","reservationDebt","subscriptionDebt","UET","helperText","composeErrors","openToYearSelection","unique","short","mismatch","future","range","user_model","UserDetailsModal","getErrorsModel","UserSubscriptionsModal","subscriptions","newValue","handleDelete","init","addSubscription","sub","UserSubscriptionsModal_Subscription","ArrowBack_default","Subscription","isEditMode","expanded","cancelEdit","Users","currentSeason","usersFilter","editUser","subsUser","indexOf","names","split","filterUsers","users_UserDetailsModal","users_UserSubscriptionsModal","updateSubscriptions","xsDown","createdAt","Done_default","prepareForEdit","DescriptionOutlined_default","_ref2","smUp","Build_default","Divider_default","UserProfileFormModal","ChangePasswordModal","currentPassword","newPassword","confirmNewPassword","errorTexts","InvalidCredentialsException","PasswordRequired","PasswordDoesntMatch","PlayerInfoComponent","TeamView","components_PlayerInfoComponent","Guest","drawerOpen","routes","currentRoute","Toolbar_default","route","Menu_default","Drawer_default","anchor","role","onKeyDown","Icon","ListItemIcon_default","ListItemText_default","ExitToApp_default","Admin","additionalRoutes","Settings_default","list","faIcon","react_fontawesome_index_es","icon","logout","PowerSettingsNew_default","withRoutes","WrappedComponent","navigation_model","NavigationModel","CalendarTodayIcon","adminRoutes","PersonIcon","WbSunnyRoundedIcon","ViewQuiltRoundedIcon","AssessmentIcon","userRoutes","User","SetCurrentRoute","WithCurrentRoute","UserProfile","loggedInUser","subsCollapsed","resCollapsed","invCollapsed","userModel","changePassword","setUser","users_UserProfileFormModal","users_ChangePasswordModal","sectionRoot","cardContentRoot","sectionHeadline","UserProfile_UserPersonalInfo","UserProfile_UserPlayerInfo","ExpandLess_default","listItemRoot","UserPersonalInfo","UserPlayerInfo","_React$Component3","&:last-child","AccountView","AccountActivation","success","timer","interval","search","setInterval","clearInterval","RecoveryStep1","issueRecoverEmail","RecoveryStep2","recover","routeMapping","/editions","/schedule","/players","/admin/courts","/admin/seasons","/admin/users","/admin/statistics","Statistics","/account","AppRouting","users_UserProfile","Activation","login_RecoveryStep1","login_RecoveryStep2","Redirect","Login","login","form","link","borderColor","RegistrationStepper","activeStep","completed","changeStep","onSuccess","register","focused","SignIn","successfulRegistration","handleTabChange","handleRegistration","EventService","aria-labelledby","centered","smallContainer","lib_default","onChangeIndex","login_Login","Registration","Navigation","createMuiTheme","overrides","MuiFormControl","MuiDialog","overflowY","MuiTypography","caption","body2","display1","display2","MuiCardActions","MuiDrawer","App","applicationMode","handleLoginTab","classList","add","setApplicationMode","onRouteChanged","pathname","MuiPickersUtilsProvider_default","utils","DateFnsUtils","core_styles","menu_Navigation","login_SignIn","app_routing","withRouter","library","faTrophy","ReactDOM","BrowserRouter","app_App"],"mappings":"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","file":"static/js/main.f7e87394.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst DisplayImage = ({ image, style }) => {\r\n  const buffer = image.content.data;\r\n  const b64 = new Buffer(buffer).toString('base64')\r\n  const mimeType = image.mimeType;\r\n\r\n  return <img src={`data:${mimeType};base64,${b64}`} style={style} />\r\n};\r\n\r\nexport default DisplayImage;","import React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nclass NotFoundPage extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <Paper style={{ height: '300px', display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n          <Typography color=\"secondary\" variant=\"headline\">\r\n            Страницата, която търсите, вече не съществува 🙉\r\n      </Typography>\r\n        </Paper>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NotFoundPage;","export function dispatchEvent(name, options) {\r\n  const root = document.getElementById('root');\r\n  const event = new CustomEvent(name, { detail: options });\r\n  root.dispatchEvent(event);\r\n}\r\n\r\nexport function catchEvent(name, cb) {\r\n  const root = document.getElementById('root');\r\n  const listener = customEventListener.bind(null, cb);\r\n  root.removeEventListener(name, listener);\r\n  root.addEventListener(name, listener);\r\n}\r\n\r\nfunction customEventListener(cb, event) {\r\n  return cb(event.detail);\r\n}\r\n\r\nexport default {\r\n  dispatchEvent,\r\n  catchEvent\r\n};","export default {\r\n  backend: 'http://localhost:4000/api'\r\n}","import { dispatchEvent } from './events.service';\r\nimport Configuration from '../configuration';\r\n\r\nclass QueryService {\r\n  constructor() {\r\n    this.backend = (window.configuration || Configuration).backend;\r\n\r\n    console.log(this.backend);\r\n  }\r\n\r\n  uploadFile(content) {\r\n    let data = new FormData();\r\n    data.append('file', content);\r\n\r\n    let options = {\r\n      method: 'POST',\r\n      mode: 'cors',\r\n      body: data\r\n    }\r\n\r\n    return fetch(this.backend + '/files', options)\r\n      .then(res => this.errorHandling(res))\r\n      .then(res => res.json());\r\n  }\r\n\r\n  getFileUrl(fileId) {\r\n    return `${this.backend}/files/${fileId}`;\r\n  }\r\n\r\n  get(resource) {\r\n    let options = {\r\n      method: 'GET',\r\n      mode: 'cors',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    };\r\n\r\n    return this\r\n      .request(resource, options);\r\n    //.then(this.notFoundHandling);\r\n  }\r\n\r\n  post(resource, body) {\r\n    let options = {\r\n      method: 'POST',\r\n      mode: 'cors',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(body)\r\n    };\r\n\r\n    return this.request(resource, options);\r\n  }\r\n\r\n  delete(resource) {\r\n    let options = {\r\n      method: 'DELETE',\r\n      mode: 'cors',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    };\r\n\r\n    return this.request(resource, options);\r\n  }\r\n\r\n  request(resource, options) {\r\n    let token = window.localStorage.getItem('token');\r\n    if (token)\r\n      options.headers['Authorization'] = 'Bearer ' + token;\r\n\r\n    return fetch(this.backend + resource, options)\r\n      .then(res => this.errorHandling(res))\r\n      .then(res => res.json());\r\n  }\r\n\r\n  errorHandling(res) {\r\n    if (res.status === 404) {\r\n      dispatchEvent('not-found');\r\n      throw null;\r\n    }\r\n    if (res.status === 422)\r\n      return res\r\n        .json()\r\n        .then(err => { throw err; });\r\n    if (res.status === 500)\r\n      throw null;\r\n    if (res.status === 401) {\r\n      window.localStorage.setItem('token', null);\r\n      window.location.replace('/');\r\n    }\r\n    else return res || null;\r\n  }\r\n\r\n  notFoundHandling(item) {\r\n    if (item == null) {\r\n      dispatchEvent('not-found');\r\n      throw null;\r\n    }\r\n    else return item;\r\n  }\r\n}\r\n\r\nexport default new QueryService();","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nimport QueryService from '../services/query.service';\r\n\r\nclass TournamentView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      tournament: {\r\n        rankings: []\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    QueryService\r\n      .get(`/tournaments/${this.props.match.params.id}`)\r\n      .then(tournament => this.setState({ tournament }));\r\n  }\r\n\r\n  render() {\r\n    const tournament = this.state.tournament;\r\n    const rankings = tournament.rankings;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <Card>\r\n          <CardContent>\r\n            <Typography variant=\"headline\">Лига {tournament.name}</Typography>\r\n            <Typography variant=\"caption\">{tournament.info}</Typography>\r\n\r\n            <Table>\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell padding=\"none\">№</TableCell>\r\n                  <TableCell>Играч/отбор</TableCell>\r\n                  <TableCell padding=\"dense\">Точки</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n\r\n                {rankings.map((ranking, index) => {\r\n                  return (\r\n                    <React.Fragment key={ranking.id}>\r\n                      <TableRow>\r\n                        <TableCell padding=\"none\">{index + 1}</TableCell>\r\n                        <TableCell>\r\n                          <Link to={`/teams/${ranking.team.user1.id}`} >\r\n                            <Typography variant=\"body2\">{ranking.team.user1.name}</Typography>\r\n                          </Link>\r\n                          {ranking.team.user2 &&\r\n                            <Link to={`/teams/${ranking.team.user2.id}`} >\r\n                              <Typography variant=\"body2\">{ranking.team.user2.name}</Typography>\r\n                            </Link>}\r\n                        </TableCell>\r\n                        <TableCell padding=\"dense\">\r\n                          <Typography variant=\"caption\">{ranking.points}</Typography>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    </React.Fragment>\r\n                  );\r\n                })}\r\n              </TableBody>\r\n            </Table>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TournamentView;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nclass ConfirmationDialog extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isOpen: false\r\n    };\r\n\r\n    this.open = (e) => this.setState({ isOpen: true });\r\n    this.close = (e) => this.setState({ isOpen: false });\r\n    this.accept = (e) => {\r\n      this.close(e);\r\n      this.props.onAccept(e);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { isOpen } = this.state;\r\n    const { title, body, onAccept, children, classes, style } = this.props;\r\n\r\n    return (\r\n      <span style={style}>\r\n        <Dialog open={isOpen} onClose={this.close} classes={{ paper: classes.root }}>\r\n          <DialogTitle>{title}</DialogTitle>\r\n          <DialogContent>{body}</DialogContent>\r\n          <DialogActions className={classes.btnContainer}>\r\n            <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={this.accept}>\r\n              Да\r\n          </Button>\r\n            <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={this.close}>\r\n              Не\r\n          </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n        <span onClick={this.open}>\r\n          {children}\r\n        </span>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(ConfirmationDialog);","export const ApplicationMode = {\r\n  GUEST: 'guest',\r\n  USER: 'user',\r\n  ADMIN: 'admin'\r\n};\r\n\r\nexport const RouteTypeEnum = {\r\n  PUBLIC: 'public',\r\n  PROTECTED: 'protected',\r\n  ADMIN: 'admin'\r\n};\r\n\r\nexport const Gender = {\r\n  MALE: 'male',\r\n  FEMALE: 'female'\r\n};\r\n\r\nexport const Status = {\r\n  DRAFT: 'draft',\r\n  PUBLISHED: 'published'\r\n};\r\n\r\n// export const SchemeType = {\r\n//   GROUP: 'round-robin',\r\n//   ELIMINATION: 'elimination'\r\n// };\r\n\r\nexport const BracketStatus = {\r\n  UNDRAWN: 'undrawn',\r\n  GROUPS_DRAWN: 'groups-in-progress',\r\n  GROUPS_END: 'groups-finished',\r\n  ELIMINATION_DRAWN: 'elimination-in-progress',\r\n  ELIMINATION_END: 'elimination-finished'\r\n};\r\n\r\nexport const CourtType = {\r\n  CLAY: 'clay',\r\n  HARD: 'hard',\r\n  GRASS: 'grass',\r\n  INDOOR: 'indoor'\r\n};\r\n\r\nexport const BackhandType = {\r\n  ONE: '1h',\r\n  TWO: '2h'\r\n};\r\n\r\nexport const PlayStyle = {\r\n  LEFT: 'left-handed',\r\n  RIGHT: 'right-handed'\r\n};\r\n\r\nexport const ReservationPayment = {\r\n  SODEXO: 'sodexo',\r\n  MULTISPORT: 'multisport',\r\n  ABK: 'abk',\r\n  CASH: 'cash',\r\n  SUBS_ZONE_1: 'zone1',\r\n  SUBS_ZONE_2: 'zone2'\r\n}\r\n\r\nexport const ReservationType = {\r\n  GUEST: 'guest',\r\n  USER: 'user',\r\n  SUBSCRIPTION: 'subscription',\r\n  COMPETITOR: 'competitor',\r\n  ELDER_GROUP: 'elder',\r\n  TENNIS_SCHOOL: 'school',\r\n  TOURNAMENT: 'tournament',\r\n  SERVICE: 'service',\r\n};\r\n\r\nexport const SubscriptionType = {\r\n  ZONE_1: 'zone1',\r\n  ZONE_2: 'zone2'\r\n};\r\n\r\nexport const StatisticsType = {\r\n  MONTHLY: 'month',\r\n  DAILY: 'day'\r\n};\r\n\r\nexport const EnumLocalization = {\r\n  // 'SchemeType': {\r\n  //   [SchemeType.ELIMINATION]: 'Елиминации',\r\n  //   [SchemeType.GROUP]: 'Групи'\r\n  // },\r\n  'BracketStatus': {\r\n    [BracketStatus.UNDRAWN]: 'Неизтеглена схема',\r\n    [BracketStatus.GROUPS_DRAWN]: 'Групова фаза',\r\n    [BracketStatus.GROUPS_END]: 'Приключила групова фаза',\r\n    [BracketStatus.ELIMINATION_DRAWN]: 'Елиминационна фаза',\r\n    [BracketStatus.ELIMINATION_END]: 'Приключена схема'\r\n  },\r\n  'StatisticsType': {\r\n    [StatisticsType.MONTHLY]: 'Месечна',\r\n    [StatisticsType.DAILY]: 'Дневна'\r\n  },\r\n  'ReservationPayment': {\r\n    [ReservationPayment.CASH]: 'В брой',\r\n    [ReservationPayment.SODEXO]: 'Карта \"Содексо\"',\r\n    [ReservationPayment.MULTISPORT]: 'Карта \"Мултиспорт\"',\r\n    [ReservationPayment.ABK]: 'Абонаментна карта (АБК)',\r\n    [ReservationPayment.SUBS_ZONE_1]: 'Отиграване на абонамент \"ЗОНА 1\"',\r\n    [ReservationPayment.SUBS_ZONE_2]: 'Отиграване на абонамент \"ЗОНА 2\"'\r\n  },\r\n  'ReservationType': {\r\n    [ReservationType.GUEST]: 'Гост',\r\n    [ReservationType.USER]: 'Потребител',\r\n    [ReservationType.SUBSCRIPTION]: 'Абонат',\r\n    [ReservationType.COMPETITOR]: 'Съзтезатели',\r\n    [ReservationType.TENNIS_SCHOOL]: 'Тенис училище',\r\n    [ReservationType.ELDER_GROUP]: 'Група за възрастни',\r\n    [ReservationType.TOURNAMENT]: 'Турнир',\r\n    [ReservationType.SERVICE]: 'Неработещо игрище',\r\n  },\r\n  'CustomReservationType': {\r\n    [ReservationType.USER]: 'Резервация',\r\n    [ReservationType.SUBSCRIPTION]: 'Абонамент'\r\n  },\r\n  'SubscriptionType': {\r\n    [SubscriptionType.ZONE_1]: 'ЗОНА 1',\r\n    [SubscriptionType.ZONE_2]: 'ЗОНА 2'\r\n  },\r\n  'Status': {\r\n    [Status.DRAFT]: 'чернова',\r\n    [Status.PUBLISHED]: 'публикувано',\r\n    [Status.FINALIZED]: 'приключено',\r\n    [Status.INACTIVE]: 'неактивно'\r\n  },\r\n  'Gender': {\r\n    [Gender.MALE]: 'Мъж',\r\n    [Gender.FEMALE]: 'Жена'\r\n  },\r\n  'CourtType': {\r\n    [CourtType.CLAY]: 'клей',\r\n    [CourtType.HARD]: 'твърда настилка',\r\n    [CourtType.GRASS]: 'трева',\r\n    [CourtType.INDOOR]: 'на закрито'\r\n  },\r\n  'BackhandType': {\r\n    [BackhandType.ONE]: 'с една ръка',\r\n    [BackhandType.TWO]: 'с две ръце'\r\n  },\r\n  'PlayStyle': {\r\n    [PlayStyle.LEFT]: 'лява ръка',\r\n    [PlayStyle.RIGHT]: 'дясна ръка'\r\n  }\r\n};","import React from 'react';\r\nimport { dispatchEvent } from './events.service';\r\nimport QueryService from './query.service';\r\nimport { ApplicationMode } from '../enums';\r\n\r\n\r\nclass UserService {\r\n  constructor() {\r\n    const { Provider, Consumer } = React.createContext(ApplicationMode.GUEST);\r\n    this.SetApplicationMode = Provider;\r\n    this.WithApplicationMode = Consumer;\r\n    this.cached = false;\r\n    this.user = null;\r\n  }\r\n\r\n  async getAuthenticatedUser() {\r\n    if (!this.cached)\r\n\r\n      this.user = QueryService.get('/login/authData')\r\n        .then(({ data }) => {\r\n          this.cached = true;\r\n          return data;\r\n        });\r\n\r\n    return this.user;\r\n  }\r\n\r\n  login(data) {\r\n    localStorage.setItem('token', data.token);\r\n    this.cached = false;\r\n    dispatchEvent('login');\r\n  }\r\n\r\n  logout() {\r\n    localStorage.removeItem('token');\r\n    this.cached = false;\r\n    dispatchEvent('logout');\r\n  }\r\n}\r\n\r\nexport default new UserService();","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\n\r\nfunction ClearIndicator(props) {\r\n  const { innerProps: { ref, ...restInnerProps } } = props;\r\n  return (\r\n    <div {...restInnerProps} ref={ref}>\r\n      <div style={{ padding: '0px 5px', zIndex: 2, cursor: 'pointer' }}>\r\n        <Typography><ClearIcon color=\"action\" /></Typography>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction NoOptionsMessage(props) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.noOptionsMessage}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction inputComponent({ inputRef, ...props }) {\r\n  return <div ref={inputRef} {...props} style={{ cursor: 'pointer' }} />;\r\n}\r\n\r\nfunction Control(props) {\r\n  return (\r\n    <TextField\r\n      fullWidth\r\n      InputProps={{\r\n        inputComponent,\r\n        inputProps: {\r\n          className: props.selectProps.classes.input,\r\n          inputRef: props.innerRef,\r\n          children: props.children,\r\n          ...props.innerProps,\r\n        },\r\n      }}\r\n      {...props.selectProps.textFieldProps}\r\n    />\r\n  );\r\n}\r\n\r\nexport function Option(props) {\r\n  return (\r\n    <MenuItem\r\n      buttonRef={props.innerRef}\r\n      selected={props.isFocused}\r\n      component=\"div\"\r\n      style={{\r\n        fontWeight: props.isSelected ? 500 : 400\r\n      }}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </MenuItem>\r\n  );\r\n}\r\n\r\n// export function Placeholder(props) {\r\n//   return (\r\n//     <Typography\r\n//       color=\"textSecondary\"\r\n//       className={props.selectProps.classes.placeholder}\r\n//       {...props.innerProps}\r\n//     >\r\n//       {props.children}\r\n//     </Typography>\r\n//   );\r\n// }\r\n\r\nexport const Placeholder = () => null;\r\n\r\nexport function SingleValue(props) {\r\n  return (\r\n    <Typography className={props.selectProps.classes.singleValue} {...props.innerProps}>\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nexport function ValueContainer(props) {\r\n  return <div className={props.selectProps.classes.valueContainer}>{props.children}</div>;\r\n}\r\n\r\nexport function MultiValue(props) {\r\n  return (\r\n    <Chip\r\n      tabIndex={-1}\r\n      label={props.children}\r\n      className={classNames(props.selectProps.classes.chip, {\r\n        [props.selectProps.classes.chipFocused]: props.isFocused,\r\n      })}\r\n      onDelete={props.removeProps.onClick}\r\n      deleteIcon={<CancelIcon {...props.removeProps} />}\r\n    />\r\n  );\r\n}\r\n\r\nexport function Menu(props) {\r\n  return (\r\n    <Paper className={props.selectProps.classes.paper} {...props.innerProps} style={{ marginTop: '0' }}>\r\n      {props.children}\r\n    </Paper>\r\n  );\r\n}\r\n\r\nexport default {\r\n  ClearIndicator,\r\n  Control,\r\n  Menu,\r\n  MultiValue,\r\n  NoOptionsMessage,\r\n  Option,\r\n  Placeholder,\r\n  SingleValue,\r\n  ValueContainer,\r\n};","import React from 'react';\r\nimport Select from 'react-select';\r\nimport NoSsr from '@material-ui/core/NoSsr';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport SelectComponents from './components';\r\nimport styles from './styles';\r\n\r\nimport QueryService from '../../services/query.service';\r\n\r\nclass AsyncSelect extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      searchTerm: '',\r\n      limit: 25,\r\n      defaultLimit: 25,\r\n      options: [],\r\n      totalCount: null\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.load();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.filter != this.props.filter)\r\n      this.load();\r\n  }\r\n\r\n  load(loadMore) {\r\n    const { options, totalCount, searchTerm, defaultLimit } = this.state;\r\n    let limit = this.state.limit;\r\n\r\n    if (loadMore)\r\n      limit += defaultLimit;\r\n\r\n    if (loadMore && options.length == totalCount)\r\n      return;\r\n\r\n    QueryService\r\n      .post(`/select/${this.props.query}`, {\r\n        ...this.props.filter,\r\n        searchTerm,\r\n        limit\r\n      })\r\n      .then(result => this.setState({ ...result, limit }));\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      disableClear,\r\n      disableSearch,\r\n      label,\r\n      value,\r\n      query,\r\n      filter,\r\n      getOptionLabel,\r\n      getOptionValue,\r\n      formatOptionLabel,\r\n      noOptionsMessage,\r\n      onChange,\r\n\r\n      classes, theme\r\n    } = this.props;\r\n\r\n    const selectStyles = {\r\n      container: base => ({\r\n        ...base,\r\n        position: 'default'\r\n      }),\r\n      menuList: base => ({\r\n        ...base,\r\n        paddingBottom: '3rem'\r\n      }),\r\n      input: base => ({\r\n        ...base,\r\n        color: theme.palette.text.primary,\r\n        '& input': {\r\n          font: 'inherit',\r\n        },\r\n      }),\r\n    };\r\n\r\n    let _getOptionLabel = getOptionLabel || ((option) => option.name);\r\n    let _getOptionValue = getOptionValue || ((option) => option.id);\r\n    let _noOptionsMessage = noOptionsMessage || (() => \"Няма елементи в колекцията\");\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        {/* <pre>item   count: {this.state.options.length}</pre>\r\n        <pre>total  count: {this.state.totalCount}</pre>\r\n        <pre>limit       : {this.state.limit}</pre> */}\r\n        <NoSsr>\r\n          <Select\r\n            isClearable={!disableClear}\r\n            isSearchable={!disableSearch}\r\n            textFieldProps={{\r\n              label,\r\n              InputLabelProps: {\r\n                shrink: Boolean(value) || Boolean(this.state.searchTerm)\r\n              }\r\n            }}\r\n            value={value}\r\n            options={this.state.options}\r\n            getOptionLabel={_getOptionLabel}\r\n            getOptionValue={_getOptionValue}\r\n            formatOptionLabel={formatOptionLabel}\r\n            noOptionsMessage={_noOptionsMessage}\r\n            onChange={onChange}\r\n            onInputChange={value => {\r\n              this.setState({ searchTerm: value.trim() });\r\n              this.load();\r\n            }}\r\n            onMenuScrollToBottom={() => this.load(true)}\r\n            classes={classes}\r\n            styles={selectStyles}\r\n            components={SelectComponents}\r\n          />\r\n        </NoSsr>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst customStyles = {\r\n  root: {\r\n    flexGrow: 1,\r\n    margin: 0,\r\n    cursor: 'pointer'\r\n  }\r\n};\r\n\r\nconst augmentedStyles = (theme) => {\r\n  const original = styles(theme);\r\n  const result = { ...original, ...customStyles };\r\n  return result;\r\n}\r\n\r\nexport default withStyles(augmentedStyles, { withTheme: true })(AsyncSelect);","\r\nimport { emphasize } from '@material-ui/core/styles/colorManipulator';\r\nexport default theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    margin: '1rem'\r\n  },\r\n  input: {\r\n    display: 'flex',\r\n    padding: 0,\r\n  },\r\n  valueContainer: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    flex: 1,\r\n    alignItems: 'center',\r\n  },\r\n  chip: {\r\n    margin: `${theme.spacing.unit / 2}px ${theme.spacing.unit / 4}px`,\r\n  },\r\n  chipFocused: {\r\n    backgroundColor: emphasize(\r\n      theme.palette.type === 'light' ? theme.palette.grey[300] : theme.palette.grey[700],\r\n      0.08,\r\n    ),\r\n  },\r\n  noOptionsMessage: {\r\n    padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`,\r\n  },\r\n  singleValue: {\r\n    fontSize: 16,\r\n  },\r\n  placeholder: {\r\n    position: 'absolute',\r\n    left: 2,\r\n    fontSize: 16,\r\n  },\r\n  paper: {\r\n    position: 'absolute',\r\n    zIndex: 1,\r\n    marginTop: theme.spacing.unit,\r\n    left: 0,\r\n    right: 0,\r\n  },\r\n  divider: {\r\n    height: theme.spacing.unit * 2,\r\n  },\r\n});","import React from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nclass FormModal extends React.Component {\r\n  render() {\r\n    const { title, body, actions, onClose, classes, fullScreen, hasError, enableFullWidth } = this.props;\r\n    const rootClass = hasError ? classes.rootWithError : classes.root;\r\n\r\n    return (\r\n      <Dialog\r\n        open={true}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen && enableFullWidth}\r\n        classes={{ paper: rootClass }}\r\n      >\r\n        <DialogTitle>\r\n          <Typography component=\"span\" variant=\"headline\">{title}</Typography>\r\n          {enableFullWidth && <span className={classes.closeBtn} onClick={onClose}>\r\n            <ClearIcon />\r\n          </span>}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          {body}\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          {actions}\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  rootWithError: {\r\n    boxSizing: 'border-box',\r\n    width: '600px',\r\n    border: `1px solid red`,\r\n    boxShadow: `0 0 10px red`\r\n  },\r\n  btnContainer: {\r\n    '& button': {\r\n      marginLeft: '.3rem'\r\n    },\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      '& button': {\r\n        marginBottom: '.3rem',\r\n        width: '100%'\r\n      }\r\n    }\r\n  },\r\n  closeBtn: {\r\n    position: 'absolute',\r\n    color: theme.palette.primary.main,\r\n    top: '5px',\r\n    right: '5px',\r\n    cursor: 'pointer',\r\n    '&:hover': {\r\n      color: theme.palette.primary.dark\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(FormModal)\r\n);","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport AsyncSelect from '../../components/select/AsyncSelect';\r\nimport FormModal from '../../components/FormModal';\r\n\r\nclass SelectTeamModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user1: null,\r\n      user2: null,\r\n      err: null\r\n    };\r\n  }\r\n\r\n  save() {\r\n    this.setState({ err: null });\r\n\r\n    QueryService\r\n      .post(`/schemes/${this.props.scheme.id}/enrollments`, this.state)\r\n      .then(e => this.props.onChange())\r\n      .catch(err => this.setState({ err }));\r\n  }\r\n\r\n  canSave() {\r\n    return (this.props.scheme.singleTeams && this.state.user1)\r\n      || (this.state.user1 && this.state.user2);\r\n  }\r\n\r\n  render() {\r\n    const { onClose, scheme } = this.props;\r\n    const { user1, user2, err } = this.state;\r\n\r\n    const errTextPrefix = scheme.singleTeams ? \"Играчът\" : \"Някой от играчите\";\r\n\r\n    const title = 'Записване на играч/двойка';\r\n    const actions = <React.Fragment>\r\n      <Button disabled={!this.canSave()} variant=\"contained\" color=\"primary\" onClick={() => this.save()}>\r\n        Запис\r\n      </Button>\r\n      <Button variant=\"outlined\" color=\"primary\" onClick={onClose}>\r\n        Отказ\r\n      </Button>\r\n    </React.Fragment>;\r\n\r\n    const body = <React.Fragment>\r\n      <AsyncSelect\r\n        value={user1}\r\n        label=\"Избор на играч\"\r\n        query=\"users\"\r\n        formatOptionLabel={(option) => <Typography component=\"span\">\r\n          {option.name}\r\n          <Typography component=\"span\" variant=\"caption\">{option.email}</Typography>\r\n        </Typography>}\r\n        onChange={user1 => this.setState({ user1 })} />\r\n      {!scheme.singleTeams && <AsyncSelect\r\n        value={user2}\r\n        label=\"Избор на играч\"\r\n        query=\"users\"\r\n        formatOptionLabel={(option) => <Typography component=\"span\">\r\n          {option.name}\r\n          <Typography component=\"span\" variant=\"caption\">{option.email}</Typography>\r\n        </Typography>}\r\n        onChange={user2 => this.setState({ user2 })} />}\r\n\r\n      {err && <div style={{ marginTop: '1rem', color: 'red', fontSize: '.8rem' }}>\r\n        {err.message == 'ExistingEnrollment'\r\n          && <em className=\"exception\">{errTextPrefix} вече са записани.</em>}\r\n        {err.message == 'RequirementsNotMet'\r\n          && <em className=\"exception\">{errTextPrefix} не покрива изискванията на схемата.</em>}\r\n        {err.message == 'UserHasNoInfo'\r\n          && <em className=\"exception\">{errTextPrefix} няма въведена информация за пол и/или дата на раждане.</em>}\r\n\r\n      </div>}\r\n    </React.Fragment>;\r\n\r\n    return (\r\n      <FormModal\r\n        enableFullWidth={true}\r\n        onClose={onClose}\r\n        title={title}\r\n        body={body}\r\n        actions={actions}\r\n        hasError={err}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default SelectTeamModal;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Button from '@material-ui/core/Button';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport SelectTeamModal from './SelectTeamModal';\r\nimport QueryService from '../../services/query.service';\r\nimport { ApplicationMode } from '../../enums';\r\nimport { lighten } from '@material-ui/core/styles/colorManipulator';\r\n\r\nclass EnrollmentsComponent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      openTeamModal: false,\r\n      enrolled: []\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.scheme != this.props.scheme)\r\n      this.getData();\r\n  }\r\n\r\n  getData() {\r\n    const { scheme } = this.props;\r\n\r\n    QueryService\r\n      .get(`/schemes/${scheme.id}/enrollments`)\r\n      .then(e => this.setState({ enrolled: e }));\r\n  }\r\n\r\n  add(team) {\r\n    const { scheme } = this.props;\r\n    return QueryService\r\n      .post(`/schemes/${scheme.id}/enrollments`, {\r\n        teamId: team.id,\r\n        schemeId: scheme.id,\r\n        user1Id: team.user1Id,\r\n        user2Id: team.user2Id\r\n      })\r\n      .then(e => {\r\n        this.setState({ openTeamModal: false });\r\n        this.getData();\r\n      });\r\n  }\r\n\r\n  removeEnrollment(id) {\r\n    const { scheme } = this.props;\r\n\r\n    return QueryService\r\n      .delete(`/schemes/${scheme.id}/enrollments/${id}`)\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  render() {\r\n    const { enrolled, openTeamModal } = this.state;\r\n    const { scheme, classes, mode } = this.props;\r\n    const isAdmin = (mode == ApplicationMode.ADMIN);\r\n\r\n    return (\r\n      <ExpansionPanel style={{ marginTop: '1rem' }} defaultExpanded>\r\n        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n          <Typography variant=\"title\">Играчи</Typography>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails style={{ flexDirection: 'column' }}>\r\n          {openTeamModal && <SelectTeamModal\r\n            scheme={scheme}\r\n            onChange={() => {\r\n              this.setState({ openTeamModal: false });\r\n              this.getData();\r\n            }}\r\n            onClose={() => this.setState({ openTeamModal: false })}\r\n          />}\r\n\r\n          {mode == ApplicationMode.ADMIN\r\n            && <div><Button variant=\"outlined\" color=\"primary\" size=\"small\"\r\n              onClick={() => this.setState({ openTeamModal: true })}\r\n            >\r\n              Добави\r\n            </Button></div>}\r\n\r\n          <Table>\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell padding=\"none\">№</TableCell>\r\n\r\n                <TableCell>Отбор</TableCell>\r\n                <TableCell padding=\"dense\">Точки</TableCell>\r\n                {isAdmin && <TableCell padding=\"none\"></TableCell>}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n\r\n              {enrolled.map((enrollment, index) => {\r\n                let borderClass = classes.default;\r\n                if (index < scheme.seed)\r\n                  borderClass = classes.seed;\r\n                if (index + 1 == scheme.seed)\r\n                  borderClass = classes.seedDivider;\r\n                if (index + 1 == scheme.maxPlayerCount)\r\n                  borderClass = classes.enrolledDivider;\r\n                if (index + 1 > scheme.maxPlayerCount)\r\n                  borderClass = classes.enrolled;\r\n\r\n                return (\r\n                  <React.Fragment key={enrollment.id}>\r\n                    <TableRow className={borderClass}>\r\n                      <TableCell padding=\"none\">{index + 1}</TableCell>\r\n                      <TableCell>\r\n                        <Link to={`/teams/${enrollment.team.user1.id}`} >\r\n                          <Typography variant=\"body2\">{enrollment.team.user1.name}</Typography>\r\n                        </Link>\r\n                        {enrollment.team.user2 &&\r\n                          <Link to={`/teams/${enrollment.team.user2.id}`} >\r\n                            <Typography variant=\"body2\">{enrollment.team.user2.name}</Typography>\r\n                          </Link>}\r\n                      </TableCell>\r\n                      <TableCell padding=\"dense\">\r\n                        {enrollment.team.rankings && enrollment.team.rankings[0]\r\n                          && <Typography variant=\"caption\">{enrollment.team.rankings[0].points}</Typography>}\r\n                        {(!enrollment.team.rankings || !enrollment.team.rankings[0])\r\n                          && <Typography variant=\"caption\">няма</Typography>}\r\n                      </TableCell>\r\n                      {isAdmin && <TableCell padding=\"none\">\r\n                        <Button variant=\"text\" color=\"secondary\" size=\"small\"\r\n                          onClick={() => this.removeEnrollment(enrollment.id)}\r\n                        >\r\n                          <DeleteForeverIcon />\r\n                        </Button>\r\n                      </TableCell>}\r\n                    </TableRow>\r\n                  </React.Fragment>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n    )\r\n  }\r\n}\r\n\r\nconst styles = (theme) => {\r\n  return ({\r\n    root: {\r\n      marginLeft: 0\r\n    },\r\n    seedDivider: {\r\n      backgroundColor: lighten(theme.palette.primary.main, .9),\r\n      borderBottom: `2px solid ${theme.palette.primary.light}`\r\n    },\r\n    enrolledDivider: {\r\n      borderBottom: `2px solid ${theme.palette.secondary.light}`\r\n    },\r\n    seed: {\r\n      backgroundColor: lighten(theme.palette.primary.main, .9)\r\n    },\r\n    enrolled: {\r\n      backgroundColor: lighten(theme.palette.secondary.main, .9),\r\n    }\r\n  });\r\n}\r\n\r\nexport default withStyles(styles)(EnrollmentsComponent);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\nimport { EnumLocalization } from '../enums';\r\n\r\nclass EnumSelect extends React.Component {\r\n  render() {\r\n    const {\r\n      value,\r\n      onChange,\r\n      EnumValues,\r\n      EnumName,\r\n      label,\r\n      required,\r\n      error,\r\n      errorText,\r\n      allowClear\r\n    } = this.props;\r\n\r\n    return (\r\n      <FormControl fullWidth={true} error={error}>\r\n        <InputLabel required={required} shrink={value}>\r\n          {label}\r\n        </InputLabel>\r\n        <Select\r\n          value={value}\r\n          onChange={onChange}\r\n        >\r\n          <MenuItem value={null} disabled={true}>\r\n            <Typography variant=\"display2\">{label}</Typography>\r\n          </MenuItem>\r\n          {allowClear && <MenuItem value=\"\">\r\n            <Typography variant=\"caption\">Няма</Typography>\r\n          </MenuItem>}\r\n          {Object.keys(EnumValues).map((key, i) => {\r\n            return (\r\n              <MenuItem key={i} value={EnumValues[key]}>\r\n                {EnumLocalization[EnumName][EnumValues[key]]}\r\n              </MenuItem>\r\n            );\r\n          })}\r\n        </Select>\r\n        <Typography style={{ color: 'red', fontSize: '.8rem' }}>{errorText}</Typography>\r\n      </FormControl>\r\n    );\r\n  }\r\n}\r\n\r\n// EnumSelect.propTypes = {\r\n//   value: PropTypes.string.isRequired,\r\n//   label: PropTypes.string.isRequired,\r\n//   EnumValues: PropTypes.object.isRequired,\r\n//   EnumName: PropTypes.string.isRequired,\r\n//   onChange: PropTypes.func.isRequired\r\n// };\r\n\r\nexport default EnumSelect;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport * as Enums from '../enums';\r\n\r\nclass EnumSelectToggle extends React.Component {\r\n  render() {\r\n    const { style, enumName, value, onChange, classes } = this.props;\r\n    const values = Enums[enumName];\r\n    const translation = Enums.EnumLocalization[enumName];\r\n\r\n    return (\r\n      <div style={style} className={classes.root}>\r\n        {Object.keys(values).map((key, index) => {\r\n          let btnClass = classes.btn;\r\n          if (index == 0)\r\n            btnClass = classes.leftRounded;\r\n\r\n          return (\r\n            <Button\r\n              className={classes.btn}\r\n              key={key}\r\n              variant={values[key] === value ? 'contained' : 'outlined'}\r\n              color=\"primary\" size=\"small\" onClick={e => {\r\n                e.target.value = values[key];\r\n                return onChange(e);\r\n              }}>\r\n              {translation[values[key]]}\r\n            </Button>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  leftRounded: {\r\n    borderTopLeftRadius: '3px',\r\n    borderBottomLeftRadius: '3px',\r\n    borderTopRightRadius: '0',\r\n    borderBottomRightRadius: '0',\r\n    borderRight: 'none',\r\n    '&:hover': {\r\n      borderRight: 'none'\r\n    }\r\n  },\r\n  rightRounded: {\r\n    borderRadius: '5px',\r\n    borderLeft: 'none'\r\n  },\r\n  btn: {\r\n    borderRadius: '0',\r\n    boxSizing: 'border-box'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(EnumSelectToggle);","import React from 'react';\r\nimport moment from 'moment';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport DatePicker from 'material-ui-pickers/DatePicker';\r\nimport DateTimePicker from 'material-ui-pickers/DateTimePicker';\r\n\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Select from '@material-ui/core/Select';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport EnumSelect from '../components/EnumSelect';\r\nimport EnumSelectToggle from '../components/EnumSelectToggle';\r\nimport QueryService from '../services/query.service';\r\n\r\n\r\nclass SchemeFormModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      model: {\r\n      },\r\n      errors: []\r\n    }\r\n\r\n    this.save = this.save.bind(this);\r\n\r\n    this.handleChange = (prop) => (e) => {\r\n      const model = this.state.model;\r\n      model[prop] = e.target.value;\r\n      this.setState({ model });\r\n    }\r\n\r\n    this.handleCustomChange = (prop) => (value) => {\r\n      const model = this.state.model;\r\n      if (prop === 'singleTeams')\r\n        model.mixedTeams = false;\r\n\r\n      if (prop === 'hasGroupPhase') {\r\n        model.maxPlayerCount = '';\r\n        model.groupCount = '';\r\n        model.teamsPerGroup = '';\r\n      }\r\n\r\n      model[prop] = value;\r\n      this.setState({ model });\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ model: this.props.model });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.model != this.props.model)\r\n      this.setState({ model: this.props.model });\r\n  }\r\n\r\n  save() {\r\n    const model = Object.assign({}, this.state.model, { edition: null });\r\n    return QueryService\r\n      .post(`/schemes/${model.id ? model.id : ''}`, model)\r\n      .then(e => this.props.onChange(e));\r\n  }\r\n\r\n  render() {\r\n    const { model, errors } = this.state;\r\n    const { onClose, classes, fullScreen } = this.props;\r\n\r\n    return (\r\n      <Dialog\r\n        open={true}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        classes={{ paper: classes.root }}\r\n      >\r\n        <DialogTitle>\r\n          <Typography component=\"span\" variant=\"headline\">Форма за промяна/създаване на схема</Typography>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <EnumSelectToggle\r\n            value={model.status}\r\n            enumName=\"Status\"\r\n            onChange={this.handleChange('status')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Име на схемата\"\r\n            value={model.name}\r\n            required\r\n            fullWidth={true}\r\n            onChange={this.handleChange('name')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Допълнителна информация\"\r\n            value={model.info}\r\n            multiline={true}\r\n            fullWidth={true}\r\n            onChange={this.handleChange('info')}\r\n          />\r\n\r\n          <Typography variant=\"headline\" style={{ marginTop: '2rem' }}>Параметри</Typography>\r\n\r\n          <FormControl fullWidth={true} required>\r\n            <InputLabel>Формат</InputLabel>\r\n            <Select\r\n              onChange={e => this.handleCustomChange('singleTeams')(e.target.value)}\r\n              value={model.singleTeams}\r\n            >\r\n              <MenuItem value={true}>Сингъл</MenuItem>\r\n              <MenuItem value={false}>Двойки</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n\r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                color=\"primary\"\r\n                checked={model.maleTeams}\r\n                onChange={e => this.handleCustomChange('maleTeams')(e.target.value === 'true')}\r\n                value={!model.maleTeams + ''}\r\n              />\r\n            }\r\n            label=\"Мъже\"\r\n          />\r\n\r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                color=\"primary\"\r\n                checked={model.femaleTeams}\r\n                onChange={e => this.handleCustomChange('femaleTeams')(e.target.value === 'true')}\r\n                value={!model.femaleTeams + ''} />\r\n            }\r\n            label=\"Жени\"\r\n          />\r\n\r\n          {!model.singleTeams && <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                color=\"primary\"\r\n                checked={model.mixedTeams}\r\n                onChange={e => this.handleCustomChange('mixedTeams')(e.target.value === 'true')}\r\n                value={!model.mixedTeams + ''}\r\n              />\r\n            }\r\n            label=\"Микс\"\r\n          />}\r\n\r\n          <div>\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  color=\"primary\"\r\n                  checked={model.hasGroupPhase}\r\n                  onChange={e => this.handleCustomChange('hasGroupPhase')(e.target.value === 'true')}\r\n                  value={!model.hasGroupPhase + ''}\r\n                />\r\n              }\r\n              label=\"Включване на групова фаза\"\r\n            />\r\n          </div>\r\n\r\n          {!model.hasGroupPhase\r\n            && <TextField\r\n              label=\"Брой играчи\"\r\n              value={model.maxPlayerCount}\r\n              type=\"number\"\r\n              required={true}\r\n              fullWidth={true}\r\n              onChange={this.handleChange('maxPlayerCount')}\r\n            />}\r\n\r\n          {model.hasGroupPhase\r\n            && <TextField\r\n              label=\"Брой групи\"\r\n              value={model.groupCount}\r\n              type=\"number\"\r\n              required={true}\r\n              fullWidth={true}\r\n              onChange={this.handleChange('groupCount')}\r\n            />}\r\n\r\n          {model.hasGroupPhase\r\n            && <TextField\r\n              label=\"Брой играчи в група\"\r\n              value={model.teamsPerGroup}\r\n              type=\"number\"\r\n              required={true}\r\n              fullWidth={true}\r\n              onChange={this.handleChange('teamsPerGroup')}\r\n            />}\r\n\r\n          <TextField\r\n            label=\"Брой поставени играчи\"\r\n            value={model.seed}\r\n            type=\"number\"\r\n            fullWidth={true}\r\n            onChange={this.handleChange('seed')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Възраст От\"\r\n            value={model.ageFrom}\r\n            type=\"number\"\r\n            fullWidth={true}\r\n            onChange={this.handleChange('ageFrom')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Възраст До\"\r\n            value={model.ageTo}\r\n            type=\"number\"\r\n            fullWidth={true}\r\n            onChange={this.handleChange('ageTo')}\r\n          />\r\n\r\n\r\n          <Typography variant=\"headline\" style={{ marginTop: '2rem' }}>Дати</Typography>\r\n\r\n          <DatePicker\r\n            autoOk\r\n            label=\"Дата на схемата\"\r\n            labelFunc={(date) => date ? moment(model.date).format('DD.MM.YYYY') : ''}\r\n            clearable\r\n            required={true}\r\n            fullWidth={true}\r\n            value={model.date}\r\n            onChange={this.handleCustomChange('date')}\r\n          />\r\n\r\n          <DateTimePicker\r\n            label=\"Начало на регистрациите\"\r\n            labelFunc={(date) => date ? moment(model.registrationStart).format('DD.MM.YYYY  HH:mm') : ''}\r\n            clearable\r\n            ampm={false}\r\n            required={true}\r\n            fullWidth={true}\r\n            value={model.registrationStart}\r\n            onChange={this.handleCustomChange('registrationStart')}\r\n          />\r\n\r\n          <DateTimePicker\r\n            label=\"Край на регистрациите\"\r\n            labelFunc={(date) => date ? moment(model.registrationEnd).format('DD.MM.YYYY  HH:mm') : ''}\r\n            clearable\r\n            ampm={false}\r\n            required={true}\r\n            fullWidth={true}\r\n            value={model.registrationEnd}\r\n            onChange={this.handleCustomChange('registrationEnd')}\r\n          />\r\n\r\n\r\n          <Typography variant=\"headline\" style={{ marginTop: '2rem' }}>Точки</Typography>\r\n\r\n          <TextField\r\n            label=\"Точки за участие\"\r\n            value={model.pPoints}\r\n            type=\"number\"\r\n            fullWidth={true}\r\n            onChange={this.handleChange('pPoints')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Точки за победа\"\r\n            value={model.wPoints}\r\n            type=\"number\"\r\n            fullWidth={true}\r\n            onChange={this.handleChange('wPoints')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Точки за шампион\"\r\n            value={model.cPoints}\r\n            type=\"number\"\r\n            fullWidth={true}\r\n            onChange={this.handleChange('cPoints')}\r\n          />\r\n\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.save()}>\r\n            Запис\r\n          </Button>\r\n          <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(SchemeFormModal)\r\n);","import React from 'react';\r\nimport { EnumLocalization } from '../enums';\r\n\r\nclass L10n extends React.Component {\r\n  render() {\r\n    const { children, translate, style } = this.props;\r\n    return <span style={style}>{l10n_text(children, translate)}</span>\r\n  }\r\n}\r\n\r\nexport function l10n_text(value, translate) {\r\n  const l10n = EnumLocalization[translate];\r\n  return l10n[value];\r\n}\r\n\r\nexport default L10n;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport moment from 'moment';\r\nimport ReplyIcon from '@material-ui/icons/Reply';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport { l10n_text } from '../../components/L10n';\r\nclass SchemeDetails extends React.Component {\r\n  render() {\r\n    const { scheme, enableEditionLink } = this.props;\r\n\r\n    return (\r\n      <Card {...this.props.CardProps}>\r\n        <CardContent>\r\n          <Typography variant=\"headline\">{scheme.name}</Typography>\r\n          <Typography variant=\"caption\">{scheme.info}</Typography>\r\n\r\n          {enableEditionLink && <Typography variant=\"caption\" style={{ marginTop: '.5rem' }}>\r\n            Турнир\r\n            <Link to={`/editions/${scheme.editionId}`}>\r\n              <Typography variant=\"body2\">\r\n                <ReplyIcon style={{ fontSize: '14px' }} />\r\n                {scheme.edition.name}\r\n              </Typography>\r\n            </Link>\r\n          </Typography>}\r\n\r\n          <div style={{ display: 'flex', flexWrap: 'wrap', margin: '.5rem 0' }}>\r\n            <Typography\r\n              variant=\"caption\"\r\n              style={{ paddingRight: '1rem' }}\r\n            >\r\n              Регистрация от\r\n              <Typography>\r\n                {moment(scheme.registrationStart).format('DD.MM.YYYY / HH:mm')}\r\n              </Typography>\r\n            </Typography>\r\n            <Typography\r\n              variant=\"caption\"\r\n              style={{ paddingRight: '1rem' }}\r\n            >\r\n              Регистрация до\r\n              <Typography>\r\n                {moment(scheme.registrationEnd).format('DD.MM.YYYY / HH:mm')}\r\n              </Typography>\r\n            </Typography>\r\n          </div>\r\n\r\n          <Typography variant=\"caption\">\r\n            Описание\r\n            <Typography>\r\n              {getSchemeTraits(scheme)}\r\n            </Typography>\r\n          </Typography>\r\n\r\n          <Typography variant=\"caption\" style={{ margin: '.5rem 0' }}>\r\n            Статус на схемата\r\n            <Typography>\r\n              {l10n_text(scheme.bracketStatus, \"BracketStatus\")}\r\n            </Typography>\r\n          </Typography>\r\n        </CardContent>\r\n        <CardActions disableActionSpacing={true}>\r\n          {this.props.actions}\r\n        </CardActions>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\nfunction getSchemeTraits(scheme) {\r\n  const traits = [];\r\n  if (scheme.hasGroupPhase)\r\n    traits.push('Групова фаза, елиминации');\r\n  else\r\n    traits.push('Елиминации');\r\n\r\n  if (scheme.singleTeams)\r\n    traits.push('сингъл');\r\n  else\r\n    traits.push('двойки');\r\n\r\n  if (scheme.maleTeams)\r\n    traits.push('мъже');\r\n\r\n  if (scheme.femaleTeams)\r\n    traits.push('жени');\r\n\r\n  if (scheme.mixedTeams)\r\n    traits.push('микс');\r\n\r\n  if (scheme.ageFrom || scheme.ageTo) {\r\n    const ageTrait = [];\r\n    if (scheme.ageFrom)\r\n      ageTrait.push(`от ${scheme.ageFrom}`);\r\n\r\n    if (scheme.ageTo)\r\n      ageTrait.push(`до ${scheme.ageTo}`);\r\n\r\n    ageTrait.push('години');\r\n    traits.push(ageTrait.join(' '));\r\n  }\r\n\r\n  return traits.join(', ');\r\n}\r\n\r\nexport default SchemeDetails;","import React from 'react';\r\nimport FormModal from './FormModal';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nclass MessageModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: false\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.activation != this.props.activation && this.props.activation)\r\n      this.show();\r\n  }\r\n\r\n  show() {\r\n    let duration = this.props.duration || 60;\r\n    this.setState({ open: true });\r\n    setTimeout(() => this.setState({ open: false }), duration * 1000);\r\n  }\r\n\r\n  render() {\r\n    const { open } = this.state;\r\n\r\n    const closeBtn = <Button\r\n      variant=\"outlined\"\r\n      onClick={() => this.setState({ open: false })}\r\n    >\r\n      Добре\r\n    </Button>;\r\n\r\n    if (open)\r\n      return <FormModal\r\n        title={null}\r\n        body={this.props.children}\r\n        actions={closeBtn}\r\n        onClose={() => this.setState({ open: false })}\r\n      />;\r\n    else\r\n      return null;\r\n  }\r\n}\r\n\r\nexport default MessageModal;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\n\r\nimport MessageModal from '../components/MessageModal';\r\nimport UserService from '../services/user.service';\r\nimport QueryService from '../services/query.service';\r\n\r\nclass InvitationsComponent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      userId: null,\r\n      page: 0,\r\n      rowsPerPage: 10,\r\n      // Handle errors: ExistingEnrollment, RequirementsNotMet, UserHasNoInfo\r\n      err: null\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setUserId();\r\n  }\r\n\r\n  setUserId() {\r\n    UserService.getAuthenticatedUser()\r\n      .then(user => {\r\n        if (user)\r\n          this.setState({ userId: user.id });\r\n        else\r\n          this.setState({ userId: null });\r\n      });\r\n  }\r\n\r\n  accept(invitation) {\r\n    this.setState({ err: null });\r\n    QueryService\r\n      .post(`/invitations/${invitation.id}`)\r\n      .then(() => this.props.onChange())\r\n      .catch(err => this.setState({ err }));\r\n  }\r\n\r\n  cancel(invitation) {\r\n    QueryService\r\n      .delete(`/invitations/${invitation.id}`)\r\n      .then(() => this.props.onChange())\r\n      .catch(() => null);\r\n  }\r\n\r\n  render() {\r\n    const { page, rowsPerPage, userId, err } = this.state;\r\n    const { invitations } = this.props;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <MessageModal activation={this.state.err}>\r\n          <Typography variant=\"subheading\" color=\"secondary\">Възникна грешка при приемане на поканата.</Typography>\r\n          {err && err.message == 'ExistingEnrollment' && <React.Fragment>\r\n            <Typography>Някой от играчите вече е записан за този турнир.</Typography>\r\n          </React.Fragment>}\r\n          {err && err.message == 'RequirementsNotMet' && <React.Fragment>\r\n            <Typography>Някой от играчите не покрива следните ограничения на турнира:</Typography>\r\n            <Typography variant=\"caption\">{err.errors.map(e => e == 'gender' ? 'пол' : 'възраст').join(', ')}</Typography>\r\n          </React.Fragment>}\r\n          {err && err.message == 'UserHasNoInfo' && <React.Fragment>\r\n            <Typography>Някой от играчите няма въведена информация за пол и/или дата на раждане, които са нужни за записване.</Typography>\r\n          </React.Fragment>}\r\n        </MessageModal>\r\n        {invitations.length == 0 && <Typography variant=\"caption\">Нямате текущи покани</Typography>}\r\n        <List>\r\n          {invitations.slice(page * rowsPerPage, (page + 1) * rowsPerPage).map(inv => {\r\n            return (\r\n              <ListItem key={inv.id} style={{ display: 'flex', justifyContent: 'space-between', borderBottom: '1px solid #f3f3f3' }}>\r\n                {userId == inv.inviterId &&\r\n                  <Typography>{inv.invited.name}</Typography>}\r\n                {userId == inv.invitedId &&\r\n                  <Typography>{inv.inviter.name}</Typography>}\r\n\r\n                <div>\r\n                  <Link to={`/editions/${inv.scheme.editionId}`}>\r\n                    <Typography variant=\"body2\">\r\n                      {inv.scheme.edition.name}\r\n                    </Typography>\r\n                  </Link>\r\n                  <Link to={`/schemes/${inv.scheme.id}`}>\r\n                    <Typography variant=\"body2\">\r\n                      {inv.scheme.name}\r\n                    </Typography>\r\n                  </Link>\r\n                </div>\r\n                {userId == inv.inviterId\r\n                  && <Button\r\n                    variant=\"outlined\"\r\n                    color=\"secondary\"\r\n                    size=\"small\"\r\n                    onClick={() => this.cancel(inv)}\r\n                  >\r\n                    Отказване\r\n                  </Button>}\r\n                {userId == inv.invitedId\r\n                  && <Button\r\n                    variant=\"outlined\"\r\n                    color=\"primary\"\r\n                    size=\"small\"\r\n                    onClick={() => this.accept(inv)}\r\n                  >\r\n                    Приемане\r\n                  </Button>}\r\n              </ListItem>\r\n            );\r\n          })}\r\n        </List>\r\n        {invitations.length > 0 && <TablePagination\r\n          component=\"div\"\r\n          count={invitations.length}\r\n          rowsPerPage={rowsPerPage}\r\n          rowsPerPageOptions={[5, 10, 25]}\r\n          labelRowsPerPage=\"Покажи:\"\r\n          labelDisplayedRows={({ from, to, count }) => `${from}-${to} от ${count}`}\r\n          page={page}\r\n          onChangePage={(e, page) => this.setState({ page })}\r\n          onChangeRowsPerPage={e => this.setState({ rowsPerPage: e.target.value, page: 0 })}\r\n        />}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default InvitationsComponent","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport AsyncSelect from '../../components/select/AsyncSelect';\r\nimport QueryService from '../../services/query.service';\r\nimport FormModal from '../../components/FormModal';\r\nimport InvitationsComponent from '../../users/InvitationsComponent';\r\n\r\nclass InvitationsModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      invitations: [],\r\n      selectedUser: null\r\n    }\r\n\r\n    this.handleChange = (user) => {\r\n      this.setState({ selectedUser: user });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    QueryService\r\n      .get('/invitations')\r\n      .then(invitations => this.setState({ invitations }));\r\n  }\r\n\r\n  invite() {\r\n    if (!this.state.selectedUser)\r\n      return;\r\n\r\n    QueryService\r\n      .post('/invitations', {\r\n        invitedId: this.state.selectedUser.id,\r\n        schemeId: this.props.scheme.id\r\n      })\r\n      .then(() => this.getData())\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  render() {\r\n    const { selectedUser } = this.state;\r\n    const { onClose, scheme } = this.props;\r\n    const title = `Менажиране на поканите за схема ${scheme.name}`;\r\n    const actions = <Button variant=\"outlined\" color=\"primary\" onClick={onClose} size=\"small\">Затвори</Button>\r\n    const body = <React.Fragment>\r\n      {/* <Typography variant=\"caption\">\r\n        Ще бъдете записани за турнира, когато поканеният играч приеме.\r\n        В падащото меню за избор на играч се показват само играчи,\r\n        които могат да приемат поканата Ви (това означава, че отговарят на\r\n        изискванията на турнира и не са записани).\r\n      </Typography> */}\r\n      <div style={{ margin: '0 0 1rem 0', display: 'flex', justifyContent: 'space-between', alignItems: 'flex-end' }}>\r\n        <AsyncSelect\r\n          label=\"Играч\"\r\n          value={selectedUser}\r\n          query=\"invitable\"\r\n          filter={{\r\n            schemeId: scheme.id\r\n          }}\r\n          noOptionsMessage={() => 'Няма намерени играчи, отговарящи на изискванията'}\r\n          formatOptionLabel={(option) => <Typography component=\"span\">\r\n            {option.name}\r\n          </Typography>}\r\n          onChange={this.handleChange}\r\n        />\r\n\r\n        <Button variant=\"contained\" color=\"primary\" size=\"small\" style={{ marginLeft: '1rem' }} disabled={!selectedUser} onClick={() => this.invite()}>Покани</Button>\r\n      </div>\r\n\r\n      <InvitationsComponent invitations={this.state.invitations} onChange={() => this.getData()} />\r\n    </React.Fragment>\r\n\r\n    return (\r\n      <FormModal\r\n        enableFullWidth={true}\r\n        onClose={onClose}\r\n        title={title}\r\n        body={body}\r\n        actions={actions}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default InvitationsModal;","import React from 'react';\r\nimport moment from 'moment-timezone';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Link } from 'react-router-dom';\r\nimport Button from '@material-ui/core/Button';\r\nimport { BracketStatus, ApplicationMode } from '../../enums';\r\n\r\nimport MessageModal from '../../components/MessageModal';\r\nimport { dispatchEvent } from '../../services/events.service';\r\nimport ConfirmationDialog from '../../components/ConfirmationDialog';\r\nimport QueryService from '../../services/query.service';\r\nimport InvitationsModal from './InvitationsModal';\r\n\r\nclass SchemeDetailsActions extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      hasEnrolled: false,\r\n      hasCancelledEnrollment: false,\r\n      invitationsModal: false,\r\n      error: null,\r\n      hasEnrollmentError: false\r\n    }\r\n  }\r\n\r\n  enroll() {\r\n    this.setState({\r\n      hasEnrolled: false,\r\n      hasEnrollmentError: false\r\n    });\r\n\r\n    if (this.props.mode == ApplicationMode.GUEST)\r\n      dispatchEvent('menu-login');\r\n    else {\r\n      return QueryService\r\n        .get(`/schemes/${this.props.scheme.id}/enrollments/enroll`)\r\n        .then(e => {\r\n          this.setState({ hasEnrolled: true });\r\n          this.props.reload();\r\n        })\r\n        .catch(() => this.setState({ hasEnrollmentError: true }));\r\n    }\r\n  }\r\n\r\n  cancelEnroll() {\r\n    return QueryService\r\n      .delete(`/schemes/${this.props.scheme.id}/enrollments/${this.props.enrollment.id}/cancelEnroll`)\r\n      .then(e => {\r\n        this.setState({ hasCancelledEnrollment: true });\r\n        this.props.reload();\r\n      });\r\n  }\r\n\r\n  registrationOpen() {\r\n    return moment().isBetween(moment(this.props.scheme.registrationStart), moment(this.props.scheme.registrationEnd));\r\n  }\r\n\r\n  render() {\r\n    const { scheme, enableViewLink, enrollment } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <MessageModal activation={this.state.hasEnrolled}>\r\n          <Typography>Записване за турнир {this.props.scheme.name} беше успешно.</Typography>\r\n        </MessageModal>\r\n        <MessageModal activation={this.state.hasEnrollmentError}>\r\n          <Typography>Неуспешно записване за турнир {this.props.scheme.name}.\r\n          Не отговаряте на изискванията за пол и/или възраст за тази схема.\r\n          Моля ако не сте въвели тези данни в профила си, да ги въведете, защото те са задължителни за участие в турнирите.\r\n          </Typography>\r\n        </MessageModal>\r\n        <MessageModal activation={this.state.hasCancelledEnrollment}>\r\n          <Typography>Отписването от турнир {this.props.scheme.name} беше успешно.</Typography>\r\n        </MessageModal>\r\n        <MessageModal activation={this.state.error}>\r\n          <Typography variant=\"subheading\">Възникна грешка при записване за турнир {this.props.scheme.name}!</Typography>\r\n          <Typography>{this.state.error}</Typography>\r\n        </MessageModal>\r\n        {this.state.invitationsModal\r\n          && <InvitationsModal\r\n            onChange={() => {\r\n              this.props.reload();\r\n              this.setState({ invitationsModal: false });\r\n            }}\r\n            onClose={() => this.setState({ invitationsModal: false })}\r\n            scheme={this.props.scheme}\r\n          />}\r\n        {enableViewLink &&\r\n          <Link to={`/schemes/${scheme.id}`}>\r\n            <Button color=\"primary\">Преглед</Button>\r\n          </Link>}\r\n        {(scheme.bracketStatus == BracketStatus.GROUPS_DRAWN || scheme.bracketStatus == BracketStatus.GROUPS_END)\r\n          && <Link to={`/schemes/${scheme.id}/groups`}>\r\n            <Button color=\"primary\">Групи</Button>\r\n          </Link>}\r\n        {(scheme.bracketStatus == BracketStatus.ELIMINATION_DRAWN || scheme.bracketStatus == BracketStatus.ELIMINATION_END)\r\n          && <React.Fragment>\r\n            <Link to={`/schemes/${scheme.id}/elimination`}>\r\n              <Button color=\"primary\">Схема</Button>\r\n            </Link>\r\n            {scheme.hasGroupPhase\r\n              && <Link to={`/schemes/${scheme.id}/groups`}>\r\n                <Button color=\"primary\">Групи</Button>\r\n              </Link>}\r\n          </React.Fragment>}\r\n        {scheme.bracketStatus == BracketStatus.UNDRAWN\r\n          && <React.Fragment>\r\n            {!enrollment && this.registrationOpen()\r\n              && <React.Fragment>\r\n                {scheme.singleTeams && <Button color=\"primary\" onClick={() => this.enroll()}>Записване</Button>}\r\n                {!scheme.singleTeams && <Button color=\"primary\" onClick={() => this.setState({ invitationsModal: true })}>Записване</Button>}\r\n              </React.Fragment>}\r\n            {enrollment && <ConfirmationDialog\r\n              title=\"Отписване от турнир\"\r\n              body={<Typography>\r\n                Сигурни ли сте че искате да се отпишете от турнир {this.props.scheme.name}?\r\n                <Typography variant=\"caption\">Ако сте в отбор, то и другият играч ще бъде отписан.</Typography>\r\n              </Typography>}\r\n              onAccept={() => this.cancelEnroll()}\r\n            >\r\n              <Button color=\"secondary\">Отписване</Button>\r\n            </ConfirmationDialog>}\r\n          </React.Fragment>}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SchemeDetailsActions;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport List from '@material-ui/core/List';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport FormModal from '../../components/FormModal';\r\nimport QueryService from '../../services/query.service';\r\n\r\nclass ScoresModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      scores: []\r\n    }\r\n\r\n    this.handleChange = (index) => (e) => {\r\n      const scores = this.state.scores;\r\n      scores[index].score = parseInt(e.target.value);\r\n      this.setState({ scores });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ scores: this.props.scores });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.scores != this.props.scores)\r\n      this.setState({ scores: this.props.scores });\r\n  }\r\n\r\n  save() {\r\n    return QueryService\r\n      .post(`/schemes/${this.props.scheme.id}/scores/save`, this.props.scores)\r\n      .then(() => this.props.onChange())\r\n  }\r\n\r\n  render() {\r\n    const { scores } = this.state;\r\n    const { onClose, onChange, scheme } = this.props;\r\n    const title = `Разпределение на точките за схема ${scheme.name}`;\r\n\r\n    const actions = <React.Fragment>\r\n      <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.save()}>Запис</Button>\r\n      <Button variant=\"outlined\" color=\"primary\" size=\"small\" onClick={onClose}>Отказ</Button>\r\n    </React.Fragment>\r\n\r\n    const body = <List style={{ width: '100%' }}>\r\n      {scores.map(({ team, score }, index) => {\r\n        return (\r\n          <div style={{ display: 'flex', padding: '.5rem 0', borderBottom: '1px solid lightgrey', justifyContent: 'space-between', alignItems: 'center' }} key={index}>\r\n            <div>\r\n              {team.user1 && <Typography>{team.user1.name}</Typography>}\r\n              {team.user2 && <Typography>{team.user2.name}</Typography>}\r\n            </div>\r\n            <input value={score} type=\"number\" style={{ maxWidth: '3em' }} onChange={this.handleChange(index)} />\r\n          </div>\r\n        );\r\n      })}\r\n    </List>\r\n\r\n    return (\r\n      <FormModal\r\n        enableFullWidth={true}\r\n        onClose={onClose}\r\n        title={title}\r\n        body={body}\r\n        actions={actions}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default ScoresModal;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ConfirmationDialog from '../components/ConfirmationDialog';\r\nimport UserService from '../services/user.service';\r\nimport QueryService from '../services/query.service';\r\nimport EnrollmentsComponent from './components/Enrollments';\r\nimport SchemeFormModal from './SchemeFormModal';\r\nimport SchemeDetails from './components/SchemeDetails';\r\nimport SchemeDetailsActions from './components/SchemeDetailsActions';\r\nimport { BracketStatus, ApplicationMode } from '../enums';\r\nimport { catchEvent } from '../services/events.service';\r\nimport MessageModal from '../components/MessageModal';\r\nimport ScoresModal from './components/ScoresModal';\r\n\r\nclass SchemeView extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      scheme: {\r\n        edition: {}\r\n      },\r\n      schemeModel: null,\r\n      enrolled: [],\r\n      hasError: false,\r\n      scores: null\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n    catchEvent('logged-in', () => {\r\n      this.getData();\r\n    })\r\n  }\r\n\r\n  getData() {\r\n    const { id } = this.props.match.params;\r\n\r\n    QueryService\r\n      .get(`/schemes/${id}`)\r\n      .then(e => this.setState({ scheme: e }));\r\n\r\n    QueryService\r\n      .get('/users/enrollments')\r\n      .then(enrolled => this.setState({ enrolled }));\r\n  }\r\n\r\n  deleteScheme() {\r\n    this.setState({ hasError: false });\r\n    return QueryService.delete(`/schemes/${this.state.scheme.id}`)\r\n      .then(e => this.props.history.replace(`/editions/${this.state.scheme.edition.id}`))\r\n      .catch(err => this.setState({ hasError: true }));\r\n  }\r\n\r\n  drawBracket() {\r\n    return QueryService.get(`/schemes/${this.state.scheme.id}/drawBracket`)\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  getScores() {\r\n    return QueryService.get(`/schemes/${this.state.scheme.id}/scores`)\r\n      .then(scores => this.setState({ scores }));\r\n  }\r\n\r\n  render() {\r\n    const { scheme, schemeModel, enrolled, scores } = this.state;\r\n\r\n    return (\r\n      <UserService.WithApplicationMode>\r\n        {mode => (\r\n          <div className=\"container\">\r\n            <MessageModal activation={this.state.hasError}>\r\n              <Typography>Неуспешно изтриване на схема. Възможна причина за грешката е съществуващи записи на играчи.</Typography>\r\n            </MessageModal>\r\n            {schemeModel\r\n              && <SchemeFormModal\r\n                model={schemeModel}\r\n                onChange={() => {\r\n                  this.setState({ schemeModel: null });\r\n                  this.getData();\r\n                }}\r\n                onClose={() => this.setState({ schemeModel: null })}\r\n              />}\r\n            {scores && scores.length > 0\r\n              && <ScoresModal\r\n                scores={scores}\r\n                scheme={scheme}\r\n                onChange={() => {\r\n                  this.setState({ scores: null });\r\n                  this.getData();\r\n                }}\r\n                onClose={() => this.setState({ scores: null })}\r\n              />}\r\n\r\n            {mode == ApplicationMode.ADMIN &&\r\n              <div style={{ margin: '.5rem 0' }}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  size=\"small\"\r\n                  onClick={() => this.setState({ schemeModel: scheme })}\r\n                >\r\n                  Промяна\r\n                </Button>\r\n                {scheme.bracketStatus != BracketStatus.ELIMINATION_END\r\n                  && <ConfirmationDialog\r\n                    title=\"Изтегляне/приключване на текуща фаза\"\r\n                    body={<Typography>Сигурни ли сте че искате да извършите действието?</Typography>}\r\n                    onAccept={() => this.drawBracket()}\r\n                    style={{ marginTop: '.5rem' }}\r\n                  >\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                      size=\"small\"\r\n                      style={{ marginLeft: '.3rem' }}\r\n                    >\r\n                      {scheme.bracketStatus == BracketStatus.UNDRAWN\r\n                        && <span>Изтегляне</span>}\r\n                      {(scheme.bracketStatus == BracketStatus.GROUPS_DRAWN || scheme.bracketStatus == BracketStatus.ELIMINATION_DRAWN)\r\n                        && <span>Приключване на фаза</span>}\r\n                      {scheme.bracketStatus == BracketStatus.GROUPS_END\r\n                        && <span>Следваща фаза</span>}\r\n                    </Button>\r\n                  </ConfirmationDialog>}\r\n\r\n                {scheme.bracketStatus == BracketStatus.ELIMINATION_END\r\n                  && <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    size=\"small\"\r\n                    style={{ marginLeft: '.3rem' }}\r\n                    onClick={() => this.getScores()}\r\n                  >\r\n                    Резултати\r\n                </Button>}\r\n\r\n                {scheme.bracketStatus == BracketStatus.UNDRAWN\r\n                  && <ConfirmationDialog\r\n                    title=\"Изтриване на турнир\"\r\n                    body={<Typography>Сигурни ли сте че искате да изтриете схема {scheme.name}?</Typography>}\r\n                    onAccept={() => this.deleteScheme()}\r\n                  >\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      color=\"secondary\"\r\n                      size=\"small\"\r\n                      style={{ marginLeft: '.3rem' }}\r\n                    >\r\n                      Изтриване\r\n                  </Button>\r\n                  </ConfirmationDialog>}\r\n\r\n              </div>}\r\n\r\n            <SchemeDetails\r\n              scheme={scheme}\r\n              actions={\r\n                <SchemeDetailsActions mode={mode} scheme={scheme} reload={() => this.getData()} enrollment={enrolled[scheme.id]} />\r\n              }\r\n              enableEditionLink\r\n            />\r\n            <EnrollmentsComponent scheme={scheme} style={{ marginTop: '1rem' }} mode={mode} />\r\n          </div>\r\n        )}\r\n      </UserService.WithApplicationMode>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SchemeView;","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport SchemeView from './SchemeView';\r\n\r\nclass SchemesRoot extends React.Component {\r\n  render() {\r\n    return (\r\n      <Switch>\r\n        <Route\r\n          path=\"/schemes/:id\"\r\n          render={(props) => <SchemeView {...props} />}\r\n        />\r\n      </Switch>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SchemesRoot;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport AsyncSelect from '../../components/select/AsyncSelect';\r\nimport QueryService from '../../services/query.service';\r\n\r\nclass EditGroupModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      model: {\r\n        teams: []\r\n      },\r\n      errors: []\r\n    };\r\n\r\n    this.setTeam = (index) => (value) => {\r\n      const model = this.state.model;\r\n      model.teams[index].team = value;\r\n      model.teams[index].teamId = (value || { id: null }).id;\r\n      this.setState({ model });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ model: this.props.model });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.model != this.props.model)\r\n      this.setState({ model: this.props.model });\r\n  }\r\n\r\n  addTeam() {\r\n    const model = this.state.model;\r\n    model.teams.push({\r\n      groupId: model.id,\r\n      team: null,\r\n      teamId: null,\r\n      order: model.teams.length + 1\r\n    });\r\n    this.setState({ model });\r\n  }\r\n\r\n  removeTeam(index) {\r\n    const model = this.state.model;\r\n    model.teams.splice(index, 1);\r\n    this.setState({ model });\r\n  }\r\n\r\n  save() {\r\n    const model = this.state.model;\r\n    if (model.id)\r\n      return QueryService\r\n        .post(`/schemes/${model.schemeId}/groups/${model.id}`, model)\r\n        .then(e => this.props.onChange())\r\n        .catch(errors => this.setState({ errors }));\r\n    else\r\n      return QueryService\r\n        .post(`/schemes/${model.schemeId}/groups`, model)\r\n        .then(e => this.props.onChange())\r\n        .catch(errors => this.setState({ errors }));\r\n  }\r\n\r\n  render() {\r\n    const { model, errors } = this.state;\r\n    const { onClose, classes, fullScreen, scheme } = this.props;\r\n\r\n    return (\r\n      <Dialog\r\n        open={true}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        classes={{ paper: classes.root }}\r\n      >\r\n        <DialogTitle>\r\n          <Typography component=\"span\" variant=\"headline\">Създаване/промяна на група {getGroupHeader(model.group)}</Typography>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Typography variant=\"caption\">Отбори</Typography>\r\n          {model.teams.map((groupTeam, index) => {\r\n            return (\r\n              <div key={groupTeam.id} style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <Typography style={{ marginRight: '1rem' }}>{groupTeam.order}</Typography>\r\n                <AsyncSelect\r\n                  value={groupTeam.team}\r\n                  query=\"teams\"\r\n                  disableClear\r\n                  filter={{\r\n                    singleTeams: scheme.singleTeams,\r\n                    schemeId: scheme.id\r\n                  }}\r\n                  noOptionsMessage={() => 'Няма намерени играчи/отбори'}\r\n                  formatOptionLabel={(option) => {\r\n                    return (\r\n                      <React.Fragment>\r\n                        <Typography component=\"span\">{option.user1.name}</Typography>\r\n                        {!scheme.singleTeams && <Typography component=\"span\">{option.user2.name}</Typography>}\r\n                      </React.Fragment>\r\n                    );\r\n                  }}\r\n                  onChange={this.setTeam(index)}\r\n                />\r\n                <IconButton color=\"secondary\" onClick={() => this.removeTeam(index)}>\r\n                  <DeleteForeverIcon />\r\n                </IconButton>\r\n              </div>\r\n            );\r\n          })}\r\n          <Button style={{ marginTop: '1rem' }} variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.addTeam()}>Добави</Button>\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.save()}>\r\n            Запис\r\n          </Button>\r\n          <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nfunction getGroupHeader(groupOrder) {\r\n  if (groupOrder == null || groupOrder == undefined)\r\n    return null;\r\n  return String.fromCharCode(\"А\".charCodeAt(0) + groupOrder);\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(EditGroupModal)\r\n);","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport AsyncSelect from '../../components/select/AsyncSelect';\r\n\r\nclass MatchFormModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      model: {\r\n        sets: []\r\n      },\r\n      errors: []\r\n    }\r\n\r\n    this.handleChange = (prop) => (event) => {\r\n      let model = this.state.model;\r\n      model[prop] = event.target.value;\r\n      this.setState({ model });\r\n    }\r\n\r\n    this.handleCustomChange = (prop) => (value) => {\r\n      const model = this.state.model;\r\n\r\n      if (prop === 'team1') {\r\n        model.team1 = value;\r\n        model.team1Id = (value || { id: null }).id\r\n      }\r\n\r\n      if (prop === 'team2') {\r\n        model.team2 = value;\r\n        model.team2Id = (value || { id: null }).id\r\n      }\r\n\r\n      if (prop === 'withdraw') {\r\n        if (value == model.team1)\r\n          model.withdraw = 1;\r\n        else if (value == model.team2)\r\n          model.withdraw = 2;\r\n        else model.withdraw = null;\r\n      }\r\n\r\n      this.setState({ model });\r\n    }\r\n\r\n    this.handleSetsChange = (index, prop) => (event) => {\r\n      const model = this.state.model;\r\n      model.sets[index][prop] = event.target.value;\r\n      this.setState({ model });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ model: this.formatSets(this.props.model) });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.model != this.props.model)\r\n      this.setState({ model: this.formatSets(this.props.model) });\r\n  }\r\n\r\n  formatSets(match) {\r\n    match.sets = [1, 2, 3, 4, 5].map(order => {\r\n      let existingSet = match.sets.find(set => set.order == order);\r\n      if (existingSet && existingSet.tiebreaker) {\r\n        existingSet.team1 = existingSet.team1 < existingSet.team2 ?\r\n          `${existingSet.team1}(${existingSet.tiebreaker})` : existingSet.team1;\r\n        existingSet.team2 = existingSet.team2 < existingSet.team1 ?\r\n          `${existingSet.team2}(${existingSet.tiebreaker})` : existingSet.team2;\r\n      }\r\n      return existingSet || { order, matchId: match.id || null };\r\n    });\r\n    return match;\r\n  }\r\n\r\n  save() {\r\n    const model = this.state.model;\r\n    if (model.id)\r\n      return QueryService\r\n        .post(`/schemes/${model.schemeId}/matches/${model.id}`, model)\r\n        .then(e => this.props.onChange(e));\r\n    else\r\n      return QueryService\r\n        .post(`/schemes/${model.schemeId}/matches`, model)\r\n        .then(e => this.props.onChange(e));\r\n  }\r\n\r\n  render() {\r\n    const { model, errors } = this.state;\r\n    const { onClose, classes, fullScreen, doubles } = this.props;\r\n\r\n    const enableTeamChange = model.round == 1 || model.groupId;\r\n    const label = (doubles ? 'Отбор ' : 'Играч ');\r\n\r\n    return (\r\n      <Dialog\r\n        open={true}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        classes={{ paper: classes.root }}\r\n      >\r\n        <DialogTitle>\r\n          <Typography component=\"span\" variant=\"headline\">\r\n            Въвеждане/промяна на мач {model.match} рунд {model.round}\r\n          </Typography>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          {enableTeamChange && <React.Fragment>\r\n            <AsyncSelect\r\n              label={label + 1}\r\n              value={model.team1}\r\n              query=\"teams\"\r\n              filter={{\r\n                singleTeams: !doubles,\r\n                schemeId: model.schemeId,\r\n                groupId: model.groupId\r\n              }}\r\n              noOptionsMessage={() => 'Няма намерени играчи/отбори'}\r\n              formatOptionLabel={(option) => {\r\n                return (\r\n                  <React.Fragment>\r\n                    <Typography component=\"span\">{option.user1.name}</Typography>\r\n                    {doubles && <Typography component=\"span\">{option.user2.name}</Typography>}\r\n                  </React.Fragment>\r\n                );\r\n              }}\r\n              onChange={this.handleCustomChange('team1')}\r\n            />\r\n\r\n            <AsyncSelect\r\n              label={label + 2}\r\n              value={model.team2}\r\n              query=\"teams\"\r\n              filter={{\r\n                singleTeams: !doubles,\r\n                schemeId: model.schemeId,\r\n                groupId: model.groupId\r\n              }}\r\n              noOptionsMessage={() => 'Няма намерени отбори'}\r\n              formatOptionLabel={(option) => {\r\n                return (\r\n                  <React.Fragment>\r\n                    <Typography component=\"span\">{option.user1.name}</Typography>\r\n                    {doubles && <Typography component=\"span\">{option.user2.name}</Typography>}\r\n                  </React.Fragment>\r\n                );\r\n              }}\r\n              onChange={this.handleCustomChange('team2')}\r\n            />\r\n          </React.Fragment>}\r\n\r\n          {!enableTeamChange &&\r\n            <React.Fragment><Typography>\r\n              <Typography variant=\"caption\">{label + 1}</Typography>\r\n              {model.team1 ? model.team1.user1.name : 'BYE'}\r\n              {doubles && model.team1 && <Typography>{model.team1.user2.name}</Typography>}\r\n            </Typography>\r\n\r\n              <Typography>\r\n                <Typography variant=\"caption\">{label + 2}</Typography>\r\n                {model.team2 ? model.team2.user1.name : 'BYE'}\r\n                {doubles && model.team2 && <Typography>{model.team2.user2.name}</Typography>}\r\n              </Typography>\r\n            </React.Fragment>}\r\n\r\n          {model.team1 && model.team2 &&\r\n            <FormControl style={{ width: '300px' }}>\r\n              <InputLabel shrink>Отказал се</InputLabel>\r\n              <Select\r\n                onChange={this.handleChange('withdraw')}\r\n                value={model.withdraw}\r\n              >\r\n                <MenuItem value={null}>Няма</MenuItem>\r\n                <MenuItem value={1}>\r\n                  <Typography>{model.team1.user1.name} </Typography>\r\n                  {doubles && <Typography>{model.team1.user2.name} </Typography>}\r\n                </MenuItem>\r\n                <MenuItem value={2}>\r\n                  <Typography>{model.team2.user1.name} </Typography>\r\n                  {doubles && <Typography>{model.team2.user2.name} </Typography>}\r\n                </MenuItem>\r\n              </Select>\r\n            </FormControl>}\r\n\r\n          <Table>\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell padding=\"dense\">Сет №</TableCell>\r\n                <TableCell padding=\"none\">{label + 1}</TableCell>\r\n                <TableCell padding=\"none\">{label + 2}</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {model.sets.map((set, index) => {\r\n                return (\r\n                  <TableRow key={set.order}>\r\n                    <TableCell padding=\"dense\">{set.order}</TableCell>\r\n                    <TableCell padding=\"none\">\r\n                      <input value={set.team1} type=\"text\" style={{ maxWidth: '40px' }} onChange={this.handleSetsChange(index, 'team1')} />\r\n                    </TableCell>\r\n                    <TableCell padding=\"none\">\r\n                      <input value={set.team2} type=\"text\" style={{ maxWidth: '40px' }} onChange={this.handleSetsChange(index, 'team2')} />\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.save()}>\r\n            Запис\r\n          </Button>\r\n          <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(MatchFormModal)\r\n);","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Button from '@material-ui/core/Button';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\n\r\nimport './styles.scss';\r\nimport { ApplicationMode } from '../../enums';\r\nimport UserService from '../../services/user.service';\r\nimport QueryService from '../../services/query.service';\r\nimport ConfirmationDialog from '../../components/ConfirmationDialog';\r\nimport EditGroupModal from './EditGroupModal';\r\nimport EditMatchModal from '../components/MatchFormModal';\r\nimport { BracketStatus } from '../../enums';\r\n\r\nclass GroupsBracket extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      groups: [],\r\n      scheme: {\r\n        edition: {}\r\n      },\r\n      groupModel: null,\r\n      matchModel: null,\r\n      enableActions: false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    return QueryService.get(`/schemes/${this.props.match.params.id}/matches/groups`)\r\n      .then(({ groups, scheme }) => this.setState({\r\n        groups,\r\n        scheme,\r\n        enableActions: scheme.bracketStatus == BracketStatus.GROUPS_DRAWN || scheme.bracketStatus == BracketStatus.GROUPS_END\r\n      }));\r\n  }\r\n\r\n  addGroup() {\r\n    this.setState({\r\n      groupModel: {\r\n        group: this.state.groups.length,\r\n        teams: [],\r\n        matches: [],\r\n        schemeId: this.state.scheme.id\r\n      }\r\n    });\r\n  }\r\n\r\n  addMatch(group) {\r\n    this.setState({\r\n      matchModel: {\r\n        groupId: group.id,\r\n        schemeId: this.state.scheme.id,\r\n        sets: []\r\n      }\r\n    })\r\n  }\r\n\r\n  deleteGroup(group) {\r\n    return QueryService\r\n      .delete(`/schemes/${group.schemeId}/groups/${group.id}`)\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  deleteMatch(match) {\r\n    return QueryService\r\n      .delete(`/schemes/${match.schemeId}/matches/${match.id}`)\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  render() {\r\n    const { scheme, groups, groupModel, matchModel, enableActions } = this.state;\r\n\r\n    return (\r\n      <UserService.WithApplicationMode>\r\n        {mode => (\r\n          <Paper elevation={4} style={{ padding: '2rem 0 3rem 0', backgroundColor: 'rgba(255, 255, 255, .9)' }}>\r\n            {groupModel\r\n              && <EditGroupModal\r\n                model={groupModel}\r\n                scheme={scheme}\r\n                onChange={() => {\r\n                  this.getData();\r\n                  this.setState({ groupModel: null })\r\n                }}\r\n                onClose={() => this.setState({ groupModel: null })}\r\n              />}\r\n\r\n            {matchModel\r\n              && <EditMatchModal\r\n                model={matchModel}\r\n                onChange={() => {\r\n                  this.getData();\r\n                  this.setState({ matchModel: null })\r\n                }}\r\n                onClose={() => this.setState({ matchModel: null })}\r\n              />}\r\n\r\n            <Typography align=\"center\" variant=\"headline\">\r\n              Групова фаза за\r\n              <Link to={`/editions/${scheme.edition.id}`}>\r\n                <Typography variant=\"display1\">{scheme.edition.name}</Typography>\r\n              </Link>\r\n              -\r\n              <Link to={`/schemes/${scheme.id}`}>\r\n                <Typography variant=\"display1\">{scheme.name}</Typography>\r\n              </Link>\r\n            </Typography>\r\n\r\n            {mode == ApplicationMode.ADMIN && enableActions\r\n              && <div style={{ margin: '1rem', display: 'flex', justifyContent: 'center' }}>\r\n                <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.addGroup()}>Добави група</Button>\r\n              </div>}\r\n\r\n            <div style={{ display: 'flex', justifyContent: 'space-around', marginTop: '2rem', flexWrap: 'wrap' }}>\r\n              {groups.map(group => {\r\n                return (\r\n                  <Group\r\n                    key={group.id}\r\n                    group={group}\r\n                    mode={mode}\r\n                    onEdit={() => this.setState({ groupModel: group })}\r\n                    onDelete={() => this.deleteGroup(group)}\r\n                    onAddMatch={() => this.addMatch(group)}\r\n                    onEditMatch={(match) => this.setState({ matchModel: match })}\r\n                    onDeleteMatch={(match) => this.deleteMatch(match)}\r\n                    enableActions={enableActions}\r\n                  />\r\n                );\r\n              })}\r\n            </div>\r\n          </Paper>\r\n        )}\r\n      </UserService.WithApplicationMode>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nclass Group extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      tabIndex: 0\r\n    };\r\n  }\r\n\r\n  getGroupHeader(groupOrder) {\r\n    return String.fromCharCode(\"А\".charCodeAt(0) + groupOrder);\r\n  }\r\n\r\n  render() {\r\n    const { mode, group, onEdit, onDelete, onAddMatch, onEditMatch, onDeleteMatch, enableActions } = this.props;\r\n    const { tabIndex } = this.state;\r\n\r\n    return (\r\n      <Paper elevation={5} className=\"group-box\">\r\n        <div className=\"group-box-header\">\r\n          <Typography variant=\"headline\" style={{ padding: '0 1.5rem' }}>\r\n            {this.getGroupHeader(group.group)}\r\n          </Typography>\r\n          <Tabs\r\n            value={tabIndex}\r\n            onChange={(e, value) => this.setState({ tabIndex: value })}\r\n            indicatorColor=\"primary\"\r\n            textColor=\"primary\"\r\n          >\r\n            <Tab label=\"Класация\" />\r\n            <Tab label=\"Мачове\" />\r\n          </Tabs>\r\n        </div>\r\n\r\n        <div style={{ padding: '1.5rem', flexGrow: 1, transition: 'flex-grow .3s ease-out' }}>\r\n          {tabIndex == 0 && <GroupRankingView groupTeams={group.teams} />}\r\n          {tabIndex == 1 && <GroupMatchesView mode={mode} matches={group.matches} onEditMatch={onEditMatch} onDeleteMatch={onDeleteMatch} />}\r\n        </div>\r\n\r\n        {mode == ApplicationMode.ADMIN && enableActions\r\n          && <div style={{ display: 'flex', padding: '1.5rem' }}>\r\n            <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={onEdit}>Промяна</Button>\r\n            <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={onAddMatch} style={{ margin: '0 .3rem' }}>Добавяне на мач</Button>\r\n            <ConfirmationDialog\r\n              title=\"Изтриване на група\"\r\n              body={<Typography>Сигурни ли сте че искате да група \"{this.getGroupHeader(group.group)}\"?</Typography>}\r\n              onAccept={onDelete}\r\n            >\r\n              <Button variant=\"contained\" color=\"secondary\" size=\"small\">Изтриване</Button>\r\n            </ConfirmationDialog>\r\n          </div>}\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nclass GroupRankingView extends React.Component {\r\n  render() {\r\n    const { groupTeams } = this.props;\r\n    return (\r\n      <div>\r\n        <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n          <Typography style={{ flexBasis: '4rem', fontStyle: 'italic' }}>W - L</Typography>\r\n        </div>\r\n        {groupTeams.map(groupTeam => {\r\n          return (\r\n            <GroupTeamInfo key={groupTeam.id} team={groupTeam.team} rank={groupTeam.order} stats={groupTeam.stats} />\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass GroupMatchesView extends React.Component {\r\n  render() {\r\n    const { mode, matches, onEditMatch, onDeleteMatch } = this.props;\r\n\r\n    if (!matches || !matches.length)\r\n      return (<Typography variant=\"caption\" align=\"center\">Няма изиграни мачове</Typography>);\r\n\r\n    return (\r\n      <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n        {matches.map(match => {\r\n          return (\r\n            <div key={match.id} style={{ padding: '0.3rem 0', display: 'flex', width: '100%', justifyContent: 'space-between', borderBottom: '1px solid lightgrey' }}>\r\n              <div style={{ margin: '0 .2rem' }}>\r\n                <Typography>\r\n                  {match.team1.user1.name}\r\n                </Typography>\r\n                {match.team1.user2\r\n                  && <Typography>\r\n                    {match.team1.user2.name}\r\n                  </Typography>}\r\n              </div>\r\n              <Typography variant=\"caption\" align=\"center\">\r\n                {match.sets.map(set => {\r\n                  return (\r\n                    <span key={set.id} style={{ marginRight: '.3rem' }}>\r\n                      {set.team1}\r\n                      {set.team2}\r\n                      {set.tiebreaker && <sup>({set.tiebreaker})</sup>}\r\n                    </span>\r\n                  );\r\n                })}\r\n              </Typography>\r\n              <div style={{ margin: '0 .2rem' }}>\r\n                <Typography>\r\n                  {match.team2.user1.name}\r\n                </Typography>\r\n                {match.team2.user2\r\n                  && <Typography>\r\n                    {match.team2.user2.name}\r\n                  </Typography>}\r\n              </div>\r\n\r\n              {mode == ApplicationMode.ADMIN\r\n                && <div>\r\n                  <EditIcon color=\"primary\" style={{ cursor: 'pointer' }} onClick={() => onEditMatch(match)}></EditIcon>\r\n                  <ConfirmationDialog\r\n                    title=\"Изтриване на мач\"\r\n                    body={<Typography>Сигурни ли сте че искате да изтриете мача?</Typography>}\r\n                    onAccept={() => onDeleteMatch(match)}\r\n                  >\r\n                    <DeleteForeverIcon color=\"secondary\" style={{ cursor: 'pointer' }}></DeleteForeverIcon>\r\n                  </ConfirmationDialog>\r\n                </div>}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass GroupTeamInfo extends React.Component {\r\n  render() {\r\n    const { team, rank, stats } = this.props;\r\n    if (!team)\r\n      return null;\r\n\r\n    return (\r\n      <div className=\"group-box-team-info\">\r\n        <Typography style={{ marginRight: '1rem' }}>{rank}.</Typography>\r\n        <div style={{ flexGrow: 1 }}>\r\n          <Typography>{team.user1.name}</Typography>\r\n          {team.user2 && <Typography>{team.user2.name}</Typography>}\r\n        </div>\r\n        <Typography style={{ flexBasis: '4rem' }}>\r\n          <span style={{ marginRight: '.3rem', fontStyle: 'italic' }}>{stats.wonMatches}</span>\r\n          -\r\n          <span style={{ marginLeft: '.3rem', fontStyle: 'italic' }}>{stats.totalMatches - stats.wonMatches}</span>\r\n        </Typography>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GroupsBracket;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Zoom from '@material-ui/core/Zoom';\r\nimport './styles.scss';\r\n\r\nimport { ApplicationMode } from '../../enums';\r\nimport QueryService from '../../services/query.service';\r\nimport UserService from '../../services/user.service';\r\nimport MatchFormModal from '../components/MatchFormModal';\r\n\r\nclass EliminationBracket extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      matchModel: null,\r\n      bracket: [],\r\n      scheme: null\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    return QueryService.get(`/schemes/${this.props.match.params.id}/matches/elimination`)\r\n      .then(e => this.setState({\r\n        bracket: this.constructBracket(e.matches, e.scheme),\r\n        scheme: e.scheme\r\n      }));\r\n  }\r\n\r\n  getRoundName(roundSize) {\r\n    let label = `R${roundSize}`;\r\n\r\n    if (roundSize == 8)\r\n      label = 'QF';\r\n    if (roundSize == 4)\r\n      label = 'SF';\r\n    if (roundSize == 2)\r\n      label = 'F';\r\n\r\n    return <Typography\r\n      component=\"span\"\r\n      variant=\"headline\"\r\n      color=\"textSecondary\"\r\n      align=\"center\"\r\n      style={{ borderBottom: '1px solid grey' }}\r\n    >\r\n      {label}\r\n    </Typography>\r\n  }\r\n\r\n  constructMatch(match, round, scheme) {\r\n    return {\r\n      schemeId: scheme.id,\r\n      match,\r\n      round,\r\n      team1: null,\r\n      team2: null,\r\n      seed: null,\r\n      sets: [],\r\n      withdraw: null\r\n    };\r\n  }\r\n\r\n  constructBracket(matches, scheme) {\r\n    let size = matches.filter(match => match.round == 1).length;\r\n    let rounds = Math.log2(size);\r\n    let bracket = [];\r\n\r\n    for (let round = 0; round < rounds + 1; round++) {\r\n      bracket[round] = [];\r\n      for (let match = 0; match < (size / (Math.pow(2, round))); match++) {\r\n        let currentMatch = matches.find(e => e.match == match + 1 && e.round == round + 1);\r\n        bracket[round].push(currentMatch || this.constructMatch(match + 1, round + 1, scheme));\r\n      }\r\n    }\r\n    return bracket;\r\n  }\r\n\r\n  render() {\r\n    const { matchModel, bracket, scheme } = this.state;\r\n    return (\r\n      <UserService.WithApplicationMode>\r\n        {mode => (\r\n          <Paper elevation={4} style={{ backgroundColor: 'rgba(255, 255, 255, .9)' }}>\r\n            {scheme && <Typography align=\"center\" variant=\"headline\" style={{ padding: '2rem 0' }}>\r\n              Елиминационна фаза за\r\n              <Link to={`/editions/${scheme.edition.id}`}>\r\n                <Typography variant=\"display1\">{scheme.edition.name}</Typography>\r\n              </Link>\r\n              -\r\n              <Link to={`/schemes/${scheme.id}`}>\r\n                <Typography variant=\"display1\">{scheme.name}</Typography>\r\n              </Link>\r\n            </Typography>}\r\n\r\n            {matchModel\r\n              && <MatchFormModal\r\n                model={matchModel}\r\n                onChange={() => {\r\n                  this.setState({ matchModel: null });\r\n                  this.getData();\r\n                }}\r\n                onClose={() => this.setState({ matchModel: null })}\r\n              />}\r\n\r\n            <div className=\"bracket\">\r\n              {bracket.map((round, index) => {\r\n                return (\r\n                  <div key={index} className=\"round\">\r\n                    <h3 className=\"round-title\" style={{ padding: '.5rem' }}>\r\n                      {this.getRoundName(round.length * 2)}\r\n                    </h3>\r\n                    <ul className=\"list\">\r\n                      {round.map((match, i) => {\r\n                        return (\r\n                          <li className=\"item\" key={i}>\r\n                            <div className=\"match\">\r\n                              <Match\r\n                                match={match}\r\n                                onEvent={() => this.setState({ matchModel: match })}\r\n                                mode={mode}\r\n                              />\r\n                            </div>\r\n                          </li>\r\n                        )\r\n                      })}\r\n                    </ul>\r\n                  </div>\r\n                )\r\n              })}\r\n            </div>\r\n          </Paper>\r\n        )}\r\n      </UserService.WithApplicationMode>\r\n    );\r\n  }\r\n}\r\n\r\nclass Match extends React.Component {\r\n  render() {\r\n    const { match, mode } = this.props;\r\n\r\n    if (mode == ApplicationMode.ADMIN)\r\n      return (\r\n        <Tooltip\r\n          title=\"Въвеждане/промяна на резултат\"\r\n          placement=\"top\"\r\n          TransitionComponent={Zoom}\r\n          enterDelay={0}\r\n          onClick={this.props.onEvent}\r\n        >\r\n          <Paper elevation={4} className=\"match-box\" style={{ cursor: 'pointer' }}>\r\n            <TeamInfo team={match.team1} match={match} round={match.round} pos={1} />\r\n            <TeamInfo team={match.team2} match={match} round={match.round} pos={2} />\r\n          </Paper>\r\n        </Tooltip>\r\n      );\r\n\r\n    else\r\n      return (\r\n        <Paper elevation={4} className=\"match-box\">\r\n          <TeamInfo team={match.team1} match={match} round={match.round} pos={1} />\r\n          <TeamInfo team={match.team2} match={match} round={match.round} pos={2} />\r\n        </Paper>\r\n      );\r\n  }\r\n}\r\n\r\nclass TeamInfo extends React.Component {\r\n  composeScore(sets, pos) {\r\n    if (!sets)\r\n      return null;\r\n    let enemyPos = (pos == 1 ? 2 : 1);\r\n    let result = sets.map((set, i) => {\r\n      return (\r\n        <span key={i} style={{ width: set.tiebreaker ? '22px' : '10px', display: 'flex' }}>\r\n          {set['team' + pos]}\r\n          {set['team' + enemyPos] > set['team' + pos] && set.tiebreaker\r\n            && <div style={{ fontSize: '.5rem', marginTop: '-3px' }}>({set.tiebreaker})</div>}\r\n        </span>\r\n      );\r\n    });\r\n    return result;\r\n  }\r\n\r\n  render() {\r\n    const { team, match, round, pos } = this.props;\r\n\r\n    if (team)\r\n      return (\r\n        <div className=\"match-box-team\">\r\n          <div>\r\n            <Typography style={{ fontSize: '.8em' }}>{team.user1.name}</Typography>\r\n            {team.user2 &&\r\n              <Typography style={{ fontSize: '.8em' }}>{team.user2.name}</Typography>}\r\n          </div>\r\n          <Typography style={{ display: 'flex' }} variant=\"caption\">\r\n            {this.composeScore(match.sets, pos)}\r\n          </Typography>\r\n        </div>\r\n      );\r\n\r\n    else\r\n      return (\r\n        <div className=\"match-box-team\">\r\n          <Typography style={{ fontSize: '.8em' }} variant=\"caption\">\r\n            {round == 1 ? 'bye' : `winner of match ${match.match * 2 + pos - 2} round ${round - 1}`}\r\n          </Typography>\r\n        </div>\r\n      );\r\n  }\r\n}\r\n\r\nexport default EliminationBracket;","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport PhotoIcon from '@material-ui/icons/Photo';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\n\r\nimport FileUpload from './FileUpload';\r\nimport QueryService from '../services/query.service';\r\n\r\nclass ImageField extends React.Component {\r\n  render() {\r\n    const { value, onChange, style, imageStyle } = this.props;\r\n    return (\r\n      <span style={style}>\r\n        <input ref={ref => this.inputRef = ref} onChange={onChange} type=\"file\" style={{ display: 'none' }} />\r\n        {value\r\n          && <Typography>{value.name}</Typography>}\r\n        {value\r\n          && <img\r\n            src={QueryService.getFileUrl(value.id)}\r\n            style={imageStyle}\r\n          />}\r\n        <div>\r\n          <PhotoIcon\r\n            onClick={() => this.inputRef.click()}\r\n            style={{ fontSize: '2rem', cursor: 'pointer' }}\r\n            color=\"primary\"\r\n          />\r\n          {value\r\n            && <DeleteForeverIcon\r\n              style={{ fontSize: '2rem', cursor: 'pointer' }}\r\n              color=\"secondary\"\r\n              onClick={() => onChange(null)}\r\n            />}\r\n        </div>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageField;\r\n","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Button from '@material-ui/core/Button';\r\nimport PhotoIcon from '@material-ui/icons/Photo';\r\n\r\nclass FileUpload extends React.Component {\r\n  render() {\r\n    const { value, onChange, style } = this.props;\r\n\r\n    return (\r\n      <span onClick={e => this.inputRef.click()} style={style}>\r\n        <input ref={ref => this.inputRef = ref} onChange={onChange} type=\"file\" style={{ display: 'none' }} />\r\n        {this.props.children}\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FileUpload","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport ImageField from '../components/ImageField';\r\nimport EnumSelectToggle from '../components/EnumSelectToggle';\r\nimport QueryService from '../services/query.service';\r\n\r\nclass TournamentFormModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      model: {},\r\n      errors: []\r\n    }\r\n\r\n    this.save = this.save.bind(this);\r\n\r\n    this.handleChange = (prop) => (e) => {\r\n      const model = this.state.model;\r\n      model[prop] = e.target.value;\r\n      this.setState({ model });\r\n    }\r\n\r\n    this.handleThumbnail = (e) => {\r\n      const model = this.state.model;\r\n\r\n      if (!e || !e.target.files || !e.target.files[0]) {\r\n        model.thumbnail = null;\r\n        model.thumbnailId = null;\r\n        this.setState({ model });\r\n        return;\r\n      }\r\n\r\n      return QueryService\r\n        .uploadFile(e.target.files[0])\r\n        .then(file => {\r\n          model.thumbnail = file;\r\n          model.thumbnailId = file.id;\r\n          this.setState({ model });\r\n        });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ model: this.props.model });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.model != this.props.model)\r\n      this.setState({ model: this.props.model });\r\n  }\r\n\r\n  save() {\r\n    const model = this.state.model;\r\n    return QueryService\r\n      .post(`/tournaments/${model.id ? model.id : ''}`, model)\r\n      .then(e => this.props.onChange(e));\r\n  }\r\n\r\n  render() {\r\n    const { model, errors } = this.state;\r\n    const { onClose, classes, fullScreen } = this.props;\r\n\r\n    return (\r\n      <Dialog\r\n        open={true}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        classes={{ paper: classes.root }}\r\n      >\r\n        <DialogTitle>\r\n          <Typography component=\"span\" variant=\"headline\">Създаване/промяна на лига</Typography>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <EnumSelectToggle\r\n            value={model.status}\r\n            enumName=\"Status\"\r\n            onChange={this.handleChange('status')}\r\n          />\r\n\r\n          <Typography variant=\"caption\" style={{ marginTop: '.5rem' }}>Лого</Typography>\r\n          <ImageField\r\n            value={model.thumbnail}\r\n            onChange={this.handleThumbnail}\r\n            style={{ marginTop: '.5rem' }}\r\n            imageStyle={{ maxWidth: '50px' }}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Име на лигата\"\r\n            value={model.name}\r\n            fullWidth={true}\r\n            onChange={this.handleChange('name')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Допълнителна информация\"\r\n            value={model.info}\r\n            multiline={true}\r\n            fullWidth={true}\r\n            onChange={this.handleChange('info')}\r\n          />\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.save()}>\r\n            Запис\r\n          </Button>\r\n          <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(TournamentFormModal)\r\n);","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport DatePicker from 'material-ui-pickers/DatePicker';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../services/query.service';\r\nimport AsyncSelect from '../components/select/AsyncSelect';\r\nimport EnumSelectToggle from '../components/EnumSelectToggle';\r\n\r\nclass EditionFormModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      model: {\r\n        startDate: null,\r\n        endDate: null\r\n      },\r\n      errors: []\r\n    }\r\n\r\n    this.save = this.save.bind(this);\r\n\r\n    this.handleChange = (prop) => (e) => {\r\n      const model = this.state.model;\r\n      model[prop] = e.target.value;\r\n      this.setState({ model });\r\n    }\r\n\r\n    this.handleCustomChange = (prop) => (value) => {\r\n      const model = this.state.model;\r\n      model[prop] = value;\r\n\r\n      if (prop == 'tournament') {\r\n        if (value)\r\n          model.tournamentId = value.id;\r\n        else\r\n          model.tournamentId = null;\r\n      }\r\n\r\n      this.setState({ model });\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ model: this.props.model });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.model != this.props.model)\r\n      this.setState({ model: this.props.model });\r\n  }\r\n\r\n  save() {\r\n    const model = this.state.model;\r\n    return QueryService\r\n      .post(`/editions/${model.id ? model.id : ''}`, model)\r\n      .then(e => this.props.onChange(e));\r\n  }\r\n\r\n  render() {\r\n    const { model, errors } = this.state;\r\n    const { onClose, classes, fullScreen } = this.props;\r\n\r\n    return (\r\n      <Dialog\r\n        open={true}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        classes={{ paper: classes.root }}\r\n      >\r\n        <DialogTitle>\r\n          <Typography component=\"span\" variant=\"headline\">Форма за издание на турнир</Typography>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <EnumSelectToggle\r\n            value={model.status}\r\n            enumName=\"Status\"\r\n            onChange={this.handleChange('status')}\r\n          />\r\n\r\n          <AsyncSelect\r\n            label=\"Лига\"\r\n            value={model.tournament}\r\n            query=\"tournaments\"\r\n            noOptionsMessage={() => 'Няма намерени лиги'}\r\n            formatOptionLabel={(option) => <Typography component=\"span\">\r\n              {option.name}\r\n              <Typography component=\"span\" variant=\"caption\" >{option.info}</Typography>\r\n            </Typography>}\r\n            onChange={this.handleCustomChange('tournament')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Име на изданието\"\r\n            value={model.name}\r\n            fullWidth={true}\r\n            onChange={this.handleChange('name')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Допълнителна информация\"\r\n            value={model.info}\r\n            multiline={true}\r\n            fullWidth={true}\r\n            onChange={this.handleChange('info')}\r\n          />\r\n\r\n          <DatePicker\r\n            autoOk\r\n            label=\"Начало на турнира\"\r\n            labelFunc={(date) => date ? new Date(date).toLocaleDateString() : ''}\r\n            clearable\r\n            fullWidth={true}\r\n            value={model.startDate}\r\n            onChange={this.handleCustomChange('startDate')}\r\n          />\r\n\r\n          <DatePicker\r\n            autoOk\r\n            label=\"Край на турнира\"\r\n            labelFunc={(date) => date ? new Date(date).toLocaleDateString() : ''}\r\n            clearable\r\n            fullWidth={true}\r\n            value={model.endDate}\r\n            onChange={this.handleCustomChange('endDate')}\r\n          />\r\n\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.save()}>\r\n            Запис\r\n          </Button>\r\n          <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  },\r\n  truncateInfo: {\r\n    width: '100px',\r\n    whiteSpace: 'nowrap',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(EditionFormModal)\r\n);","import React from 'react';\r\nimport moment from 'moment';\r\nimport { Link } from 'react-router-dom';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nimport DisplayImage from '../components/DisplayImage';\r\nimport QueryService from '../services/query.service';\r\n\r\nclass EditionsDesktopView extends React.Component {\r\n  render() {\r\n    const { editions } = this.props;\r\n    return (\r\n      <Table>\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>Лига</TableCell>\r\n            <TableCell>Турнир</TableCell>\r\n            <TableCell>Провеждане</TableCell>\r\n            {/* <TableCell padding=\"none\"></TableCell> */}\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {editions.map(edition => {\r\n            return (\r\n              <TableRow key={edition.id}>\r\n                <TableCell >\r\n                  <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                    {edition.tournament.thumbnail\r\n                      && <DisplayImage image={edition.tournament.thumbnail} style={{ maxWidth: '50px', marginRight: '.5rem' }} />}\r\n                    <Link to={`/tournaments/${edition.tournament.id}`}>\r\n                      <Typography variant=\"body2\">{edition.tournament.name}</Typography>\r\n                    </Link>\r\n                  </div>\r\n                </TableCell>\r\n                <TableCell>\r\n                  <Link to={`/editions/${edition.id}`}>\r\n                    <Typography variant=\"body2\">{edition.name}</Typography>\r\n                  </Link>\r\n                </TableCell>\r\n                <TableCell>\r\n                  {moment(edition.startDate).format('DD.MM.YYYY')} - {moment(edition.endDate).format('DD.MM.YYYY')}\r\n                </TableCell>\r\n                {/* <TableCell>\r\n                  <Link to={`/editions/${edition.id}`}>\r\n                    <Button variant=\"text\" color=\"primary\">Преглед</Button>\r\n                  </Link>\r\n                </TableCell> */}\r\n              </TableRow>\r\n            );\r\n          })}\r\n        </TableBody>\r\n      </Table>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditionsDesktopView;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport moment from 'moment-timezone';\r\n\r\nclass EditionsMobileView extends React.Component {\r\n  render() {\r\n    const { editions } = this.props;\r\n    return (\r\n      <List style={{ width: '100%' }}>\r\n        {editions.map(edition => {\r\n          return (\r\n            <div style={{ padding: '.5rem 0', borderBottom: '1px solid lightgrey' }}>\r\n              <div style={{ display: 'flex' }}>\r\n                <Link to={`/editions/${edition.id}`}>\r\n                  <Typography variant=\"display2\" style={{ marginRight: '.5rem' }}>{edition.name}</Typography>\r\n                </Link>\r\n\r\n                <Link to={`/tournaments/${edition.tournamentId}`}>\r\n                  <Typography variant=\"display2\">{edition.tournament.name}</Typography>\r\n                </Link>\r\n              </div>\r\n\r\n              <Typography variant=\"caption\">{edition.info}</Typography>\r\n\r\n              <Typography>\r\n                {moment(edition.startDate).format('DD.MM.YYYY')}\r\n                -\r\n                  {moment(edition.endDate).format('DD.MM.YYYY')}\r\n              </Typography>\r\n            </div>\r\n          );\r\n        })}\r\n      </List>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditionsMobileView;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\n\r\nimport TournamentFormModal from '../tournaments/TournamentFormModal';\r\nimport EditionFormModal from './EditionFormModal';\r\nimport EditionsDesktopView from './EditionsDesktopView';\r\nimport EditionsMobileView from './EditionsMobileView';\r\nimport editionsViewActions from './EditionsViewActions';\r\nimport QueryService from '../services/query.service';\r\nimport UserService from '../services/user.service';\r\nimport { ApplicationMode, Status } from '../enums';\r\n\r\nclass EditionsList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      editions: [],\r\n      editionModel: null,\r\n      tournamentModel: null\r\n    }\r\n\r\n    this.handleOpenModal = (editionModel) => {\r\n      this.setState({ editionModel });\r\n    }\r\n\r\n    this.handleRemoveEdition = (edition) => {\r\n\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    return QueryService\r\n      .post(`/editions/filter`, {})\r\n      .then(editions => this.setState({ editions }));\r\n  }\r\n\r\n  render() {\r\n    const { editions, editionModel, tournamentModel } = this.state;\r\n    const actions = editionsViewActions(this.handleOpenModal, this.handleRemoveEdition);\r\n\r\n    return (\r\n      <UserService.WithApplicationMode>\r\n        {mode => (\r\n          <div className=\"container\">\r\n            {editionModel\r\n              && <EditionFormModal\r\n                model={editionModel}\r\n                onChange={() => { this.setState({ editionModel: null }); this.getData(); }}\r\n                onClose={() => this.setState({ editionModel: null })}\r\n              />}\r\n\r\n            {tournamentModel\r\n              && <TournamentFormModal\r\n                model={tournamentModel}\r\n                onChange={() => { this.setState({ tournamentModel: null }); this.getData(); }}\r\n                onClose={() => this.setState({ tournamentModel: null })}\r\n              />}\r\n\r\n            {mode == ApplicationMode.ADMIN\r\n              && <React.Fragment>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  size=\"small\"\r\n                  onClick={() => this.setState({ tournamentModel: { status: Status.DRAFT, name: '', info: '', thumbnailId: null } })}\r\n                >\r\n                  Нова Лига\r\n                  </Button>\r\n\r\n                <Button\r\n                  style={{ marginLeft: '.3rem' }}\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  size=\"small\"\r\n                  onClick={() => this.setState({ editionModel: { status: Status.DRAFT, name: '', info: '', startDate: null, endDate: null } })}\r\n                >\r\n                  Нов Турнир\r\n                  </Button>\r\n              </React.Fragment>}\r\n\r\n            <ExpansionPanel defaultExpanded={true}>\r\n              <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                <Typography variant=\"headline\">Турнири</Typography>\r\n              </ExpansionPanelSummary>\r\n              <ExpansionPanelDetails>\r\n\r\n                {editions.length == 0 && <Typography variant=\"caption\">Няма регистрирани турнири</Typography>}\r\n                {editions.length > 0 && <Hidden smDown>\r\n                  <EditionsDesktopView editions={editions} actions={actions} />\r\n                </Hidden>}\r\n\r\n                {editions.length > 0 && <Hidden mdUp>\r\n                  <EditionsMobileView editions={editions} actions={actions} />\r\n                </Hidden>}\r\n              </ExpansionPanelDetails>\r\n            </ExpansionPanel>\r\n          </div>\r\n        )}\r\n      </UserService.WithApplicationMode>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditionsList;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport ConfirmationDialog from '../components/ConfirmationDialog';\r\n\r\nexport default function generateActions(onChange, onRemove) {\r\n  return class extends React.Component {\r\n    render() {\r\n      const { edition } = this.props;\r\n\r\n      return (\r\n        <span>\r\n          <Button onClick={onChange(edition)}>\r\n            Редакция\r\n        </Button>\r\n          <Button onClick={onRemove(edition)}>\r\n            Изтриване\r\n        </Button>\r\n        </span>\r\n      );\r\n    }\r\n  }\r\n}","import React from 'react';\r\nimport moment from 'moment';\r\nimport { Link } from 'react-router-dom';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Status, BracketStatus, ApplicationMode } from '../enums';\r\nimport EditionFormModal from './EditionFormModal';\r\nimport SchemeFormModal from '../schemes/SchemeFormModal';\r\nimport SchemeDetails from '../schemes/components/SchemeDetails';\r\nimport SchemeDetailsActions from '../schemes/components/SchemeDetailsActions';\r\nimport DisplayImage from '../components/DisplayImage';\r\nimport QueryService from '../services/query.service';\r\nimport { catchEvent } from '../services/events.service';\r\nimport UserService from '../services/user.service';\r\nimport ConfirmationDialog from '../components/ConfirmationDialog';\r\nimport MessageModal from '../components/MessageModal';\r\n\r\nclass EditionView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      edition: {\r\n        tournament: {},\r\n        schemes: []\r\n      },\r\n      editionModel: null,\r\n      schemeModel: null,\r\n      enrolled: [],\r\n      hasError: false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n    catchEvent('logged-in', () => {\r\n      this.getData();\r\n    });\r\n  }\r\n\r\n  getData() {\r\n    QueryService\r\n      .get(`/editions/${this.props.match.params.id}`)\r\n      .then(e => this.setState({ edition: e }));\r\n\r\n    QueryService\r\n      .get('/users/enrollments')\r\n      .then(enrolled => this.setState({ enrolled }));\r\n  }\r\n\r\n  initSchemeModel() {\r\n    this.setState({\r\n      schemeModel: {\r\n        status: Status.DRAFT,\r\n        bracketStatus: BracketStatus.UNDRAWN,\r\n        edition: this.state.edition,\r\n        editionId: this.state.edition.id,\r\n        singleTeams: true,\r\n        maleTeams: false,\r\n        femaleTeams: false,\r\n        mixedTeams: false,\r\n        hasGroupPhase: false,\r\n        ageFrom: '',\r\n        ageTo: '',\r\n        maxPlayerCount: '',\r\n        groupCount: '',\r\n        teamsPerGroup: '',\r\n        date: null,\r\n        registrationStart: null,\r\n        registrationEnd: null,\r\n        pPoints: 1,\r\n        wPoints: 15,\r\n        cPoints: 20\r\n      }\r\n    });\r\n  }\r\n\r\n  remove() {\r\n    this.setState({ hasError: false });\r\n    return QueryService.delete(`/editions/${this.state.edition.id}`)\r\n      .then(() => this.props.history.replace('/editions'))\r\n      .catch(err => this.setState({ hasError: true }));\r\n  }\r\n\r\n  render() {\r\n    const { edition, editionModel, schemeModel, enrolled } = this.state;\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <UserService.WithApplicationMode>\r\n        {mode => (\r\n          <div className=\"container\">\r\n            <MessageModal activation={this.state.hasError}>\r\n              <Typography>Неуспешно изтриване на турнир. Възможна причина за грешката е съществуващи схеми със записани играчи в тях.</Typography>\r\n            </MessageModal>\r\n            {editionModel\r\n              && <EditionFormModal\r\n                model={editionModel}\r\n                onChange={() => {\r\n                  this.setState({ editionModel: null });\r\n                  this.getData();\r\n                }}\r\n                onClose={() => this.setState({ editionModel: null })}\r\n              />}\r\n\r\n            {schemeModel\r\n              && <SchemeFormModal\r\n                model={schemeModel}\r\n                onChange={() => {\r\n                  this.setState({ schemeModel: null });\r\n                  this.getData();\r\n                }}\r\n                onClose={() => this.setState({ schemeModel: null })}\r\n              />}\r\n\r\n            {mode == ApplicationMode.ADMIN && <div style={{ margin: '.5rem 0' }}>\r\n              <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.initSchemeModel()}>Добави схема</Button>\r\n              <Button variant=\"contained\" color=\"primary\" size=\"small\" style={{ marginLeft: '.3rem' }} onClick={() => this.setState({ editionModel: edition })}>Промяна</Button>\r\n              <ConfirmationDialog\r\n                title=\"Изтриване на турнир\"\r\n                body={<Typography>Сигурни ли сте че искате да изтриете турнир {edition.name}?</Typography>}\r\n                onAccept={() => this.remove()}\r\n              >\r\n                <Button variant=\"contained\" color=\"secondary\" size=\"small\" style={{ marginLeft: '.3rem' }}>Изтриване</Button>\r\n              </ConfirmationDialog>\r\n\r\n            </div>}\r\n\r\n            <Card>\r\n              <CardContent>\r\n                <Typography variant=\"headline\">\r\n                  {edition.name}\r\n                </Typography>\r\n                <Typography variant=\"caption\">{edition.info}</Typography>\r\n\r\n                <Typography variant=\"caption\" style={{ marginTop: '1rem' }}>Лига</Typography>\r\n                <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                  {edition.tournament.thumbnail\r\n                    && <DisplayImage image={edition.tournament.thumbnail} style={{ maxWidth: '50px', marginRight: '.5rem' }} />}\r\n                  <Link to={`/tournaments/${edition.tournament.id}`}>\r\n                    <Typography variant=\"body2\">{edition.tournament.name}</Typography>\r\n                  </Link>\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', marginTop: '1rem' }}>\r\n                  <Typography variant=\"caption\" style={{ paddingRight: '1rem' }}>\r\n                    Начало\r\n              <Typography>{moment(edition.startDate).format('DD.MM.YYYY')}</Typography>\r\n                  </Typography>\r\n\r\n                  <Typography variant=\"caption\">\r\n                    Край\r\n              <Typography>{moment(edition.endDate).format('DD.MM.YYYY')}</Typography>\r\n                  </Typography>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <div className={classes.schemesRoot}>\r\n              {edition.schemes.map(scheme => {\r\n                const actions = <SchemeDetailsActions\r\n                  scheme={scheme}\r\n                  enableViewLink\r\n                  enrollment={enrolled[scheme.id]}\r\n                  mode={mode}\r\n                  reload={() => this.getData()}\r\n                />;\r\n                return <SchemeDetails\r\n                  key={scheme.id}\r\n                  scheme={scheme}\r\n                  actions={actions}\r\n                  CardProps={{\r\n                    className: classes.schemesItem\r\n                  }} />\r\n              })}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </UserService.WithApplicationMode>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  schemesRoot: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'space-between',\r\n    marginTop: '.3rem'\r\n  },\r\n  schemesItem: {\r\n    width: '49.5%',\r\n    marginBottom: '.3rem',\r\n    paddingBottom: '0',\r\n    [theme.breakpoints.down('xs')]: {\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(EditionView);","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\n\r\nimport EditionsList from './EditionsList';\r\nimport EditionView from './EditionView';\r\n\r\nclass EditionsRoot extends React.Component {\r\n  render() {\r\n    return (\r\n      <Switch>\r\n        <Route\r\n          path=\"/editions/:id\"\r\n          render={(props) => <EditionView {...props} />}\r\n        />\r\n        <Route\r\n          exact\r\n          path=\"/editions\"\r\n          render={(props) => <EditionsList {...props} />}\r\n        />\r\n      </Switch>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditionsRoot;","export function getHour(hour) {\r\n  if (hour < 10)\r\n    return `0${hour}:00`;\r\n  else return `${hour}:00`;\r\n}","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport EnumSelect from '../../components/EnumSelect';\r\nimport AsyncSelect from '../../components/select/AsyncSelect';\r\nimport { ReservationPayment, ReservationType } from '../../enums';\r\nimport { l10n_text } from '../../components/L10n';\r\nimport { getHour } from '../../utils';\r\n\r\nclass EditReservationModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      reservation: {\r\n        court: {},\r\n        type: '',\r\n        season: {},\r\n        payments: [],\r\n        administrator: {},\r\n        customer: {}\r\n      },\r\n      errors: []\r\n    }\r\n\r\n    this.handleChange = (prop) => (e) => {\r\n      const reservation = this.state.reservation;\r\n      reservation[prop] = e.target.value;\r\n      if (prop == 'type') {\r\n        reservation.customer = null;\r\n        reservation.customerId = null;\r\n        reservation.subscription = null;\r\n        reservation.subscriptionId = null;\r\n      }\r\n\r\n      this.setState({ reservation });\r\n    };\r\n\r\n    this.handleCustomChange = (prop) => (value) => {\r\n      const reservation = this.state.reservation;\r\n\r\n      if (prop == 'customer') {\r\n        reservation.customer = null;\r\n        reservation.customerId = (value || { id: null }).id;\r\n        reservation.subscription = null;\r\n        reservation.subscriptionId = null;\r\n      }\r\n\r\n      if (prop == 'subscription') {\r\n        reservation.subscription = null;\r\n        reservation.subscriptionId = (value || { id: null }).id;\r\n      }\r\n\r\n      reservation[prop] = value;\r\n\r\n      this.setState({ reservation });\r\n    };\r\n\r\n    this.handlePaymentChange = (prop, index) => (e) => {\r\n      this.state.reservation.payments[index][prop] = e.target.value;\r\n      this.setState({ reservation: this.state.reservation });\r\n    };\r\n\r\n    this.handlePaymentSubscriptionChange = (index) => (value) => {\r\n      this.state.reservation.payments[index].subscription = value;\r\n      if (value)\r\n        this.state.reservation.payments[index].subscriptionId = value.id;\r\n      else\r\n        this.state.reservation.payments[index].subscriptionId = null;\r\n      this.setState({ reservation: this.state.reservation });\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { reservation } = this.props;\r\n    this.setState({ reservation: JSON.parse(JSON.stringify(reservation)), errors: [] });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { reservation } = this.props;\r\n    if (prevProps.reservation != reservation)\r\n      this.setState({ reservation: JSON.parse(JSON.stringify(reservation)), errors: [] });\r\n  }\r\n\r\n  action() {\r\n    if (this.state.reservation.id)\r\n      return QueryService\r\n        .post(`/schedule/reservations/${this.state.reservation.id}`, this.state.reservation)\r\n        .then(_ => {\r\n          this.setState({ errors: [] });\r\n          this.props.onAction()\r\n        })\r\n        .catch(err => this.setState({ errors: err }));\r\n    else\r\n      return QueryService\r\n        .post(`/schedule/reservations`, this.state.reservation)\r\n        .then(_ => {\r\n          this.setState({ errors: [] });\r\n          this.props.onAction()\r\n        })\r\n        .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  cancelReservation() {\r\n    return QueryService\r\n      .delete(`/schedule/reservations/${this.state.reservation.id}/cancel`)\r\n      .then(_ => {\r\n        this.setState({ errors: [] });\r\n        this.props.onAction()\r\n      })\r\n      .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  addPayment() {\r\n    const reservation = this.state.reservation;\r\n    reservation.payments.unshift({\r\n      type: \"\",\r\n      amount: null,\r\n      reservationId: reservation.id || 0\r\n    });\r\n    this.setState({ reservation });\r\n  }\r\n\r\n  render() {\r\n    const { isOpen, onClose, classes } = this.props;\r\n    const { reservation } = this.state;\r\n\r\n    return (\r\n      <Dialog open={isOpen} onClose={onClose} fullWidth={true} classes={{ paper: classes.root }}>\r\n        <DialogTitle>\r\n          <DialogContentText variant=\"headline\">\r\n            Резервация на\r\n            <span style={{ marginLeft: '.5rem' }}>\r\n              {reservation.court.name}\r\n            </span>\r\n          </DialogContentText>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Typography variant=\"caption\">\r\n            Час\r\n            <Typography>{getHour(reservation.hour)} - {getHour(reservation.hour + 1)}</Typography>\r\n          </Typography>\r\n          {reservation.administrator && <Typography variant=\"caption\">\r\n            Администрирал\r\n            <Typography>{reservation.administrator.name}</Typography>\r\n          </Typography>}\r\n\r\n          <EnumSelect\r\n            label=\"Вид резервация\"\r\n            value={reservation.type}\r\n            fullWidth={false}\r\n            onChange={this.handleChange('type')}\r\n            EnumValues={ReservationType}\r\n            EnumName=\"ReservationType\" />\r\n\r\n          {(reservation.type == ReservationType.USER || reservation.type == ReservationType.SUBSCRIPTION)\r\n            && <AsyncSelect\r\n              label=\"Потребител\"\r\n              value={reservation.customer}\r\n              query=\"users\"\r\n              noOptionsMessage={() => 'Няма намерени потребители'}\r\n              formatOptionLabel={(option) => <Typography component=\"span\">\r\n                {option.name}\r\n                <Typography component=\"span\" variant=\"caption\">{option.email}</Typography>\r\n              </Typography>}\r\n              onChange={this.handleCustomChange('customer')}\r\n            />}\r\n\r\n          {reservation.type == ReservationType.SUBSCRIPTION && reservation.customer\r\n            && <AsyncSelect\r\n              disableSearch={true}\r\n              label=\"Абонамент\"\r\n              value={reservation.subscription}\r\n              query=\"subscriptions\"\r\n              filter={{\r\n                seasonId: reservation.seasonId,\r\n                userId: reservation.customerId\r\n              }}\r\n              noOptionsMessage={() => 'Няма регистрирани абонаменти'}\r\n              formatOptionLabel={(option) => <Typography component=\"span\">\r\n                Абонамент {l10n_text(option.type, \"SubscriptionType\")}\r\n                <Typography component=\"span\" variant=\"caption\" style={{ display: 'inline', marginLeft: '1rem' }}>{option.season.name}</Typography>\r\n                <Typography component=\"span\" variant=\"caption\">{option.remainingHours} оставащи часа</Typography>\r\n              </Typography>}\r\n              onChange={this.handleCustomChange('subscription')}\r\n            />}\r\n\r\n          <Typography variant=\"subheading\" style={{ marginTop: '1rem', alignItems: 'center', display: 'flex' }}>\r\n            Плащания\r\n            <IconButton\r\n              color=\"primary\"\r\n              onClick={() => this.addPayment()}\r\n            >\r\n              <AddIcon />\r\n            </IconButton>\r\n          </Typography>\r\n\r\n          {reservation.payments && reservation.payments.map((payment, index) => {\r\n            return (\r\n              <div className={classes.paymentCell} key={index}>\r\n\r\n                <EnumSelect\r\n                  style={{ width: '100px' }}\r\n                  label=\"Вид плащане\"\r\n                  value={payment.type}\r\n                  onChange={this.handlePaymentChange('type', index)}\r\n                  EnumValues={ReservationPayment}\r\n                  EnumName=\"ReservationPayment\" />\r\n\r\n                {payment.type == ReservationPayment.CASH\r\n                  && <TextField\r\n                    label=\"Стойност\"\r\n                    value={payment.amount}\r\n                    InputProps={{\r\n                      endAdornment: <InputAdornment position=\"end\">Лв.</InputAdornment>\r\n                    }}\r\n                    onChange={this.handlePaymentChange('amount', index)}\r\n                  />}\r\n\r\n                {(payment.type == ReservationPayment.SUBS_ZONE_1 || payment.type == ReservationPayment.SUBS_ZONE_2)\r\n                  && reservation.customer\r\n                  && <AsyncSelect\r\n                    disableSearch={true}\r\n                    label=\"Абонамент\"\r\n                    value={payment.subscription}\r\n                    query=\"subscriptions\"\r\n                    filter={{\r\n                      seasonId: reservation.seasonId,\r\n                      userId: reservation.customerId,\r\n                      type: payment.type,\r\n                      onlyAvailable: true\r\n                    }}\r\n                    noOptionsMessage={() => 'Няма абонаменти с часове за отиграване'}\r\n                    formatOptionLabel={(option) => <Typography component=\"span\">\r\n                      Абонамент {l10n_text(option.type, \"SubscriptionType\")}\r\n                      <Typography component=\"span\" variant=\"caption\" style={{ display: 'inline', marginLeft: '1rem' }}>{option.season.name}</Typography>\r\n                      <Typography component=\"span\" variant=\"caption\">{option.remainingHours} оставащи часа</Typography>\r\n                    </Typography>}\r\n                    onChange={this.handlePaymentSubscriptionChange(index)}\r\n                  />}\r\n\r\n                {/* <span style={{ cursor: 'pointer' }} onClick={() => {\r\n                  this.state.reservation.payments.splice(index, 1);\r\n                  this.setState({ reservation: this.state.reservation });\r\n                }}>\r\n                  <ClearIcon style={{ color: 'darkred' }} />\r\n                </span> */}\r\n                <div style={{ margin: '1rem 0 .3rem 0' }}>\r\n                  <Button variant=\"contained\" color=\"secondary\" size=\"small\"\r\n                    onClick={() => {\r\n                      this.state.reservation.payments.splice(index, 1);\r\n                      this.setState({ reservation: this.state.reservation });\r\n                    }}\r\n                  >\r\n                    Премахване\r\n                </Button>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n\r\n          {reservation.payments.length == 0 && <Typography variant=\"caption\">Няма регистрирани плащания</Typography>}\r\n\r\n          <TextField\r\n            label=\"Бележка\"\r\n            value={reservation.info}\r\n            fullWidth={true}\r\n            multiline={true}\r\n            margin=\"none\"\r\n            onChange={this.handleChange('info')}\r\n          />\r\n\r\n          {this.state.errors && this.state.errors.length > 0\r\n            && <div style={{ margin: '1rem 0', color: 'red' }}>\r\n              {this.state.errors.map((err, index) => {\r\n                return (\r\n                  <div key={index}><em>{index + 1}. {ErrorTexts[err]}</em></div>\r\n                );\r\n              })}\r\n            </div>}\r\n\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => this.action()}\r\n          >\r\n            Запазване\r\n          </Button>\r\n          {this.state.reservation.id && <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            onClick={() => this.cancelReservation()}\r\n          >\r\n            Отмяна на резервацията\r\n          </Button>}\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={onClose}\r\n          >\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog >\r\n    );\r\n  }\r\n}\r\n\r\nconst ErrorTexts = {\r\n  'exist': 'Резервация за този ден, час и корт вече съществува.',\r\n  'typeRequired': '\"Вид резервация\" е задължително поле',\r\n  'customerRequired': '\"Потребител\" е задължително поле, когато вид резервация е \"Абонат\" или \"Потребител\".',\r\n  'subscriptionRequired': '\"Абонамент\" е задължително поле, когато вид резервация е \"Абонат\".',\r\n  'usedHoursExceedTotalHours': 'Абонаментът няма оставащи часове',\r\n  'paymentSubscriptionRequired': '\"Абонамент\" е задължително поле, когато вид плащане е \"Отиграване на абонамент\".',\r\n  'typeSubscriptionAndHasPaymentSubscription': 'Не може едновременно вид резервация да е \"Абонат\" и да има вид плащане \"Отиграване на абонамент\".',\r\n  'maxAllowedTimeDiff': 'Резервацията не може да бъде отказана, защото остават по-малко часове от минимално допустимите часове за отказ.',\r\n  'reservationInThePast': 'Часът за тази резервация вече е минал.'\r\n};\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: '800px'\r\n    }\r\n  },\r\n  paymentCell: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    border: `1px solid ${theme.palette.primary.light}`,\r\n    padding: '1rem',\r\n    marginBottom: '1rem',\r\n    borderRadius: '5%'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(EditReservationModal);","export const cell = {\r\n  padding: '.3rem',\r\n  fontSize: '.8em',\r\n  textAlign: 'center',\r\n  border: '1px solid lightgrey',\r\n  width: '50px',\r\n};\r\n\r\nexport const button = {\r\n  '&:hover': {\r\n    opacity: .8,\r\n    cursor: 'pointer'\r\n  }\r\n};\r\n\r\nexport const disabled = {\r\n  '&:hover': {\r\n    cursor: 'not-allowed'\r\n  }\r\n};","import React from 'react';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport EditReservationModal from './EditReservationModal';\r\nimport * as ReservationStyles from './styles';\r\nimport { ReservationType } from '../../enums';\r\nimport L10n from '../../components/L10n';\r\n\r\nclass AdminReservation extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      modal: false\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { reservation, onChange, classes } = this.props;\r\n    let type = classes.free;\r\n    if (reservation.id) {\r\n      if ((reservation.type != ReservationType.GUEST || reservation.payments.length > 0)\r\n        && (reservation.type != ReservationType.USER || reservation.payments.length > 0))\r\n        type = classes.paidReservation;\r\n      else\r\n        type = classes.unpaidReservation;\r\n    }\r\n\r\n    if (reservation.type == ReservationType.SERVICE)\r\n      type = classes.unavaliable;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <TableCell\r\n          padding=\"none\"\r\n          className={type}\r\n          onClick={() => this.setState({ modal: true })}\r\n        >\r\n          {reservation.customer && <span>{reservation.customer.name}</span>}\r\n          {!reservation.customer && <L10n\r\n            translate=\"ReservationType\"\r\n          >\r\n            {reservation.type}\r\n          </L10n>}\r\n        </TableCell>\r\n\r\n        <EditReservationModal\r\n          reservation={reservation}\r\n          isOpen={this.state.modal}\r\n          onAction={(e) => {\r\n            onChange(e);\r\n            this.setState({ modal: false });\r\n          }}\r\n          onClose={() => this.setState({ modal: false })}\r\n        />\r\n\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  free: {\r\n    ...ReservationStyles.cell,\r\n    backgroundColor: '#fff',\r\n    color: theme.palette.primary.main,\r\n    '&:hover': {\r\n      backgroundColor: '#F3FBF0',\r\n      cursor: 'pointer',\r\n    }\r\n  },\r\n  unpaidReservation: {\r\n    ...ReservationStyles.cell,\r\n    ...ReservationStyles.button,\r\n    backgroundColor: theme.palette.secondary.light,\r\n    color: theme.palette.secondary.contrastText,\r\n  },\r\n  paidReservation: {\r\n    ...ReservationStyles.cell,\r\n    ...ReservationStyles.button,\r\n    backgroundColor: theme.palette.primary.light,\r\n    color: theme.palette.primary.contrastText\r\n  },\r\n  unavaliable: {\r\n    ...ReservationStyles.cell,\r\n    cursor: 'pointer',\r\n    color: theme.palette.secondary.main,\r\n    fontWeight: '700',\r\n    background: 'url(assets/empty.png)'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(AdminReservation);","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport { getHour } from '../../utils';\r\n\r\n\r\nclass ViewReservationModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      errors: []\r\n    }\r\n  }\r\n  makeReservation() {\r\n    return QueryService\r\n      .post(`/schedule/reservations`, this.props.reservation)\r\n      .then(_ => this.props.onAction())\r\n      .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  cancelReservation() {\r\n    return QueryService\r\n      .delete(`/schedule/reservations/${this.props.reservation.id}/cancel`)\r\n      .then(_ => this.props.onAction())\r\n      .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  render() {\r\n    const { reservation, isOpen, onClose, classes } = this.props;\r\n\r\n    return (\r\n      <Dialog open={isOpen} onClose={onClose}>\r\n        <DialogTitle>\r\n          <DialogContentText variant=\"headline\">\r\n            Резервация на\r\n            <span style={{ marginLeft: '.5rem' }}>\r\n              {reservation.court.name}\r\n            </span>\r\n          </DialogContentText>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Typography variant=\"caption\">\r\n            Час:\r\n            <Typography>{getHour(reservation.hour)} - {getHour(reservation.hour + 1)}</Typography>\r\n          </Typography>\r\n          {!reservation.id && <Typography variant=\"caption\">\r\n            Поради възможността от възникване на премествания, запазването на\r\n            корт не ви гарантира на 100%, че ще играете точно на този корт.\r\n          </Typography>}\r\n          {reservation.id && <Typography variant=\"caption\">\r\n            Имате право да откажете часът до 4 часа (8 часа за абонамент) преди неговото начало.\r\n            След това системата отчита вашият час като използван.\r\n            Ако имате абонамент, часът ще ви се брои като използван.\r\n          </Typography>}\r\n\r\n          {this.state.errors && this.state.errors.length > 0\r\n            && <div style={{ margin: '1rem 0', color: 'red' }}>\r\n              {this.state.errors.map((err, index) => {\r\n                return (\r\n                  <div key={index}><em>{index + 1}. {ErrorTexts[err]}</em></div>\r\n                );\r\n              })}\r\n            </div>}\r\n        </DialogContent>\r\n\r\n        {!reservation.id && <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.makeReservation()}>\r\n            Резервиране\r\n          </Button>\r\n          <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>}\r\n\r\n        {reservation.id && <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"outlined\" color=\"secondary\" className={classes.btn} onClick={() => this.cancelReservation()}>\r\n            Отмяна на резервацията\r\n          </Button>\r\n          <Button variant=\"contained\" color=\"secondary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>}\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst ErrorTexts = {\r\n  'exist': 'Резервация за този ден, час и корт вече съществува.',\r\n  'maxAllowedTimeDiff': 'Резервацията не може да бъде отказана, защото остават по-малко часове от минимално допустимите часове за отказ.',\r\n  'reservationInThePast': 'Часът за тази резервация вече е минал.'\r\n};\r\n\r\nconst styles = (theme) => ({\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(ViewReservationModal);","import React from 'react';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport ViewReservationModal from './ViewReservationModal';\r\nimport * as ReservationStyles from './styles';\r\nimport L10n from '../../components/L10n';\r\n\r\nclass UserReservation extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      modal: false\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { reservation, onChange, classes } = this.props;\r\n    let type = classes.free;\r\n\r\n    if (reservation.id)\r\n      type = classes.reserved;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <TableCell\r\n          padding=\"none\"\r\n          className={type}\r\n          onClick={() => this.setState({ modal: true })}\r\n        >\r\n          {reservation.id && <L10n\r\n            translate=\"CustomReservationType\"\r\n          >\r\n            {reservation.type}\r\n          </L10n>}\r\n        </TableCell>\r\n\r\n        <ViewReservationModal\r\n          reservation={reservation}\r\n          isOpen={this.state.modal}\r\n          onAction={(e) => {\r\n            onChange(e);\r\n            this.setState({ modal: false });\r\n          }}\r\n          onClose={() => this.setState({ modal: false })}\r\n        />\r\n\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  free: {\r\n    ...ReservationStyles.cell,\r\n    backgroundColor: '#fff',\r\n    color: theme.palette.primary.main,\r\n    '&:hover': {\r\n      backgroundColor: '#F3FBF0',\r\n      cursor: 'pointer',\r\n    }\r\n  },\r\n  reserved: {\r\n    ...ReservationStyles.cell,\r\n    ...ReservationStyles.button,\r\n    backgroundColor: theme.palette.primary.light,\r\n    color: theme.palette.primary.contrastText,\r\n  },\r\n  unavaliable: {\r\n    ...ReservationStyles.cell,\r\n    background: 'url(assets/empty.png)',\r\n    '&:hover': {\r\n      cursor: 'not-allowed'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(UserReservation);","import React from 'react';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport * as ReservationStyles from './styles';\r\nimport { ReservationType } from '../../enums';\r\n\r\nclass GuestReservation extends React.Component {\r\n  render() {\r\n    const { reservation, available, classes } = this.props;\r\n    let type = classes.free;\r\n    if (reservation.id)\r\n      type = classes.taken;\r\n\r\n    if (!available || reservation.type == ReservationType.SERVICE)\r\n      type = classes.unavaliable;\r\n\r\n    return (\r\n      <TableCell padding=\"none\" className={type}></TableCell>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  free: {\r\n    ...ReservationStyles.cell,\r\n    backgroundColor: '#fff',\r\n    color: theme.palette.primary.main,\r\n  },\r\n  taken: {\r\n    ...ReservationStyles.cell,\r\n    backgroundColor: theme.palette.secondary.light,\r\n    color: theme.palette.secondary.contrastText,\r\n  },\r\n  unavaliable: {\r\n    ...ReservationStyles.cell,\r\n    background: 'url(assets/empty.png)',\r\n    '&:hover': {\r\n      cursor: 'not-allowed'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(GuestReservation);","import React from 'react';\r\n\r\nimport { ApplicationMode, ReservationType } from '../../enums';\r\nimport UserService from '../../services/user.service';\r\nimport AdminReservation from './AdminReservation';\r\nimport UserReservation from './UserReservation';\r\nimport GuestReservation from './GuestReservation';\r\n\r\nclass Reservation extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      userId: null\r\n    };\r\n  }\r\n\r\n  setUserId() {\r\n    UserService.getAuthenticatedUser()\r\n      .then(user => {\r\n        if (user)\r\n          this.setState({ userId: user.id });\r\n        else\r\n          this.setState({ userId: null });\r\n      });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setUserId();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.mode != this.props.mode)\r\n      this.setUserId();\r\n  }\r\n\r\n  render() {\r\n    const { reservation, mode } = this.props;\r\n    const available = reservation.hour <= reservation.court.workingHoursEnd - 1\r\n      && reservation.hour >= reservation.court.workingHoursStart;\r\n\r\n    if (!available)\r\n      return <GuestReservation {...this.props} available={available} />;\r\n\r\n    if (mode == ApplicationMode.ADMIN)\r\n      return <AdminReservation {...this.props} />;\r\n\r\n    if (mode == ApplicationMode.GUEST)\r\n      return <GuestReservation {...this.props} available={available} />\r\n\r\n    if (!reservation.id)\r\n      return <UserReservation {...this.props} />\r\n\r\n    if (reservation.customerId && reservation.customerId == this.state.userId)\r\n      return <UserReservation {...this.props} />\r\n\r\n    return <GuestReservation {...this.props} available={available} />;\r\n  }\r\n}\r\n\r\nexport default Reservation;","import React from 'react';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport * as ReservationStyles from './styles';\r\nimport { l10n_text } from '../../components/L10n';\r\nimport { ReservationType } from '../../enums';\r\n\r\nclass ShuffleItem extends React.Component {\r\n\r\n  select() {\r\n    const { reservation, shuffle, onSelect, onUnselect } = this.props;\r\n    const index = this.findIndex(reservation, shuffle);\r\n\r\n    if (index != -1)\r\n      onUnselect(index);\r\n    else onSelect(reservation);\r\n  }\r\n\r\n  findIndex(reservation, shuffle) {\r\n    return shuffle.findIndex(e => e.date == reservation.date && e.hour == reservation.hour && e.courtId == reservation.courtId);\r\n  }\r\n\r\n  render() {\r\n    const { reservation, shuffle, classes } = this.props;\r\n    const available = reservation.hour <= reservation.court.workingHoursEnd - 1\r\n      && reservation.hour >= reservation.court.workingHoursStart;\r\n\r\n    if (!available)\r\n      return <TableCell padding=\"none\" className={classes.unavaliable}></TableCell>;\r\n\r\n    let type = classes.free;\r\n\r\n    if (this.findIndex(reservation, shuffle) != -1)\r\n      type = classes.selected;\r\n\r\n    if (!reservation.id)\r\n      return (\r\n        <TableCell padding=\"none\" className={type} onClick={() => this.select()}>\r\n        </TableCell>\r\n      );\r\n\r\n    if (type == classes.free)\r\n      type = classes.taken\r\n\r\n    if (reservation.type == ReservationType.USER || reservation.type == ReservationType.SUBSCRIPTION)\r\n      return (\r\n        <TableCell padding=\"none\" className={type} onClick={() => this.select()}>\r\n          {type != classes.free && <span>{reservation.customer.name}</span>}\r\n        </TableCell>\r\n      );\r\n\r\n    return (\r\n      <TableCell padding=\"none\" className={type} onClick={() => this.select()}>\r\n        {type != classes.free\r\n          && <span>{l10n_text(reservation.type, \"ReservationType\")}</span>}\r\n      </TableCell>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst styles = (theme) => ({\r\n  free: {\r\n    ...ReservationStyles.cell,\r\n    ...ReservationStyles.button,\r\n    backgroundColor: '#fff',\r\n    color: theme.palette.primary.main,\r\n  },\r\n  taken: {\r\n    ...ReservationStyles.cell,\r\n    ...ReservationStyles.button,\r\n    backgroundColor: theme.palette.secondary.light,\r\n    color: theme.palette.secondary.contrastText,\r\n  },\r\n  unavaliable: {\r\n    ...ReservationStyles.cell,\r\n    background: 'url(assets/empty.png)',\r\n    '&:hover': {\r\n      cursor: 'not-allowed'\r\n    }\r\n  },\r\n  service: {\r\n    ...ReservationStyles.cell,\r\n    ...ReservationStyles.button,\r\n    color: theme.palette.secondary.main,\r\n    fontWeight: '700',\r\n    background: 'url(assets/empty.png)'\r\n  },\r\n  selected: {\r\n    ...ReservationStyles.cell,\r\n    ...ReservationStyles.button,\r\n    backgroundColor: theme.palette.primary.main,\r\n    color: theme.palette.primary.contrastText\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(ShuffleItem);","import moment from 'moment';\r\nimport React from 'react';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { ApplicationMode } from '../../enums';\r\n\r\nclass DateComponent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      selected: new Date().getDate() - 1,\r\n      previousSelected: null\r\n    };\r\n    this.weekDays = ['нед', 'пон', 'втор', 'ср', 'четв', 'пет', 'съб'];\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ selected: this.props.day - 1 });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.month != this.props.month || prevProps.year != this.props.year) {\r\n      if (this.state.previousSelected\r\n        && this.state.previousSelected.get('year') == this.props.year\r\n        && this.state.previousSelected.get('month') == this.props.month) {\r\n        this.props.onChange(this.state.previousSelected)\r\n        this.setState({\r\n          selected: this.state.previousSelected.get('date') - 1,\r\n          previousSelected: null\r\n        });\r\n      }\r\n\r\n      else if (this.state.previousSelected == null)\r\n        this.setState({\r\n          selected: false,\r\n          previousSelected: moment({ year: prevProps.year, month: prevProps.month, date: this.state.selected + 1 })\r\n        });\r\n      else\r\n        this.setState({ selected: false });\r\n    }\r\n  }\r\n\r\n  getLabel(day) {\r\n    let date = new Date(this.props.year, this.props.month, day);\r\n\r\n    return (\r\n      <div>\r\n        {day < 10 ? '0' : ''}\r\n        {day}\r\n        <div>{this.weekDays[date.getDay()]}</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getDays() {\r\n    const { year, month } = this.props;\r\n\r\n    const monthSizes = [31,\r\n      (year % 100 != 0\r\n        && (year % 4 == 0\r\n          || year % 400 == 0) ? 29 : 28),\r\n      31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\n\r\n    const start = 1;\r\n    const end = monthSizes[month];\r\n\r\n    return [...new Array(end - start + 1).keys()].map(k => k + start);\r\n  }\r\n\r\n  isDisabled(day) {\r\n    if (this.props.mode == ApplicationMode.ADMIN)\r\n      return false;\r\n    const { year, month, availiableDaysAhead } = this.props;\r\n    const MS_PER_DAY = 1000 * 60 * 60 * 24;\r\n\r\n    // Discard the time and time-zone information.\r\n    const targetDate = new Date(year, month, day);\r\n    const today = new Date();\r\n    const diff = Math.floor((today - targetDate) / MS_PER_DAY);\r\n    return diff > 0 || diff < -availiableDaysAhead;\r\n  }\r\n\r\n  isToday(day) {\r\n    const { year, month } = this.props;\r\n    const today = new Date();\r\n    return year == today.getFullYear() && month == today.getMonth() && day == today.getDate();\r\n  }\r\n\r\n  render() {\r\n    const { year, month, classes, onChange } = this.props;\r\n    const today = new Date().getDate();\r\n\r\n    return (\r\n      <Tabs\r\n        classes={{\r\n          root: classes.tabsRoot,\r\n          scroller: classes.tabsScroller,\r\n          indicator: classes.tabsIndicator,\r\n          scrollButtons: classes.tabsScrollButtons\r\n        }}\r\n        value={this.state.selected}\r\n        onChange={(_, value) => {\r\n          this.setState({ selected: value });\r\n          onChange(moment({ year, month, date: value + 1 }));\r\n        }}\r\n        scrollable\r\n        scrollButtons=\"on\">\r\n        {this.getDays().map(day => {\r\n          let rootClass = classes.tab;\r\n          if (this.isToday(day) && this.state.selected != (today - 1))\r\n            rootClass = rootClass + ` ${classes.todayTab}`;\r\n\r\n          return (\r\n            <Tab\r\n              classes={{\r\n                root: rootClass,\r\n                selected: classes.selectedTab,\r\n                disabled: classes.disabledTab,\r\n                labelContainer: classes.labelContainer\r\n              }}\r\n              disabled={this.isDisabled(day)}\r\n              key={day}\r\n              label={this.getLabel(day)}\r\n            />\r\n          );\r\n        })}\r\n      </Tabs>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => {\r\n  return {\r\n    tabsRoot: {\r\n    },\r\n    labelContainer: {\r\n      padding: '.5rem 0'\r\n    },\r\n    tab: {\r\n      backgroundColor: 'white',\r\n      color: theme.palette.primary.dark,\r\n      [theme.breakpoints.down('xl')]: {\r\n        width: '60px',\r\n        minWidth: '0px',\r\n        minHeight: '0px',\r\n        fontWeight: 700,\r\n        border: '.5px solid lightgrey',\r\n      }\r\n    },\r\n    selectedTab: {\r\n      backgroundColor: theme.palette.primary.main,\r\n      color: theme.palette.primary.contrastText,\r\n      border: 'none'\r\n    },\r\n    todayTab: {\r\n      backgroundColor: theme.palette.secondary.main,\r\n      color: theme.palette.primary.contrastText,\r\n      border: 'none'\r\n    },\r\n    disabledTab: {\r\n      color: 'grey',\r\n      fontWeight: 500,\r\n      backgroundColor: 'whitesmoke'\r\n    },\r\n    tabsScroller: {\r\n      [theme.breakpoints.up('md')]: {\r\n        overflow: 'hidden'\r\n      }\r\n    },\r\n    tabsIndicator: {\r\n      backgroundColor: theme.palette.primary.main\r\n    },\r\n    tabsScrollButtons: {\r\n      color: theme.palette.primary.main,\r\n      flexBasis: '30px'\r\n    }\r\n  };\r\n};\r\n\r\nexport default withStyles(styles)(DateComponent);","import moment from 'moment';\r\nimport React from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport UserService from '../../services/user.service';\r\nimport DateComponent from './DateComponent';\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    paddingLeft: '1.3rem',\r\n    paddingRight: '2.3rem',\r\n    display: 'flex',\r\n    [theme.breakpoints.down('xs')]: {\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  formControl: {\r\n    width: '120px',\r\n    margin: '.5rem',\r\n    [theme.breakpoints.down('xs')]: {\r\n      margin: '.5rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nclass Calendar extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const today = moment().startOf('date');\r\n    this.state = {\r\n      year: today.get('year'),\r\n      month: today.get('month'),\r\n      day: today.get('date'),\r\n      date: today\r\n    };\r\n    this.years = [2016, 2017, 2018, 2019];\r\n    this.monts = ['Януари', 'Февруари', 'Март', 'Април', 'Май', 'Юни', 'Юли', 'Август', 'Септември', 'Октомври', 'Ноември', 'Декември'];\r\n\r\n    this.handleChange = (prop) => (e) => {\r\n      const state = this.state;\r\n      state[prop] = e.target.value;\r\n      this.setState(state);\r\n      if (this.props.emitDateOnAnyChange)\r\n        this.props.onChange(moment(state.date).set(prop, state[prop]));\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      year: this.props.value.get('year'),\r\n      month: this.props.value.get('month'),\r\n      day: this.props.value.get('date')\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { classes, onChange } = this.props;\r\n    const { year, month, day } = this.state;\r\n\r\n    return (\r\n      <div style={{ marginBottom: '1rem' }}>\r\n        <div className={classes.root}>\r\n          <FormControl className={classes.formControl}>\r\n            <Select\r\n              value={month}\r\n              onChange={this.handleChange('month')}\r\n            >\r\n              {this.monts.map((month, index) => {\r\n                return (\r\n                  <MenuItem key={index} value={index}>{month}</MenuItem>\r\n                );\r\n              })}\r\n            </Select>\r\n          </FormControl>\r\n          <FormControl className={classes.formControl}>\r\n            <Select\r\n              value={year}\r\n              onChange={this.handleChange('year')}\r\n            >\r\n              {this.years.map(year => {\r\n                return (\r\n                  <MenuItem key={year} value={year}>{year}</MenuItem>\r\n                );\r\n              })}\r\n            </Select>\r\n          </FormControl>\r\n        </div>\r\n\r\n        <UserService.WithApplicationMode>\r\n          {mode => <DateComponent\r\n            year={year}\r\n            month={month}\r\n            day={day}\r\n            availiableDaysAhead={14}\r\n            mode={mode}\r\n            onChange={(date) => {\r\n              this.setState({ date });\r\n              return onChange(date);\r\n            }}\r\n          />}\r\n        </UserService.WithApplicationMode>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(Calendar);","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    display: 'inline-flex',\r\n    flexDirection: 'column'\r\n  },\r\n  item: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    marginBottom: '.3rem',\r\n    '& div': {\r\n      width: '100px',\r\n      height: '20px',\r\n      border: '1px solid lightgrey'\r\n    }\r\n  },\r\n  reserved: {\r\n    backgroundColor: theme.palette.primary.light\r\n  },\r\n  taken: {\r\n    backgroundColor: theme.palette.secondary.light\r\n  },\r\n  unavailiable: {\r\n    background: 'url(assets/empty.png)'\r\n  }\r\n});\r\n\r\nclass Legend extends React.Component {\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        <div className={classes.item}>\r\n          <div></div>\r\n          <Typography variant=\"caption\"> - свободен час</Typography>\r\n        </div>\r\n        <div className={classes.item}>\r\n          <div className={classes.reserved}></div>\r\n          <Typography variant=\"caption\"> - резервиран от потребителя</Typography>\r\n        </div>\r\n        <div className={classes.item}>\r\n          <div className={classes.taken}></div>\r\n          <Typography variant=\"caption\"> - зает час</Typography>\r\n        </div>\r\n        <div className={classes.item}>\r\n          <div className={classes.unavailiable}></div>\r\n          <Typography variant=\"caption\"> - затворено игрище</Typography>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(Legend);","import moment from 'moment';\r\nimport React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport ReplayIcon from '@material-ui/icons/Replay';\r\nimport ShuffleIcon from '@material-ui/icons/Shuffle';\r\nimport { Button } from '@material-ui/core';\r\n\r\nimport QueryService from '../services/query.service';\r\nimport UserService from '../services/user.service';\r\nimport Reservation from './reservation/Reservation';\r\nimport ShuffleItem from './reservation/ShuffleItem';\r\nimport Calendar from '../components/calendar/Calendar';\r\nimport Legend from './Legend';\r\nimport ConfirmationDialog from '../components/ConfirmationDialog';\r\nimport { getHour } from '../utils';\r\nimport { ApplicationMode } from '../enums';\r\nimport { catchEvent } from '../services/events.service';\r\n\r\nconst scrollButton = (theme) => ({\r\n  zIndex: 1100,\r\n  backgroundColor: theme.palette.primary.main,\r\n  color: theme.palette.primary.contrastText,\r\n  position: 'absolute',\r\n  boxShadow: `0 0 20px ${theme.palette.primary.dark}`,\r\n  borderRadius: '50%',\r\n  padding: '8px',\r\n  display: 'flex',\r\n  alignItems: 'center',\r\n  opacity: '.9'\r\n});\r\n\r\nconst styles = (theme) => ({\r\n  hours: {\r\n    width: '10px',\r\n    textAlign: 'center'\r\n  },\r\n  disabled: {\r\n    cursor: 'not-allowed',\r\n    opacity: .5\r\n  },\r\n  scrollLeft: {\r\n    ...scrollButton(theme),\r\n    top: '50%',\r\n    left: '5px'\r\n  },\r\n  scrollRight: {\r\n    ...scrollButton(theme),\r\n    top: '50%',\r\n    right: '5px'\r\n  }\r\n});\r\n\r\n\r\nclass Schedule extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      administrator: null,\r\n      counter: 0,\r\n      season: null,\r\n      courts: [],\r\n      reservations: [],\r\n      date: moment().startOf('date'),\r\n      shuffle: null\r\n    };\r\n\r\n    const rootRef = document.getElementById('root');\r\n    rootRef.onscroll = () => {\r\n      if (!this.tableRef)\r\n        return;\r\n\r\n      const needScrollBtns = rootRef.clientWidth <= 600;\r\n      const tableInViewport = rootRef.scrollTop + 200 >= this.tableRef.offsetTop;\r\n\r\n      if (needScrollBtns && tableInViewport)\r\n        this.btnContainerRef.style.display = 'block';\r\n      else\r\n        this.btnContainerRef.style.display = 'none';\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    catchEvent('login', () => this.getAdministrator());\r\n    this.getAdministrator();\r\n    this.getConfig();\r\n    this.getData(this.state.date);\r\n  }\r\n\r\n  getAdministrator() {\r\n    return UserService.getAuthenticatedUser()\r\n      .then(user => this.setState({ administrator: user }));\r\n  }\r\n\r\n  getConfig() {\r\n    return QueryService\r\n      .get(`/schedule/config`)\r\n      .then(config => this.setState(config));\r\n  }\r\n\r\n  getData(date) {\r\n    return QueryService\r\n      .post(`/schedule/reservations/filter`, { date: date.format('YYYY-MM-DD') })\r\n      .then(reservations => this.setState({ reservations }));\r\n  }\r\n\r\n  getReservation(hour, court) {\r\n    const sameReservation = (e) => {\r\n      return e.courtId == court.id && e.hour == hour\r\n    };\r\n\r\n    const existing = this.state.reservations.find(e => sameReservation(e));\r\n    return (existing || this.constructReservation(this.state.date, hour, court));\r\n  }\r\n\r\n  shuffle() {\r\n    const shuffle = this.state.shuffle;\r\n    if (!shuffle || shuffle.length < 2)\r\n      return;\r\n\r\n    this.setState({ shuffleErrors: null });\r\n\r\n    return QueryService\r\n      .post('/schedule/shuffle', shuffle)\r\n      .then(_ => {\r\n        this.getData(this.state.date);\r\n        this.setState({ shuffle: null });\r\n      })\r\n      .catch(err => this.setState({ shuffleErrors: err }));\r\n  }\r\n\r\n  shuffleOnSelect(item) {\r\n    //console.log('select', item);\r\n    const shuffle = this.state.shuffle;\r\n    shuffle.unshift(item);\r\n    shuffle.splice(2, 1);\r\n    this.setState({ shuffle });\r\n  }\r\n\r\n  shuffleOnUnselect(index) {\r\n    //console.log('unselect', index);\r\n    const shuffle = this.state.shuffle;\r\n    shuffle.splice(index, 1);\r\n    this.setState({ shuffle });\r\n  }\r\n\r\n  constructReservation(date, hour, court) {\r\n    return {\r\n      date: date.format('YYYY-MM-DD'),\r\n      hour: hour,\r\n      court: court,\r\n      courtId: court.id,\r\n      season: this.state.season,\r\n      seasonId: this.state.season.id,\r\n      administrator: this.state.administrator,\r\n      info: '',\r\n      type: '',\r\n      payments: []\r\n    }\r\n  }\r\n\r\n  scroll(mode) {\r\n    if (mode === 'left')\r\n      this.tableRef.scrollLeft = this.tableRef.scrollLeft - 300;\r\n    if (mode === 'right')\r\n      this.tableRef.scrollLeft = this.tableRef.scrollLeft + 300;\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { season, courts, date } = this.state;\r\n\r\n    if (!season)\r\n      return <Paper style={{ padding: '1rem' }} className=\"container\">\r\n        <Typography variant=\"headline\" align=\"center\" color=\"secondary\">Няма текущ сезон</Typography>\r\n      </Paper>\r\n\r\n    return (\r\n      <UserService.WithApplicationMode>\r\n        {mode => <div className=\"container\">\r\n          <Paper style={{ padding: '1rem' }}>\r\n            <Typography align=\"center\" variant=\"headline\" gutterBottom={true}>\r\n              График - {date.format('DD.MM.YYYY')}\r\n            </Typography>\r\n            <Calendar\r\n              value={date}\r\n              onChange={date => {\r\n                this.setState({ date, shuffle: null });\r\n                this.getData(date);\r\n              }}\r\n            />\r\n\r\n            <Legend />\r\n            <div>\r\n              <Button variant=\"outlined\" color=\"primary\" size=\"small\"\r\n                style={{ marginRight: '.3rem' }}\r\n                onClick={() => this.getData(date)}\r\n              >\r\n                <ReplayIcon />\r\n                <span style={{ marginLeft: '.3rem' }}>Презареди</span>\r\n              </Button>\r\n\r\n              {mode == ApplicationMode.ADMIN\r\n                && <React.Fragment>\r\n                  {this.state.shuffle\r\n                    && <React.Fragment>\r\n                      <ConfirmationDialog\r\n                        title=\"Разместване на резервации\"\r\n                        body={<Typography>Сигурни ли сте че искате да направите разместването?</Typography>}\r\n                        onAccept={() => this.shuffle()}\r\n                      >\r\n                        <Button variant=\"contained\" color=\"primary\">\r\n                          Запис\r\n                      </Button>\r\n                      </ConfirmationDialog>\r\n                      <Button variant=\"outlined\" color=\"primary\"\r\n                        style={{ marginLeft: '.3rem' }}\r\n                        onClick={() => this.setState({ shuffle: null, shuffleErrors: null })}\r\n                      >\r\n                        Отказ\r\n                      </Button>\r\n                    </React.Fragment>}\r\n                  {!this.state.shuffle && <Button variant=\"outlined\" color=\"primary\" size=\"small\" onClick={() => this.setState({ shuffle: [] })}>\r\n                    <ShuffleIcon />\r\n                    Разместване\r\n                  </Button>}\r\n                </React.Fragment>}\r\n            </div>\r\n\r\n            {this.state.shuffleErrors\r\n              && <div style={{ margin: '1rem 0', color: 'red' }}>\r\n                <span><em>{ErrorTexts[this.state.shuffleErrors.message]}</em></span>\r\n              </div>}\r\n\r\n\r\n\r\n            <div style={{ overflowX: 'auto', scrollBehavior: 'smooth' }} ref={ref => this.tableRef = ref}>\r\n\r\n              <div ref={ref => this.btnContainerRef = ref} style={{ display: 'none' }}>\r\n                <div className={classes.scrollLeft} onClick={() => this.scroll('left')} >\r\n                  <ChevronLeftIcon />\r\n                </div>\r\n\r\n                <div className={classes.scrollRight} onClick={() => this.scroll('right')}>\r\n                  <ChevronRightIcon />\r\n                </div>\r\n              </div>\r\n\r\n              <Table style={{ minWidth: '600px' }} >\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell padding=\"none\" style={{ textAlign: 'center' }}>Час\\Корт</TableCell>\r\n                    {courts.map(court => {\r\n                      return (\r\n                        <TableCell\r\n                          padding=\"none\"\r\n                          style={{ textAlign: 'center' }}\r\n                          key={court.id}\r\n                        >\r\n                          {court.name}\r\n                        </TableCell>\r\n                      );\r\n                    })}\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {getRange(season.workingHoursStart, season.workingHoursEnd - 1).map(hour => {\r\n                    return (\r\n                      <TableRow key={hour}>\r\n                        <TableCell padding=\"none\"\r\n                          classes={{\r\n                            root: classes.hours\r\n                          }}\r\n                        >\r\n                          {getHour(hour)}\r\n                        </TableCell>\r\n\r\n                        {courts.map(court => {\r\n                          if (!this.state.shuffle)\r\n                            return (\r\n                              <Reservation\r\n                                mode={mode}\r\n                                key={court.id}\r\n                                season={this.state.season}\r\n                                reservation={this.getReservation(hour, court)}\r\n                                onChange={_ => this.getData(date)}\r\n                              />\r\n                            );\r\n                          else\r\n                            return (\r\n                              <ShuffleItem\r\n                                key={court.id}\r\n                                shuffle={this.state.shuffle}\r\n                                reservation={this.getReservation(hour, court)}\r\n                                onSelect={(e) => this.shuffleOnSelect(e)}\r\n                                onUnselect={(e) => this.shuffleOnUnselect(e)}\r\n                              />\r\n                            )\r\n                        })}\r\n                      </TableRow>\r\n                    );\r\n                  })}\r\n                </TableBody>\r\n              </Table>\r\n            </div>\r\n          </Paper>\r\n        </div>}\r\n      </UserService.WithApplicationMode>\r\n    );\r\n  }\r\n}\r\n\r\nfunction getRange(start, end) {\r\n  if (!start || !end)\r\n    return [];\r\n  return [...new Array(end - start + 1).keys()].map(e => e + start);\r\n}\r\n\r\nconst ErrorTexts = {\r\n  'invalid': 'Моля изберете две полета за резервация',\r\n  'invalidTime': 'Не може да резмествате вече минали резервации'\r\n};\r\n\r\nexport default withStyles(styles)(Schedule);","import React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport { getHour } from '../../utils';\r\n\r\nconst styles = () => ({\r\n  card: {\r\n    width: '250px',\r\n    margin: '1rem',\r\n    padding: '1rem',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between'\r\n  },\r\n  cardActions: {\r\n    display: 'flex',\r\n    justifyContent: 'flex-start'\r\n  },\r\n  cardContent: {\r\n    paddingBottom: '0'\r\n  }\r\n});\r\n\r\nclass CourtItem extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      mode: 'view'\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.props.court.id)\r\n      this.setState({ mode: 'create' });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.court != this.props.court)\r\n      if (!this.props.court.id)\r\n        this.setState({ mode: 'create' });\r\n  }\r\n\r\n  handleCancel() {\r\n    if (this.state.mode == 'edit')\r\n      this.setState({ mode: 'view' });\r\n    else this.props.onCreateCancel();\r\n  }\r\n\r\n  render() {\r\n    const { mode } = this.state;\r\n    const { classes, court } = this.props;\r\n\r\n    if (mode != 'view')\r\n      return <CourtEdit\r\n        mode={mode}\r\n        court={court}\r\n        onChange={model => {\r\n          this.setState({ mode: 'view' });\r\n          this.props.onChange(model);\r\n        }}\r\n        onCancel={() => this.handleCancel()}\r\n      />;\r\n    else\r\n      return (\r\n        <Card classes={{ root: classes.card }} style={{ opacity: court.isActive ? 1 : .5 }}>\r\n          <CardContent classes={{ root: classes.cardContent }}>\r\n            <Typography variant=\"title\" style={{ display: 'flex', alignItems: 'center' }}>\r\n              {court.name}\r\n              {!court.isActive && <Typography variant=\"caption\">(неактивен)</Typography>}\r\n            </Typography>\r\n            <Typography variant=\"caption\">{court.info}</Typography>\r\n            <Typography variant=\"subheading\" style={{ paddingRight: '1rem' }}>\r\n              Работно време:\r\n              <Typography>{getHour(court.workingHoursStart)} - {getHour(court.workingHoursEnd)}</Typography>\r\n            </Typography>\r\n          </CardContent>\r\n          <CardActions classes={{ root: classes.cardActions }}>\r\n            <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.setState({ mode: 'edit' })}>Промяна</Button>\r\n          </CardActions>\r\n        </Card >\r\n      );\r\n  }\r\n}\r\n\r\nclass CourtEdit extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: null,\r\n      name: '',\r\n      info: '',\r\n      isActive: true,\r\n      workingHoursStart: '',\r\n      workingHoursEnd: ''\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState(this.props.court);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.court != this.props.court)\r\n      this.setState(this.props.court);\r\n  }\r\n\r\n  cancel() {\r\n    this.setState(this.props.court);\r\n    this.props.onCancel();\r\n  }\r\n\r\n  save() {\r\n    if (this.state.id)\r\n      return QueryService\r\n        .post(`/schedule/courts/${this.state.id}`, this.state)\r\n        .then(e => this.props.onChange(e))\r\n        .catch(err => console.log('ERR:', err));\r\n    else\r\n      return QueryService\r\n        .post(`/schedule/courts`, this.state)\r\n        .then(e => this.props.onChange(e))\r\n        .catch(err => console.log('ERR:', err));\r\n  }\r\n\r\n  render() {\r\n    const { mode } = this.props;\r\n\r\n    return (\r\n      <Paper style={{ flexBasis: '250px', display: 'flex', flexDirection: 'column', padding: '2rem' }}>\r\n        {mode == 'create' && <Typography align=\"center\" variant=\"headline\">Нов корт</Typography>}\r\n        {mode == 'edit' && <Typography align=\"center\" variant=\"headline\">Промяна на корт</Typography>}\r\n\r\n\r\n        <FormControlLabel\r\n          control={\r\n            <Switch\r\n              checked={this.state.isActive}\r\n              onChange={e => this.setState({ isActive: e.target.value === 'true' })}\r\n              value={this.state.isActive ? 'false' : 'true'}\r\n              color=\"primary\"\r\n            />\r\n          }\r\n          label=\"Активен\"\r\n        />\r\n\r\n        <TextField\r\n          id=\"name\"\r\n          label=\"Наименование\"\r\n          value={this.state.name}\r\n          onChange={(e) => this.setState({ name: e.target.value })}\r\n        />\r\n        <TextField\r\n          id=\"info\"\r\n          label=\"Информация\"\r\n          multiline\r\n          rowsMax=\"4\"\r\n          value={this.state.info}\r\n          onChange={(e) => this.setState({ info: e.target.value })}\r\n        />\r\n\r\n        <TextField\r\n          id=\"workingHoursStart\"\r\n          label=\"Работно време ОТ\"\r\n          type=\"number\"\r\n          value={this.state.workingHoursStart}\r\n          onChange={(e) => this.setState({ workingHoursStart: e.target.value })}\r\n        />\r\n\r\n        <TextField\r\n          id=\"workingHoursEnd\"\r\n          label=\"Работно време ДО\"\r\n          type=\"number\"\r\n          value={this.state.workingHoursEnd}\r\n          onChange={(e) => this.setState({ workingHoursEnd: e.target.value })}\r\n        />\r\n\r\n        {this.props.mode == 'create' && <div style={{ margin: '1rem 0 0 0' }}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem .5rem 0 0' }}\r\n            onClick={() => this.save()}\r\n          >\r\n            Създаване\r\n          </Button>\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem 0 0 0' }}\r\n            onClick={() => this.cancel()}\r\n          >\r\n            Отказ\r\n          </Button>\r\n        </div>}\r\n\r\n        {this.props.mode == 'edit' && <div>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem .5rem 0 0' }}\r\n            onClick={() => this.save()}\r\n          >\r\n            Запис\r\n          </Button>\r\n\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem 0 0 0' }}\r\n            onClick={() => this.cancel()}\r\n          >\r\n            Отказ\r\n          </Button>\r\n        </div>}\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(CourtItem);","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport CourtItem from './CourtItem';\r\n\r\nconst styles = () => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'center'\r\n  }\r\n});\r\n\r\nclass Courts extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      courts: []\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    return QueryService\r\n      .get(`/schedule/courts`)\r\n      .then(e => this.setState({ courts: e }));\r\n  }\r\n\r\n  updateModel(model, index) {\r\n    const courts = this.state.courts;\r\n    courts[index] = model;\r\n    this.setState({ courts });\r\n  }\r\n\r\n  addCourt() {\r\n    const courts = this.state.courts;\r\n    if (courts.length > 0 && !courts[0].id)\r\n      return;\r\n    const court = {\r\n      info: '',\r\n      name: '',\r\n      isActive: true,\r\n      workingHoursStart: '',\r\n      workingHoursEnd: ''\r\n    };\r\n\r\n\r\n    courts.unshift(court);\r\n\r\n    this.setState({ courts: courts });\r\n  }\r\n\r\n  removeCourt(index) {\r\n    const courts = this.state.courts;\r\n    courts.splice(index, 1);\r\n    this.setState({ courts: courts });\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <Button variant=\"contained\" size=\"medium\" color=\"primary\" onClick={() => this.addCourt()} style={{ marginBottom: '.5rem' }}>\r\n          Добави корт\r\n        </Button>\r\n        <div className={classes.root}>\r\n          {this.state.courts.map((court, index) => {\r\n            return (\r\n              <CourtItem\r\n                key={court.id || 0}\r\n                court={court}\r\n                onChange={model => this.updateModel(model, index)}\r\n                onCreateCancel={() => this.removeCourt(index)}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(Courts);","import React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport DatePicker from 'material-ui-pickers/DatePicker';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport { getHour } from '../../utils';\r\n\r\nconst styles = () => ({\r\n  card: {\r\n    width: '250px',\r\n    margin: '1rem',\r\n    padding: '1rem',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between'\r\n  },\r\n  cardActions: {\r\n    display: 'flex',\r\n    justifyContent: 'flex-start'\r\n  },\r\n  cardContent: {\r\n    paddingBottom: '0'\r\n  }\r\n});\r\n\r\nclass SeasonItem extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      mode: 'view'\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.props.season.id)\r\n      this.setState({ mode: 'create' });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.season != this.props.season)\r\n      if (!this.props.season.id)\r\n        this.setState({ mode: 'create' });\r\n  }\r\n\r\n  handleCancel() {\r\n    if (this.state.mode == 'edit')\r\n      this.setState({ mode: 'view' });\r\n    else this.props.onCreateCancel();\r\n  }\r\n\r\n  render() {\r\n    const { mode } = this.state;\r\n    const { classes, season } = this.props;\r\n\r\n    if (mode != 'view')\r\n      return <SeasonEdit\r\n        mode={mode}\r\n        season={season}\r\n        onChange={model => {\r\n          this.setState({ mode: 'view' });\r\n          this.props.onChange(model);\r\n        }}\r\n        onCancel={() => this.handleCancel()}\r\n      />;\r\n    else\r\n      return (\r\n        <Card classes={{ root: classes.card }}>\r\n          <CardContent classes={{ root: classes.cardContent }}>\r\n            <Typography variant=\"title\" style={{ display: 'flex', alignItems: 'center' }}>\r\n              {season.name}\r\n            </Typography>\r\n            <Typography variant=\"caption\">{season.info}</Typography>\r\n            <Typography style={{ margin: '.3rem 0' }}>\r\n              {new Date(season.seasonStart).toLocaleDateString()} - {new Date(season.seasonEnd).toLocaleDateString()}\r\n            </Typography>\r\n            <Typography variant=\"subheading\" style={{ paddingRight: '1rem' }}>\r\n              Работно време:\r\n              <Typography>{getHour(season.workingHoursStart)} - {getHour(season.workingHoursEnd)}</Typography>\r\n            </Typography>\r\n          </CardContent>\r\n          <CardActions classes={{ root: classes.cardActions }}>\r\n            <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.setState({ mode: 'edit' })}>Промяна</Button>\r\n          </CardActions>\r\n        </Card >\r\n      );\r\n  }\r\n}\r\n\r\nclass SeasonEdit extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: null,\r\n      name: '',\r\n      info: '',\r\n      seasonStart: null,\r\n      seasonEnd: null,\r\n      workingHoursStart: '',\r\n      workingHoursEnd: '',\r\n      isActive: true\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState(this.props.season);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.season != this.props.season)\r\n      this.setState(this.props.season);\r\n  }\r\n\r\n  cancel() {\r\n    this.setState(this.props.season);\r\n    this.props.onCancel();\r\n  }\r\n\r\n  save() {\r\n    if (this.state.id)\r\n      return QueryService\r\n        .post(`/schedule/seasons/${this.state.id}`, this.state)\r\n        .then(e => this.props.onChange(e))\r\n        .catch(err => console.log('ERR:', err));\r\n    else\r\n      return QueryService\r\n        .post(`/schedule/seasons`, this.state)\r\n        .then(e => this.props.onChange(e))\r\n        .catch(err => console.log('ERR:', err));\r\n  }\r\n\r\n  render() {\r\n    const { mode } = this.props;\r\n\r\n    return (\r\n      <Paper style={{ flexBasis: '250px', display: 'flex', flexDirection: 'column', padding: '2rem' }}>\r\n        {mode == 'create' && <Typography align=\"center\" variant=\"headline\">Нов сезон</Typography>}\r\n        {mode == 'edit' && <Typography align=\"center\" variant=\"headline\">Промяна на сезон</Typography>}\r\n\r\n        <TextField\r\n          id=\"name\"\r\n          label=\"Наименование\"\r\n          value={this.state.name}\r\n          onChange={(e) => this.setState({ name: e.target.value })}\r\n        />\r\n        <TextField\r\n          id=\"info\"\r\n          label=\"Информация\"\r\n          multiline\r\n          rowsMax=\"4\"\r\n          value={this.state.info}\r\n          onChange={(e) => this.setState({ info: e.target.value })}\r\n        />\r\n\r\n        <DatePicker\r\n          autoOk\r\n          label=\"Начало на сезона\"\r\n          labelFunc={(date) => date ? new Date(date).toLocaleDateString() : ''}\r\n          clearable\r\n          fullWidth={true}\r\n          value={this.state.seasonStart}\r\n          onChange={value => this.setState({ seasonStart: value })}\r\n        />\r\n\r\n        <DatePicker\r\n          autoOk\r\n          label=\"Край на сезона\"\r\n          labelFunc={(date) => date ? new Date(date).toLocaleDateString() : ''}\r\n          clearable\r\n          fullWidth={true}\r\n          value={this.state.seasonEnd}\r\n          onChange={value => this.setState({ seasonEnd: value })}\r\n        />\r\n\r\n        <TextField\r\n          id=\"workingHoursStart\"\r\n          label=\"Работно време ОТ\"\r\n          type=\"number\"\r\n          value={this.state.workingHoursStart}\r\n          onChange={(e) => this.setState({ workingHoursStart: e.target.value })}\r\n        />\r\n\r\n        <TextField\r\n          id=\"workingHoursEnd\"\r\n          label=\"Работно време ДО\"\r\n          type=\"number\"\r\n          value={this.state.workingHoursEnd}\r\n          onChange={(e) => this.setState({ workingHoursEnd: e.target.value })}\r\n        />\r\n\r\n        {this.props.mode == 'create' && <div style={{ margin: '1rem 0 0 0' }}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem .5rem 0 0' }}\r\n            onClick={() => this.save()}\r\n          >\r\n            Създаване\r\n          </Button>\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem 0 0 0' }}\r\n            onClick={() => this.cancel()}\r\n          >\r\n            Отказ\r\n          </Button>\r\n        </div>}\r\n\r\n        {this.props.mode == 'edit' && <div>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem .5rem 0 0' }}\r\n            onClick={() => this.save()}\r\n          >\r\n            Запис\r\n          </Button>\r\n\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem 0 0 0' }}\r\n            onClick={() => this.cancel()}\r\n          >\r\n            Отказ\r\n          </Button>\r\n        </div>}\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(SeasonItem);","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport SeasonItem from './SeasonItem';\r\nimport QueryService from '../../services/query.service';\r\n\r\nconst styles = () => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'center'\r\n  }\r\n});\r\n\r\nclass Seasons extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      seasons: []\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    return QueryService\r\n      .get(`/schedule/seasons`)\r\n      .then(e => this.setState({ seasons: e }));\r\n  }\r\n\r\n  updateModel(model, index) {\r\n    const seasons = this.state.seasons;\r\n    seasons[index] = model;\r\n    this.setState({ seasons });\r\n  }\r\n\r\n  addSeason() {\r\n    const seasons = this.state.seasons;\r\n    if (seasons.length > 0 && !seasons[0].id)\r\n      return;\r\n\r\n    const season = {\r\n      info: '',\r\n      name: '',\r\n      workingHoursStart: '',\r\n      workingHoursEnd: ''\r\n    };\r\n\r\n    seasons.unshift(season);\r\n    this.setState({ seasons });\r\n  }\r\n\r\n  removeSeason(index) {\r\n    const seasons = this.state.seasons;\r\n    seasons.splice(index, 1);\r\n    this.setState({ seasons });\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <Button variant=\"contained\" size=\"medium\" color=\"primary\" onClick={() => this.addSeason()} style={{ marginBottom: '.5rem' }}>\r\n          Добави сезон\r\n        </Button>\r\n        <div className={classes.root}>\r\n          {this.state.seasons.map((season, index) => {\r\n            return (\r\n              <SeasonItem\r\n                key={season.id || 0}\r\n                season={season}\r\n                onChange={model => this.updateModel(model, index)}\r\n                onCreateCancel={() => this.removeSeason(index)}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(Seasons);","import React from 'react';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\r\n\r\nexport class SortableTableCell extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      active: false,\r\n      direction: 'desc'\r\n    };\r\n\r\n    this.handleClick = () => {\r\n      let { direction, active } = this.state;\r\n\r\n      if (!active)\r\n        active = true;\r\n      else if (direction === 'desc')\r\n        direction = 'asc';\r\n      else\r\n        direction = 'desc';\r\n\r\n\r\n      this.setState({ direction, active });\r\n      this.props.orderHandler(direction);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <TableCell onClick={this.handleClick}>\r\n        <TableSortLabel\r\n          active={this.state.active}\r\n          direction={this.state.direction}\r\n        >\r\n          {this.props.children}\r\n        </TableSortLabel>\r\n      </TableCell>\r\n    );\r\n  }\r\n}\r\n\r\nexport function orderData(data, ordering) {\r\n  if (!ordering)\r\n    return;\r\n\r\n  if (ordering[1] === 'asc')\r\n    data.sort((a, b) => b[ordering[0]] - a[ordering[0]]);\r\n  else\r\n    data.sort((a, b) => a[ordering[0]] - b[ordering[0]]);\r\n}\r\n\r\nexport function transformDailyData(data, classifier) {\r\n  const reduced = data\r\n    .reduce((acc, curr) => acc.concat(curr.payments), []);\r\n\r\n  const result = {};\r\n\r\n  Object.keys(classifier).forEach(key => {\r\n    result[classifier[key]] = 0\r\n  });\r\n\r\n  reduced.forEach(e => {\r\n    result[e.type]++\r\n  });\r\n\r\n  return Object.keys(result).map(key => {\r\n    return {\r\n      key,\r\n      count: result[key]\r\n    }\r\n  });\r\n}\r\n\r\nexport function transformMonthlyData(data, classifier) {\r\n  const users = {};\r\n\r\n  data.forEach(e => {\r\n    if (!users[e.customerId]) {\r\n      users[e.customerId] = {\r\n        customer: e.customer,\r\n        payments: {}\r\n      };\r\n\r\n      Object.keys(classifier).forEach(key => {\r\n        users[e.customerId].payments[classifier[key]] = 0\r\n      });\r\n    }\r\n\r\n    e.payments.forEach(payment => users[e.customerId].payments[payment.type]++)\r\n  });\r\n\r\n  return Object.keys(users).map(key => {\r\n    return {\r\n      user: users[key].customer,\r\n      payments: users[key].payments,\r\n      totalCount: Object.keys(users[key].payments).reduce((acc, pKey) => acc + users[key].payments[pKey], 0)\r\n    }\r\n  });\r\n}\r\n\r\nexport function transformToUserPlayedHours(data) {\r\n  const users = {};\r\n\r\n  data.forEach(e => {\r\n    if (!e.customerId)\r\n      return;\r\n\r\n    if (!users[e.customerId]) {\r\n      users[e.customerId] = {\r\n        customer: e.customer,\r\n        totalHours: 0\r\n      };\r\n    }\r\n\r\n    users[e.customerId].totalHours++;\r\n  });\r\n\r\n  return Object.keys(users).map(key => users[key]);\r\n}\r\n\r\nexport function transformByClassifier(data, classifier, customFn = () => null) {\r\n  const result = {};\r\n  const customValue = {};\r\n\r\n  Object.keys(classifier).forEach(key => {\r\n    result[classifier[key]] = 0\r\n  });\r\n\r\n  data.forEach(e => {\r\n    result[e.type]++;\r\n    customValue[e.type] = customFn(customValue[e.type], e);\r\n  });\r\n\r\n  return Object.keys(result).map(key => {\r\n    return {\r\n      key,\r\n      count: result[key],\r\n      custom: customValue[key]\r\n    }\r\n  });\r\n}","import React from 'react';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableCell from '@material-ui/core/TableCell';\r\n\r\nimport { l10n_text } from '../../components/L10n';\r\nimport { SortableTableCell, orderData, transformToUserPlayedHours, transformByClassifier } from './utils';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nexport class UserPlayedHours extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      order: null\r\n    };\r\n\r\n    this.handleOrder = (prop) => (direction) => {\r\n      this.setState({ order: [prop, direction] });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const data = transformToUserPlayedHours(this.props.data);\r\n    orderData(data, this.state.order);\r\n\r\n    return (\r\n      <Table>\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell style={{ width: '50%' }}>Потребител</TableCell>\r\n            <SortableTableCell orderHandler={this.handleOrder('totalHours')}>\r\n              Изиграни часове\r\n            </SortableTableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {data.map(e => {\r\n            return (\r\n              <TableRow key={e.customer.id}>\r\n                <TableCell>\r\n                  <Typography>\r\n                    {e.customer.name}\r\n                    <Typography variant=\"caption\">{e.customer.email}</Typography>\r\n                  </Typography>\r\n                </TableCell>\r\n                <TableCell>{e.totalHours}</TableCell>\r\n              </TableRow>\r\n            );\r\n          })}\r\n          <TableRow>\r\n            <TableCell>ОБЩО</TableCell>\r\n            <TableCell>{data.reduce((acc, curr) => acc + curr.totalHours, 0)}</TableCell>\r\n          </TableRow>\r\n        </TableBody>\r\n      </Table>\r\n    );\r\n  }\r\n}\r\n\r\nexport class StatisticByClassifier extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      order: null\r\n    };\r\n\r\n    this.handleOrder = (prop) => (direction) => {\r\n      this.setState({ order: [prop, direction] });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { data, classifier, translation, label1, label2, customFn, customValueSuffix } = this.props;\r\n    const transformed = transformByClassifier(data, classifier, customFn || (() => null));\r\n    orderData(transformed, this.state.order);\r\n\r\n    return (\r\n      <Table>\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell style={{ width: '50%' }}>{label1}</TableCell>\r\n            <SortableTableCell orderHandler={this.handleOrder('count')}>\r\n              {label2}\r\n            </SortableTableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {transformed.map(e => {\r\n            return (\r\n              <TableRow key={e.key}>\r\n                <TableCell>{l10n_text(e.key, translation)}</TableCell>\r\n                <TableCell>\r\n                  {e.count}\r\n                  {e.custom && <span style={{ marginLeft: '.3rem' }}>({e.custom}{customValueSuffix})</span>}\r\n                </TableCell>\r\n              </TableRow>\r\n            );\r\n          })}\r\n          <TableRow>\r\n            <TableCell>ОБЩО</TableCell>\r\n            <TableCell>{transformed.reduce((acc, curr) => acc + curr.count, 0)}</TableCell>\r\n          </TableRow>\r\n        </TableBody>\r\n      </Table>\r\n    );\r\n  }\r\n}\r\n","import moment from 'moment';\r\nimport React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\n\r\nimport Calendar from '../../components/calendar/Calendar';\r\nimport QueryService from '../../services/query.service';\r\nimport { StatisticsType, ReservationPayment, ReservationType } from '../../enums';\r\nimport { UserPlayedHours, StatisticByClassifier } from './MonthlyStatistics';\r\n\r\nclass StatisticsRoot extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      date: moment().startOf('date'),\r\n      type: StatisticsType.MONTHLY,\r\n      data: []\r\n    };\r\n\r\n    this.handleCalendarChange = (date) => {\r\n      this.setState({ date });\r\n      this.getData(date, this.state.type);\r\n    }\r\n\r\n    this.handleStatisticsChange = (_, value) => {\r\n      this.setState({ type: value });\r\n      this.getData(this.state.date, value);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData(this.state.date, this.state.type);\r\n  }\r\n\r\n  getData(date, type) {\r\n    return QueryService\r\n      .post('/statistics', { date: date.format('YYYY-MM-DD'), type })\r\n      .then(data => this.setState({ data }));\r\n  }\r\n\r\n  render() {\r\n    const { date, type, data } = this.state;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <Paper style={{ padding: '1rem' }}>\r\n          <Typography></Typography>\r\n          <Typography align=\"center\" variant=\"headline\" gutterBottom={true}>\r\n            Справки\r\n          </Typography>\r\n          <Calendar\r\n            emitDateOnAnyChange={true}\r\n            value={date}\r\n            onChange={this.handleCalendarChange}\r\n          />\r\n\r\n          <Tabs value={type} onChange={this.handleStatisticsChange} textColor=\"primary\">\r\n            <Tab value={StatisticsType.MONTHLY} label=\"Месечна\"></Tab>\r\n            <Tab value={StatisticsType.DAILY} label=\"Дневна\"></Tab>\r\n          </Tabs>\r\n\r\n          {type == StatisticsType.MONTHLY && <div style={{ margin: '2rem 0' }}>\r\n            <Typography variant=\"subheading\">Справка по потребители</Typography>\r\n            <UserPlayedHours data={data} />\r\n          </div>}\r\n\r\n          {type == StatisticsType.MONTHLY && <div style={{ margin: '2rem 0' }}>\r\n            <Typography variant=\"subheading\">Справка по вид резервация</Typography>\r\n            <StatisticByClassifier\r\n              label1=\"Вид резервация\"\r\n              label2=\"Регистрирани резервации\"\r\n              classifier={ReservationType}\r\n              translation=\"ReservationType\"\r\n              data={data} />\r\n          </div>}\r\n\r\n          <div style={{ margin: '2rem 0' }}>\r\n            <Typography variant=\"subheading\">Справка по регистрирани плащания</Typography>\r\n            <StatisticByClassifier\r\n              label1=\"Метод на плащане\"\r\n              label2=\"Регистрирани плащания\"\r\n              classifier={ReservationPayment}\r\n              translation=\"ReservationPayment\"\r\n              customFn={paymentsAmountAccumulator}\r\n              customValueSuffix=\" лв.\"\r\n              data={reduceToPayments(data)} />\r\n          </div>\r\n        </Paper>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction reduceToPayments(data) {\r\n  return data.reduce((acc, curr) => acc.concat(curr.payments), []);\r\n}\r\n\r\nfunction paymentsAmountAccumulator(current, payment) {\r\n  if (payment.amount)\r\n    return (current || 0) + parseFloat(payment.amount);\r\n  else return current;\r\n}\r\n\r\nexport default StatisticsRoot;","import React from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport DatePicker from 'material-ui-pickers/DatePicker';\r\n\r\nimport EnumSelect from '../components/EnumSelect';\r\nimport { Gender, CourtType, PlayStyle, BackhandType } from '../enums';\r\n\r\nclass UserModel {\r\n  constructor(props) {\r\n    this.UserAccountData = this.UserAccountData.bind(this);\r\n    this.UserAccountSecondaryData = this.UserAccountSecondaryData.bind(this);\r\n    this.UserPlayerMainData = this.UserPlayerMainData.bind(this);\r\n    this.UserPlayerSecondaryData = this.UserPlayerSecondaryData.bind(this);\r\n  }\r\n\r\n  get() {\r\n    return {\r\n      email: '',\r\n      password: '',\r\n      confirmPassword: '',\r\n      firstName: '',\r\n      lastName: '',\r\n      telephone: '',\r\n      gender: '',\r\n      birthDate: null,\r\n      startedPlaying: '',\r\n      playStyle: '',\r\n      courtType: '',\r\n      backhandType: '',\r\n      reservationDebt: 0,\r\n      subscriptionDebt: 0\r\n    };\r\n  }\r\n\r\n  getErrorsModel() {\r\n    return {\r\n      email: [],\r\n      password: [],\r\n      confirmPassword: [],\r\n      firstName: [],\r\n      lastName: [],\r\n      telephone: [],\r\n      gender: [],\r\n      birthDate: [],\r\n      startedPlaying: [],\r\n      playStyle: [],\r\n      courtType: [],\r\n      backhandType: [],\r\n      reservationDebt: [],\r\n      subscriptionDebt: []\r\n    };\r\n  }\r\n\r\n  composeErrors(errors, name) {\r\n    if (errors[name].length > 0)\r\n      return <span>\r\n        {errors[name].map((err, i) => {\r\n          return (\r\n            <span\r\n              key={i}\r\n              style={{ display: 'block' }}\r\n            >\r\n              {UET[name][err]}\r\n            </span>\r\n          );\r\n        })}\r\n      </span>\r\n    else\r\n      return null;\r\n  }\r\n\r\n  UserAccountData(props) {\r\n    const { user, onChange, errors } = props;\r\n    return (\r\n      <React.Fragment>\r\n        <TextField\r\n          id=\"email\"\r\n          label=\"Email\"\r\n          value={user.email}\r\n          required={true}\r\n          fullWidth={true}\r\n          error={errors.email.length > 0}\r\n          helperText={this.composeErrors(errors, 'email')}\r\n          onChange={onChange('email')}\r\n        />\r\n\r\n        {!user.id && <TextField\r\n          id=\"password\"\r\n          label=\"Парола\"\r\n          type=\"password\"\r\n          value={user.password}\r\n          required={true}\r\n          fullWidth={true}\r\n          error={errors.password.length > 0}\r\n          helperText={this.composeErrors(errors, 'password')}\r\n          onChange={onChange('password')}\r\n        />}\r\n\r\n        {!user.id && <TextField\r\n          id=\"confirmPassword\"\r\n          label=\"Повтори парола\"\r\n          type=\"password\"\r\n          value={user.confirmPassword}\r\n          required={true}\r\n          fullWidth={true}\r\n          error={errors.confirmPassword.length > 0}\r\n          helperText={this.composeErrors(errors, 'confirmPassword')}\r\n          onChange={onChange('confirmPassword')}\r\n        />}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  UserAccountSecondaryData(props) {\r\n    const { user, onChange, errors } = props;\r\n    return (\r\n      <React.Fragment>\r\n        <TextField\r\n          id=\"reservationDebt\"\r\n          label=\"Дължим брой часове\"\r\n          type=\"number\"\r\n          value={user.reservationDebt}\r\n          fullWidth={true}\r\n          error={errors.reservationDebt.length > 0}\r\n          helperText={this.composeErrors(errors, 'reservationDebt')}\r\n          onChange={onChange('reservationDebt')}\r\n        />\r\n\r\n        <TextField\r\n          id=\"reservationDebt\"\r\n          label=\"Дължим членски внос\"\r\n          type=\"number\"\r\n          value={user.subscriptionDebt}\r\n          fullWidth={true}\r\n          InputProps={{\r\n            endAdornment: <InputAdornment position=\"end\">Лв.</InputAdornment>\r\n          }}\r\n          error={errors.subscriptionDebt.length > 0}\r\n          helperText={this.composeErrors(errors, 'subscriptionDebt')}\r\n          onChange={onChange('subscriptionDebt')}\r\n        />\r\n\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  UserPlayerMainData(props) {\r\n    const { user, onChange, errors } = props;\r\n    return (\r\n      <React.Fragment>\r\n        <TextField\r\n          label=\"Име\"\r\n          value={user.firstName}\r\n          required={true}\r\n          fullWidth={true}\r\n          error={errors.firstName.length > 0}\r\n          helperText={this.composeErrors(errors, 'firstName')}\r\n          onChange={onChange('firstName')}\r\n        />\r\n\r\n        <TextField\r\n          label=\"Фамилия\"\r\n          value={user.lastName}\r\n          required={true}\r\n          fullWidth={true}\r\n          error={errors.lastName.length > 0}\r\n          helperText={this.composeErrors(errors, 'lastName')}\r\n          onChange={onChange('lastName')}\r\n        />\r\n\r\n        <TextField\r\n          label=\"Телефон\"\r\n          required={true}\r\n          fullWidth={true}\r\n          value={user.telephone}\r\n          error={errors.telephone.length > 0}\r\n          helperText={this.composeErrors(errors, 'telephone')}\r\n          onChange={onChange('telephone')}\r\n        />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  UserPlayerSecondaryData(props) {\r\n    const { user, onChange, errors } = props;\r\n    return (\r\n      <React.Fragment>\r\n        <DatePicker\r\n          autoOk\r\n          openToYearSelection\r\n          label=\"Дата на раждане\"\r\n          labelFunc={(date) => date ? new Date(date).toLocaleDateString() : ''}\r\n          clearable\r\n          fullWidth={true}\r\n          value={user.birthDate}\r\n          error={errors.birthDate.length > 0}\r\n          helperText={this.composeErrors(errors, 'birthDate')}\r\n          onChange={onChange('birthDate', true)}\r\n        />\r\n\r\n        <EnumSelect\r\n          label=\"Пол\"\r\n          value={user.gender}\r\n          error={errors.gender.length > 0}\r\n          errorText={this.composeErrors(errors, 'gender')}\r\n          onChange={onChange('gender')}\r\n          EnumValues={Gender}\r\n          EnumName=\"Gender\"\r\n          allowClear={true} />\r\n\r\n        <TextField\r\n          id=\"startedPlaying\"\r\n          label=\"Започнах да играя през\"\r\n          fullWidth={true}\r\n          value={user.startedPlaying}\r\n          error={errors.startedPlaying.length > 0}\r\n          helperText={this.composeErrors(errors, 'startedPlaying')}\r\n          onChange={onChange('startedPlaying')}\r\n          type=\"number\"\r\n        />\r\n\r\n        <EnumSelect\r\n          label=\"Играя със\"\r\n          value={user.playStyle}\r\n          error={errors.playStyle.length > 0}\r\n          errorText={this.composeErrors(errors, 'playStyle')}\r\n          onChange={onChange('playStyle')}\r\n          EnumValues={PlayStyle}\r\n          EnumName=\"PlayStyle\"\r\n          allowClear={true} />\r\n\r\n        <EnumSelect\r\n          label=\"Бекхенд\"\r\n          value={user.backhandType}\r\n          error={errors.backhandType.length > 0}\r\n          errorText={this.composeErrors(errors, 'backhandType')}\r\n          onChange={onChange('backhandType')}\r\n          EnumValues={BackhandType}\r\n          EnumName=\"BackhandType\"\r\n          allowClear={true} />\r\n\r\n        <EnumSelect\r\n          label=\"Любима настилка\"\r\n          value={user.courtType}\r\n          error={errors.courtType.length > 0}\r\n          errorText={this.composeErrors(errors, 'courtType')}\r\n          onChange={onChange('courtType')}\r\n          EnumValues={CourtType}\r\n          EnumName=\"CourtType\"\r\n          allowClear={true} />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\n//User Errors Transliteration\r\nconst UET = {\r\n  email: {\r\n    required: 'Задължително поле',\r\n    invalid: 'Невалиден имейл',\r\n    unique: 'Съществува потребител с такъв имейл'\r\n  },\r\n  password: {\r\n    required: 'Задължително поле',\r\n    short: 'Паролата трябва да бъде поне 6 символа'\r\n  },\r\n  confirmPassword: {\r\n    required: 'Задължително поле',\r\n    mismatch: 'Паролите не свъпадат'\r\n  },\r\n  firstName: {\r\n    required: 'Задължително поле',\r\n  },\r\n  lastName: {\r\n    required: 'Задължително поле',\r\n  },\r\n  telephone: {\r\n    required: 'Задължително поле',\r\n    invalid: 'Невалиден телефонен номер'\r\n  },\r\n  gender: {\r\n    required: 'Задължително поле',\r\n    invalid: 'Невалиден пол'\r\n  },\r\n  birthDate: {\r\n    invalid: 'Невалидна дата на раждане',\r\n    required: 'Задължително поле',\r\n  },\r\n  startedPlaying: {\r\n    invalid: 'Невалидна година',\r\n    future: 'Годината не може да е в бъдещето',\r\n    range: 'Годината не може да е преди датата на раждане'\r\n  },\r\n  playStyle: {\r\n    invalid: 'Невалидно поле'\r\n  },\r\n  courtType: {\r\n    invalid: 'Невалидно поле'\r\n  },\r\n  backhandType: {\r\n    invalid: 'Невалидно поле'\r\n  }\r\n};\r\n\r\nexport default new UserModel();","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport UserModel from '../../users/user.model';\r\n\r\nclass UserDetailsModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: UserModel.get(),\r\n      errors: UserModel.getErrorsModel()\r\n    }\r\n\r\n    this.handleChange = (prop, custom = false) => (event) => {\r\n      let user = this.state.user;\r\n      user[prop] = (custom ? event : event.target.value);\r\n      this.setState({ user });\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.user)\r\n      this.setState({ user: this.props.user });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.user != this.props.user && this.props.user)\r\n      this.setState({ user: this.props.user, errors: UserModel.getErrorsModel() });\r\n  }\r\n\r\n  save() {\r\n    const { user } = this.state;\r\n\r\n    if (user.id)\r\n      return QueryService\r\n        .post(`/users/${user.id}`, user)\r\n        .then(_ => this.props.onChange())\r\n        .catch(err => this.setState({ errors: err }));\r\n    else\r\n      return QueryService\r\n        .post(`/users`, user)\r\n        .then(_ => this.props.onChange())\r\n        .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  render() {\r\n    const { isOpen, onClose, classes, fullScreen } = this.props;\r\n    const { user, errors } = this.state;\r\n    if (!this.props.user)\r\n      return null;\r\n\r\n    return (\r\n      <Dialog\r\n        open={isOpen}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        classes={{ paper: classes.root }}\r\n      >\r\n        <DialogTitle>\r\n          <DialogContentText variant=\"headline\">\r\n            {user.name || 'Нов потребител'}\r\n          </DialogContentText>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <FormControlLabel\r\n            control={\r\n              <Switch\r\n                color=\"primary\"\r\n                checked={user.isActive}\r\n                onClick={() => this.handleChange('isActive', true)(!user.isActive)}\r\n              />\r\n            }\r\n            label={user.isActive ? 'Активен' : 'Неактивен'}\r\n          />\r\n\r\n          <UserModel.UserAccountData user={user} onChange={this.handleChange} errors={errors} />\r\n          <UserModel.UserPlayerMainData user={user} onChange={this.handleChange} errors={errors} />\r\n\r\n          <Typography\r\n            style={{ margin: '1rem 0 .3rem 0' }}\r\n            variant=\"subheading\"\r\n            color=\"primary\">Допълнителна информация за акаунт</Typography>\r\n          <UserModel.UserAccountSecondaryData user={user} onChange={this.handleChange} errors={errors} />\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.save()}>\r\n            Запис\r\n          </Button>\r\n          <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(UserDetailsModal)\r\n);","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport UserService from '../../services/user.service';\r\nimport L10n from '../../components/L10n';\r\nimport QueryService from '../../services/query.service';\r\nimport { SubscriptionType } from '../../enums';\r\nimport ConfirmationDialog from '../../components/ConfirmationDialog';\r\nimport EnumSelect from '../../components/EnumSelect';\r\n\r\nclass UserSubscriptionsModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      administrator: null,\r\n      subscriptions: []\r\n    };\r\n\r\n    this.handleChange = (index) => (newValue) => {\r\n      const subscriptions = this.state.subscriptions;\r\n      subscriptions[index] = newValue\r\n      this.setState({ subscriptions });\r\n      this.props.onChange(subscriptions);\r\n    }\r\n\r\n    this.handleDelete = (index) => () => {\r\n      const subscriptions = this.state.subscriptions;\r\n      subscriptions.splice(index, 1);\r\n      this.setState({ subscriptions });\r\n      this.props.onChange(subscriptions);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    UserService.getAuthenticatedUser()\r\n      .then(user => this.setState({ administrator: user }));\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.user != this.props.user && this.props.user != null)\r\n      this.init();\r\n  }\r\n\r\n  init() {\r\n    this.setState({\r\n      subscriptions: JSON.parse(JSON.stringify(this.props.user.subscriptions))\r\n    });\r\n  }\r\n\r\n  addSubscription() {\r\n    const { subscriptions } = this.state;\r\n    if (subscriptions.length > 0 && !subscriptions[0].id)\r\n      return;\r\n\r\n    subscriptions.unshift({\r\n      customerId: this.props.user.id,\r\n      season: this.props.season,\r\n      seasonId: this.props.season.id,\r\n      administrator: this.state.administrator,\r\n      totalHours: 0,\r\n      remainingHours: 0,\r\n      type: ''\r\n    });\r\n\r\n    this.setState(subscriptions);\r\n  }\r\n\r\n  render() {\r\n    const { isOpen, user, onClose, classes, fullScreen } = this.props;\r\n    const { subscriptions } = this.state;\r\n\r\n    if (!this.props.user)\r\n      return null;\r\n\r\n    return (\r\n      <Dialog\r\n        open={isOpen}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        classes={{ paper: classes.root }}\r\n      >\r\n        <DialogTitle>\r\n          <DialogContentText variant=\"headline\">\r\n            Абонаменти на {user.name}\r\n          </DialogContentText>\r\n        </DialogTitle>\r\n        <DialogContent >\r\n          <Button variant=\"contained\" color=\"primary\" size=\"small\"\r\n            style={{ marginBottom: '1rem' }}\r\n            onClick={() => this.addSubscription()}\r\n          >\r\n            Добави абонамент\r\n          </Button>\r\n\r\n          {subscriptions.map((sub, index) => <Subscription\r\n            key={sub.id || 0}\r\n            model={sub}\r\n            onChange={this.handleChange(index)}\r\n            onDelete={this.handleDelete(index)}\r\n          />)}\r\n\r\n          {subscriptions.length == 0 && <Typography variant=\"caption\">Няма регистрирани абонаменти</Typography>}\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          {/* <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.save()}>\r\n            Запис\r\n          </Button> */}\r\n          <Button variant=\"outlined\" color=\"primary\" size=\"small\" className={classes.btn} onClick={onClose}>\r\n            <ArrowBackIcon />\r\n            Назад\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nclass Subscription extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      administrator: {},\r\n      season: {},\r\n      type: '',\r\n      totalHours: 0,\r\n      remainingHours: 0,\r\n      isEditMode: false,\r\n      expanded: false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      ...JSON.parse(JSON.stringify(this.props.model)),\r\n      isEditMode: !this.props.model.id,\r\n      expanded: !this.props.model.id\r\n    });\r\n  }\r\n\r\n  save() {\r\n    let query = null\r\n    if (this.state.id)\r\n      query = QueryService\r\n        .post(`/subscriptions/${this.state.id}`, this.state);\r\n    else\r\n      query = QueryService\r\n        .post(`/subscriptions`, this.state)\r\n\r\n    return query\r\n      .then(e => {\r\n        this.props.onChange(e);\r\n        this.setState({ ...e, isEditMode: false });\r\n      })\r\n      .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  remove() {\r\n    return QueryService\r\n      .delete(`/subscriptions/${this.state.id}`)\r\n      .then(_ => this.props.onDelete())\r\n      .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  cancelEdit() {\r\n    if (!this.state.id)\r\n      return this.props.onDelete();\r\n    else\r\n      return this.setState({\r\n        ...JSON.parse(JSON.stringify(this.props.model)),\r\n        isEditMode: false\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const model = this.state;\r\n\r\n    return (\r\n      <ExpansionPanel expanded={model.expanded}>\r\n        <ExpansionPanelSummary\r\n          expandIcon={<ExpandMoreIcon />}\r\n          onClick={() => this.setState({ expanded: !model.expanded })}\r\n        >\r\n          <Typography color=\"primary\" style={{ flexBasis: '50%' }}>\r\n            Абонамент\r\n            <L10n\r\n              style={{ marginLeft: '.3rem' }}\r\n              translate=\"SubscriptionType\"\r\n            >\r\n              {model.type}\r\n            </L10n>\r\n          </Typography>\r\n          <Typography color=\"textSecondary\">{model.season.name}</Typography>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails style={{ flexDirection: 'column' }}>\r\n          <Typography variant=\"caption\">\r\n            Администрирал:\r\n            <Typography>{model.administrator.name}</Typography>\r\n          </Typography>\r\n\r\n          {!this.state.isEditMode && <React.Fragment>\r\n            <Typography variant=\"caption\">\r\n              Тип абонамент:\r\n              <Typography>\r\n                <L10n\r\n                  translate=\"SubscriptionType\"\r\n                >\r\n                  {model.type}\r\n                </L10n>\r\n              </Typography>\r\n            </Typography>\r\n\r\n            <Typography variant=\"caption\">\r\n              Общо часове:\r\n              <Typography>{model.totalHours}</Typography>\r\n            </Typography>\r\n\r\n            <Typography variant=\"caption\">\r\n              Оставащи часове\r\n              <Typography>{model.remainingHours}</Typography>\r\n            </Typography>\r\n          </React.Fragment>}\r\n\r\n          {this.state.isEditMode && <React.Fragment>\r\n            <EnumSelect\r\n              label=\"Тип абонамент\"\r\n              value={model.type}\r\n              fullWidth={true}\r\n              onChange={(e) => this.setState({ type: e.target.value })}\r\n              EnumValues={SubscriptionType}\r\n              EnumName=\"SubscriptionType\"\r\n            />\r\n\r\n            <TextField\r\n              label=\"Общо часове\"\r\n              type=\"number\"\r\n              value={model.totalHours}\r\n              onChange={(e) => this.setState({ totalHours: e.target.value })}\r\n              fullWidth={true}\r\n            />\r\n\r\n            <Typography variant=\"caption\" style={{ marginTop: '.5rem' }}>\r\n              Оставащи часове (ще бъде обновено след запис)\r\n              <Typography>{model.remainingHours}</Typography>\r\n            </Typography>\r\n          </React.Fragment>}\r\n\r\n          {this.state.isEditMode && <div style={{ marginTop: '.5rem' }}>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              style={{ marginRight: '.3rem' }}\r\n              onClick={() => this.save()}\r\n            >\r\n              Запис\r\n            </Button>\r\n\r\n            <Button\r\n              variant=\"outlined\"\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => this.cancelEdit()}\r\n            >\r\n              Отказ\r\n            </Button>\r\n          </div>}\r\n\r\n          {!this.state.isEditMode && <div style={{ marginTop: '.5rem' }}>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              style={{ marginRight: '.3rem' }}\r\n              onClick={() => this.setState({ isEditMode: true })}\r\n            >\r\n              Редакция\r\n            </Button>\r\n\r\n            <ConfirmationDialog\r\n              title=\"Изтриване на абонамент\"\r\n              body={<Typography>Сигурни ли сте че искате да изтриете абонамента</Typography>}\r\n              onAccept={() => this.remove()}\r\n              style={{ marginTop: '.5rem' }}\r\n            >\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                size=\"small\"\r\n              >\r\n                Изтриване\r\n            </Button>\r\n            </ConfirmationDialog>\r\n          </div>}\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px',\r\n    padding: '0'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(UserSubscriptionsModal)\r\n);","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Button from '@material-ui/core/Button';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Zoom from '@material-ui/core/Zoom';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport DescriptionOutlinedIcon from '@material-ui/icons/DescriptionOutlined';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport BuildIcon from '@material-ui/icons/Build';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport ConfirmationDialog from '../../components/ConfirmationDialog';\r\nimport QueryService from '../../services/query.service';\r\nimport UserModel from '../../users/user.model';\r\nimport UserDetailsModal from './UserDetailsModal';\r\nimport UserSubscriptionsModal from './UserSubscriptionsModal';\r\n\r\nclass Users extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      currentSeason: null,\r\n      page: 0,\r\n      rowsPerPage: 10,\r\n      users: [],\r\n      usersFilter: '',\r\n      editUser: null,\r\n      subsUser: null\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    QueryService\r\n      .get('/schedule/config')\r\n      .then(({ season }) => this.setState({ currentSeason: season }));\r\n\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    return QueryService\r\n      .get('/users')\r\n      .then(e => this.setState({ users: e }));\r\n  }\r\n\r\n  filterUsers() {\r\n    if (this.state.usersFilter.length > 0)\r\n      return this.state.users.filter(e => e.name.indexOf(this.state.usersFilter) != -1);\r\n    else return this.state.users;\r\n  }\r\n\r\n  prepareForEdit(user) {\r\n    const names = user.name.split(' ');\r\n    user.firstName = names[0];\r\n    user.lastName = names[1];\r\n    user.startedPlaying = parseInt(user.startedPlaying) || '';\r\n    return user;\r\n  }\r\n\r\n  updateSubscriptions(user, subscriptions) {\r\n    const index = this.state.users.findIndex(e => e.id == user.id);\r\n    const users = this.state.users;\r\n    users[index].subscriptions = subscriptions;\r\n    this.setState({ users, subsUser: users[index] });\r\n  }\r\n\r\n  remove(index) {\r\n    const users = this.state.users;\r\n\r\n    return QueryService\r\n      .delete(`/users/${users[index].id}`)\r\n      .then(_ => {\r\n        users.splice(index, 1);\r\n        this.setState({ users });\r\n      })\r\n      .catch(err => null);\r\n  }\r\n\r\n  render() {\r\n    const { usersFilter, page, rowsPerPage } = this.state;\r\n    const users = this.filterUsers(usersFilter);\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <Paper style={{ padding: '1rem' }}>\r\n          <Typography variant=\"headline\">Потребители</Typography>\r\n          <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.setState({ editUser: UserModel.get() })}>\r\n            Нов потребител\r\n          </Button>\r\n          <TextField\r\n            label=\"Търсене по име\"\r\n            value={usersFilter}\r\n            fullWidth={true}\r\n            onChange={(e) => this.setState({ usersFilter: e.target.value })}\r\n          />\r\n\r\n          <UserDetailsModal\r\n            user={this.state.editUser}\r\n            isOpen={this.state.editUser != null}\r\n            onChange={() => {\r\n              this.setState({ editUser: null })\r\n              this.getData();\r\n            }}\r\n            onClose={() => this.setState({ editUser: null })}\r\n          />\r\n\r\n          <UserSubscriptionsModal\r\n            user={this.state.subsUser}\r\n            season={this.state.currentSeason}\r\n            isOpen={this.state.subsUser != null}\r\n            onChange={(subscriptions) => this.updateSubscriptions(this.state.subsUser, subscriptions)}\r\n            onClose={() => this.setState({ subsUser: null })}\r\n          />\r\n\r\n          <Hidden xsDown>\r\n            <Table padding=\"none\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell>Име</TableCell>\r\n                  <TableCell>Създаден</TableCell>\r\n                  <TableCell style={{ textAlign: 'center' }}>Активен</TableCell>\r\n                  <TableCell style={{ textAlign: 'center' }}>Администратор</TableCell>\r\n                  <TableCell></TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {users.slice(page * rowsPerPage, (page + 1) * rowsPerPage).map((user, index) => {\r\n                  return (\r\n                    <TableRow key={user.id}>\r\n                      <TableCell>\r\n                        <Link to={`/users/${user.id}`}>\r\n                          <Typography variant=\"body2\">{user.name}</Typography>\r\n                        </Link>\r\n                        <Typography style={{ fontStyle: 'italic' }}>\r\n                          {user.email}\r\n                        </Typography>\r\n                      </TableCell>\r\n\r\n                      <TableCell>{new Date(user.createdAt).toLocaleDateString()}</TableCell>\r\n                      <TableCell style={{ textAlign: 'center' }}>{user.isActive && <DoneIcon color=\"action\" />}</TableCell>\r\n                      <TableCell style={{ textAlign: 'center' }}>{user.isAdmin && <DoneIcon color=\"action\" />}</TableCell>\r\n                      <TableCell>\r\n                        <Tooltip title=\"редакция\" placement=\"top-start\" TransitionComponent={Zoom} enterDelay={500}>\r\n                          <IconButton color=\"primary\" onClick={() => this.setState({ editUser: this.prepareForEdit(user) })}>\r\n                            {/* <BuildIcon /> */}\r\n                            <EditIcon />\r\n                          </IconButton>\r\n                        </Tooltip>\r\n                        <Tooltip title=\"абонаменти\" placement=\"top-start\" TransitionComponent={Zoom} enterDelay={500}>\r\n                          <IconButton color=\"primary\" onClick={() => this.setState({ subsUser: user })}>\r\n                            <DescriptionOutlinedIcon />\r\n                          </IconButton>\r\n                        </Tooltip>\r\n                        <ConfirmationDialog\r\n                          title=\"Изтриване на потребител\"\r\n                          body={<Typography>Сигурни ли сте че искате да изтриете {user.name}</Typography>}\r\n                          onAccept={() => this.remove(index)}\r\n                        >\r\n                          <Tooltip title=\"изтриване\" placement=\"top-start\" TransitionComponent={Zoom} enterDelay={500}>\r\n                            <IconButton color=\"secondary\">\r\n                              <DeleteForeverIcon />\r\n                            </IconButton>\r\n                          </Tooltip>\r\n                        </ConfirmationDialog>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  );\r\n                })}\r\n              </TableBody>\r\n            </Table>\r\n            <TablePagination\r\n              component=\"div\"\r\n              count={users.length}\r\n              rowsPerPage={rowsPerPage}\r\n              rowsPerPageOptions={[10, 25, 50]}\r\n              labelRowsPerPage=\"Покажи:\"\r\n              labelDisplayedRows={({ from, to, count }) => `${from}-${to} от ${count}`}\r\n              page={page}\r\n              onChangePage={(e, page) => this.setState({ page })}\r\n              onChangeRowsPerPage={e => this.setState({ rowsPerPage: e.target.value, page: 0 })}\r\n            />\r\n          </Hidden>\r\n\r\n          <Hidden smUp>\r\n            <List>\r\n              {users.map((user, index) => {\r\n                return (\r\n                  <React.Fragment key={index}>\r\n                    <ListItem style={{ padding: '0', justifyContent: 'space-between' }}>\r\n                      <div>\r\n                        <Link to={`/users/${user.id}`}>\r\n                          <Typography variant=\"body2\">{user.name}</Typography>\r\n                        </Link>\r\n                        <Typography style={{ fontStyle: 'italic' }}>\r\n                          {user.email}\r\n                        </Typography>\r\n                      </div>\r\n\r\n                      <div>\r\n                        <IconButton color=\"primary\" onClick={() => this.setState({ editUser: this.prepareForEdit(user) })}>\r\n                          <BuildIcon />\r\n                        </IconButton>\r\n                        <IconButton color=\"primary\" onClick={() => this.setState({ subsUser: user })}>\r\n                          <DescriptionOutlinedIcon />\r\n                        </IconButton>\r\n                        <ConfirmationDialog\r\n                          title=\"Изтриване на потребител\"\r\n                          body={<Typography>Сигурни ли сте че искате да изтриете {user.name}</Typography>}\r\n                          onAccept={() => this.remove(index)}\r\n                        >\r\n                          <IconButton color=\"secondary\">\r\n                            <DeleteForeverIcon />\r\n                          </IconButton>\r\n                        </ConfirmationDialog>\r\n                      </div>\r\n                    </ListItem>\r\n                    <Divider />\r\n                  </React.Fragment>\r\n                );\r\n              })}\r\n            </List>\r\n          </Hidden>\r\n\r\n        </Paper>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Users;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport FormModal from '../components/FormModal';\r\nimport UserModel from './user.model';\r\nimport QueryService from '../services/query.service';\r\n\r\nclass UserProfileFormModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      model: UserModel.get(),\r\n      errors: UserModel.getErrorsModel()\r\n    }\r\n\r\n    this.handleChange = (prop, custom = false) => (event) => {\r\n      let model = this.state.model;\r\n      model[prop] = (custom ? event : event.target.value);\r\n      this.setState({ model });\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ model: this.props.model });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.model != this.props.model)\r\n      this.setState({ model: this.props.model });\r\n  }\r\n\r\n  save() {\r\n    const { model } = this.state;\r\n\r\n    return QueryService\r\n      .post('/users/updateSecondaryData', model)\r\n      .then(() => this.props.onChange())\r\n      .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  render() {\r\n    const { model, errors } = this.state;\r\n    const { onClose } = this.props;\r\n\r\n    const title = 'Промяна на допълнителна информация за акаунт';\r\n    const actions = <React.Fragment>\r\n      <Button variant=\"contained\" color=\"primary\" onClick={() => this.save()}>Запис</Button>\r\n      <Button variant=\"outlined\" color=\"primary\" onClick={onClose}>Отказ</Button>\r\n    </React.Fragment>;\r\n    const body = <UserModel.UserPlayerSecondaryData user={model} onChange={this.handleChange} errors={errors} />\r\n\r\n    return (\r\n      <FormModal\r\n        enableFullWidth={true}\r\n        onClose={onClose}\r\n        title={title}\r\n        body={body}\r\n        actions={actions}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default UserProfileFormModal;","import React from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport QueryService from '../services/query.service';\r\nimport FormModal from '../components/FormModal';\r\n\r\nclass ChangePasswordModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      currentPassword: '',\r\n      newPassword: '',\r\n      confirmNewPassword: '',\r\n      errors: null\r\n    };\r\n\r\n    this.handleChange = (prop) => (event) => {\r\n      const state = this.state;\r\n      state[prop] = event.target.value;\r\n      this.setState(state);\r\n    }\r\n  }\r\n\r\n  save() {\r\n    return QueryService\r\n      .post('/users/changePassword', this.state)\r\n      .then(() => this.props.onClose())\r\n      .catch(err => this.setState({ errors: err.name }));\r\n  }\r\n\r\n  render() {\r\n    const { currentPassword, newPassword, confirmNewPassword, errors } = this.state;\r\n    const { onClose } = this.props;\r\n\r\n    const title = 'Промяна на парола';\r\n    const actions = <React.Fragment>\r\n      <Button variant=\"contained\" color=\"primary\" onClick={() => this.save()}>Запис</Button>\r\n      <Button variant=\"outlined\" color=\"primary\" onClick={onClose}>Отказ</Button>\r\n    </React.Fragment>;\r\n    const body = <React.Fragment>\r\n      <TextField\r\n        fullWidth\r\n        label=\"Текуща парола\"\r\n        type=\"password\"\r\n        value={currentPassword}\r\n        onChange={this.handleChange('currentPassword')}\r\n        error={errors == 'InvalidCredentialsException'}\r\n        helperText={errorTexts[errors]}\r\n      />\r\n      <TextField\r\n        fullWidth\r\n        label=\"Нова парола\"\r\n        type=\"password\"\r\n        value={newPassword}\r\n        onChange={this.handleChange('newPassword')}\r\n        error={errors == 'PasswordRequired'}\r\n        helperText={errorTexts[errors]}\r\n      />\r\n      <TextField\r\n        fullWidth\r\n        label=\"Повтори новата парола\"\r\n        type=\"password\"\r\n        value={confirmNewPassword}\r\n        onChange={this.handleChange('confirmNewPassword')}\r\n        error={errors == 'PasswordDoesntMatch'}\r\n        helperText={errorTexts[errors]}\r\n      />\r\n    </React.Fragment>;\r\n\r\n    return (\r\n      <FormModal\r\n        enableFullWidth={true}\r\n        onClose={onClose}\r\n        title={title}\r\n        body={body}\r\n        actions={actions}\r\n        hasError={errors}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst errorTexts = {\r\n  'InvalidCredentialsException': 'Неправилна парола',\r\n  'PasswordRequired': 'Задължително поле',\r\n  'PasswordDoesntMatch': 'Паролите не съвпадат'\r\n}\r\n\r\nexport default ChangePasswordModal;","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { l10n_text } from '../../components/L10n';\r\n\r\nclass PlayerInfoComponent extends React.Component {\r\n  render() {\r\n    const { user, style } = this.props;\r\n    return (\r\n      <div style={style}>\r\n        <Typography variant=\"caption\">\r\n          Играе от\r\n          <Typography>{user.startedPlaying ? user.startedPlaying + 'г.' : 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Играе с\r\n          <Typography>{l10n_text(user.playStyle, \"PlayStyle\") || 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Бекхенд\r\n          <Typography>{l10n_text(user.backhandType, \"BackhandType\") || 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Любима настилка\r\n          <Typography>{l10n_text(user.courtType, \"CourtType\") || 'няма'}</Typography>\r\n        </Typography>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PlayerInfoComponent;","import React from 'react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport List from '@material-ui/core/List';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport UserService from '../services/user.service';\r\nimport QueryService from '../services/query.service';\r\nimport { l10n_text } from '../components/L10n';\r\nimport { getHour } from '../utils';\r\nimport UserProfileFormModal from './UserProfileFormModal';\r\nimport ChangePasswordModal from './ChangePasswordModal'\r\nimport InvitationsComponent from './InvitationsComponent';\r\n\r\nimport PlayerInfoComponent from './components/PlayerInfoComponent';\r\n\r\nclass TeamView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: null\r\n    }\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    QueryService\r\n      .get(`/users/${this.props.match.params.id}/playerInfo`)\r\n      .then(user => this.setState({ user }));\r\n  }\r\n\r\n  render() {\r\n    const { user } = this.state;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        {user &&\r\n          <Card>\r\n            <CardContent>\r\n              <Typography variant=\"headline\">{user.name}</Typography>\r\n              <PlayerInfoComponent user={user} />\r\n            </CardContent>\r\n          </Card>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TeamView;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Button from '@material-ui/core/Button';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\n\r\nimport { dispatchEvent } from '../services/events.service';\r\n\r\nclass Guest extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      drawerOpen: false\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { routes, classes, currentRoute } = this.props;\r\n\r\n    return (\r\n      <Toolbar className={classes.root}>\r\n        {/* DESKTOP */}\r\n        <Hidden smDown>\r\n          {routes.map(route => {\r\n            return (\r\n              <Link to={route.to} key={route.id}>\r\n                <Button color=\"primary\" size=\"large\" variant={route.id == currentRoute ? 'outlined' : 'text'}>\r\n                  {route.name}\r\n                </Button>\r\n              </Link>\r\n            );\r\n          })}\r\n\r\n          <Button color=\"primary\" size=\"large\" onClick={() => dispatchEvent('menu-login')}>\r\n            Вход\r\n          </Button>\r\n        </Hidden>\r\n\r\n        {/* MOBILE */}\r\n        <Hidden mdUp>\r\n          <IconButton color=\"primary\" onClick={() => this.setState({ drawerOpen: true })}>\r\n            <MenuIcon />\r\n          </IconButton>\r\n        </Hidden>\r\n\r\n        <Drawer\r\n          anchor=\"right\"\r\n          open={this.state.drawerOpen}\r\n          onClose={() => this.setState({ drawerOpen: false })}\r\n        // onOpen={() => this.setState({ drawerOpen: true })}\r\n        >\r\n          <div\r\n            style={{ width: '250px' }}\r\n            tabIndex={0}\r\n            role=\"button\"\r\n            onClick={() => this.setState({ drawerOpen: false })}\r\n            onKeyDown={() => this.setState({ drawerOpen: false })}\r\n          >\r\n            <div style={{ display: 'flex', justifyContent: 'flex-end', marginTop: '1rem' }}>\r\n              <Hidden mdUp>\r\n                <IconButton onClick={() => this.setState({ drawerOpen: false })}>\r\n                  <MenuIcon />\r\n                </IconButton>\r\n              </Hidden>\r\n            </div>\r\n\r\n            <List>\r\n              {routes.map(route => {\r\n                return (\r\n                  <Link to={route.to} key={route.id}>\r\n                    <ListItem button>\r\n                      {route.Icon && <ListItemIcon>\r\n                        <route.Icon />\r\n                      </ListItemIcon>}\r\n                      <ListItemText primary={route.name} />\r\n                    </ListItem>\r\n                  </Link>\r\n                );\r\n              })}\r\n\r\n              <ListItem button>\r\n                <ListItemIcon>\r\n                  <ExitToAppIcon />\r\n                </ListItemIcon>\r\n                <ListItemText primary=\"Вход\" onClick={() => dispatchEvent('menu-login')} />\r\n              </ListItem>\r\n            </List>\r\n          </div>\r\n        </Drawer>\r\n      </Toolbar>\r\n    );\r\n  }\r\n}\r\nexport default Guest;            ","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Button from '@material-ui/core/Button';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport PowerSettingsNewIcon from '@material-ui/icons/PowerSettingsNew';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\n\r\nimport UserService from '../services/user.service';\r\n\r\nclass Admin extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      drawerOpen: false\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { routes, additionalRoutes, classes, currentRoute } = this.props;\r\n\r\n    return (\r\n      <Toolbar className={classes.root}>\r\n        {/* DESKTOP */}\r\n        <Hidden smDown>\r\n          {routes.map(route => {\r\n            return (\r\n              <Link to={route.to} key={route.id}>\r\n                <Button color=\"primary\" size=\"large\" variant={route.id == currentRoute ? 'outlined' : 'text'}>\r\n                  {route.name}\r\n                </Button>\r\n              </Link>\r\n            );\r\n          })}\r\n          <IconButton color=\"primary\" onClick={() => this.setState({ drawerOpen: true })}>\r\n            <SettingsIcon />\r\n          </IconButton>\r\n        </Hidden>\r\n\r\n        {/* MOBILE */}\r\n        <Hidden mdUp>\r\n          <IconButton color=\"primary\" onClick={() => this.setState({ drawerOpen: true })}>\r\n            <MenuIcon />\r\n          </IconButton>\r\n        </Hidden>\r\n\r\n        <Drawer\r\n          anchor=\"right\"\r\n          open={this.state.drawerOpen}\r\n          onClose={() => this.setState({ drawerOpen: false })}\r\n        // onOpen={() => this.setState({ drawerOpen: true })}\r\n        >\r\n          <div\r\n            className={classes.list}\r\n            tabIndex={0}\r\n            role=\"button\"\r\n            onClick={() => this.setState({ drawerOpen: false })}\r\n            onKeyDown={() => this.setState({ drawerOpen: false })}\r\n          >\r\n            <div style={{ display: 'flex', justifyContent: 'flex-end', marginTop: '1rem' }}>\r\n              <Hidden mdUp>\r\n                <IconButton onClick={() => this.setState({ drawerOpen: false })}>\r\n                  <MenuIcon />\r\n                </IconButton>\r\n              </Hidden>\r\n            </div>\r\n            <Hidden mdUp >\r\n              <List>\r\n                {routes.map(route => {\r\n                  return (\r\n                    <Link to={route.to} key={route.id}>\r\n                      <ListItem button>\r\n                        {route.Icon && <ListItemIcon>\r\n                          <route.Icon />\r\n                        </ListItemIcon>}\r\n                        <ListItemText primary={route.name} />\r\n                      </ListItem>\r\n                    </Link>\r\n                  );\r\n                })}\r\n              </List>\r\n              <Divider />\r\n            </Hidden>\r\n\r\n            <List>\r\n              {additionalRoutes.map(route => {\r\n                return (\r\n                  <Link to={route.to} key={route.id}>\r\n                    <ListItem button>\r\n                      {route.Icon && <ListItemIcon>\r\n                        <route.Icon />\r\n                      </ListItemIcon>}\r\n                      {route.faIcon && <ListItemIcon>\r\n                        <FontAwesomeIcon icon={route.faIcon} style={{ marginLeft: '.2rem' }} />\r\n                      </ListItemIcon>}\r\n                      <ListItemText primary={route.name} />\r\n                    </ListItem>\r\n                  </Link>\r\n                );\r\n              })}\r\n              <a>\r\n                <ListItem button onClick={() => UserService.logout()} >\r\n                  <ListItemIcon>\r\n                    <PowerSettingsNewIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText primary=\"Изход\" />\r\n                </ListItem>\r\n              </a>\r\n            </List>\r\n          </div>\r\n        </Drawer>\r\n      </Toolbar>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Admin;","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport BuildRoundedIcon from '@material-ui/icons/BuildRounded';\r\nimport ViewQuiltRoundedIcon from '@material-ui/icons/ViewQuiltRounded';\r\nimport WbSunnyRoundedIcon from '@material-ui/icons/WbSunnyRounded';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport LoyaltyIcon from '@material-ui/icons/Loyalty';\r\nimport AssessmentIcon from '@material-ui/icons/Assessment';\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\n\r\nimport Guest from './Guest';\r\nimport Admin from './Admin';\r\n\r\nconst styles = () => ({\r\n  root: {\r\n    justifyContent: 'flex-end',\r\n    paddingRight: 0\r\n  },\r\n  list: {\r\n    width: '250px'\r\n  }\r\n});\r\n\r\nclass NavigationModel {\r\n  constructor() {\r\n    this.routes = [\r\n      { id: 1, to: '/schedule', name: 'График', Icon: CalendarTodayIcon },\r\n      // { id: 8, to: '/editions', name: 'Турнири' },\r\n      // { id: 2, to: '/players', name: 'Играчи' }\r\n    ];\r\n    this.adminRoutes = [\r\n      { id: 6, to: '/admin/users', name: 'Потребители', Icon: PersonIcon },\r\n      { id: 5, to: '/admin/seasons', name: 'Сезони', Icon: WbSunnyRoundedIcon },\r\n      { id: 4, to: '/admin/courts', name: 'Кортове', Icon: ViewQuiltRoundedIcon },\r\n      { id: 7, to: '/admin/statistics', name: 'Справки', Icon: AssessmentIcon },\r\n      { id: 8, to: '/editions', name: 'Турнири', faIcon: 'trophy' },\r\n      { id: 9, to: '/account', name: 'Профил', Icon: PersonIcon }\r\n      // { id: 7, to: '/admin/subscriptions', name: 'Абонаменти', Icon: LoyaltyIcon },\r\n      // { id: 3, to: '/admin/config', name: 'Настройки', Icon: BuildRoundedIcon }\r\n    ];\r\n\r\n    this.userRoutes = [\r\n      { id: 9, to: '/account', name: 'Профил', Icon: PersonIcon }\r\n    ]\r\n\r\n    this.Guest = withRoutes(this.routes)(withStyles(styles)(Guest));\r\n    this.User = withRoutes(this.routes, this.userRoutes)(withStyles(styles)(Admin));\r\n    this.Admin = withRoutes(this.routes, this.adminRoutes)(withStyles(styles)(Admin));\r\n\r\n    const { Provider, Consumer } = React.createContext(0);\r\n    this.SetCurrentRoute = Provider;\r\n    this.WithCurrentRoute = Consumer;\r\n  }\r\n}\r\n\r\nexport function withRoutes(routes, additionalRoutes) {\r\n  return (WrappedComponent) => {\r\n    return class extends React.Component {\r\n      render() {\r\n        return <WrappedComponent {...this.props} routes={routes} additionalRoutes={additionalRoutes} />\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default new NavigationModel();","import React from 'react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport List from '@material-ui/core/List';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport UserService from '../services/user.service';\r\nimport QueryService from '../services/query.service';\r\nimport { l10n_text } from '../components/L10n';\r\nimport { getHour } from '../utils';\r\nimport UserProfileFormModal from './UserProfileFormModal';\r\nimport ChangePasswordModal from './ChangePasswordModal'\r\nimport InvitationsComponent from './InvitationsComponent';\r\n\r\nclass UserProfile extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loggedInUser: null,\r\n      user: {},\r\n      subscriptions: null,\r\n      reservations: null,\r\n      invitations: null,\r\n      subsCollapsed: true,\r\n      resCollapsed: true,\r\n      invCollapsed: true,\r\n      userModel: null,\r\n      changePassword: false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setUser()\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  setUser() {\r\n    return UserService.getAuthenticatedUser()\r\n      .then(user => this.setState({ loggedInUser: user }));\r\n  }\r\n\r\n  getData() {\r\n    const id = this.props.match.params.id || this.state.loggedInUser.id;\r\n\r\n    if (!this.props.match.params.id || this.props.match.params.id == this.state.loggedInUser.id)\r\n      QueryService.get('/invitations')\r\n        .then(invitations => this.setState({ invitations }));\r\n\r\n    QueryService\r\n      .get(`/users/${id}`)\r\n      .then(e => this.setState(e));\r\n  }\r\n\r\n  identity() {\r\n    return this.props.match.params.id && this.state.loggedInUser && this.props.match.params.id == this.state.loggedInUser.id;\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      user,\r\n      userModel,\r\n      reservations,\r\n      subscriptions,\r\n      invitations,\r\n      subsCollapsed,\r\n      resCollapsed,\r\n      invCollapsed,\r\n      changePassword\r\n    } = this.state;\r\n    const { mode, classes } = this.props;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        {userModel\r\n          && <UserProfileFormModal\r\n            model={userModel}\r\n            onChange={() => { this.getData(); this.setState({ userModel: null }) }}\r\n            onClose={() => this.setState({ userModel: null })}\r\n          />}\r\n\r\n        {changePassword && <ChangePasswordModal onClose={() => this.setState({ changePassword: false })} />}\r\n\r\n        <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography classes={{ root: classes.sectionHeadline }} variant=\"headline\">{user.name}</Typography>\r\n            <div style={{ display: 'flex', justifyContent: 'flex-start' }}>\r\n              <UserPersonalInfo user={user} />\r\n              <UserPlayerInfo user={user} style={{ marginLeft: '2rem' }} />\r\n            </div>\r\n          </CardContent>\r\n          <CardActions>\r\n          </CardActions>\r\n        </Card>\r\n\r\n        {invitations && <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography\r\n              variant=\"headline\"\r\n              classes={{ root: classes.sectionHeadline }}\r\n              onClick={() => this.setState({ invCollapsed: !invCollapsed })}\r\n            >\r\n              <span>Покани за турнири</span>\r\n              {invCollapsed && <ExpandLessIcon />}\r\n              {!invCollapsed && <ExpandMoreIcon />}\r\n            </Typography>\r\n            {invCollapsed && <InvitationsComponent invitations={this.state.invitations} onChange={() => this.getData()} />}\r\n          </CardContent>\r\n        </Card>}\r\n\r\n        {reservations != null && <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography\r\n              variant=\"headline\"\r\n              classes={{ root: classes.sectionHeadline }}\r\n              onClick={() => this.setState({ resCollapsed: !resCollapsed })}\r\n            >\r\n              <span>Резервации</span>\r\n              <Typography component=\"em\">\r\n                Дължим брой часове: {user.reservationDebt}\r\n              </Typography>\r\n              {resCollapsed && <ExpandLessIcon />}\r\n              {!resCollapsed && <ExpandMoreIcon />}\r\n            </Typography>\r\n            {resCollapsed\r\n              && <React.Fragment>\r\n                <List>\r\n                  {reservations.map(reservation => {\r\n                    return (\r\n                      <Typography classes={{ root: classes.listItemRoot }} key={reservation.id}>\r\n                        {l10n_text(reservation.type, \"CustomReservationType\")}\r\n                        <Typography component=\"span\" variant=\"caption\" style={{ display: 'inline', marginLeft: '1rem' }}>{reservation.court.name}</Typography>\r\n                        {!reservation.isActive && <Typography component=\"span\" color=\"secondary\">ОТМЕНЕНО</Typography>}\r\n                        <Typography component=\"span\" variant=\"caption\">\r\n                          {reservation.season.name}\r\n                          <span style={{ marginLeft: '1rem' }}>{new Date(reservation.date).toLocaleDateString()}</span>\r\n                          <span style={{ marginLeft: '1rem' }}>\r\n                            {getHour(reservation.hour)} - {getHour(reservation.hour + 1)}\r\n                          </span>\r\n                        </Typography>\r\n                      </Typography>\r\n                    );\r\n                  })}\r\n                </List>\r\n                {reservations.length == 0 && <Typography variant=\"caption\">Няма регистрирани резервации.</Typography>}\r\n              </React.Fragment>}\r\n          </CardContent>\r\n        </Card>}\r\n\r\n        {subscriptions != null && <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography\r\n              variant=\"headline\"\r\n              classes={{ root: classes.sectionHeadline }}\r\n              onClick={() => this.setState({ subsCollapsed: !subsCollapsed })}\r\n            >\r\n              <span>Абонаменти</span>\r\n              <Typography component=\"em\">\r\n                Дължим членски внос: {user.subscriptionDebt}лв.\r\n              </Typography>\r\n              {subsCollapsed && <ExpandLessIcon />}\r\n              {!subsCollapsed && <ExpandMoreIcon />}\r\n            </Typography>\r\n            {subsCollapsed\r\n              && <React.Fragment>\r\n                <List>\r\n                  {subscriptions.map(subscription => {\r\n                    return (\r\n                      <Typography classes={{ root: classes.listItemRoot }} key={subscription.id}>\r\n                        Абонамент {l10n_text(subscription.type, \"SubscriptionType\")}\r\n                        <Typography component=\"span\" variant=\"caption\" style={{ display: 'inline', marginLeft: '1rem' }}>{subscription.season.name}</Typography>\r\n                        <Typography component=\"span\" variant=\"caption\">{subscription.remainingHours} оставащи часове</Typography>\r\n                      </Typography>\r\n                    );\r\n                  })}\r\n                </List>\r\n                {subscriptions.length == 0 && <Typography variant=\"caption\">Няма регистрирани абонаменти.</Typography>}\r\n              </React.Fragment>}\r\n          </CardContent>\r\n        </Card>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport class UserPersonalInfo extends React.Component {\r\n  render() {\r\n    const { user } = this.props;\r\n    return (\r\n      <div>\r\n        <Typography variant=\"caption\">\r\n          Email\r\n          <Typography>{user.email}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Телефон\r\n          <Typography>{user.telephone || 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Рожденна дата\r\n          <Typography>{user.birthDate || 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Пол\r\n          <Typography>{l10n_text(user.gender, \"Gender\") || 'няма'}</Typography>\r\n        </Typography>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport class UserPlayerInfo extends React.Component {\r\n  render() {\r\n    const { user, style } = this.props;\r\n    return (\r\n      <div style={style}>\r\n        <Typography variant=\"caption\">\r\n          Играе от\r\n          <Typography>{user.startedPlaying ? user.startedPlaying + 'г.' : 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Играе с\r\n          <Typography>{l10n_text(user.playStyle, \"PlayStyle\") || 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Бекхенд\r\n          <Typography>{l10n_text(user.backhandType, \"BackhandType\") || 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Любима настилка\r\n          <Typography>{l10n_text(user.courtType, \"CourtType\") || 'няма'}</Typography>\r\n        </Typography>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  sectionRoot: {\r\n    marginBottom: '1rem'\r\n  },\r\n  cardContentRoot: {\r\n    '&:last-child': {\r\n    }\r\n  },\r\n  sectionHeadline: {\r\n    cursor: 'pointer',\r\n    display: 'flex',\r\n    justifyContent: 'space-between'\r\n  },\r\n  listItemRoot: {\r\n    padding: '.3rem 0',\r\n    borderBottom: '1px solid lightgrey'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(UserProfile);","import React from 'react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport List from '@material-ui/core/List';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport UserService from '../services/user.service';\r\nimport QueryService from '../services/query.service';\r\nimport { l10n_text } from '../components/L10n';\r\nimport { getHour } from '../utils';\r\nimport { UserPersonalInfo, UserPlayerInfo } from './UserProfile';\r\nimport UserProfileFormModal from './UserProfileFormModal';\r\nimport ChangePasswordModal from './ChangePasswordModal'\r\nimport InvitationsComponent from './InvitationsComponent';\r\n\r\nclass AccountView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loggedInUser: null,\r\n      user: {},\r\n      subscriptions: null,\r\n      reservations: null,\r\n      invitations: null,\r\n      subsCollapsed: true,\r\n      resCollapsed: true,\r\n      invCollapsed: true,\r\n      userModel: null,\r\n      changePassword: false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setUser()\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  setUser() {\r\n    return UserService.getAuthenticatedUser()\r\n      .then(user => this.setState({ loggedInUser: user }));\r\n  }\r\n\r\n  getData() {\r\n    const id = this.props.match.params.id || this.state.loggedInUser.id;\r\n\r\n    if (!this.props.match.params.id || this.props.match.params.id == this.state.loggedInUser.id)\r\n      QueryService.get('/invitations')\r\n        .then(invitations => this.setState({ invitations }));\r\n\r\n    QueryService\r\n      .get(`/users/${id}`)\r\n      .then(e => this.setState(e));\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      user,\r\n      userModel,\r\n      reservations,\r\n      subscriptions,\r\n      invitations,\r\n      subsCollapsed,\r\n      resCollapsed,\r\n      invCollapsed,\r\n      changePassword\r\n    } = this.state;\r\n    const { mode, classes } = this.props;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        {userModel\r\n          && <UserProfileFormModal\r\n            model={userModel}\r\n            onChange={() => { this.getData(); this.setState({ userModel: null }) }}\r\n            onClose={() => this.setState({ userModel: null })}\r\n          />}\r\n\r\n        {changePassword && <ChangePasswordModal onClose={() => this.setState({ changePassword: false })} />}\r\n\r\n        <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography classes={{ root: classes.sectionHeadline }} variant=\"headline\">{user.name}</Typography>\r\n            <div style={{ display: 'flex', justifyContent: 'flex-start' }}>\r\n              <UserPersonalInfo user={user} />\r\n              <UserPlayerInfo user={user} style={{ marginLeft: '2rem' }} />\r\n            </div>\r\n            <div>\r\n              <Button variant=\"contained\" size=\"small\" color=\"primary\" onClick={() => this.setState({ userModel: Object.assign({}, user) })}>Промяна</Button>\r\n              <Button variant=\"contained\" size=\"small\" color=\"primary\" style={{ marginLeft: '.3rem' }} onClick={() => this.setState({ changePassword: true })}>Смяна на парола</Button>\r\n            </div>\r\n          </CardContent>\r\n          <CardActions>\r\n          </CardActions>\r\n        </Card>\r\n\r\n        {invitations && <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography\r\n              variant=\"headline\"\r\n              classes={{ root: classes.sectionHeadline }}\r\n              onClick={() => this.setState({ invCollapsed: !invCollapsed })}\r\n            >\r\n              <span>Покани за турнири</span>\r\n              {invCollapsed && <ExpandLessIcon />}\r\n              {!invCollapsed && <ExpandMoreIcon />}\r\n            </Typography>\r\n            {invCollapsed && <InvitationsComponent invitations={this.state.invitations} onChange={() => this.getData()} />}\r\n          </CardContent>\r\n        </Card>}\r\n\r\n        {reservations != null && <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography\r\n              variant=\"headline\"\r\n              classes={{ root: classes.sectionHeadline }}\r\n              onClick={() => this.setState({ resCollapsed: !resCollapsed })}\r\n            >\r\n              <span>Резервации</span>\r\n              <Typography component=\"em\">\r\n                Дължим брой часове: {user.reservationDebt}\r\n              </Typography>\r\n              {resCollapsed && <ExpandLessIcon />}\r\n              {!resCollapsed && <ExpandMoreIcon />}\r\n            </Typography>\r\n            {resCollapsed\r\n              && <React.Fragment>\r\n                <List>\r\n                  {reservations.map(reservation => {\r\n                    return (\r\n                      <Typography classes={{ root: classes.listItemRoot }} key={reservation.id}>\r\n                        {l10n_text(reservation.type, \"CustomReservationType\")}\r\n                        <Typography component=\"span\" variant=\"caption\" style={{ display: 'inline', marginLeft: '1rem' }}>{reservation.court.name}</Typography>\r\n                        {!reservation.isActive && <Typography component=\"span\" color=\"secondary\">ОТМЕНЕНО</Typography>}\r\n                        <Typography component=\"span\" variant=\"caption\">\r\n                          {reservation.season.name}\r\n                          <span style={{ marginLeft: '1rem' }}>{new Date(reservation.date).toLocaleDateString()}</span>\r\n                          <span style={{ marginLeft: '1rem' }}>\r\n                            {getHour(reservation.hour)} - {getHour(reservation.hour + 1)}\r\n                          </span>\r\n                        </Typography>\r\n                      </Typography>\r\n                    );\r\n                  })}\r\n                </List>\r\n                {reservations.length == 0 && <Typography variant=\"caption\">Няма регистрирани резервации.</Typography>}\r\n              </React.Fragment>}\r\n          </CardContent>\r\n        </Card>}\r\n\r\n        {subscriptions != null && <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography\r\n              variant=\"headline\"\r\n              classes={{ root: classes.sectionHeadline }}\r\n              onClick={() => this.setState({ subsCollapsed: !subsCollapsed })}\r\n            >\r\n              <span>Абонаменти</span>\r\n              <Typography component=\"em\">\r\n                Дължим членски внос: {user.subscriptionDebt}лв.\r\n              </Typography>\r\n              {subsCollapsed && <ExpandLessIcon />}\r\n              {!subsCollapsed && <ExpandMoreIcon />}\r\n            </Typography>\r\n            {subsCollapsed\r\n              && <React.Fragment>\r\n                <List>\r\n                  {subscriptions.map(subscription => {\r\n                    return (\r\n                      <Typography classes={{ root: classes.listItemRoot }} key={subscription.id}>\r\n                        Абонамент {l10n_text(subscription.type, \"SubscriptionType\")}\r\n                        <Typography component=\"span\" variant=\"caption\" style={{ display: 'inline', marginLeft: '1rem' }}>{subscription.season.name}</Typography>\r\n                        <Typography component=\"span\" variant=\"caption\">{subscription.remainingHours} оставащи часове</Typography>\r\n                      </Typography>\r\n                    );\r\n                  })}\r\n                </List>\r\n                {subscriptions.length == 0 && <Typography variant=\"caption\">Няма регистрирани абонаменти.</Typography>}\r\n              </React.Fragment>}\r\n          </CardContent>\r\n        </Card>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  sectionRoot: {\r\n    marginBottom: '1rem'\r\n  },\r\n  cardContentRoot: {\r\n    '&:last-child': {\r\n    }\r\n  },\r\n  sectionHeadline: {\r\n    cursor: 'pointer',\r\n    display: 'flex',\r\n    justifyContent: 'space-between'\r\n  },\r\n  listItemRoot: {\r\n    padding: '.3rem 0',\r\n    borderBottom: '1px solid lightgrey'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(AccountView);","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../services/query.service';\r\n\r\nclass AccountActivation extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      err: false,\r\n      success: false,\r\n      timer: 5\r\n    };\r\n    this.interval = null;\r\n  }\r\n\r\n  componentDidMount() {\r\n    const token = this.props.location.search.split('?token=')[1];\r\n    return QueryService\r\n      .get(`/users/activation?token=${token}`)\r\n      .then(_ => {\r\n        this.setState({ success: true, err: false });\r\n        this.interval = setInterval(() => {\r\n          if (this.state.timer === 0) {\r\n            clearInterval(this.interval);\r\n            this.props.history.replace('/');\r\n          } else {\r\n            this.setState({ timer: this.state.timer - 1 });\r\n          }\r\n        }, 1000);\r\n      })\r\n      .catch(_ => this.setState({ err: true, success: false }));\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <Paper className={classes.root}>\r\n          <Typography align=\"center\" variant=\"headline\">Активация на акунт</Typography>\r\n          {!this.state.success && !this.state.err && <Typography align=\"center\" variant=\"subheading\">\r\n            Проверка на ключ за активация...\r\n          </Typography>}\r\n\r\n          {this.state.success && <Typography align=\"center\" variant=\"subheading\" color=\"primary\" className={classes.success}>\r\n            Активацията на Вашият акаунт беше успешна!\r\n          </Typography>}\r\n          {this.state.success && <Typography align=\"center\" variant=\"headline\" style={{ fontWeight: 700, fontSize: '1.3em' }}>{this.state.timer}</Typography>}\r\n\r\n          {this.state.err && <Typography align=\"center\" variant=\"subheading\" color=\"secondary\" className={classes.error}>\r\n            Невалиден или изтекъл ключ за активация.\r\n        </Typography>}\r\n        </Paper>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    padding: '3rem',\r\n    [theme.breakpoints.down('sm')]: {\r\n      height: '100vh'\r\n    }\r\n  },\r\n  success: {\r\n    marginTop: '2rem',\r\n    color: theme.palette.primary.dark,\r\n    fontWeight: '700'\r\n  },\r\n  error: {\r\n    marginTop: '2rem',\r\n    color: theme.palette.secondary.dark,\r\n    fontWeight: '700'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(AccountActivation);","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../services/query.service';\r\n\r\nclass RecoveryStep1 extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      email: '',\r\n      error: null,\r\n      success: false\r\n    };\r\n  }\r\n\r\n  issueRecoverEmail() {\r\n    this.setState({ error: null, success: false });\r\n    return QueryService\r\n      .get(`/users/recovery/step1?email=${this.state.email}`)\r\n      .then(_ => {\r\n        this.setState({ success: true })\r\n        setTimeout(() => this.props.history.replace('/'), 5000);\r\n      })\r\n      .catch(err => this.setState({ error: err }));\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return <div className=\"container\">\r\n      <Paper elevation={0} className={classes.root}>\r\n        <Typography variant=\"headline\">Възстановяване на забравена парола</Typography>\r\n        <TextField\r\n          id=\"email\"\r\n          label=\"E-mail\"\r\n          type=\"text\"\r\n          value={this.state.email}\r\n          fullWidth={true}\r\n          error={this.state.error}\r\n          onChange={e => this.setState({ email: e.target.value })}\r\n        />\r\n\r\n        {this.state.success && <Typography\r\n          variant=\"subheading\"\r\n          color=\"primary\"\r\n          className={classes.success}>\r\n          Успешно изпратен имейл с инструкции за възстановяване на парола.\r\n        </Typography>}\r\n\r\n        {this.state.error && <Typography\r\n          variant=\"subheading\"\r\n          color=\"secondary\"\r\n          className={classes.error}>\r\n          {this.state.error.message}\r\n        </Typography>}\r\n\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          size=\"small\"\r\n          style={{ marginTop: '1rem' }}\r\n          onClick={() => this.issueRecoverEmail()}\r\n        >\r\n          Изпрати\r\n        </Button>\r\n      </Paper>\r\n    </div>\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    padding: '3rem',\r\n    [theme.breakpoints.down('sm')]: {\r\n      height: '100vh'\r\n    }\r\n  },\r\n  success: {\r\n    marginTop: '2rem',\r\n    color: theme.palette.primary.dark,\r\n    fontWeight: '700'\r\n  },\r\n  error: {\r\n    marginTop: '2rem',\r\n    color: theme.palette.secondary.dark,\r\n    fontWeight: '700'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(RecoveryStep1);","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../services/query.service';\r\n\r\nclass RecoveryStep2 extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      token: '',\r\n      password: '',\r\n      confirmPassword: '',\r\n      error: null,\r\n      success: false\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ token: this.props.location.search.split('?token=')[1] });\r\n  }\r\n\r\n  recover() {\r\n    this.setState({ error: null, success: false });\r\n    return QueryService\r\n      .post(`/users/recovery/step2`, { token: this.state.token, password: this.state.password, confirmPassword: this.state.confirmPassword })\r\n      .then(_ => {\r\n        this.setState({ success: true });\r\n        setTimeout(() => this.props.history.replace('/'), 5000);\r\n      })\r\n      .catch(err => this.setState({ error: err }));\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return <div className=\"container\">\r\n      <Paper elevation={0} className={classes.root}>\r\n        <Typography variant=\"headline\">Възстановяване на забравена парола</Typography>\r\n\r\n        <TextField\r\n          id=\"password\"\r\n          label=\"Парола\"\r\n          type=\"password\"\r\n          value={this.state.password}\r\n          fullWidth={true}\r\n          error={this.state.error}\r\n          onChange={e => this.setState({ password: e.target.value })}\r\n        />\r\n\r\n        <TextField\r\n          id=\"confirmPassword\"\r\n          label=\"Повтори парола\"\r\n          type=\"password\"\r\n          value={this.state.confirmPassword}\r\n          fullWidth={true}\r\n          error={this.state.error}\r\n          onChange={e => this.setState({ confirmPassword: e.target.value })}\r\n        />\r\n\r\n        {this.state.success && <Typography\r\n          variant=\"subheading\"\r\n          color=\"primary\"\r\n          className={classes.success}>\r\n          Смяната на паролата ви беше успешна!\r\n        </Typography>}\r\n\r\n        {this.state.error && <Typography\r\n          variant=\"subheading\"\r\n          color=\"secondary\"\r\n          className={classes.error}>\r\n          {this.state.error.message}\r\n        </Typography>}\r\n\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          size=\"small\"\r\n          style={{ marginTop: '1rem' }}\r\n          onClick={() => this.recover()}\r\n        >\r\n          Потвърждаване\r\n        </Button>\r\n      </Paper>\r\n    </div>\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    padding: '3rem',\r\n    [theme.breakpoints.down('sm')]: {\r\n      height: '100vh'\r\n    }\r\n  },\r\n  success: {\r\n    marginTop: '2rem',\r\n    color: theme.palette.primary.dark,\r\n    fontWeight: '700'\r\n  },\r\n  error: {\r\n    marginTop: '2rem',\r\n    color: theme.palette.secondary.dark,\r\n    fontWeight: '700'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(RecoveryStep2);","import React from 'react';\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\n\r\nimport NotFoundPage from './NotFoundPage';\r\nimport TournamentView from '../tournaments/TournamentView';\r\nimport SchemesRoot from '../schemes/SchemesRoot';\r\nimport GroupsBracket from '../schemes/brackets/GroupsBracket';\r\nimport EliminationBracket from '../schemes/brackets/EliminationBracket';\r\nimport EditionsRoot from '../editions/EditionsRoot';\r\nimport Schedule from '../schedule/Schedule';\r\nimport Courts from '../admin/courts/Courts';\r\nimport Seasons from '../admin/seasons/Seasons';\r\nimport Statistics from '../admin/statistics/Statistics';\r\nimport Users from '../admin/users/Users';\r\nimport TeamView from '../users/TeamView';\r\nimport NavigationModel from '../menu/navigation.model';\r\nimport UserService from '../services/user.service';\r\nimport UserProfile from '../users/UserProfile';\r\nimport AccountView from '../users/AccountView';\r\nimport AccountActivation from '../login/Activation';\r\nimport RecoveryStep1 from '../login/RecoveryStep1';\r\nimport RecoveryStep2 from '../login/RecoveryStep2';\r\nimport { ApplicationMode } from '../enums';\r\n\r\nconst routeMapping = {\r\n  '/editions': EditionsRoot,\r\n  '/schedule': Schedule,\r\n  '/players': NotFoundPage,\r\n  '/admin/courts': Courts,\r\n  '/admin/seasons': Seasons,\r\n  '/admin/users': Users,\r\n  '/admin/statistics': Statistics,\r\n  '/account': AccountView\r\n};\r\n\r\nconst AppRouting = () => (\r\n  <UserService.WithApplicationMode>\r\n    {mode => <Switch>\r\n      {/* <Route path=\"/tournaments\" component={null} /> \r\n      <Route path=\"/editions\" component={EditionsRoot} />*/}\r\n      <Route path=\"/tournaments/:id\" component={TournamentView} />\r\n      <Route path=\"/schemes/:id/groups\" component={GroupsBracket} />\r\n      <Route path=\"/schemes/:id/elimination\" component={EliminationBracket} />\r\n      <Route path=\"/schemes\" component={SchemesRoot} />\r\n      <Route path=\"/teams/:id\" component={TeamView} />\r\n\r\n      {NavigationModel.routes.map(route => {\r\n        return (\r\n          <Route key={route.id} path={route.to} component={routeMapping[route.to]} mode={mode} />\r\n        );\r\n      })}\r\n\r\n      {mode == ApplicationMode.ADMIN && NavigationModel.adminRoutes.map(route => {\r\n        return (\r\n          <Route key={route.id} path={route.to} component={routeMapping[route.to]} mode={mode} />\r\n        );\r\n      })}\r\n\r\n      {mode != ApplicationMode.GUEST && NavigationModel.userRoutes.map(route => {\r\n        return (\r\n          <Route key={route.id} path={route.to} component={routeMapping[route.to]} mode={mode} />\r\n        );\r\n      })}\r\n\r\n      {(mode == ApplicationMode.USER || mode == ApplicationMode.ADMIN)\r\n        && <Route path=\"/users/:id\" render={(props) => <UserProfile {...props} mode={mode} />} />}\r\n\r\n      <Route path=\"/oops\" component={NotFoundPage} />\r\n      <Route path=\"/account/activation\" render={(props) => <AccountActivation {...props} />} />\r\n      <Route path=\"/recovery/step1\" render={(props) => <RecoveryStep1 {...props} />} />\r\n      <Route path=\"/recovery/step2\" render={(props) => <RecoveryStep2 {...props} />} />\r\n      <Route exact path=\"/\">\r\n        <Redirect to=\"/schedule\" />\r\n      </Route>\r\n      <Route component={NotFoundPage} />\r\n    </Switch>\r\n    }\r\n  </UserService.WithApplicationMode>\r\n);\r\n\r\nexport default AppRouting;\r\n\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../services/query.service';\r\nimport UserService from '../services/user.service';\r\nimport { dispatchEvent } from '../services/events.service';\r\n\r\nconst styles = (theme) => ({\r\n  form: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    //width: 250,\r\n    //margin: '1.5rem auto'\r\n  },\r\n  link: {\r\n    color: theme.palette.primary.main,\r\n    padding: '.3rem 0',\r\n    '&:hover': {\r\n      color: theme.palette.primary.dark,\r\n      borderBottom: '1px solid',\r\n      borderColor: theme.palette.primary.main,\r\n    }\r\n  }\r\n});\r\n\r\nclass Login extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      email: '',\r\n      password: '',\r\n      hasError: false\r\n    };\r\n\r\n    this.handleChange = (name) => (event) => {\r\n      this.setState({\r\n        [name]: event.target.value\r\n      });\r\n    }\r\n  }\r\n\r\n  login() {\r\n    QueryService\r\n      .post(`/login`, this.state)\r\n      .then(({ token }) => {\r\n        UserService.login(token);\r\n        dispatchEvent('logged-in');\r\n        this.props.onClose();\r\n      })\r\n      .catch(() => {\r\n        this.setState({ hasError: true });\r\n        //setTimeout(() => this.setState({ hasError: false }), 10 * 1000);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <form className={classes.form} onKeyDown={e => e.key === 'Enter' ? this.login() : null}>\r\n        <TextField\r\n          label=\"Email\"\r\n          fullWidth={true}\r\n          value={this.state.email}\r\n          onChange={this.handleChange('email')}\r\n        />\r\n\r\n        <TextField\r\n          label=\"Парола\"\r\n          fullWidth={true}\r\n          type=\"password\"\r\n          value={this.state.password}\r\n          onChange={this.handleChange('password')}\r\n        />\r\n\r\n        <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n          <Button variant=\"contained\" color=\"primary\" style={{ marginTop: '1rem', padding: '.3rem  4rem' }}\r\n            onClick={() => this.login()}\r\n          >\r\n            Вход\r\n        </Button>\r\n        </div>\r\n        {this.state.hasError && <em style={{ color: 'red', marginTop: '.5rem' }}>Невалидна комбинация от потребителско име и парола</em>}\r\n        <div style={{ marginTop: '.5rem', display: 'flex', justifyContent: 'center' }}>\r\n          <Link to=\"/recovery/step1\" className={classes.link} onClick={this.props.onClose}>\r\n            Забравена парола?\r\n        </Link>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(Login);","import React from 'react';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\nimport StepContent from '@material-ui/core/StepContent';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport UserModel from '../users/user.model';\r\nimport QueryService from '../services/query.service';\r\n\r\nconst styles = (theme) => ({\r\n  action: {\r\n    marginTop: '1rem',\r\n    display: 'flex',\r\n    justifyContent: 'center'\r\n  },\r\n  focused: {\r\n    marginTop: '.5rem',\r\n    color: 'orange'\r\n  }\r\n});\r\n\r\nclass RegistrationStepper extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      activeStep: 0,\r\n      completed: [false, false, false],\r\n      user: UserModel.get(),\r\n      errors: UserModel.getErrorsModel()\r\n    }\r\n\r\n    this.handleChange = (prop, custom = false) => (event) => {\r\n      let user = this.state.user;\r\n      user[prop] = (custom ? event : event.target.value);\r\n      this.setState({\r\n        user: user\r\n      });\r\n    }\r\n\r\n    this.changeStep = (value) => () => {\r\n      let completed = this.state.completed;\r\n      completed[this.state.activeStep] = true;\r\n      this.setState({ activeStep: value, completed: completed });\r\n    }\r\n  }\r\n\r\n  register() {\r\n    this.setState({ errors: UserModel.getErrorsModel() });\r\n    return QueryService\r\n      .post(`/users`, this.state.user)\r\n      .then(_ => this.props.onSuccess())\r\n      .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  render() {\r\n    const { user, activeStep, completed, errors } = this.state;\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <React.Fragment>\r\n\r\n        <UserModel.UserAccountData\r\n          user={user}\r\n          errors={errors}\r\n          onChange={this.handleChange} />\r\n\r\n        <UserModel.UserPlayerMainData\r\n          user={user}\r\n          errors={errors}\r\n          onChange={this.handleChange} />\r\n\r\n        {/* <UserModel.UserPlayerSecondaryData\r\n          user={user}\r\n          errors={errors}\r\n          onChange={this.handleChange} /> */}\r\n\r\n        <div style={{ margin: '1rem 0' }}>\r\n          <em>\r\n            Натискайки бутонът \"Регистрация\", Вие се съгласявате при нужда да бъдете потърсени по\r\n            телефонния номер, който сте предоставили.\r\n          </em>\r\n          <div className={classes.action}>\r\n            <Button style={{ marginRight: '.3rem', padding: '.3rem 2rem' }} variant=\"contained\" color=\"primary\" onClick={() => this.register()}>\r\n              Регистрация\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nclass StepActions extends React.Component {\r\n  render() {\r\n    const { activeStep, changeStep, finalStep, className } = this.props;\r\n\r\n    return (\r\n      <div className={className}>\r\n        {activeStep != 0 && <Button\r\n          variant=\"outlined\"\r\n          color=\"primary\"\r\n          size=\"small\"\r\n          disabled={activeStep === 0}\r\n          onClick={changeStep(activeStep - 1)}\r\n        >\r\n          Назад\r\n          </Button>}\r\n\r\n        <Button\r\n          style={{ marginLeft: '.3rem' }}\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          size=\"small\"\r\n          onClick={changeStep(activeStep + 1)}\r\n        >\r\n          {activeStep === finalStep ? 'Приключване' : 'Продължи'}\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default withStyles(styles)(RegistrationStepper);\r\n\r\n// render() {\r\n//   const { user, activeStep, completed, errors } = this.state;\r\n//   const { classes } = this.props;\r\n\r\n//   return (\r\n//     <React.Fragment>\r\n//       <Stepper\r\n//         nonLinear\r\n//         activeStep={activeStep}\r\n//         orientation=\"vertical\"\r\n//       >\r\n//         <Step>\r\n//           <StepLabel\r\n//             style={{ cursor: 'pointer' }}\r\n//             onClick={this.changeStep(0)}\r\n//             completed={completed[0]}\r\n//             error={errors.email.length\r\n//               + errors.password.length\r\n//               + errors.confirmPassword.length > 0}\r\n//           >\r\n//             Данни за акаунт\r\n//             </StepLabel>\r\n//           <StepContent>\r\n//             <UserModel.UserAccountData\r\n//               user={user}\r\n//               errors={errors}\r\n//               onChange={this.handleChange} />\r\n\r\n//             <StepActions\r\n//               activeStep={activeStep}\r\n//               finalStep={2}\r\n//               className={classes.action}\r\n//               changeStep={this.changeStep} />\r\n//           </StepContent>\r\n//         </Step>\r\n//         <Step>\r\n//           <StepLabel\r\n//             style={{ cursor: 'pointer' }}\r\n//             completed={completed[1]}\r\n//             onClick={this.changeStep(1)}\r\n//             error={errors.firstName.length\r\n//               + errors.lastName.length\r\n//               + errors.telephone.length\r\n//               + errors.gender.length\r\n//               + errors.birthDate.length > 0}\r\n//           >\r\n//             Основни данни за играч\r\n//             </StepLabel>\r\n//           <StepContent>\r\n//             <UserModel.UserPlayerMainData\r\n//               user={user}\r\n//               errors={errors}\r\n//               onChange={this.handleChange} />\r\n\r\n//             <StepActions\r\n//               activeStep={activeStep}\r\n//               finalStep={2}\r\n//               className={classes.action}\r\n//               changeStep={this.changeStep} />\r\n//           </StepContent>\r\n//         </Step>\r\n//         <Step>\r\n//           <StepLabel\r\n//             style={{ cursor: 'pointer' }}\r\n//             onClick={this.changeStep(2)}\r\n//             completed={completed[2]}\r\n//             error={errors.startedPlaying.length\r\n//               + errors.playStyle.length\r\n//               + errors.courtType.length\r\n//               + errors.backhandType.length > 0}\r\n//           >\r\n//             Допълнителни данни за играч\r\n//             </StepLabel>\r\n//           <StepContent>\r\n//             <UserModel.UserPlayerSecondaryData\r\n//               user={user}\r\n//               errors={errors}\r\n//               onChange={this.handleChange} />\r\n\r\n//             <StepActions\r\n//               activeStep={activeStep}\r\n//               finalStep={2}\r\n//               className={classes.action}\r\n//               changeStep={this.changeStep} />\r\n//           </StepContent>\r\n//         </Step>\r\n//       </Stepper>\r\n\r\n//       {activeStep === 3 && <div>\r\n//         <em>\r\n//           Натискайки бутонът \"Регистрация\" Вие се съгласявате да получавате съобщения относно\r\n//           статуса на турнири за които сте записани, както и при нужда да бъдете потърсени по\r\n//           телефонния номер който сте задали.\r\n//           </em>\r\n//         <div className={classes.action}>\r\n//           <Button variant=\"outlined\" color=\"primary\" size=\"small\" onClick={this.changeStep(0)}>\r\n//             Промяна\r\n//           </Button>\r\n\r\n//           <Button style={{ marginLeft: '.3rem' }} variant=\"contained\" size=\"small\" color=\"primary\" onClick={() => this.register()}>\r\n//             Регистрация\r\n//           </Button>\r\n//         </div>\r\n//       </div>\r\n//       }\r\n//     </React.Fragment>\r\n//   );\r\n// }","import React from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport SwipeableViews from 'react-swipeable-views';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport Button from '@material-ui/core/Button';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Login from './Login';\r\nimport Registration from './Registration';\r\nimport EventService from '../services/events.service';\r\n\r\nconst styles = (theme) => ({\r\n  centered: {\r\n    display: 'flex',\r\n    justifyContent: 'center'\r\n  },\r\n  smallContainer: {\r\n    width: 320\r\n  },\r\n  closeBtn: {\r\n    position: 'absolute',\r\n    color: theme.palette.primary.main,\r\n    top: '5px',\r\n    right: '5px',\r\n    cursor: 'pointer',\r\n    '&:hover': {\r\n      color: theme.palette.primary.dark\r\n    }\r\n  }\r\n});\r\n\r\nclass SignIn extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      index: 0,\r\n      open: false,\r\n      successfulRegistration: false\r\n    };\r\n\r\n    this.handleTabChange = (event, index) => {\r\n      this.setState({ index });\r\n    };\r\n\r\n    this.handleRegistration = () => {\r\n      this.setState({ successfulRegistration: true, open: false });\r\n      setTimeout(() => this.setState({ successfulRegistration: false }), 5000);\r\n    }\r\n  }\r\n\r\n  componentWillMount() {\r\n    EventService.catchEvent('menu-login', () => this.setState({ open: true }));\r\n  }\r\n\r\n  render() {\r\n    const { index, open, successfulRegistration } = this.state;\r\n    const { classes, fullScreen } = this.props;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <Dialog\r\n          open={open}\r\n          fullScreen={fullScreen}\r\n          onClose={() => this.setState({ open: false, index: 0 })}\r\n          aria-labelledby=\"login-dialog\"\r\n        >\r\n          <DialogTitle id=\"login-dialog\"\r\n            className={classes.centered}\r\n          >\r\n            <Tabs\r\n              className={classes.smallContainer}\r\n              centered={true}\r\n              value={index}\r\n              onChange={this.handleTabChange}\r\n              indicatorColor=\"primary\"\r\n              textColor=\"primary\"\r\n            >\r\n              <Tab label=\"Вход\" key=\"1\" />\r\n              <Tab label=\"Регистрация\" key=\"2\" />\r\n            </Tabs>\r\n            <span className={classes.closeBtn} onClick={() => this.setState({ open: false, index: 0 })}>\r\n              <ClearIcon />\r\n            </span>\r\n          </DialogTitle>\r\n          <DialogContent\r\n            className={classes.centered}>\r\n            <SwipeableViews\r\n              className={classes.smallContainer}\r\n              index={index}\r\n              onChangeIndex={(index) => this.handleTabChange(null, index)}\r\n            >\r\n              <Login onClose={() => this.setState({ open: false, index: 0 })} />\r\n              <Registration onSuccess={this.handleRegistration} />\r\n            </SwipeableViews>\r\n          </DialogContent>\r\n          <DialogActions>\r\n\r\n          </DialogActions>\r\n        </Dialog>\r\n\r\n        <Dialog\r\n          open={successfulRegistration}\r\n          fullScreen={fullScreen}\r\n          onClose={() => this.setState({ successfulRegistration: false })}\r\n          aria-labelledby=\"successful-registration\"\r\n        >\r\n          <DialogContent>\r\n            <Typography variant=\"headline\" color=\"primary\" align=\"center\">\r\n              Регистрацията Ви беше успешна!\r\n            </Typography>\r\n            <Typography variant=\"subheading\" align=\"center\">\r\n              На зададеният от Вас имейл е изпратено съобщение, с което може да активирате вашият акаунт.</Typography>\r\n            <Typography variant=\"caption\" color=\"secondary\" align=\"center\">\r\n              В случай, че не получавате имейл за активация, моля потърсете някой\r\n              от администраторите на системата, който да активира вашият акаунт.\r\n            </Typography>\r\n          </DialogContent>\r\n          <DialogActions style={{ justifyContent: 'center' }}>\r\n            <Button variant=\"contained\" color=\"primary\" size=\"small\"\r\n              onClick={() => this.setState({ successfulRegistration: false })}\r\n            >\r\n              Добре\r\n          </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(SignIn)\r\n);","import React from 'react';\r\n\r\nimport NavigationModel from './navigation.model';\r\nimport UserService from '../services/user.service';\r\nimport { ApplicationMode } from '../enums';\r\n\r\nclass Navigation extends React.Component {\r\n  render() {\r\n    return (\r\n      <UserService.WithApplicationMode>\r\n        {mode => <NavigationModel.WithCurrentRoute>\r\n          {currentRoute => <div className=\"container\" style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '1.5rem', alignItems: 'center' }}>\r\n            <img src=\"assets/logo3.png\" />\r\n            {mode == ApplicationMode.GUEST && <NavigationModel.Guest currentRoute={currentRoute} />}\r\n            {mode == ApplicationMode.USER && <NavigationModel.User currentRoute={currentRoute} />}\r\n            {mode == ApplicationMode.ADMIN && <NavigationModel.Admin currentRoute={currentRoute} />}\r\n          </div>}\r\n        </NavigationModel.WithCurrentRoute>}\r\n      </UserService.WithApplicationMode>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Navigation;","import { createMuiTheme } from '@material-ui/core/styles';\r\n\r\nexport default createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#828A00',\r\n      // '#629900'\r\n      contrastText: '#fff'\r\n    },\r\n    secondary: {\r\n      // main: '#E87114',\r\n      main: '#f47521',\r\n      contrastText: '#fff'\r\n    }\r\n  },\r\n  overrides: {\r\n    MuiFormControl: {\r\n      root: {\r\n        marginTop: '.5rem'\r\n      }\r\n    },\r\n    MuiDialog: {\r\n      paper: {\r\n        overflowY: 'visible'\r\n      }\r\n    },\r\n    MuiTypography: {\r\n      caption: {\r\n        fontStyle: 'italic'\r\n      },\r\n      body2: {\r\n        color: '#828A00'\r\n      },\r\n      display1: {\r\n        color: '#828A00',\r\n        display: 'inline',\r\n        fontSize: '1.5rem',\r\n        margin: '0 0.3rem'\r\n      },\r\n      display2: {\r\n        fontSize: '1rem',\r\n        color: '#828A00',\r\n        fontWeight: 700\r\n      }\r\n    },\r\n    MuiCardActions: {\r\n      root: {\r\n        padding: 0\r\n      }\r\n    },\r\n    MuiDrawer: {\r\n      modal: {\r\n        zIndex: 1200\r\n      }\r\n    }\r\n  }\r\n});","import React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport MuiPickersUtilsProvider from 'material-ui-pickers/MuiPickersUtilsProvider';\r\nimport DateFnsUtils from 'material-ui-pickers/utils/date-fns-utils';\r\nimport { MuiThemeProvider } from '@material-ui/core/styles';\r\n\r\nimport AppRouting from './app.routing';\r\nimport SignIn from '../login/SignIn';\r\nimport Navigation from '../menu/Navigation';\r\nimport { catchEvent } from '../services/events.service';\r\nimport UserService from '../services/user.service';\r\nimport NavigationModel from '../menu/navigation.model';\r\nimport { ApplicationMode } from '../enums';\r\nimport theme from '../theme';\r\nimport './app.styles.scss';\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      applicationMode: ApplicationMode.GUEST,\r\n      currentRoute: 0\r\n    }\r\n\r\n    this.handleLoginTab = (event, index) => {\r\n      this.setState({ index });\r\n    };\r\n  }\r\n\r\n  setApplicationMode() {\r\n    UserService.getAuthenticatedUser()\r\n      .then(user => {\r\n        let mode = ApplicationMode.GUEST\r\n        if (user)\r\n          mode = ApplicationMode.USER;\r\n\r\n        if (user && user.isAdmin)\r\n          mode = ApplicationMode.ADMIN;\r\n        this.setState({ applicationMode: mode });\r\n      });\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.body.classList.add('background');\r\n    this.setApplicationMode();\r\n\r\n    catchEvent('not-found', () => this.props.history.replace('/oops'));\r\n    catchEvent('login', () => this.setApplicationMode());\r\n    catchEvent('logout', () => {\r\n      this.setState({\r\n        applicationMode: ApplicationMode.GUEST\r\n      });\r\n      this.props.history.replace('/');\r\n    });\r\n    this.onRouteChanged(this.props.location);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.location.pathname !== prevProps.location.pathname) {\r\n      this.onRouteChanged(this.props.location);\r\n    }\r\n  }\r\n\r\n  onRouteChanged(location) {\r\n    var route = (NavigationModel.routes\r\n      .find(route => location.pathname.indexOf(route.to) != -1)\r\n      || NavigationModel.adminRoutes\r\n        .find(route => location.pathname.indexOf(route.to) != -1));\r\n    if (route)\r\n      this.setState({ currentRoute: route.id });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n        <MuiThemeProvider theme={theme}>\r\n          <UserService.SetApplicationMode value={this.state.applicationMode}>\r\n            <NavigationModel.SetCurrentRoute value={this.state.currentRoute}>\r\n              <div className=\"wrapper\">\r\n                <Navigation />\r\n                {/* <Home /> */}\r\n                <SignIn />\r\n                <AppRouting />\r\n              </div>\r\n            </NavigationModel.SetCurrentRoute>\r\n          </UserService.SetApplicationMode>\r\n        </MuiThemeProvider>\r\n      </MuiPickersUtilsProvider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(App);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './app';\r\n\r\nimport { library } from '@fortawesome/fontawesome-svg-core';\r\nimport { faTrophy } from '@fortawesome/free-solid-svg-icons';\r\nlibrary.add(faTrophy)\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById(\"root\")\r\n);","import React from 'react';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport App from './App';\r\n\r\nexport default () => {\r\n  return (\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\n"],"sourceRoot":""}