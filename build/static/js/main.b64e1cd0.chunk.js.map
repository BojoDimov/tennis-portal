{"version":3,"sources":["components/DisplayImage.js","app/NotFoundPage.js","services/events.service.js","configuration.js","services/query.service.js","tournaments/TournamentView.js","enums.js","services/user.service.js","components/EnumSelect.js","components/EnumSelectToggle.js","schemes/SchemeFormModal.js","components/FormModal.js","components/MessageModal.js","schemes/components/ScoresModal.js","components/ConfirmationDialog.js","schemes/components/EliminationPreviewModal.js","components/icons/PlayersIcon.js","components/icons/GroupIcon.js","components/icons/BracketIcon.js","components/icons/CalendarIcon.js","components/icons/TournamentIcon.js","components/icons/EditBoxedIcon.js","components/icons/WinnerIcon.js","components/icons/HeatIcon.js","components/icons/SnowIcon.js","components/SeasonIcon.js","components/select/components.js","components/select/AsyncSelect.js","components/select/styles.js","schemes/components/SelectTeamModal.js","schemes/components/Enrollments.js","components/ThumbnailOrDefault.js","tournaments/scheme.components.js","users/InvitationsComponent.js","schemes/components/InvitationsModal.js","tournaments/SchemeView.js","tournaments/scheme.styles.js","schemes/SchemesRoot.js","schemes/brackets/EditGroupModal.js","schemes/components/MatchFormModal.js","schemes/brackets/GroupsBracket.js","schemes/brackets/EliminationBracket.js","components/ImageField.js","components/FileUpload.js","tournaments/TournamentFormModal.js","editions/EditionFormModal.js","components/icons/FlagIcon.js","tournaments/EditionsListTile.js","tournaments/EditionsList.js","components/L10n.js","schemes/components/SchemeDetails.js","schemes/components/SchemeDetailsActions.js","editions/EditionView.js","tournaments/EditionsRoot.js","tournaments/TournamentsRoot.js","tournaments/TeamStatisticsFormModal.js","tournaments/PlayersRoot.js","utils.js","schedule/reservation/EditReservationModal.js","schedule/reservation/styles.js","schedule/reservation/AdminReservation.js","schedule/reservation/ViewReservationModal.js","schedule/reservation/UserReservation.js","schedule/reservation/GuestReservation.js","schedule/reservation/Reservation.js","schedule/reservation/ShuffleItem.js","components/calendar/DateComponent.js","components/calendar/Calendar.js","schedule/Legend.js","schedule/Schedule.js","admin/courts/CourtItem.js","admin/courts/Courts.js","admin/seasons/SeasonItem.js","admin/seasons/Seasons.js","admin/statistics/utils.js","admin/statistics/MonthlyStatistics.js","admin/statistics/Statistics.js","users/user.model.js","admin/users/UserDetailsModal.js","admin/users/UserSubscriptionsModal.js","admin/users/Users.js","users/UserProfileFormModal.js","users/ChangePasswordModal.js","users/components/PlayerInfoComponent.js","users/TeamView.js","users/UserProfile.js","users/AccountView.js","login/Activation.js","login/RecoveryStep1.js","login/RecoveryStep2.js","menu/menu.configuration.js","app/app.routing.js","login/Login.js","login/Registration.js","login/SignIn.js","menu/menu.context.js","menu/index.js","theme.js","app/App.js","index.js","app/index.js"],"names":["Buffer","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","DisplayImage","_ref","image","style","buffer","content","data","b64","toString","mimeType","a","createElement","src","concat","NotFoundPage","react_default","className","Paper_default","height","display","justifyContent","alignItems","Typography_default","color","variant","React","Component","dispatchEvent","name","options","root","document","getElementById","event","CustomEvent","detail","catchEvent","cb","listener","bind","removeEventListener","addEventListener","events_service","configuration","backend","query_service","QueryService","Object","classCallCheck","this","window","Configuration","_this","FormData","append","defaultOptions","objectSpread","method","mode","body","fetch","then","res","errorHandling","json","fileId","resource","request","headers","Content-Type","JSON","stringify","_this2","token","localStorage","getItem","trim","status","err","setItem","location","replace","item","TournamentView","props","possibleConstructorReturn","getPrototypeOf","call","state","tournament","rankings","get","match","params","id","setState","Card_default","CardContent_default","info","Table_default","TableHead_default","TableRow_default","TableCell_default","padding","TableBody_default","map","ranking","index","Fragment","key","team","user1","user2","points","ApplicationMode","GUEST","USER","ADMIN","TRAINER","TOURNAMENT","RouteTypeEnum","PUBLIC","PROTECTED","Gender","MALE","FEMALE","Status","DRAFT","PUBLISHED","BracketStatus","UNDRAWN","GROUPS_DRAWN","GROUPS_END","ELIMINATION_DRAWN","ELIMINATION_END","CourtType","CLAY","HARD","GRASS","INDOOR","BackhandType","ONE","TWO","PlayStyle","LEFT","RIGHT","ReservationPayment","SODEXO","MULTISPORT","ABK","CASH","SUBS_ZONE_1","SUBS_ZONE_2","ReservationType","SUBSCRIPTION","COMPETITOR","ELDER_GROUP","TENNIS_SCHOOL","SERVICE","SUMMER_CAMP","OTHER","SubscriptionType","ZONE_1","ZONE_2","StatisticsType","MONTHLY","DAILY","EnumLocalization","_BracketStatus","defineProperty","_StatisticsType","_ReservationPayment","_ReservationType","CustomReservationType","_CustomReservationTyp","_SubscriptionType","_Status","FINALIZED","INACTIVE","_Gender","_CourtType","_BackhandType","_PlayStyle","user_service","UserService","_React$createContext","createContext","Provider","Consumer","SetApplicationMode","WithApplicationMode","cached","user","removeItem","EnumSelect","_this$props","value","onChange","EnumValues","EnumName","label","required","error","errorText","allowClear","FormControl_default","fullWidth","InputLabel_default","shrink","Boolean","Select_default","MenuItem_default","disabled","keys","i","fontSize","EnumSelectToggle","enumName","classes","values","Enums","translation","btn","leftRounded","Button_default","size","onClick","e","target","withStyles","theme","borderTopLeftRadius","borderBottomLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderRight","&:hover","rightRounded","borderRadius","borderLeft","boxSizing","SchemeFormModal","model","errors","save","assertThisInitialized","handleChange","prop","handleCustomChange","mixedTeams","maxPlayerCount","groupCount","teamsPerGroup","prevProps","assign","edition","post","_this3","_this$state","onClose","fullScreen","Dialog_default","open","paper","DialogTitle_default","component","DialogContent_default","components_EnumSelectToggle","TextField_default","multiline","marginTop","singleTeams","FormControlLabel_default","control","Checkbox_default","checked","maleTeams","femaleTeams","hasGroupPhase","type","seed","ageFrom","ageTo","DateTimePicker_default","autoOk","labelFunc","date","moment","format","clearable","ampm","registrationStart","registrationEnd","pPoints","wPoints","cPoints","DialogActions_default","btnContainer","width","breakpoints","down","flexDirection","marginBottom","withMobileDialog","breakpoint","FormModal","title","actions","hasError","enableFullWidth","rootClass","rootWithError","closeBtn","Clear_default","border","boxShadow","& button","marginLeft","position","palette","primary","main","top","right","cursor","dark","MessageModal","updated","activation","show","duration","setTimeout","components_FormModal","children","ScoresModal","scores","parseInt","isWinner","scheme","ListItem_default","flexBasis","score","wonMatches","totalMatches","Divider_default","List_default","getTeamView","ConfirmationDialog","isOpen","stopPropagation","close","accept","onAccept","EliminationPreviewModal","teams","onDraw","order","sort","b","reorder","components_ConfirmationDialog","draw","marginRight","changeOrder","PlayersIcon","x","y","viewBox","enableBackground","fill","d","GroupIcon","BracketIcon","CalendarIcon","TournamentIcon","EditBoxedIcon","WinnerIcon","HeatIcon","SnowIcon","version","xmlns","SeasonIcon","month","icons_HeatIcon","icons_SnowIcon","inputComponent","inputRef","objectWithoutProperties","ref","components","ClearIndicator","_props$innerProps","innerProps","restInnerProps","zIndex","Control","InputProps","inputProps","selectProps","input","innerRef","textFieldProps","Menu","MultiValue","Chip_default","tabIndex","classNames","chip","chipFocused","isFocused","onDelete","removeProps","deleteIcon","Cancel_default","NoOptionsMessage","noOptionsMessage","Option","buttonRef","selected","fontWeight","isSelected","Placeholder","SingleValue","singleValue","ValueContainer","valueContainer","AsyncSelect","searchTerm","limit","defaultLimit","totalCount","load","filter","loadMore","length","query","result","disableClear","disableSearch","getOptionLabel","getOptionValue","formatOptionLabel","selectStyles","container","base","menuList","paddingBottom","text","& input","font","_getOptionLabel","option","_getOptionValue","_noOptionsMessage","NoSsr_default","react_select_esm","isClearable","isSearchable","isDisabled","InputLabelProps","filterOption","current_values","onInputChange","onMenuScrollToBottom","styles","SelectComponents","customStyles","flexGrow","margin","original","flexWrap","flex","spacing","unit","backgroundColor","emphasize","grey","placeholder","left","divider","withTheme","SelectTeamModal","catch","errTextPrefix","canSave","select_AsyncSelect","email","message","EnrollmentsComponent","openTeamModal","enrolled","getData","teamId","schemeId","user1Id","user2Id","_this4","delete","_this5","hasPermission","ExpansionPanel_default","defaultExpanded","ExpansionPanelSummary_default","expandIcon","ExpandMore_default","ExpansionPanelDetails_default","components_SelectTeamModal","enrollment","borderClass","default","seedDivider","enrolledDivider","removeEnrollment","DeleteForever_default","lighten","borderBottom","light","secondary","ThumbnailOrDefault","getFileUrl","SchemeInfoBar","playerCount","info_bar_root","components_SeasonIcon","icons_PlayersIcon","icons_TournamentIcon","icons_CalendarIcon","RegisterWidget","invitationTrigger","onComplete","onError","start","end","diff","isBetween","enroll","Body","isBefore","days","hours","minutes","icons_EditBoxedIcon","isAfter","Hidden_default","smUp","xsDown","register_widget","SchemesWidget","_ref2","history","bracketStatus","elevation","schemes_widget_tile","push","icons_GroupIcon","icons_BracketIcon","schemes_widget","EnrollmentsWidget","_ref3","console","log","halfOfEnrolled","Math","ceil","getColor","mobile_heading","enrollments_widget","slice","Enrollments","FinalMatchWidget","_ref4","TableRow","_ref5","ThumbnailOrDefault_ThumbnailOrDefault","thumbnailId","textTransform","splitAndFormatName","icons_WinnerIcon","fontStyle","sets","set","team1Id","team1","team2Id","team2","tiebreaker","align","TableView","winnerId","SingleTeamView","_ref6","hasWinner","SingleView","finale_widget","single_teams_finale","split","part","charAt","join","InvitationsComponent","userId","page","rowsPerPage","setUserId","getAuthenticatedUser","invitation","onCancel","invitations","components_MessageModal","inv","inviterId","invited","invitedId","inviter","Link","to","cancel","TablePagination_default","count","rowsPerPageOptions","labelRowsPerPage","labelDisplayedRows","from","onChangePage","onChangeRowsPerPage","InvitationsModal","selectedUser","currentUser","invite","users_InvitationsComponent","SchemeView","matches","schemeModel","eliminationPreview","invitationsModal","enrollError","onCompleteRegisterAction","action","onErrorRegisterAction","finalMatch","getFinalMatch","schemes_SchemeFormModal","components_ScoresModal","components_InvitationsModal","components_EliminationPreviewModal","getButtons","heading","scheme_components_SchemeInfoBar","widgets_root","scheme_components_FinalMatchWidget","widgets_second_row","scheme_components_RegisterWidget","getCurrentUserEnrollment","createInvitationTrigger","scheme_components_SchemesWidget","scheme_components_EnrollmentsWidget","_this$state2","find","bracketRounds","round","_this6","_this7","_this8","_this9","_this10","_this11","_this12","deleteScheme","drawEliminationPhase","drawGroupPhase","finishPhase","getScores","_rowRoot","& > *","& > .left","& > .right","background","& .buttons","& .player","& .root","& .score","& .table-root","& .row-root","SchemesRoot","Switch","Route","path","render","tournaments_SchemeView","EditGroupModal","setTeam","groupId","splice","groupOrder","group","undefined","String","fromCharCode","charCodeAt","groupTeam","IconButton_default","removeTeam","addTeam","MatchFormModal","withdraw","handleSetsChange","formatSets","existingSet","matchId","enableTeamChange","maxWidth","GroupsBracket","groups","groupModel","matchModel","enableActions","refreshHandle","setInterval","clearInterval","brackets_EditGroupModal","components_MatchFormModal","addGroup","groupsContainer","GroupsBracket_Group","onEdit","deleteGroup","onAddMatch","addMatch","onEditMatch","onDeleteMatch","deleteMatch","Group","getGroupHeader","Tabs_default","indicatorColor","textColor","Tab_default","transition","GroupsBracket_GroupRankingView","groupTeams","GroupsBracket_GroupMatchesView","GroupRankingView","GroupsBracket_GroupTeamInfo","rank","stats","GroupMatchesView","_this$props2","Edit_default","GroupTeamInfo","_this$props3","EliminationBracket","bracket","constructBracket","roundSize","rounds","log2","_loop","_loop2","currentMatch","constructMatch","pow","getRoundName","EliminationBracket_Match","onEvent","Match","Tooltip_default","placement","TransitionComponent","Zoom","enterDelay","EliminationBracket_TeamInfo","pos","TeamInfo","enemyPos","composeScore","ImageField","imageStyle","Photo_default","click","TournamentFormModal","handleThumbnail","files","uploadFile","file","thumbnail","components_ImageField","EditionFormModal","startDate","endDate","tournamentId","parse","schemes","DatePicker_default","truncateInfo","whiteSpace","overflow","textOverflow","FlagIcon","EditionsListTile","showSchemeInfo","ongoingSuffix","isSameOrAfter","tileRoot","navigate","date_root","name_root","final","finale","winner","getWinnerOrFirstTeam","runnerUp","icons_FlagIcon","getRunnerUpOrSecondTeam","info_root","icon_and_text","_info_root","&.ongoing","& .month_part","& .date_part","& *","& .title","&.ongoing *","& > *+*","EditionsList","editions","editionModel","tournamentModel","editions_EditionFormModal","tournaments_TournamentFormModal","tournaments_EditionsListTile","_root","l10n_text","translate","L10n","SchemeDetails","enableEditionLink","CardProps","schemeAccent","editionId","editionAccent","paddingRight","traits","ageTrait","getSchemeTraits","CardActions_default","disableActionSpacing","EditionView","initSchemeModel","remove","schemesRoot","components_SchemeDetails","schemesItem","EditionsRoot","editions_EditionView","exact","tournaments_EditionsList","TournamentsRouting","TournamentsRoot_TournamentsRoot","TournamentsRoot","tournaments","refresh","openTournamentModal","previewContainer","TournamentsRoot_TournamentPreview","onRemove","removeTournament","TournamentPreview","previewRoot","previewImage","previewBodyPart","draftLabel","edit","_previewRoot","opacity","TeamStatisticsFormModal","handleUpdate","field","previousProps","onUpdate","wonTournaments","totalTournaments","PlayersRoot","teamsMode","itemsPerPage","editTeamModel","rows","tournaments_TeamStatisticsFormModal","_","globalRank","getWinRatio","prefix","badge","suffix","mobileRoot","basicBadge","goldBadge","backgroundImage","silverBadge","bronzeBadge","goldRoot","goldTypography","silverRoot","silverTypography","bronzeRoot","bronzeTypography","getHour","hour","getRange","toConsumableArray","Array","EditReservationModal","reservation","court","season","payments","administrator","customer","customerId","subscription","subscriptionId","handlePaymentChange","handlePaymentSubscriptionChange","onAction","unshift","amount","reservationId","DialogContentText_default","components_EnumSelect","remainingHours","addPayment","Add_default","payment","paymentCell","endAdornment","InputAdornment_default","onlyAvailable","ErrorTexts","cancelReservation","exist","typeRequired","customerRequired","subscriptionRequired","usedHoursExceedTotalHours","paymentSubscriptionRequired","typeSubscriptionAndHasPaymentSubscription","maxAllowedTimeDiff","reservationInThePast","up","cell","textAlign","button","AdminReservation","modal","components_L10n","free","paidReservation","unpaidReservation","unavaliable","getCellLabel","reservation_EditReservationModal","ReservationStyles","contrastText","ViewReservationModal","makeReservation","UserReservation","reserved","reservation_ViewReservationModal","GuestReservation","available","taken","promptLogin","Reservation","setUser","workingHoursEnd","workingHoursStart","reservation_AdminReservation","reservation_GuestReservation","isTrainer","reservation_UserReservation","ShuffleItem","shuffle","onSelect","onUnselect","findIndex","courtId","select","service","DateComponent","Date","getDate","previousSelected","weekDays","day","year","getDay","k","availiableDaysAhead","targetDate","today","floor","getFullYear","getMonth","_this$props4","tabsRoot","scroller","tabsScroller","indicator","tabsIndicator","scrollButtons","tabsScrollButtons","getDays","tab","isToday","todayTab","selectedTab","disabledTab","labelContainer","getLabel","minWidth","minHeight","Calendar","startOf","years","monts","emitDateOnAnyChange","formControl","calendar_DateComponent","paddingLeft","Legend","unavailiable","& div","scrollButton","Schedule","counter","courts","reservations","rootRef","onscroll","tableRef","needScrollBtns","clientWidth","tableInViewport","scrollTop","offsetTop","btnContainerRef","getAdministrator","getConfig","config","sameReservation","constructReservation","shuffleErrors","seasonId","scrollLeft","gutterBottom","calendar_Calendar","schedule_Legend","index_es","Replay_default","Shuffle_default","overflowX","scrollBehavior","scroll","ChevronLeft_default","scrollRight","ChevronRight_default","reservation_ShuffleItem","getReservation","shuffleOnSelect","shuffleOnUnselect","reservation_Reservation","invalid","invalidTime","CourtItem","onCreateCancel","CourtItem_CourtEdit","handleCancel","card","isActive","cardContent","cardActions","CourtEdit","Switch_default","rowsMax","Courts","addCourt","courts_CourtItem","updateModel","removeCourt","SeasonItem","loading","SeasonItem_SeasonEdit","seasonStart","toLocaleDateString","seasonEnd","CircularProgress_default","Snackbar_default","anchorOrigin","vertical","horizontal","autoHideDuration","aria-label","Close_default","SeasonEdit","Seasons","seasons","addSeason","seasons_SeasonItem","removeSeason","SortableTableCell","_React$Component","active","direction","handleClick","orderHandler","inherits","createClass","TableSortLabel_default","orderData","ordering","UserPlayedHours","handleOrder","users","forEach","totalHours","transformToUserPlayedHours","utils_SortableTableCell","reduce","acc","curr","StatisticByClassifier","_React$Component2","classifier","label1","label2","customFn","customValueSuffix","transformed","arguments","customValue","custom","transformByClassifier","reduceToPayments","paymentsAmountAccumulator","current","parseFloat","StatisticsRoot","handleCalendarChange","handleStatisticsChange","MonthlyStatistics_UserPlayedHours","MonthlyStatistics_StatisticByClassifier","UserModel","UserAccountData","UserAccountSecondaryData","UserPlayerMainData","UserPlayerSecondaryData","password","confirmPassword","firstName","lastName","telephone","gender","birthDate","startedPlaying","playStyle","courtType","backhandType","reservationDebt","subscriptionDebt","UET","helperText","composeErrors","openToYearSelection","unique","short","mismatch","future","range","user_model","UserDetailsModal","getErrorsModel","isTournamentAdmin","UserSubscriptionsModal","subscriptions","newValue","handleDelete","init","addSubscription","sub","UserSubscriptionsModal_Subscription","ArrowBack_default","Subscription","isEditMode","expanded","changeSeason","cancelEdit","Users","currentSeason","usersFilter","editUser","subsUser","toLowerCase","includes","names","filterUsers","users_UserDetailsModal","users_UserSubscriptionsModal","updateSubscriptions","createdAt","Done_default","isAdmin","prepareForEdit","DescriptionOutlined_default","Build_default","UserProfileFormModal","ChangePasswordModal","currentPassword","newPassword","confirmNewPassword","errorTexts","InvalidCredentialsException","PasswordRequired","PasswordDoesntMatch","PlayerInfoComponent","TeamView","components_PlayerInfoComponent","UserProfile","loggedInUser","subsCollapsed","resCollapsed","invCollapsed","userModel","changePassword","users_UserProfileFormModal","users_ChangePasswordModal","sectionRoot","cardContentRoot","sectionHeadline","UserProfile_UserPersonalInfo","UserProfile_UserPlayerInfo","ExpandLess_default","listItemRoot","UserPersonalInfo","apply","UserPlayerInfo","_React$Component3","&:last-child","AccountView","errorMessage","isDelete","getTime","participateInTournaments","AccountActivation","success","timer","interval","search","RecoveryStep1","issueRecoverEmail","RecoveryStep2","recover","desktopRoutes","Icon","CalendarTodayIcon","tag","faIcon","adminRoutes","PersonIcon","WbSunnyRoundedIcon","ViewQuiltRoundedIcon","AssessmentIcon","tournamentAdditional","userRoutes","routeMapping","/schedule","/editions","/players","/leagues","/admin/courts","/admin/seasons","/admin/users","/admin/statistics","Statistics","/account","AppRouting","route","users_UserProfile","Activation","login_RecoveryStep1","login_RecoveryStep2","Redirect","Login","login","form","onKeyDown","link","borderColor","RegistrationStepper","activeStep","completed","changeStep","onSuccess","register","focused","SignIn","successfulRegistration","handleTabChange","handleRegistration","EventService","aria-labelledby","centered","smallContainer","lib_default","onChangeIndex","login_Login","Registration","menu_context","MenuContext","SetCurrentRoute","WithCurrentRoute","drawerOpen","logout","currentRoute","ListItemIcon_default","react_fontawesome_index_es","icon","ListItemText_default","Toolbar_default","toolbar","smDown","mapToolbarRoute","Menu_default","Drawer_default","anchor","drawerIcon","mdUp","mapDrawerRoute","PowerSettingsNew_default","list","createMuiTheme","overrides","MuiFormControl","MuiDialog","overflowY","MuiTypography","caption","body2","display1","display2","h4","MuiCardActions","MuiDrawer","App","applicationMode","handleLoginTab","classList","add","setApplicationMode","onRouteChanged","isLoggedIn","pathname","indexOf","MuiPickersUtilsProvider_default","utils","DateFnsUtils","core_styles","menu","login_SignIn","app_routing","withRouter","library","faTrophy","faMedal","faUserFriends","faListOl","ReactDOM","BrowserRouter","app_App"],"mappings":"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","file":"static/js/main.b64e1cd0.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst DisplayImage = ({ image, style }) => {\r\n  const buffer = image.content.data;\r\n  const b64 = new Buffer(buffer).toString('base64')\r\n  const mimeType = image.mimeType;\r\n\r\n  return <img src={`data:${mimeType};base64,${b64}`} style={style} />\r\n};\r\n\r\nexport default DisplayImage;","import React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nclass NotFoundPage extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <Paper style={{ height: '300px', display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n          <Typography color=\"secondary\" variant=\"headline\">\r\n            Страницата, която търсите, вече не съществува 🙉\r\n      </Typography>\r\n        </Paper>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NotFoundPage;","export function dispatchEvent(name, options) {\r\n  const root = document.getElementById('root');\r\n  const event = new CustomEvent(name, { detail: options });\r\n  root.dispatchEvent(event);\r\n}\r\n\r\nexport function catchEvent(name, cb) {\r\n  const root = document.getElementById('root');\r\n  const listener = customEventListener.bind(null, cb);\r\n  root.removeEventListener(name, listener);\r\n  root.addEventListener(name, listener);\r\n}\r\n\r\nfunction customEventListener(cb, event) {\r\n  return cb(event.detail);\r\n}\r\n\r\nexport default {\r\n  dispatchEvent,\r\n  catchEvent\r\n};","export default {\r\n  backend: 'http://localhost:4000/api'\r\n}","import { dispatchEvent } from './events.service';\r\nimport Configuration from '../configuration';\r\n\r\nclass QueryService {\r\n  constructor() {\r\n    this.backend = (window.configuration || Configuration).backend;\r\n  }\r\n\r\n  uploadFile(content, options) {\r\n    let data = new FormData();\r\n    data.append('file', content);\r\n\r\n    let defaultOptions = {\r\n      method: 'POST',\r\n      mode: 'cors',\r\n      body: data,\r\n      ...options\r\n    }\r\n\r\n    return fetch(this.backend + '/files', defaultOptions)\r\n      .then(res => this.errorHandling(res))\r\n      .then(res => res.json());\r\n  }\r\n\r\n  getFileUrl(fileId) {\r\n    if (fileId)\r\n      return `${this.backend}/files/${fileId}`;\r\n  }\r\n\r\n  get(resource) {\r\n    let options = {\r\n      method: 'GET',\r\n      mode: 'cors',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    };\r\n\r\n    return this\r\n      .request(resource, options);\r\n    //.then(this.notFoundHandling);\r\n  }\r\n\r\n  post(resource, body) {\r\n    let options = {\r\n      method: 'POST',\r\n      mode: 'cors',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(body)\r\n    };\r\n\r\n    return this.request(resource, options);\r\n  }\r\n\r\n  delete(resource) {\r\n    let options = {\r\n      method: 'DELETE',\r\n      mode: 'cors',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    };\r\n\r\n    return this.request(resource, options);\r\n  }\r\n\r\n  request(resource, options) {\r\n    let token = window.localStorage.getItem('token');\r\n    if (token)\r\n      options.headers['Authorization'] = 'Bearer ' + token.trim();\r\n\r\n    return fetch(this.backend + resource, options)\r\n      .then(res => this.errorHandling(res))\r\n      .then(res => res.json());\r\n  }\r\n\r\n  errorHandling(res) {\r\n    if (res.status === 404) {\r\n      dispatchEvent('not-found');\r\n      throw null;\r\n    }\r\n    if (res.status === 422)\r\n      return res\r\n        .json()\r\n        .then(err => { throw err; });\r\n    if (res.status === 500)\r\n      throw null;\r\n    if (res.status === 401) {\r\n      window.localStorage.setItem('token', null);\r\n      window.location.replace('/');\r\n    }\r\n    else return res || null;\r\n  }\r\n\r\n  notFoundHandling(item) {\r\n    if (item == null) {\r\n      dispatchEvent('not-found');\r\n      throw null;\r\n    }\r\n    else return item;\r\n  }\r\n}\r\n\r\nexport default new QueryService();","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nimport QueryService from '../services/query.service';\r\n\r\nclass TournamentView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      tournament: {\r\n        rankings: []\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    QueryService\r\n      .get(`/tournaments/${this.props.match.params.id}`)\r\n      .then(tournament => this.setState({ tournament }));\r\n  }\r\n\r\n  render() {\r\n    const tournament = this.state.tournament;\r\n    const rankings = tournament.rankings;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <Card>\r\n          <CardContent>\r\n            <Typography variant=\"headline\">Лига {tournament.name}</Typography>\r\n            <Typography variant=\"caption\">{tournament.info}</Typography>\r\n\r\n            <Table>\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell padding=\"none\">№</TableCell>\r\n                  <TableCell>Играч/отбор</TableCell>\r\n                  <TableCell padding=\"dense\">Точки</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n\r\n                {rankings.map((ranking, index) => {\r\n                  return (\r\n                    <React.Fragment key={ranking.id}>\r\n                      <TableRow>\r\n                        <TableCell padding=\"none\">{index + 1}</TableCell>\r\n                        <TableCell>\r\n                          <Typography variant=\"body2\">{ranking.team.user1.name}</Typography>\r\n                          {ranking.team.user2 && <Typography variant=\"body2\">{ranking.team.user2.name}</Typography>}\r\n                        </TableCell>\r\n                        <TableCell padding=\"dense\">\r\n                          <Typography variant=\"caption\">{ranking.points}</Typography>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    </React.Fragment>\r\n                  );\r\n                })}\r\n              </TableBody>\r\n            </Table>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TournamentView;","export const ApplicationMode = {\r\n  GUEST: 'guest',\r\n  USER: 'user',\r\n  ADMIN: 'admin',\r\n  TRAINER: 'trainer',\r\n  TOURNAMENT: 'tournament'\r\n};\r\n\r\nexport const RouteTypeEnum = {\r\n  PUBLIC: 'public',\r\n  PROTECTED: 'protected',\r\n  ADMIN: 'admin'\r\n};\r\n\r\nexport const Gender = {\r\n  MALE: 'male',\r\n  FEMALE: 'female'\r\n};\r\n\r\nexport const Status = {\r\n  DRAFT: 'draft',\r\n  PUBLISHED: 'published'\r\n};\r\n\r\n// export const SchemeType = {\r\n//   GROUP: 'round-robin',\r\n//   ELIMINATION: 'elimination'\r\n// };\r\n\r\nexport const BracketStatus = {\r\n  UNDRAWN: 'undrawn',\r\n  GROUPS_DRAWN: 'groups-in-progress',\r\n  GROUPS_END: 'groups-finished',\r\n  ELIMINATION_DRAWN: 'elimination-in-progress',\r\n  ELIMINATION_END: 'elimination-finished'\r\n};\r\n\r\nexport const CourtType = {\r\n  CLAY: 'clay',\r\n  HARD: 'hard',\r\n  GRASS: 'grass',\r\n  INDOOR: 'indoor'\r\n};\r\n\r\nexport const BackhandType = {\r\n  ONE: '1h',\r\n  TWO: '2h'\r\n};\r\n\r\nexport const PlayStyle = {\r\n  LEFT: 'left-handed',\r\n  RIGHT: 'right-handed'\r\n};\r\n\r\nexport const ReservationPayment = {\r\n  SODEXO: 'sodexo',\r\n  MULTISPORT: 'multisport',\r\n  ABK: 'abk',\r\n  CASH: 'cash',\r\n  SUBS_ZONE_1: 'zone1',\r\n  SUBS_ZONE_2: 'zone2'\r\n}\r\n\r\nexport const ReservationType = {\r\n  GUEST: 'guest',\r\n  USER: 'user',\r\n  SUBSCRIPTION: 'subscription',\r\n  COMPETITOR: 'competitor',\r\n  ELDER_GROUP: 'elder',\r\n  TENNIS_SCHOOL: 'school',\r\n  TOURNAMENT: 'tournament',\r\n  SERVICE: 'service',\r\n  SUMMER_CAMP: 'camp',\r\n  OTHER: 'other'\r\n};\r\n\r\nexport const SubscriptionType = {\r\n  ZONE_1: 'zone1',\r\n  ZONE_2: 'zone2'\r\n};\r\n\r\nexport const StatisticsType = {\r\n  MONTHLY: 'month',\r\n  DAILY: 'day'\r\n};\r\n\r\nexport const EnumLocalization = {\r\n  // 'SchemeType': {\r\n  //   [SchemeType.ELIMINATION]: 'Елиминации',\r\n  //   [SchemeType.GROUP]: 'Групи'\r\n  // },\r\n  'BracketStatus': {\r\n    [BracketStatus.UNDRAWN]: 'Неизтеглена схема',\r\n    [BracketStatus.GROUPS_DRAWN]: 'Групова фаза',\r\n    [BracketStatus.GROUPS_END]: 'Приключила групова фаза',\r\n    [BracketStatus.ELIMINATION_DRAWN]: 'Елиминационна фаза',\r\n    [BracketStatus.ELIMINATION_END]: 'Приключена схема'\r\n  },\r\n  'StatisticsType': {\r\n    [StatisticsType.MONTHLY]: 'Месечна',\r\n    [StatisticsType.DAILY]: 'Дневна'\r\n  },\r\n  'ReservationPayment': {\r\n    [ReservationPayment.CASH]: 'В брой',\r\n    [ReservationPayment.SODEXO]: 'Карта \"Содексо\"',\r\n    [ReservationPayment.MULTISPORT]: 'Карта \"Мултиспорт\"',\r\n    [ReservationPayment.ABK]: 'Абонаментна карта (АБК)',\r\n    [ReservationPayment.SUBS_ZONE_1]: 'Отиграване на абонамент \"ЗОНА 1\"',\r\n    [ReservationPayment.SUBS_ZONE_2]: 'Отиграване на абонамент \"ЗОНА 2\"'\r\n  },\r\n  'ReservationType': {\r\n    [ReservationType.GUEST]: 'Гост',\r\n    [ReservationType.USER]: 'Потребител',\r\n    [ReservationType.SUBSCRIPTION]: 'Абонат',\r\n    [ReservationType.COMPETITOR]: 'Състезатели',\r\n    [ReservationType.TENNIS_SCHOOL]: 'Тенис училище',\r\n    [ReservationType.ELDER_GROUP]: 'Група за възрастни',\r\n    [ReservationType.TOURNAMENT]: 'Турнир',\r\n    [ReservationType.SERVICE]: 'Неработещо игрище',\r\n    [ReservationType.SUMMER_CAMP]: 'Летен лагер',\r\n    [ReservationType.OTHER]: 'Друго'\r\n  },\r\n  'CustomReservationType': {\r\n    [ReservationType.USER]: 'Резервация',\r\n    [ReservationType.SUBSCRIPTION]: 'Абонамент',\r\n    [ReservationType.COMPETITOR]: 'Състезатели'\r\n  },\r\n  'SubscriptionType': {\r\n    [SubscriptionType.ZONE_1]: 'ЗОНА 1',\r\n    [SubscriptionType.ZONE_2]: 'ЗОНА 2'\r\n  },\r\n  'Status': {\r\n    [Status.DRAFT]: 'чернова',\r\n    [Status.PUBLISHED]: 'публикувано',\r\n    [Status.FINALIZED]: 'приключено',\r\n    [Status.INACTIVE]: 'неактивно'\r\n  },\r\n  'Gender': {\r\n    [Gender.MALE]: 'Мъж',\r\n    [Gender.FEMALE]: 'Жена'\r\n  },\r\n  'CourtType': {\r\n    [CourtType.CLAY]: 'клей',\r\n    [CourtType.HARD]: 'твърда настилка',\r\n    [CourtType.GRASS]: 'трева',\r\n    [CourtType.INDOOR]: 'на закрито'\r\n  },\r\n  'BackhandType': {\r\n    [BackhandType.ONE]: 'с една ръка',\r\n    [BackhandType.TWO]: 'с две ръце'\r\n  },\r\n  'PlayStyle': {\r\n    [PlayStyle.LEFT]: 'лява ръка',\r\n    [PlayStyle.RIGHT]: 'дясна ръка'\r\n  }\r\n};","import React from 'react';\r\nimport { dispatchEvent } from './events.service';\r\nimport QueryService from './query.service';\r\nimport { ApplicationMode } from '../enums';\r\n\r\n\r\nclass UserService {\r\n  constructor() {\r\n    const { Provider, Consumer } = React.createContext(ApplicationMode.GUEST);\r\n    this.SetApplicationMode = Provider;\r\n    this.WithApplicationMode = Consumer;\r\n    this.cached = false;\r\n    this.user = null;\r\n  }\r\n\r\n  async getAuthenticatedUser() {\r\n    if (!this.cached)\r\n\r\n      this.user = QueryService.get('/login/authData')\r\n        .then(({ data }) => {\r\n          this.cached = true;\r\n          return data;\r\n        });\r\n\r\n    return this.user;\r\n  }\r\n\r\n  async isLoggedIn() {\r\n    return await QueryService.get('/login/authData').data != null;\r\n  }\r\n\r\n  login(data) {\r\n    localStorage.setItem('token', data.token);\r\n    this.cached = false;\r\n    dispatchEvent('login');\r\n  }\r\n\r\n  logout() {\r\n    localStorage.removeItem('token');\r\n    this.cached = false;\r\n    dispatchEvent('logout');\r\n  }\r\n}\r\n\r\nexport default new UserService();","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\nimport { EnumLocalization } from '../enums';\r\n\r\nclass EnumSelect extends React.Component {\r\n  render() {\r\n    const {\r\n      value,\r\n      onChange,\r\n      EnumValues,\r\n      EnumName,\r\n      label,\r\n      required,\r\n      error,\r\n      errorText,\r\n      allowClear\r\n    } = this.props;\r\n\r\n    return (\r\n      <FormControl fullWidth={true} error={error}>\r\n        <InputLabel required={required} shrink={Boolean(value)}>\r\n          {label}\r\n        </InputLabel>\r\n        <Select\r\n          value={value}\r\n          onChange={onChange}\r\n        >\r\n          <MenuItem value={null} disabled={true}>\r\n            <Typography variant=\"display2\">{label}</Typography>\r\n          </MenuItem>\r\n          {allowClear && <MenuItem value=\"\">\r\n            <Typography variant=\"caption\">Няма</Typography>\r\n          </MenuItem>}\r\n          {Object.keys(EnumValues).map((key, i) => {\r\n            return (\r\n              <MenuItem key={i} value={EnumValues[key]}>\r\n                {EnumLocalization[EnumName][EnumValues[key]]}\r\n              </MenuItem>\r\n            );\r\n          })}\r\n        </Select>\r\n        <Typography style={{ color: 'red', fontSize: '.8rem' }}>{errorText}</Typography>\r\n      </FormControl>\r\n    );\r\n  }\r\n}\r\n\r\n// EnumSelect.propTypes = {\r\n//   value: PropTypes.string.isRequired,\r\n//   label: PropTypes.string.isRequired,\r\n//   EnumValues: PropTypes.object.isRequired,\r\n//   EnumName: PropTypes.string.isRequired,\r\n//   onChange: PropTypes.func.isRequired\r\n// };\r\n\r\nexport default EnumSelect;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport * as Enums from '../enums';\r\n\r\nclass EnumSelectToggle extends React.Component {\r\n  render() {\r\n    const { style, enumName, value, onChange, classes } = this.props;\r\n    const values = Enums[enumName];\r\n    const translation = Enums.EnumLocalization[enumName];\r\n\r\n    return (\r\n      <div style={style} className={classes.root}>\r\n        {Object.keys(values).map((key, index) => {\r\n          let btnClass = classes.btn;\r\n          if (index == 0)\r\n            btnClass = classes.leftRounded;\r\n\r\n          return (\r\n            <Button\r\n              className={classes.btn}\r\n              key={key}\r\n              variant={values[key] === value ? 'contained' : 'outlined'}\r\n              color=\"primary\" size=\"small\" onClick={e => {\r\n                e.target.value = values[key];\r\n                return onChange(e);\r\n              }}>\r\n              {translation[values[key]]}\r\n            </Button>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  leftRounded: {\r\n    borderTopLeftRadius: '3px',\r\n    borderBottomLeftRadius: '3px',\r\n    borderTopRightRadius: '0',\r\n    borderBottomRightRadius: '0',\r\n    borderRight: 'none',\r\n    '&:hover': {\r\n      borderRight: 'none'\r\n    }\r\n  },\r\n  rightRounded: {\r\n    borderRadius: '5px',\r\n    borderLeft: 'none'\r\n  },\r\n  btn: {\r\n    borderRadius: '0',\r\n    boxSizing: 'border-box'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(EnumSelectToggle);","import React from 'react';\r\nimport moment from 'moment';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport DatePicker from 'material-ui-pickers/DatePicker';\r\nimport DateTimePicker from 'material-ui-pickers/DateTimePicker';\r\n\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Select from '@material-ui/core/Select';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport EnumSelect from '../components/EnumSelect';\r\nimport EnumSelectToggle from '../components/EnumSelectToggle';\r\nimport QueryService from '../services/query.service';\r\n\r\n\r\nclass SchemeFormModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      model: {\r\n      },\r\n      errors: []\r\n    }\r\n\r\n    this.save = this.save.bind(this);\r\n\r\n    this.handleChange = (prop) => (e) => {\r\n      const model = this.state.model;\r\n      model[prop] = e.target.value;\r\n      this.setState({ model });\r\n    }\r\n\r\n    this.handleCustomChange = (prop) => (value) => {\r\n      const model = this.state.model;\r\n      if (prop === 'singleTeams')\r\n        model.mixedTeams = false;\r\n\r\n      if (prop === 'hasGroupPhase') {\r\n        model.maxPlayerCount = '';\r\n        model.groupCount = '';\r\n        model.teamsPerGroup = '';\r\n      }\r\n\r\n      model[prop] = value;\r\n      this.setState({ model });\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ model: this.props.model });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.model != this.props.model)\r\n      this.setState({ model: this.props.model });\r\n  }\r\n\r\n  save() {\r\n    const model = Object.assign({}, this.state.model, { edition: null });\r\n    return QueryService\r\n      .post(`/schemes/${model.id ? model.id : ''}`, model)\r\n      .then(e => this.props.onChange(e));\r\n  }\r\n\r\n  render() {\r\n    const { model, errors } = this.state;\r\n    const { onClose, classes, fullScreen } = this.props;\r\n\r\n    return (\r\n      <Dialog\r\n        open={true}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        classes={{ paper: classes.root }}\r\n      >\r\n        <DialogTitle>\r\n          <Typography component=\"span\" variant=\"headline\">Форма за промяна/създаване на схема</Typography>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <EnumSelectToggle\r\n            value={model.status}\r\n            enumName=\"Status\"\r\n            onChange={this.handleChange('status')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Име на схемата\"\r\n            value={model.name}\r\n            required\r\n            fullWidth={true}\r\n            onChange={this.handleChange('name')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Допълнителна информация\"\r\n            value={model.info}\r\n            multiline={true}\r\n            fullWidth={true}\r\n            onChange={this.handleChange('info')}\r\n          />\r\n\r\n          <Typography variant=\"headline\" style={{ marginTop: '2rem' }}>Параметри</Typography>\r\n\r\n          <FormControl fullWidth={true} required>\r\n            <InputLabel>Формат</InputLabel>\r\n            <Select\r\n              onChange={e => this.handleCustomChange('singleTeams')(e.target.value)}\r\n              value={model.singleTeams}\r\n            >\r\n              <MenuItem value={true}>Сингъл</MenuItem>\r\n              <MenuItem value={false}>Двойки</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n\r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                color=\"primary\"\r\n                checked={model.maleTeams}\r\n                onChange={e => this.handleCustomChange('maleTeams')(e.target.value === 'true')}\r\n                value={!model.maleTeams + ''}\r\n              />\r\n            }\r\n            label=\"Мъже\"\r\n          />\r\n\r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                color=\"primary\"\r\n                checked={model.femaleTeams}\r\n                onChange={e => this.handleCustomChange('femaleTeams')(e.target.value === 'true')}\r\n                value={!model.femaleTeams + ''} />\r\n            }\r\n            label=\"Жени\"\r\n          />\r\n\r\n          {!model.singleTeams && <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                color=\"primary\"\r\n                checked={model.mixedTeams}\r\n                onChange={e => this.handleCustomChange('mixedTeams')(e.target.value === 'true')}\r\n                value={!model.mixedTeams + ''}\r\n              />\r\n            }\r\n            label=\"Микс\"\r\n          />}\r\n\r\n          <div>\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  color=\"primary\"\r\n                  checked={model.hasGroupPhase}\r\n                  onChange={e => this.handleCustomChange('hasGroupPhase')(e.target.value === 'true')}\r\n                  value={!model.hasGroupPhase + ''}\r\n                />\r\n              }\r\n              label=\"Включване на групова фаза\"\r\n            />\r\n          </div>\r\n\r\n          {!model.hasGroupPhase\r\n            && <TextField\r\n              label=\"Брой играчи\"\r\n              value={model.maxPlayerCount}\r\n              type=\"number\"\r\n              required={true}\r\n              fullWidth={true}\r\n              onChange={this.handleChange('maxPlayerCount')}\r\n            />}\r\n\r\n          {model.hasGroupPhase\r\n            && <TextField\r\n              label=\"Брой групи\"\r\n              value={model.groupCount}\r\n              type=\"number\"\r\n              required={true}\r\n              fullWidth={true}\r\n              onChange={this.handleChange('groupCount')}\r\n            />}\r\n\r\n          {model.hasGroupPhase\r\n            && <TextField\r\n              label=\"Брой играчи в група\"\r\n              value={model.teamsPerGroup}\r\n              type=\"number\"\r\n              required={true}\r\n              fullWidth={true}\r\n              onChange={this.handleChange('teamsPerGroup')}\r\n            />}\r\n\r\n          <TextField\r\n            label=\"Брой поставени играчи\"\r\n            value={model.seed}\r\n            type=\"number\"\r\n            fullWidth={true}\r\n            onChange={this.handleChange('seed')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Възраст От\"\r\n            value={model.ageFrom}\r\n            type=\"number\"\r\n            fullWidth={true}\r\n            onChange={this.handleChange('ageFrom')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Възраст До\"\r\n            value={model.ageTo}\r\n            type=\"number\"\r\n            fullWidth={true}\r\n            onChange={this.handleChange('ageTo')}\r\n          />\r\n\r\n\r\n          <Typography variant=\"headline\" style={{ marginTop: '2rem' }}>Дати</Typography>\r\n\r\n          <DateTimePicker\r\n            autoOk\r\n            label=\"Дата\"\r\n            labelFunc={(date) => date ? moment(model.date).format('DD.MM.YYYY  HH:mm') : ''}\r\n            clearable\r\n            ampm={false}\r\n            required={true}\r\n            fullWidth={true}\r\n            value={model.date}\r\n            onChange={this.handleCustomChange('date')}\r\n          />\r\n\r\n          <DateTimePicker\r\n            label=\"Начало на регистрациите\"\r\n            labelFunc={(date) => date ? moment(model.registrationStart).format('DD.MM.YYYY  HH:mm') : ''}\r\n            clearable\r\n            ampm={false}\r\n            required={true}\r\n            fullWidth={true}\r\n            value={model.registrationStart}\r\n            onChange={this.handleCustomChange('registrationStart')}\r\n          />\r\n\r\n          <DateTimePicker\r\n            label=\"Край на регистрациите\"\r\n            labelFunc={(date) => date ? moment(model.registrationEnd).format('DD.MM.YYYY  HH:mm') : ''}\r\n            clearable\r\n            ampm={false}\r\n            required={true}\r\n            fullWidth={true}\r\n            value={model.registrationEnd}\r\n            onChange={this.handleCustomChange('registrationEnd')}\r\n          />\r\n\r\n\r\n          <Typography variant=\"headline\" style={{ marginTop: '2rem' }}>Точки</Typography>\r\n\r\n          <TextField\r\n            label=\"Точки за участие\"\r\n            value={model.pPoints}\r\n            type=\"number\"\r\n            fullWidth={true}\r\n            onChange={this.handleChange('pPoints')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Точки за победа\"\r\n            value={model.wPoints}\r\n            type=\"number\"\r\n            fullWidth={true}\r\n            onChange={this.handleChange('wPoints')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Точки за шампион\"\r\n            value={model.cPoints}\r\n            type=\"number\"\r\n            fullWidth={true}\r\n            onChange={this.handleChange('cPoints')}\r\n          />\r\n\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.save()}>\r\n            Запис\r\n          </Button>\r\n          <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(SchemeFormModal)\r\n);","import React from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nclass FormModal extends React.Component {\r\n  render() {\r\n    const { title, body, actions, onClose, classes, fullScreen, hasError, enableFullWidth } = this.props;\r\n    const rootClass = hasError ? classes.rootWithError : classes.root;\r\n\r\n    return (\r\n      <Dialog\r\n        open={true}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen && enableFullWidth}\r\n        classes={{ paper: rootClass }}\r\n      >\r\n        <DialogTitle>\r\n          <Typography component=\"span\" variant=\"headline\">{title}</Typography>\r\n          {enableFullWidth && <span className={classes.closeBtn} onClick={onClose}>\r\n            <ClearIcon />\r\n          </span>}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          {body}\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          {actions}\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  rootWithError: {\r\n    boxSizing: 'border-box',\r\n    width: '600px',\r\n    border: `1px solid red`,\r\n    boxShadow: `0 0 10px red`\r\n  },\r\n  btnContainer: {\r\n    '& button': {\r\n      marginLeft: '.3rem'\r\n    },\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      '& button': {\r\n        marginBottom: '.3rem',\r\n        width: '100%'\r\n      }\r\n    }\r\n  },\r\n  closeBtn: {\r\n    position: 'absolute',\r\n    color: theme.palette.primary.main,\r\n    top: '5px',\r\n    right: '5px',\r\n    cursor: 'pointer',\r\n    '&:hover': {\r\n      color: theme.palette.primary.dark\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(FormModal)\r\n);","import React from 'react';\r\nimport FormModal from './FormModal';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nclass MessageModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: false,\r\n      updated: false\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.activation != this.props.activation && (this.props.activation || this.state.updated))\r\n      this.show();\r\n  }\r\n\r\n  show() {\r\n    let duration = this.props.duration || 60;\r\n    this.setState({ open: true });\r\n    setTimeout(() => this.setState({ open: false }), duration * 1000);\r\n  }\r\n\r\n  render() {\r\n    const { open } = this.state;\r\n\r\n    const closeBtn = <Button\r\n      variant=\"outlined\"\r\n      onClick={() => this.setState({ open: false, updated: true })}\r\n    >\r\n      Добре\r\n    </Button>;\r\n\r\n    if (open)\r\n      return <FormModal\r\n        title={null}\r\n        body={this.props.children}\r\n        actions={closeBtn}\r\n        onClose={() => this.setState({ open: false })}\r\n      />;\r\n    else\r\n      return null;\r\n  }\r\n}\r\n\r\nexport default MessageModal;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport List from '@material-ui/core/List';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport FormModal from '../../components/FormModal';\r\nimport QueryService from '../../services/query.service';\r\n\r\nclass ScoresModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      scores: []\r\n    }\r\n\r\n    this.handleChange = (index, prop) => (e) => {\r\n      const scores = this.state.scores;\r\n      if (prop != 'isWinner')\r\n        scores[index][prop] = parseInt(e.target.value);\r\n      else\r\n        scores[index].isWinner = e.target.value === 'true';\r\n\r\n      this.setState({ scores });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ scores: this.props.scores });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.scores != this.props.scores)\r\n      this.setState({ scores: this.props.scores });\r\n  }\r\n\r\n  save() {\r\n    return QueryService\r\n      .post(`/schemes/${this.props.scheme.id}/scores/save`, this.props.scores)\r\n      .then(() => this.props.onChange())\r\n  }\r\n\r\n  getTeamView(model, index) {\r\n    return (\r\n      <React.Fragment key={model.team.id}>\r\n        <ListItem style={{ display: 'flex', }}>\r\n          <div style={{ display: 'flex', flexBasis: '35%' }}>\r\n            {model.team.user1 && <Typography>{model.team.user1.name}</Typography>}\r\n            {model.team.user2 && <Typography>{model.team.user2.name}</Typography>}\r\n          </div>\r\n          <div style={{ display: 'flex', flexBasis: '65%' }}>\r\n            <TextField type=\"number\" value={model.score} onChange={this.handleChange(index, 'score')} label=\"Точки\" />\r\n            <TextField type=\"number\" value={model.wonMatches} onChange={this.handleChange(index, 'wonMatches')} label=\"Спечелени мачове\" />\r\n            <TextField type=\"number\" value={model.totalMatches} onChange={this.handleChange(index, 'totalMatches')} label=\"Общо мачове\" />\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  color=\"primary\"\r\n                  checked={model.isWinner}\r\n                  value={!model.isWinner + ''}\r\n                  onChange={this.handleChange(index, 'isWinner')}\r\n                />\r\n              }\r\n              label=\"Победител\"\r\n            />\r\n          </div>\r\n        </ListItem>\r\n        <Divider />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { scores } = this.state;\r\n    const { onClose, onChange, scheme } = this.props;\r\n    const title = `Разпределение на точките за схема ${scheme.name}`;\r\n\r\n    const actions = <React.Fragment>\r\n      <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.save()}>Запис</Button>\r\n      <Button variant=\"outlined\" color=\"primary\" size=\"small\" onClick={onClose}>Отказ</Button>\r\n    </React.Fragment>\r\n\r\n    const body = <List style={{ width: '100%' }}>\r\n      {scores.map((model, index) => this.getTeamView(model, index))}\r\n    </List>\r\n\r\n    return (\r\n      <FormModal\r\n        enableFullWidth={true}\r\n        onClose={onClose}\r\n        title={title}\r\n        body={body}\r\n        actions={actions}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default ScoresModal;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nclass ConfirmationDialog extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isOpen: false\r\n    };\r\n\r\n    this.open = (e) => {\r\n      e.stopPropagation();\r\n      this.setState({ isOpen: true });\r\n    };\r\n    this.close = (e) => {\r\n      e.stopPropagation();\r\n      this.setState({ isOpen: false });\r\n    }\r\n    this.accept = (e) => {\r\n      e.stopPropagation();\r\n      this.close(e);\r\n      this.props.onAccept(e);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { isOpen } = this.state;\r\n    const { title, body, onAccept, children, classes, style } = this.props;\r\n\r\n    return (\r\n      <span style={style}>\r\n        <Dialog open={isOpen} onClose={this.close} classes={{ paper: classes.root }}>\r\n          <DialogTitle>{title}</DialogTitle>\r\n          <DialogContent>{body}</DialogContent>\r\n          <DialogActions className={classes.btnContainer}>\r\n            <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={this.accept}>\r\n              Да\r\n          </Button>\r\n            <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={this.close}>\r\n              Не\r\n          </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n        <span onClick={this.open}>\r\n          {children}\r\n        </span>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(ConfirmationDialog);","import React from 'react';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport FormModal from '../../components/FormModal';\r\nimport ConfirmationDialog from '../../components/ConfirmationDialog';\r\n\r\nclass EliminationPreviewModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      teams: []\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ teams: this.props.teams });\r\n  }\r\n\r\n  draw() {\r\n    return QueryService.post(`/schemes/${this.props.scheme.id}/draw/eliminationPhase`, { teams: this.state.teams })\r\n      .then(() => this.props.onDraw());\r\n  }\r\n\r\n  changeOrder(e, index) {\r\n    let teams = this.state.teams;\r\n    teams[index].order = e.target.value;\r\n    this.setState({ teams });\r\n  }\r\n\r\n  reorder() {\r\n    let teams = this.state.teams;\r\n    teams.sort((a, b) => {\r\n      if (!b.order)\r\n        return -1;\r\n      if (!a.order)\r\n        return 1;\r\n      return a.order - b.order;\r\n    });\r\n    this.setState({ teams });\r\n  }\r\n\r\n  render() {\r\n    const { teams } = this.state;\r\n    const { scheme, onClose } = this.props;\r\n\r\n    const title = `Подредба на играчи/отбори преди изтегляне на елиминационна схема`;\r\n    const actions = <React.Fragment>\r\n      <Button variant=\"outlined\" color=\"primary\" size=\"small\" onClick={() => this.reorder()}>\r\n        Пренареждане\r\n      </Button>\r\n      <ConfirmationDialog\r\n        title=\"Изтегляне на схема\"\r\n        body={<Typography>Сигурни ли сте че искате да изтеглите схемата</Typography>}\r\n        onAccept={() => this.draw()}\r\n      >\r\n        <Button variant=\"contained\" color=\"primary\" size=\"small\" >\r\n          Изтегляне на схема\r\n        </Button>\r\n      </ConfirmationDialog>\r\n    </React.Fragment>;\r\n\r\n    const body = <List>\r\n      <Typography color=\"secondary\">Играч/oтбор без позиция бива изключен от схемата!</Typography>\r\n      {teams.map((team, index) => {\r\n        return (<React.Fragment key={index}>\r\n          <div style={{ display: 'flex', width: '100%' }}>\r\n            <div style={{ marginRight: '.3em', display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n              <Typography>{index + 1}.</Typography>\r\n            </div>\r\n            {team.team && <div style={{ flexBasis: '70%', display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n              <Typography>{team.team.user1.name}</Typography>\r\n              {team.team.user2 && <Typography>{team.team.user2.name}</Typography>}\r\n            </div>}\r\n            {!team.team && <div style={{ flexBasis: '70%', display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n              <Typography>BYE</Typography>\r\n            </div>}\r\n            <div style={{}}>\r\n              <TextField label={team.order ? 'Позиция' : 'НЕ ИГРАЕ'} value={team.order} type=\"number\" onChange={e => this.changeOrder(e, index)} />\r\n            </div>\r\n          </div>\r\n          <Divider />\r\n        </React.Fragment>);\r\n      })}\r\n    </List>\r\n    return (\r\n      <FormModal\r\n        enableFullWidth={true}\r\n        onClose={onClose}\r\n        title={title}\r\n        body={body}\r\n        actions={actions}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default EliminationPreviewModal;","import React from 'react';\r\n\r\n\r\nconst PlayersIcon = ({width, height}) => <svg x=\"0px\" y=\"0px\" width={width} height={height}\r\nviewBox=\"0 0 15.3 13.7\" enableBackground=\"new 0 0 15.3 13.7\">\r\n<path fill=\"currentColor\" d=\"M14.7,9.7C14.7,9.7,14.7,9.7,14.7,9.7c-0.1-0.6-0.5-1-1.3-1.3c-0.3-0.1-0.4-0.5-0.3-0.7\r\n\t\t\tc0.1-0.2,0.2-0.5,0.2-0.8c0.1-0.8,0-1.6-0.5-2.1c-0.4-0.4-0.9-0.7-1.6-0.7s-1.2,0.2-1.6,0.7C9.2,5.3,9,6,9.2,6.9\r\n\t\t\tc0.1,0.3,0.4,0.5,0.7,0.5c0.3-0.1,0.5-0.4,0.5-0.7c-0.1-0.5,0-0.8,0.2-1.1c0.2-0.2,0.4-0.3,0.7-0.3c0.3,0,0.6,0.1,0.7,0.3\r\n\t\t\tc0.2,0.2,0.3,0.6,0.2,1.1c0,0.2-0.1,0.4-0.1,0.5c-0.4,0.9,0,1.9,0.9,2.3c0.4,0.2,0.6,0.4,0.6,0.4l0.1,0.8c0,0.2,0,0.3-0.1,0.4\r\n\t\t\tc-0.1,0.1-0.3,0.2-0.4,0.2h-1.7c-0.3,0-0.6,0.3-0.6,0.6c0,0.3,0.3,0.6,0.6,0.6h1.7c0.5,0,1-0.2,1.3-0.6c0.3-0.4,0.5-0.8,0.5-1.3\r\n\t\t\tL14.7,9.7z M9.9,8.8C9.8,8.1,9.1,7.5,7.8,7C7.7,6.9,7.5,6.8,7.5,6.6c-0.1-0.1-0.1-0.3,0-0.4C7.8,5.7,7.9,5.3,8,4.7\r\n\t\t\tC8.2,3.6,8,2.7,7.4,2C6.9,1.5,6.1,1.2,5.3,1.2C4.5,1.2,3.7,1.5,3.2,2C2.6,2.7,2.4,3.6,2.6,4.7c0.1,0.5,0.2,1,0.5,1.4\r\n\t\t\tc0.1,0.1,0.1,0.3,0,0.4C3.1,6.8,2.9,6.9,2.8,7C1.5,7.5,0.8,8.1,0.7,8.8c0,0.1,0,0.1-0.1,1.9c0,0.5,0.1,1,0.5,1.3\r\n\t\t\tc0.3,0.4,0.8,0.6,1.3,0.6h5.9c0.5,0,1-0.2,1.3-0.6c0.3-0.4,0.5-0.8,0.5-1.3L9.9,8.8C9.9,8.8,9.9,8.8,9.9,8.8z M8.7,11.1\r\n\t\t\tc-0.1,0.1-0.3,0.2-0.4,0.2H2.3c-0.2,0-0.3-0.1-0.4-0.2c-0.1-0.1-0.1-0.3-0.1-0.4C1.7,9.9,1.8,9.1,1.8,9c0-0.1,0.4-0.5,1.3-0.9\r\n\t\t\tC3.7,7.9,4,7.5,4.2,7c0.2-0.5,0.1-1-0.1-1.4C4,5.4,3.9,5.1,3.8,4.5c-0.1-0.7,0-1.3,0.3-1.7c0.3-0.3,0.7-0.4,1.2-0.4\r\n\t\t\tc0.5,0,0.9,0.1,1.1,0.4c0.3,0.4,0.4,1,0.3,1.7C6.6,5.1,6.5,5.4,6.3,5.6C6.1,6,6.1,6.6,6.3,7c0.2,0.5,0.6,0.9,1.1,1.1\r\n\t\t\tc1,0.4,1.3,0.7,1.3,0.9l0.1,1.7C8.8,10.9,8.8,11,8.7,11.1z\"/>\r\n</svg>;\r\n\r\nexport default PlayersIcon;","import React from 'react';\r\n\r\n\r\nconst GroupIcon = ({width, height}) => <svg x=\"0px\" y=\"0px\" width={width} height={height}\r\nviewBox=\"0 90 612 470\" enableBackground=\"new 0 90 612 470\">\r\n<path fill=\"currentColor\" d=\"M287.6,247.7h13.9v55.5h13.9v-69.3h-27.7V247.7z M109.4,383.4h32.4v13.9h-32.4v41.6h46.2V425h-32.4v-13.9\r\n\t\t\th32.4v-41.6h-46.2V383.4z M455.7,371.5v13.9h32.4v13.9h-16.2v13.9h16.2V427h-32.4v13.9h46.2v-69.3H455.7z\"/>\r\n<path fill=\"currentColor\" d=\"M590.1,534.7l-56-56c0.8-1.4,1.2-2.9,1.2-4.4v-72.9l12.4,12.4c3.8,3.8,9.8,3.8,13.6,0l28.8-28.8\r\n\t\t\tc3.8-3.8,3.8-9.8,0-13.6l-48-48c-1.8-1.8-4.2-2.8-6.8-2.8h-26.1c-0.6-0.4-1.2-0.7-1.8-1c20.8-16.5,24.4-46.7,7.9-67.5\r\n\t\t\tc-16.5-20.8-46.7-24.4-67.5-7.9c-20.8,16.5-24.4,46.7-7.9,67.5c2.3,2.9,5,5.6,7.9,7.9c-0.6,0.4-1.2,0.6-1.8,1h-26\r\n\t\t\tc-2.5,0-5,1-6.8,2.8l-45.2,45.2H241.3l-45.2-45.2c-1.8-1.8-4.2-2.8-6.8-2.8h-26.1c-0.6-0.4-1.2-0.7-1.8-1\r\n\t\t\tc20.8-16.5,24.4-46.7,7.9-67.5c-16.5-20.8-46.7-24.4-67.5-7.9c-20.8,16.5-24.4,46.7-7.9,67.5c2.3,2.9,5,5.6,7.9,7.9\r\n\t\t\tc-0.6,0.4-1.2,0.6-1.8,1H74c-2.5,0-5,1-6.8,2.8l-48,48c-3.8,3.8-3.8,9.8,0,13.6L48,413.8c3.8,3.8,9.8,3.8,13.6,0L74,401.4v72.9\r\n\t\t\tc0,1.6,0.4,3.1,1.2,4.4l-56,56c-3.8,3.8-3.8,9.8,0,13.6c1.8,1.8,4.2,2.8,6.8,2.8h557.3c5.3,0,9.6-4.3,9.6-9.6\r\n\t\t\tC592.9,539,591.9,536.5,590.1,534.7z M477.6,253.3c15.9,0,28.8,12.9,28.8,28.8c0,15.9-12.9,28.8-28.8,28.8\r\n\t\t\tc-15.9,0-28.8-12.9-28.8-28.8C448.8,266.2,461.7,253.3,477.6,253.3z M423.9,339.8H449c2.1,0,4.1-0.7,5.8-1.9\r\n\t\t\tc13.5-10.1,32.1-10.1,45.7,0c1.7,1.2,3.8,1.9,6,1.9h24.8l38.4,38.4l-15.2,15.2l-22-22c-3.8-3.8-9.8-3.8-13.6,0\r\n\t\t\tc-1.8,1.8-2.8,4.2-2.8,6.8v86.5h-76.9v-86.5c0-5.3-4.3-9.6-9.6-9.6c-2.5,0-5,1-6.8,2.8l-22,22l-15.2-15.2L423.9,339.8z\r\n\t\t\t M131.7,253.3c15.9,0,28.8,12.9,28.8,28.8c0,15.9-12.9,28.8-28.8,28.8c-15.9,0-28.8-12.9-28.8-28.8\r\n\t\t\tC102.9,266.2,115.8,253.3,131.7,253.3z M54.8,393.4l-15.2-15.2L78,339.8h25.1c2.1,0,4.1-0.7,5.8-1.9c13.5-10.1,32.1-10.1,45.7,0\r\n\t\t\tc1.7,1.2,3.8,1.9,6,1.9h24.8l38.4,38.4l-15.2,15.2l-22-22c-3.8-3.8-9.8-3.8-13.6,0c-1.8,1.8-2.8,4.2-2.8,6.8v86.5H93.2v-86.5\r\n\t\t\tc0-5.3-4.3-9.6-9.6-9.6c-2.5,0-5,1-6.8,2.8L54.8,393.4z M216.9,531.9l25.6-38.4h124.2l25.6,38.4H216.9z M415.5,531.9l-35.6-53.4\r\n\t\t\tc-1.8-2.7-4.8-4.3-8-4.3H237.4c-3.2,0-6.2,1.6-8,4.3l-35.6,53.4H49.2l48-48h82.5c5.3,0,9.6-4.3,9.6-9.6v-72.9l12.4,12.4\r\n\t\t\tc3.8,3.8,9.8,3.8,13.6,0l26-26h126.6l26,26c3.8,3.8,9.8,3.8,13.6,0l12.4-12.4v72.9c0,5.3,4.3,9.6,9.6,9.6H512l48,48H415.5z\r\n\t\t\t M221,279.3c3.8,3.7,9.8,3.7,13.6,0l12.4-12.4v72.9c0,5.3,4.3,9.6,9.6,9.6h96.1c5.3,0,9.6-4.3,9.6-9.6v-72.9l12.4,12.4\r\n\t\t\tc3.8,3.7,9.8,3.7,13.6,0l28.8-28.8c3.7-3.8,3.7-9.8,0-13.6l-48-48c-1.8-1.8-4.2-2.8-6.8-2.8h-26.1c-0.6-0.4-1.2-0.7-1.8-1\r\n\t\t\tc20.8-16.5,24.4-46.7,7.9-67.5c-16.5-20.8-46.7-24.4-67.5-7.9c-20.8,16.5-24.4,46.7-7.9,67.5c2.3,2.9,5,5.6,7.9,7.9\r\n\t\t\tc-0.6,0.4-1.2,0.6-1.8,1h-26c-2.5,0-5,1-6.8,2.8l-48,48c-3.7,3.8-3.7,9.8,0,13.6L221,279.3z M304.6,118.8\r\n\t\t\tc15.9,0,28.8,12.9,28.8,28.8c0,15.9-12.9,28.8-28.8,28.8c-15.9,0-28.8-12.9-28.8-28.8C275.8,131.7,288.7,118.8,304.6,118.8z\r\n\t\t\t M251,205.3h25.1c2.1,0,4.1-0.7,5.8-1.9c13.5-10.1,32.1-10.1,45.7,0c1.7,1.2,3.8,1.9,6,1.9h24.8l38.4,38.4l-15.2,15.2l-22-22\r\n\t\t\tc-3.8-3.8-9.8-3.8-13.6,0c-1.8,1.8-2.8,4.2-2.8,6.8v86.5h-76.9v-86.5c0-5.3-4.3-9.6-9.6-9.6c-2.5,0-5,1-6.8,2.8l-22,22l-15.2-15.2\r\n\t\t\tL251,205.3z\"/>\r\n</svg>;\r\n\r\nexport default GroupIcon;","import React from 'react';\r\n\r\nconst BracketIcon = ({width, height}) => <svg x=\"0px\" y=\"0px\" width={width} height={height}\r\nviewBox=\"0 80 612 468\" enableBackground=\"new 0 80 612 468\">\r\n<path fill=\"currentColor\" d=\"M353.8,166.5c5.3,0,9.6-4.3,9.6-9.6V99.6c0-5.3-4.3-9.6-9.6-9.6c-2.5,0-5,1-6.8,2.8l-17.1,17.1l-17.1-17.1\r\n\tc-3.7-3.7-9.8-3.7-13.5,0l-17.1,17.1l-17.1-17.1c-3.7-3.7-9.8-3.7-13.5,0c-1.8,1.8-2.8,4.2-2.8,6.8v57.4c0,5.3,4.3,9.6,9.6,9.6\r\n\tH353.8z M267.8,122.6l7.6,7.6c3.7,3.7,9.8,3.7,13.5,0l17.1-17.1l17.1,17.1c3.7,3.7,9.8,3.7,13.5,0l7.6-7.6v24.7h-76.5V122.6z\"/>\r\n<path fill=\"currentColor\" d=\"M583.3,462.9h-38.3v-28.7c0-5.3-4.3-9.6-9.6-9.6h-57.4V396h9.6c5.3,0,9.6-4.3,9.6-9.6v-57.4\r\n\tc0-5.3-4.3-9.6-9.6-9.6h-86.1v-28.7c0-5.3-4.3-9.6-9.6-9.6h-76.5v-19.1h47.8c5.3,0,9.6-4.3,9.6-9.6v-57.4c0-5.3-4.3-9.6-9.6-9.6\r\n\tH248.6c-5.3,0-9.6,4.3-9.6,9.6v57.4c0,5.3,4.3,9.6,9.6,9.6h47.8v19.1h-76.5c-5.3,0-9.6,4.3-9.6,9.6v28.7h-86.1\r\n\tc-5.3,0-9.6,4.3-9.6,9.6v57.4c0,5.3,4.3,9.6,9.6,9.6h9.6v28.7H76.5c-5.3,0-9.6,4.3-9.6,9.6v28.7H28.7c-5.3,0-9.6,4.3-9.6,9.6v57.4\r\n\tc0,5.3,4.3,9.6,9.6,9.6h95.6c5.3,0,9.6-4.3,9.6-9.6v-57.4c0-5.3-4.3-9.6-9.6-9.6H86.1v-19.1h114.8v19.1h-38.3\r\n\tc-5.3,0-9.6,4.3-9.6,9.6v57.4c0,5.3,4.3,9.6,9.6,9.6h95.6c5.3,0,9.6-4.3,9.6-9.6v-57.4c0-5.3-4.3-9.6-9.6-9.6h-38.3v-28.7\r\n\tc0-5.3-4.3-9.6-9.6-9.6H153V396h124.3c5.3,0,9.6-4.3,9.6-9.6v-57.4c0-5.3-4.3-9.6-9.6-9.6h-47.8v-19.1h153v19.1h-47.8\r\n\tc-5.3,0-9.6,4.3-9.6,9.6v57.4c0,5.3,4.3,9.6,9.6,9.6H459v28.7h-57.4c-5.3,0-9.6,4.3-9.6,9.6v28.7h-38.3c-5.3,0-9.6,4.3-9.6,9.6v57.4\r\n\tc0,5.3,4.3,9.6,9.6,9.6h95.6c5.3,0,9.6-4.3,9.6-9.6v-57.4c0-5.3-4.3-9.6-9.6-9.6h-38.3v-19.1h114.8v19.1h-38.3\r\n\tc-5.3,0-9.6,4.3-9.6,9.6v57.4c0,5.3,4.3,9.6,9.6,9.6h95.6c5.3,0,9.6-4.3,9.6-9.6v-57.4C592.9,467.2,588.6,462.9,583.3,462.9z\r\n\t M258.2,204.8h95.6V243h-95.6V204.8z M114.8,520.3H38.3v-38.3h76.5V520.3z M248.6,520.3h-76.5v-38.3h76.5V520.3z M267.8,376.9H133.9\r\n\tv-38.3h133.9V376.9z M344.3,376.9v-38.3h133.9v38.3H344.3z M439.9,520.3h-76.5v-38.3h76.5V520.3z M573.8,520.3h-76.5v-38.3h76.5\r\n\tV520.3z\"/>\r\n</svg>;\r\n\r\nexport default BracketIcon;","import React from 'react';\r\n\r\n\r\nconst CalendarIcon = ({width, height}) => <svg x=\"0px\" y=\"0px\" width={width} height={height}\r\nviewBox=\"0 0 15.3 13.7\" enableBackground=\"new 0 0 15.3 13.7\">\r\n<path fill=\"currentColor\" d=\"M13.3,3.3c0-0.3-0.2-0.5-0.5-0.5c-0.4,0-0.8-0.1-1.2-0.1l0-0.8c0-0.7-1-0.7-1,0h0l0,0.8\r\n\t\t\tc-0.5,0-1.1,0-1.6,0l-3.7,0l0-0.8c0-0.7-1-0.7-1,0h0l0,0.9c-0.5,0-1,0-1.5,0C2.5,2.8,2.3,3,2.2,3.2C2,4.6,2.1,6.1,2.1,7.5\r\n\t\t\tc0,1.5-0.2,3,0,4.5c0,0,0,0.1,0,0.1c0,0,0,0.1,0,0.1l0,0c0.1,0.2,0.2,0.4,0.5,0.4c1.5,0.2,3,0,4.5,0c1.8,0,3.7,0.1,5.5-0.1\r\n\t\t\tc0.2,0,0.5-0.1,0.5-0.4c0.2-1,0.1-2,0.1-3c0-0.7,0.1-1.3,0.1-2C13.4,5.9,13.3,4.6,13.3,3.3z M5.2,4.3l0-0.5l3.7,0\r\n\t\t\tc0.5,0,1.1,0,1.6,0l0,0.6c0,0.7,1,0.7,1,0l0-0.6c0.3,0,0.5,0,0.8,0c0,0.6,0,1.2,0,1.8c-3.1,0-6.1,0-9.2,0.1c0-0.6,0-1.2,0.1-1.8\r\n\t\t\tc0.3,0,0.7,0,1,0l0,0.5C4.2,5,5.2,5,5.2,4.3z M7.1,11.6c-1.3,0-2.7,0.1-4,0C3.1,11.4,3,11.2,3,11c0-0.4,0-0.9,0-1.4\r\n\t\t\tc0-0.6,0.1-1.3,0.1-1.9c0-0.4,0-0.7,0-1.1c3.1,0,6.1,0,9.2-0.1c0,0.2,0,0.4,0,0.6c0,0.6,0,1.2-0.1,1.8c0,0.9,0,1.7-0.1,2.6\r\n\t\t\tC10.5,11.7,8.8,11.6,7.1,11.6z\"/>\r\n</svg>;\r\n\r\nexport default CalendarIcon;","import React from 'react';\r\n\r\n\r\nconst TournamentIcon = ({width, height}) => <svg x=\"0px\" y=\"0px\" width={width} height={height}\r\nviewBox=\"0 0 15.3 13.7\" enableBackground=\"new 0 0 15.3 13.7\">\r\n<path fill=\"currentColor\" d=\"M9.6,8c2.1-0.1,3.7-2.9,3.7-5.2c0-0.3-0.2-0.5-0.5-0.5h-1.4c0-0.2,0-0.3,0-0.5c0-0.3-0.2-0.5-0.5-0.5H4.4\r\n\tC4.2,1.4,4,1.6,4,1.9C4,2,4,2.2,4,2.3H2.5C2.2,2.3,2,2.6,2,2.8C2,5.1,3.7,8,5.8,8c0.4,0.5,0.9,0.8,1.4,0.9L7,11.7l-1.4,0.1\r\n\tc-0.3,0-0.5,0.2-0.5,0.5c0,0.3,0.2,0.5,0.5,0.5h4.3c0.3,0,0.5-0.2,0.5-0.5c0-0.3-0.2-0.5-0.5-0.5l-1.6-0.1L8.2,8.9\r\n\tC8.7,8.8,9.2,8.4,9.6,8z M12.4,3.3c-0.1,1.4-0.9,2.9-1.9,3.5c0.5-0.9,0.8-2.1,1-3.5H12.4z M3,3.3h1c0.1,1.4,0.5,2.6,1,3.5\r\n\tC4,6.3,3.2,4.7,3,3.3z M4.9,2.3h5.6C10.4,5.7,9,8,7.7,8C6.4,8,5,5.7,4.9,2.3z\"/>\r\n</svg>;\r\n\r\nexport default TournamentIcon;","import React from 'react';\r\n\r\n\r\nconst EditBoxedIcon = (props) => <svg x=\"0px\" y=\"0px\" {...props}\r\n  viewBox=\"0 0 1000 1000\" enableBackground=\"new 0 0 1000 1000\">\r\n  <path fill=\"currentColor\" d=\"M984.1,122.3C946.5,84.5,911.4,42.1,867.8,11c-40-8.3-59.2,34.9-86.7,55.1c46.4,53.9,100.5,101.5,150.4,152.5C954.1,191.7,1007.7,164.1,984.1,122.3z M959.3,325.9c-31.7,31.8-64.5,62.8-95.1,95.8c-0.8,127.5,0.3,255-0.4,382.6c-0.6,47-41.8,88.7-88.8,90.3c-193.4,0.8-387,0.8-580.4,0.1c-52.2-1.4-94-51.4-89.9-102.7c-0.1-184.6-0.1-369.1,0-553.5c-4-51.1,38-100.3,89.6-102.1c128.1-1.7,256.3,0.1,384.3-0.9c33.2-30,63.9-62.9,95.7-94.5c-170.6,0-341-0.9-511.6,0.5c-79.6,1.4-151,71-152.4,151C10.1,407.7,9.5,622.8,10.7,838c0.3,77.5,66.1,144.7,142.4,152h670.2c72.3-12.7,134.3-75.8,135.2-150.9C960.7,668.1,959,496.9,959.3,325.9z M908.2,242.2C858,191.7,807.4,141.5,756.6,91.5C645.4,201.9,534,312,423.4,423c50.1,50.4,100.4,100.6,151.3,150.3C686,463.1,797.2,352.6,908.2,242.2z M341.2,654.6c68.1-18.5,104.4-30.2,172.5-48.5c18.2-5.8,30.3-9.3,39.7-13c-48.2-45.9-103.6-102.5-151.7-148.8C381.4,514.4,361.4,584.5,341.2,654.6z\" />\r\n</svg>;\r\n\r\nexport default EditBoxedIcon;","import React from 'react';\r\n\r\n\r\nconst WinnerIcon = ({width, height}) => <svg x=\"0px\" y=\"0px\" width={width} height={height}\r\nviewBox=\"0 0 15.3 13.7\" enableBackground=\"new 0 0 15.3 13.7\">\r\n<path fill=\"currentColor\" d=\"M7.7,4.1l1.8,1.7c0.3,0.3,0.8,0.5,1.3,0.5c0.5,0,0.9-0.2,1.3-0.5l1.2-1.2v5.2H2.2V4.6l1.2,1.2\r\n\tc0.3,0.3,0.8,0.5,1.3,0.5c0.5,0,0.9-0.2,1.3-0.5L7.7,4.1 M13.7,2C13.7,2,13.7,2,13.7,2c-0.3,0-0.6,0.1-0.9,0.4l-2.2,2.2L8.5,2.4\r\n\tC8.3,2.2,8,2,7.7,2S7,2.2,6.8,2.4L4.6,4.6L2.5,2.4C2.2,2.2,1.9,2,1.6,2C1.3,2,1,2.2,0.8,2.4C0.5,2.6,0.4,2.9,0.4,3.2v7.2\r\n\tc0,0.7,0.5,1.2,1.2,1.2h12.1c0.7,0,1.2-0.5,1.2-1.2V3.2C14.9,2.6,14.4,2,13.7,2L13.7,2z\"/>\r\n</svg>;\r\n\r\nexport default WinnerIcon;","import React from 'react';\r\n\r\nconst HeatIcon = (props) => <svg {...props}\r\n  x=\"0px\" y=\"0px\"\r\n  viewBox=\"0 0 490.357 490.357\" enableBackground=\"new 0 0 490.357 490.357\">\r\n  <g>\r\n\t\t<path fill=\"currentColor\" d=\"M405.759,210.258l-25.515-52.016l2.825,57.877c2.149,43.404-17.9,67.446-34.132,79.696\r\n\t\t\tc6.014-44.63,11.269-139.524-36.899-210.083c-30.115-44.099-76.006-71.084-136.441-80.21L139.083,0l26.361,25.876\r\n\t\t\tc31.453,30.874,47.45,63.552,47.544,97.153c0.046,19.384-5.249,36.719-11.823,50.76c-1.57-24.516-10.323-52.173-38.447-67.371\r\n\t\t\tl-18.998-10.258l1.366,21.533c3.105,49.079-17.854,79.031-40.059,110.751c-22.42,32.024-45.593,65.129-41.313,116.848\r\n\t\t\tc7.304,88.29,61.544,137.007,161.22,144.795c2.307,0.188,4.712,0.27,7.164,0.27c51.076,0,128.027-38.71,168.407-103.518\r\n\t\t\tC423.975,349.227,443.919,288.027,405.759,210.258z M232.109,466.454c-0.549,0-1.051-0.047-1.576-0.059\r\n\t\t\tc1.576-0.035,3.001-0.059,4.35-0.07C233.971,466.348,233.008,466.454,232.109,466.454z M380.233,374.205\r\n\t\t\tc-32.591,52.289-93.335,86.188-136.786,91.455c47.105-14.701,73.788-192.089-22.542-220.762\r\n\t\t\tc25.409,44.099-13.522,85.342-47.111,105.345c-33.589,20.003-56.249,38.827-42.546,81.845c0.502,1.576,1.256,2.932,1.927,4.367\r\n\t\t\tc-27.202-20.365-42.113-51.041-45.593-93.125c-3.579-43.111,16.167-71.312,37.057-101.158\r\n\t\t\tc18.648-26.63,39.334-56.202,43.807-98.251c16.768,28.025,4.974,71.528,4.823,72.065l-12.057,43.165l31.954-31.4\r\n\t\t\tc1.781-1.757,43.748-43.713,43.737-104.458c-0.012-29.847-10.089-58.689-30.01-86.095c36.555,11.683,65.164,32.433,85.354,61.953\r\n\t\t\tc57.884,84.659,29.392,215.058,29.1,216.389l-4.636,20.528l20.015-6.562c0.572-0.187,45.307-15.46,63.173-64.049\r\n\t\t\tC409.519,312.128,395.787,349.227,380.233,374.205z\"/>\r\n\t\t<path fill=\"currentColor\" d=\"M339.188,72.643c6.037,8.957,9.05,16.751,11.011,27.044c1.951,10.299,7.497,32.381,7.497,32.381l9.295-31.026\r\n\t\t\tc7.905-28.189-2.113-52.139-29.484-60.674l-43.544-8.513c0,0,16.196,13.51,25.328,20.254\r\n\t\t\tC323.879,55.483,333.139,63.687,339.188,72.643z\"/>\r\n\t</g>\r\n</svg>;\r\n\r\nexport default HeatIcon;","import React from 'react';\r\n\r\n\r\nconst SnowIcon = ({width, height}) => <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width={width} height={height}\r\nviewBox=\"0 0 15.3 13.7\" enableBackground=\"new 0 0 15.3 13.7\">\r\n<path fill=\"currentColor\" d=\"M12.8,9l-1.1-0.6L12.5,8c0.2-0.1,0.3-0.3,0.2-0.5c-0.1-0.2-0.3-0.3-0.5-0.2L10.9,8L9,6.9l1.9-1.1l1.3,0.6\r\nc0,0,0.1,0,0.1,0c0.1,0,0.3-0.1,0.3-0.2c0.1-0.2,0-0.4-0.2-0.5l-0.9-0.4l1.1-0.6C13,4.5,13.1,4.2,13,3.9c-0.2-0.3-0.5-0.4-0.8-0.2\r\nl-1.1,0.6l0.1-0.9c0-0.2-0.1-0.4-0.3-0.4c-0.2,0-0.4,0.1-0.4,0.3l-0.2,1.5L8.4,5.9V3.7l1.2-0.9c0.2-0.1,0.2-0.3,0.1-0.5\r\nC9.6,2.1,9.3,2.1,9.2,2.2L8.4,2.8V1.5c0-0.3-0.3-0.6-0.6-0.6c-0.3,0-0.6,0.3-0.6,0.6v1.3L6.5,2.2C6.4,2.1,6.2,2.1,6,2.3\r\nC5.9,2.5,6,2.7,6.1,2.8l1.2,0.9v2.2L5.4,4.8L5.2,3.3C5.2,3.1,5,3,4.8,3C4.6,3,4.5,3.2,4.5,3.4l0.1,0.9L3.5,3.7\r\nC3.2,3.5,2.9,3.6,2.7,3.9C2.6,4.2,2.7,4.5,2.9,4.7L4,5.3L3.2,5.7C3,5.8,2.9,6,3,6.2c0.1,0.1,0.2,0.2,0.3,0.2c0,0,0.1,0,0.1,0\r\nl1.3-0.6l1.9,1.1L4.8,8L3.5,7.4C3.3,7.3,3.1,7.4,3,7.6C2.9,7.7,3,8,3.2,8L4,8.4L2.9,9C2.7,9.2,2.6,9.5,2.7,9.8\r\nC2.8,10,3,10.1,3.2,10.1c0.1,0,0.2,0,0.3-0.1l1.1-0.6l-0.1,0.9c0,0.2,0.1,0.4,0.3,0.4c0,0,0,0,0,0c0.2,0,0.3-0.1,0.4-0.3l0.2-1.5\r\nl1.9-1.1V10l-1.2,0.9C6,11,5.9,11.3,6,11.4c0.1,0.1,0.2,0.1,0.3,0.1c0.1,0,0.1,0,0.2-0.1l0.7-0.6v1.3c0,0.3,0.3,0.6,0.6,0.6\r\nc0.3,0,0.6-0.3,0.6-0.6v-1.3l0.7,0.6c0.1,0,0.1,0.1,0.2,0.1c0.1,0,0.2-0.1,0.3-0.1c0.1-0.2,0.1-0.4-0.1-0.5L8.4,10V7.8l1.9,1.1\r\nl0.2,1.5c0,0.2,0.2,0.3,0.4,0.3c0,0,0,0,0,0c0.2,0,0.3-0.2,0.3-0.4l-0.1-0.9l1.1,0.6c0.1,0.1,0.2,0.1,0.3,0.1c0.2,0,0.4-0.1,0.5-0.3\r\nC13.1,9.5,13,9.2,12.8,9z\"/>\r\n</svg>;\r\n\r\nexport default SnowIcon;","import React from 'react';\r\nimport moment from 'moment-timezone';\r\nimport HeatIcon from './icons/HeatIcon';\r\nimport SnowIcon from './icons/SnowIcon';\r\n\r\nconst SeasonIcon = ({ date, height, width }) => {\r\n  let month = moment(date).month();\r\n  if (month > 3 && month < 9)\r\n    return <HeatIcon width={width || '25px'} height={height || '25px'} />;\r\n  else\r\n    return <SnowIcon width={width || '25px'} height={height || '25px'} />;\r\n}\r\n\r\nexport default SeasonIcon;","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\n\r\nfunction ClearIndicator(props) {\r\n  const { innerProps: { ref, ...restInnerProps } } = props;\r\n  return (\r\n    <div {...restInnerProps} ref={ref}>\r\n      <div style={{ padding: '0px 5px', zIndex: 2, cursor: 'pointer' }}>\r\n        <Typography><ClearIcon color=\"action\" /></Typography>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction NoOptionsMessage(props) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.noOptionsMessage}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction inputComponent({ inputRef, ...props }) {\r\n  return <div ref={inputRef} {...props} style={{ cursor: 'pointer' }} />;\r\n}\r\n\r\nfunction Control(props) {\r\n  return (\r\n    <TextField\r\n      fullWidth\r\n      InputProps={{\r\n        inputComponent,\r\n        inputProps: {\r\n          className: props.selectProps.classes.input,\r\n          inputRef: props.innerRef,\r\n          children: props.children,\r\n          ...props.innerProps,\r\n        },\r\n      }}\r\n      {...props.selectProps.textFieldProps}\r\n    />\r\n  );\r\n}\r\n\r\nexport function Option(props) {\r\n  return (\r\n    <MenuItem\r\n      buttonRef={props.innerRef}\r\n      selected={props.isFocused}\r\n      component=\"div\"\r\n      style={{\r\n        fontWeight: props.isSelected ? 500 : 400\r\n      }}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </MenuItem>\r\n  );\r\n}\r\n\r\n// export function Placeholder(props) {\r\n//   return (\r\n//     <Typography\r\n//       color=\"textSecondary\"\r\n//       className={props.selectProps.classes.placeholder}\r\n//       {...props.innerProps}\r\n//     >\r\n//       {props.children}\r\n//     </Typography>\r\n//   );\r\n// }\r\n\r\nexport const Placeholder = () => null;\r\n\r\nexport function SingleValue(props) {\r\n  return (\r\n    <Typography className={props.selectProps.classes.singleValue} {...props.innerProps}>\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nexport function ValueContainer(props) {\r\n  return <div className={props.selectProps.classes.valueContainer}>{props.children}</div>;\r\n}\r\n\r\nexport function MultiValue(props) {\r\n  return (\r\n    <Chip\r\n      tabIndex={-1}\r\n      label={props.children}\r\n      className={classNames(props.selectProps.classes.chip, {\r\n        [props.selectProps.classes.chipFocused]: props.isFocused,\r\n      })}\r\n      onDelete={props.removeProps.onClick}\r\n      deleteIcon={<CancelIcon {...props.removeProps} />}\r\n    />\r\n  );\r\n}\r\n\r\nexport function Menu(props) {\r\n  return (\r\n    <Paper className={props.selectProps.classes.paper} {...props.innerProps} style={{ marginTop: '0' }}>\r\n      {props.children}\r\n    </Paper>\r\n  );\r\n}\r\n\r\nexport default {\r\n  ClearIndicator,\r\n  Control,\r\n  Menu,\r\n  MultiValue,\r\n  NoOptionsMessage,\r\n  Option,\r\n  Placeholder,\r\n  SingleValue,\r\n  ValueContainer,\r\n};","import React from 'react';\r\nimport Select from 'react-select';\r\nimport NoSsr from '@material-ui/core/NoSsr';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport SelectComponents from './components';\r\nimport styles from './styles';\r\n\r\nimport QueryService from '../../services/query.service';\r\n\r\nclass AsyncSelect extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      searchTerm: '',\r\n      limit: 25,\r\n      defaultLimit: 25,\r\n      options: [],\r\n      totalCount: null\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.load();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.filter != this.props.filter)\r\n      this.load();\r\n  }\r\n\r\n  load(loadMore) {\r\n    const { options, totalCount, searchTerm, defaultLimit } = this.state;\r\n    let limit = this.state.limit;\r\n\r\n    if (loadMore)\r\n      limit += defaultLimit;\r\n\r\n    if (loadMore && options.length == totalCount)\r\n      return;\r\n\r\n    QueryService\r\n      .post(`/select/${this.props.query}`, {\r\n        ...this.props.filter,\r\n        searchTerm,\r\n        limit\r\n      })\r\n      .then(result => this.setState({ ...result, limit }));\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      disableClear,\r\n      disableSearch,\r\n      disabled,\r\n      label,\r\n      value,\r\n      query,\r\n      filter,\r\n      getOptionLabel,\r\n      getOptionValue,\r\n      formatOptionLabel,\r\n      noOptionsMessage,\r\n      onChange,\r\n\r\n      classes, theme\r\n    } = this.props;\r\n\r\n    const selectStyles = {\r\n      container: base => ({\r\n        ...base,\r\n        position: 'default'\r\n      }),\r\n      menuList: base => ({\r\n        ...base,\r\n        paddingBottom: '3rem'\r\n      }),\r\n      input: base => ({\r\n        ...base,\r\n        color: theme.palette.text.primary,\r\n        '& input': {\r\n          font: 'inherit',\r\n        },\r\n      }),\r\n    };\r\n\r\n    let _getOptionLabel = getOptionLabel || ((option) => option.name);\r\n    let _getOptionValue = getOptionValue || ((option) => option.id);\r\n    let _noOptionsMessage = noOptionsMessage || (() => \"Няма елементи в колекцията\");\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        {/* <pre>item   count: {this.state.options.length}</pre>\r\n        <pre>total  count: {this.state.totalCount}</pre>\r\n        <pre>limit       : {this.state.limit}</pre> */}\r\n        <NoSsr>\r\n          <Select\r\n            isClearable={!disableClear}\r\n            isSearchable={!disableSearch}\r\n            isDisabled={Boolean(disabled)}\r\n            textFieldProps={{\r\n              label,\r\n              InputLabelProps: {\r\n                shrink: Boolean(value) || Boolean(this.state.searchTerm)\r\n              }\r\n            }}\r\n            value={value}\r\n            options={this.state.options}\r\n            filterOption={(options, filter, current_values) => {\r\n              // Whoever made the default automatic filtering is a FUCKING LOSER\r\n              return options;\r\n            }}\r\n            getOptionLabel={_getOptionLabel}\r\n            getOptionValue={_getOptionValue}\r\n            formatOptionLabel={formatOptionLabel}\r\n            noOptionsMessage={_noOptionsMessage}\r\n            onChange={onChange}\r\n            onInputChange={value => {\r\n              this.setState({ searchTerm: value.trim() });\r\n              this.load();\r\n            }}\r\n            onMenuScrollToBottom={() => this.load(true)}\r\n            classes={classes}\r\n            styles={selectStyles}\r\n            components={SelectComponents}\r\n          />\r\n        </NoSsr>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst customStyles = {\r\n  root: {\r\n    flexGrow: 1,\r\n    margin: 0,\r\n    cursor: 'pointer'\r\n  }\r\n};\r\n\r\nconst augmentedStyles = (theme) => {\r\n  const original = styles(theme);\r\n  const result = { ...original, ...customStyles };\r\n  return result;\r\n}\r\n\r\nexport default withStyles(augmentedStyles, { withTheme: true })(AsyncSelect);","\r\nimport { emphasize } from '@material-ui/core/styles/colorManipulator';\r\nexport default theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    margin: '1rem'\r\n  },\r\n  input: {\r\n    display: 'flex',\r\n    padding: 0,\r\n  },\r\n  valueContainer: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    flex: 1,\r\n    alignItems: 'center',\r\n  },\r\n  chip: {\r\n    margin: `${theme.spacing.unit / 2}px ${theme.spacing.unit / 4}px`,\r\n  },\r\n  chipFocused: {\r\n    backgroundColor: emphasize(\r\n      theme.palette.type === 'light' ? theme.palette.grey[300] : theme.palette.grey[700],\r\n      0.08,\r\n    ),\r\n  },\r\n  noOptionsMessage: {\r\n    padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`,\r\n  },\r\n  singleValue: {\r\n    fontSize: 16,\r\n  },\r\n  placeholder: {\r\n    position: 'absolute',\r\n    left: 2,\r\n    fontSize: 16,\r\n  },\r\n  paper: {\r\n    position: 'absolute',\r\n    zIndex: 1,\r\n    marginTop: theme.spacing.unit,\r\n    left: 0,\r\n    right: 0,\r\n  },\r\n  divider: {\r\n    height: theme.spacing.unit * 2,\r\n  },\r\n});","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport AsyncSelect from '../../components/select/AsyncSelect';\r\nimport FormModal from '../../components/FormModal';\r\n\r\nclass SelectTeamModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user1: null,\r\n      user2: null,\r\n      err: null\r\n    };\r\n  }\r\n\r\n  save() {\r\n    this.setState({ err: null });\r\n\r\n    QueryService\r\n      .post(`/schemes/${this.props.scheme.id}/enrollments`, this.state)\r\n      .then(e => this.props.onChange())\r\n      .catch(err => this.setState({ err }));\r\n  }\r\n\r\n  canSave() {\r\n    return (this.props.scheme.singleTeams && this.state.user1)\r\n      || (this.state.user1 && this.state.user2);\r\n  }\r\n\r\n  render() {\r\n    const { onClose, scheme } = this.props;\r\n    const { user1, user2, err } = this.state;\r\n\r\n    const errTextPrefix = scheme.singleTeams ? \"Играчът\" : \"Някой от играчите\";\r\n\r\n    const title = 'Записване на играч/двойка';\r\n    const actions = <React.Fragment>\r\n      <Button disabled={!this.canSave()} variant=\"contained\" color=\"primary\" onClick={() => this.save()}>\r\n        Запис\r\n      </Button>\r\n      <Button variant=\"outlined\" color=\"primary\" onClick={onClose}>\r\n        Отказ\r\n      </Button>\r\n    </React.Fragment>;\r\n\r\n    const body = <React.Fragment>\r\n      <AsyncSelect\r\n        value={user1}\r\n        label=\"Избор на играч\"\r\n        query=\"users\"\r\n        formatOptionLabel={(option) => <Typography component=\"span\">\r\n          {option.name}\r\n          <Typography component=\"span\" variant=\"caption\">{option.email}</Typography>\r\n        </Typography>}\r\n        onChange={user1 => this.setState({ user1 })} />\r\n      {!scheme.singleTeams && <AsyncSelect\r\n        value={user2}\r\n        label=\"Избор на играч\"\r\n        query=\"users\"\r\n        formatOptionLabel={(option) => <Typography component=\"span\">\r\n          {option.name}\r\n          <Typography component=\"span\" variant=\"caption\">{option.email}</Typography>\r\n        </Typography>}\r\n        onChange={user2 => this.setState({ user2 })} />}\r\n\r\n      {err && <div style={{ marginTop: '1rem', color: 'red', fontSize: '.8rem' }}>\r\n        {err.message == 'ExistingEnrollment'\r\n          && <em className=\"exception\">{errTextPrefix} вече са записани.</em>}\r\n        {err.message == 'RequirementsNotMet'\r\n          && <em className=\"exception\">{errTextPrefix} не покрива изискванията на схемата.</em>}\r\n        {err.message == 'UserHasNoInfo'\r\n          && <em className=\"exception\">{errTextPrefix} няма въведена информация за пол и/или дата на раждане.</em>}\r\n\r\n      </div>}\r\n    </React.Fragment>;\r\n\r\n    return (\r\n      <FormModal\r\n        enableFullWidth={true}\r\n        onClose={onClose}\r\n        title={title}\r\n        body={body}\r\n        actions={actions}\r\n        hasError={err}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default SelectTeamModal;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Button from '@material-ui/core/Button';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport SelectTeamModal from './SelectTeamModal';\r\nimport QueryService from '../../services/query.service';\r\nimport { ApplicationMode } from '../../enums';\r\nimport { lighten } from '@material-ui/core/styles/colorManipulator';\r\n\r\nclass EnrollmentsComponent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      openTeamModal: false,\r\n      enrolled: []\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.props.enrolled)\r\n      this.getData();\r\n    else\r\n      this.setState({ enrolled: this.props.enrolled });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.scheme != this.props.scheme)\r\n      this.getData();\r\n  }\r\n\r\n  getData() {\r\n    const { scheme } = this.props;\r\n\r\n    QueryService\r\n      .get(`/schemes/${scheme.id}/enrollments`)\r\n      .then(e => this.setState({ enrolled: e }));\r\n  }\r\n\r\n  add(team) {\r\n    const { scheme } = this.props;\r\n    return QueryService\r\n      .post(`/schemes/${scheme.id}/enrollments`, {\r\n        teamId: team.id,\r\n        schemeId: scheme.id,\r\n        user1Id: team.user1Id,\r\n        user2Id: team.user2Id\r\n      })\r\n      .then(e => {\r\n        this.setState({ openTeamModal: false });\r\n        this.getData();\r\n      });\r\n  }\r\n\r\n  removeEnrollment(id) {\r\n    const { scheme } = this.props;\r\n\r\n    return QueryService\r\n      .delete(`/schemes/${scheme.id}/enrollments/${id}`)\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  render() {\r\n    const { enrolled, openTeamModal } = this.state;\r\n    const { scheme, classes, mode } = this.props;\r\n    let hasPermission = mode == ApplicationMode.ADMIN || mode == ApplicationMode.TOURNAMENT;\r\n\r\n    return (\r\n      <ExpansionPanel defaultExpanded className={classes.root}>\r\n        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n          <Typography variant=\"title\">Записани участници</Typography>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails style={{ flexDirection: 'column' }}>\r\n          {openTeamModal && <SelectTeamModal\r\n            scheme={scheme}\r\n            onChange={() => {\r\n              this.setState({ openTeamModal: false });\r\n              this.getData();\r\n            }}\r\n            onClose={() => this.setState({ openTeamModal: false })}\r\n          />}\r\n\r\n          {hasPermission && <div><Button variant=\"outlined\" color=\"primary\" size=\"small\"\r\n            onClick={() => this.setState({ openTeamModal: true })}\r\n          >\r\n            Добави\r\n            </Button></div>}\r\n\r\n          {enrolled.length === 0 && <Typography>Няма записани играчи</Typography>}\r\n\r\n          {enrolled.length !== 0 && <Table>\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell padding=\"none\">№</TableCell>\r\n\r\n                <TableCell>Отбор</TableCell>\r\n                <TableCell padding=\"dense\">Точки</TableCell>\r\n                {hasPermission && <TableCell padding=\"none\"></TableCell>}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n\r\n              {enrolled.map((enrollment, index) => {\r\n                let borderClass = classes.default;\r\n                if (index < scheme.seed)\r\n                  borderClass = classes.seed;\r\n                if (index + 1 == scheme.seed)\r\n                  borderClass = classes.seedDivider;\r\n                if (index + 1 == scheme.maxPlayerCount)\r\n                  borderClass = classes.enrolledDivider;\r\n                if (index + 1 > scheme.maxPlayerCount)\r\n                  borderClass = classes.enrolled;\r\n\r\n                return (\r\n                  <React.Fragment key={enrollment.id}>\r\n                    <TableRow className={borderClass}>\r\n                      <TableCell padding=\"none\">{index + 1}</TableCell>\r\n                      <TableCell>\r\n                        <Typography variant=\"body2\">{enrollment.team.user1.name}</Typography>\r\n                        {enrollment.team.user2 &&\r\n                          <Typography variant=\"body2\">{enrollment.team.user2.name}</Typography>}\r\n                        {/* <Link to={`/teams/${enrollment.team.user1.id}`} >\r\n                          <Typography variant=\"body2\">{enrollment.team.user1.name}</Typography>\r\n                        </Link>\r\n                        {enrollment.team.user2 &&\r\n                          <Link to={`/teams/${enrollment.team.user2.id}`} >\r\n                            <Typography variant=\"body2\">{enrollment.team.user2.name}</Typography>\r\n                          </Link>} */}\r\n                      </TableCell>\r\n                      <TableCell padding=\"dense\">\r\n                        {enrollment.team.rankings && enrollment.team.rankings[0]\r\n                          && <Typography variant=\"caption\">{enrollment.team.rankings[0].points}</Typography>}\r\n                        {(!enrollment.team.rankings || !enrollment.team.rankings[0])\r\n                          && <Typography variant=\"caption\">няма</Typography>}\r\n                      </TableCell>\r\n                      {hasPermission && <TableCell padding=\"none\">\r\n                        <Button variant=\"text\" color=\"secondary\" size=\"small\"\r\n                          onClick={() => this.removeEnrollment(enrollment.id)}\r\n                        >\r\n                          <DeleteForeverIcon />\r\n                        </Button>\r\n                      </TableCell>}\r\n                    </TableRow>\r\n                  </React.Fragment>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>}\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n    )\r\n  }\r\n}\r\n\r\nconst styles = (theme) => {\r\n  return ({\r\n    root: {\r\n    },\r\n    seedDivider: {\r\n      backgroundColor: lighten(theme.palette.primary.main, .9),\r\n      borderBottom: `2px solid ${theme.palette.primary.light}`\r\n    },\r\n    enrolledDivider: {\r\n      borderBottom: `2px solid ${theme.palette.secondary.light}`\r\n    },\r\n    seed: {\r\n      backgroundColor: lighten(theme.palette.primary.main, .9)\r\n    },\r\n    enrolled: {\r\n      backgroundColor: lighten(theme.palette.secondary.main, .9),\r\n    }\r\n  });\r\n}\r\n\r\nexport default withStyles(styles)(EnrollmentsComponent);","import React from 'react';\r\n\r\nimport QueryService from '../services/query.service';\r\n\r\nexport default class ThumbnailOrDefault extends React.Component {\r\n  render() {\r\n    let style = { borderRadius: '5px', height: '150px', width: '150px', ...this.props.style };\r\n    let src = this.props.fileId ? QueryService.getFileUrl(this.props.fileId) : this.props.default;\r\n\r\n    return <img src={src} style={style} />;\r\n  }\r\n}","import React from 'react';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport moment from 'moment-timezone';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport PlayersIcon from '../components/icons/PlayersIcon';\r\nimport GroupIcon from '../components/icons/GroupIcon';\r\nimport BracketIcon from '../components/icons/BracketIcon';\r\nimport CalendarIcon from '../components/icons/CalendarIcon';\r\nimport TournamentIcon from '../components/icons/TournamentIcon';\r\nimport EditBoxedIcon from '../components/icons/EditBoxedIcon';\r\nimport WinnerIcon from '../components/icons/WinnerIcon';\r\nimport SeasonIcon from '../components/SeasonIcon';\r\nimport QueryService from '../services/query.service';\r\nimport EnrollmentsComponent from '../schemes/components/Enrollments';\r\nimport { BracketStatus, ApplicationMode } from '../enums';\r\nimport Thumbnail from '../components/ThumbnailOrDefault';\r\nimport ConfirmationDialog from '../components/ConfirmationDialog';\r\nimport { dispatchEvent } from '../services/events.service';\r\n\r\nexport const SchemeInfoBar = ({ scheme, playerCount, classes }) => {\r\n  return (\r\n    <div className={classes.info_bar_root}>\r\n      <Typography color=\"primary\">\r\n        {/* <SnowIcon width=\"25px\" height=\"25px\" /> */}\r\n        <SeasonIcon date={scheme.date} />\r\n        {scheme.edition.tournament.name}\r\n      </Typography>\r\n      <Typography color=\"primary\">\r\n        <PlayersIcon width=\"25px\" height=\"25px\" />\r\n        <b style={{ margin: '0 .3em' }}>{playerCount || 0}</b>\r\n        Участника (макс. {scheme.maxPlayerCount})\r\n      </Typography>\r\n\r\n      <Typography color=\"primary\">\r\n        <TournamentIcon width=\"25px\" height=\"25px\" />\r\n        {scheme.singleTeams && \"SGL \"}\r\n        {!scheme.singleTeams && \"DBL \"}\r\n        ({scheme.hasGroupPhase && \"Групи ->\"}Дир.ел.)\r\n      </Typography>\r\n\r\n      <Typography color=\"primary\">\r\n        <CalendarIcon width=\"25px\" height=\"25px\" />\r\n        {moment(scheme.date).format('DD.MM.YYYY  HH:mm')}\r\n      </Typography>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const RegisterWidget = (props) => {\r\n  const { scheme, classes, invitationTrigger, enrollment, mode, onComplete, onError } = props;\r\n  let start = moment(scheme.registrationStart);\r\n  let end = moment(scheme.registrationEnd);\r\n  let duration = moment.duration(start.diff(moment()));\r\n\r\n  if (moment().isBetween(start, end))\r\n    duration = moment.duration(end.diff(moment()));\r\n\r\n  let enroll = () => dispatchEvent('menu-login');\r\n  if (mode != ApplicationMode.GUEST)\r\n    enroll = invitationTrigger || (() => QueryService\r\n      .get(`/schemes/${scheme.id}/enrollments/enroll`)\r\n      .then(onComplete('enroll'))\r\n      .catch(onError('enroll')));\r\n\r\n  const cancelEnroll = () => {\r\n    return QueryService\r\n      .delete(`/schemes/${scheme.id}/enrollments/${enrollment.id}/cancelEnroll`)\r\n      .then(onComplete('cancel'))\r\n      .catch(onError('cancel'));\r\n  }\r\n\r\n  let Body = (\r\n    <React.Fragment>\r\n      {moment().isBefore(start) && <React.Fragment>\r\n        <Typography>Остават <b>{duration.days()} дни, {duration.hours()} часа</b> и <b> {duration.minutes()} минути</b> до началото на записването.</Typography>\r\n        <div className=\"buttons\">\r\n          <Button variant=\"contained\" color=\"primary\" disabled>\r\n            <EditBoxedIcon width=\"1em\" height=\"1em\" style={{ marginRight: '.3em' }} />\r\n            Записване\r\n          </Button>\r\n        </div>\r\n      </React.Fragment>}\r\n\r\n      {moment().isBetween(start, end) && <React.Fragment>\r\n        <Typography>Остават <b>{duration.days()} дни, {duration.hours()} часа</b> и <b> {duration.minutes()} минути</b> до края на записването.</Typography>\r\n        <div className=\"buttons\">\r\n          <Button variant=\"contained\" color=\"primary\" onClick={enroll}>\r\n            <EditBoxedIcon width=\"1em\" height=\"1em\" style={{ marginRight: '.3em' }} />\r\n            Записване\r\n            </Button>\r\n        </div>\r\n      </React.Fragment>}\r\n\r\n      {moment().isAfter(end) && <React.Fragment>\r\n        <Typography>Записването за този турнир е приключило.</Typography>\r\n      </React.Fragment>}\r\n    </React.Fragment>\r\n  );\r\n\r\n  if (enrollment)\r\n    Body = (\r\n      <React.Fragment>\r\n        <ConfirmationDialog\r\n          title=\"Отписване от турнир\"\r\n          body={<Typography>\r\n            Сигурни ли сте че искате да се отпишете от турнир {scheme.name}?\r\n                <Typography variant=\"caption\">Ако сте в отбор, то и другият играч ще бъде отписан.</Typography>\r\n          </Typography>}\r\n          onAccept={cancelEnroll}\r\n        >\r\n          <div className=\"buttons\">\r\n            <Button variant=\"contained\" color=\"secondary\">\r\n              <EditBoxedIcon width=\"1em\" height=\"1em\" style={{ marginRight: '.3em' }} />\r\n              Отписване\r\n            </Button>\r\n          </div>\r\n        </ConfirmationDialog>\r\n      </React.Fragment>\r\n    );\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Hidden smUp>\r\n        {Body}\r\n      </Hidden>\r\n\r\n      <Hidden xsDown>\r\n        <ExpansionPanel defaultExpanded>\r\n          <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n            <Typography variant=\"title\">Записване</Typography>\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails className={classes.register_widget}>\r\n            {Body}\r\n          </ExpansionPanelDetails>\r\n        </ExpansionPanel>\r\n      </Hidden>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport const SchemesWidget = ({ scheme, classes, history }) => {\r\n  const navigateBracket = () => {\r\n    history.push(`/schemes/${scheme.id}/elimination`);\r\n  };\r\n\r\n  const navigateGroups = () => {\r\n    history.push(`/schemes/${scheme.id}/groups`);\r\n  };\r\n\r\n  const Body = (\r\n    <React.Fragment>\r\n      {scheme.hasGroupPhase && scheme.bracketStatus != BracketStatus.UNDRAWN\r\n        && <Paper elevation={1} className={classes.schemes_widget_tile} onClick={navigateGroups}>\r\n          <GroupIcon width=\"100px\" height=\"100px\" />\r\n          <Typography>Групи</Typography>\r\n        </Paper>}\r\n\r\n      {(scheme.bracketStatus == BracketStatus.ELIMINATION_DRAWN || scheme.bracketStatus == BracketStatus.ELIMINATION_END)\r\n        && <Paper elevation={1} className={classes.schemes_widget_tile} onClick={navigateBracket}>\r\n          <BracketIcon width=\"100px\" height=\"100px\" />\r\n          <Typography>Преглед</Typography>\r\n        </Paper>}\r\n    </React.Fragment>\r\n  );\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Hidden smUp>\r\n        {Body}\r\n      </Hidden>\r\n\r\n      <Hidden xsDown>\r\n        <ExpansionPanel defaultExpanded>\r\n          <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n            <Typography variant=\"title\">Схема</Typography>\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails className={classes.schemes_widget}>\r\n            {Body}\r\n          </ExpansionPanelDetails >\r\n        </ExpansionPanel >\r\n      </Hidden>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport const EnrollmentsWidget = ({ scheme, mode, enrolled, classes }) => {\r\n  console.log(enrolled);\r\n  const halfOfEnrolled = Math.ceil(enrolled.length / 2);\r\n\r\n  function getColor(position) {\r\n    if (position <= scheme.seed)\r\n      return 'primary';\r\n    else if (position > scheme.maxPlayerCount)\r\n      return 'secondary';\r\n    else\r\n      return 'textPrimary';\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Hidden smUp>\r\n        <Typography variant=\"title\" className={classes.mobile_heading}>Записани участници</Typography>\r\n        <Paper className={classes.enrollments_widget}>\r\n          <div style={{\r\n            display: 'flex',\r\n            justifyContent: 'space-between'\r\n          }}>\r\n            <div style={{ flexBasis: '45%' }}>\r\n              {enrolled.slice(0, halfOfEnrolled).map((enrollment, index) => {\r\n                return (\r\n                  <React.Fragment key={index}>\r\n                    <Typography color={getColor(index + 1)}>{enrollment.team.user1.name}</Typography>\r\n                    {enrollment.team.user2\r\n                      && <Typography style={{ marginBottom: '.3em' }}>{enrollment.team.user2.name}</Typography>}\r\n                  </React.Fragment>\r\n                );\r\n              })}\r\n            </div>\r\n            <div style={{ flexBasis: '45%' }}>\r\n              {enrolled.slice(halfOfEnrolled).map((enrollment, index) => {\r\n                return (\r\n                  <React.Fragment key={index}>\r\n                    <Typography color={getColor(index + 1 + halfOfEnrolled)}>{enrollment.team.user1.name}</Typography>\r\n                    {enrollment.team.user2\r\n                      && <Typography style={{ marginBottom: '.3em' }} color={getColor(index + 1 + halfOfEnrolled)}>{enrollment.team.user2.name}</Typography>}\r\n                  </React.Fragment>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </Paper>\r\n      </Hidden>\r\n      <Hidden xsDown>\r\n        <EnrollmentsComponent scheme={scheme} mode={mode} enrolled={enrolled} />\r\n      </Hidden>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport const FinalMatchWidget = ({ scheme, classes, match }) => {\r\n  const TableRow = ({ team, isWinner }) => {\r\n    if (!team)\r\n      return (<Typography variant=\"headline\" align=\"center\">TBD</Typography>);\r\n\r\n    return (\r\n      <Paper className={isWinner ? 'row-root winner' : 'row-root'}>\r\n        <div style={{ display: 'flex', alignItems: 'center' }}>\r\n          <Thumbnail fileId={team.user1.thumbnailId} default=\"/assets/tennis-player-free-vector.jpg\" style={{ height: '35px', width: '35px' }} />\r\n          {team.user2 && <Thumbnail fileId={team.user2.thumbnailId} default=\"/assets/tennis-player-free-vector.jpg\" style={{ height: '35px', width: '35px', marginLeft: '.3em' }} />}\r\n        </div>\r\n\r\n        <div style={{\r\n          flexGrow: 1,\r\n          textTransform: 'uppercase',\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          justifyContent: 'center',\r\n          marginLeft: '.5em'\r\n        }}>\r\n          <Typography>{splitAndFormatName(team.user1.name)}</Typography>\r\n          {team.user2 && <Typography>{splitAndFormatName(team.user2.name)}</Typography>}\r\n        </div>\r\n\r\n        {isWinner && <Typography variant=\"title\" color=\"primary\" style={{\r\n          display: 'flex',\r\n          alignItems: 'center'\r\n        }}>\r\n          <WinnerIcon height=\"1em\" width=\"1em\" />\r\n        </Typography>}\r\n\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          marginLeft: '1em',\r\n          fontStyle: 'italic'\r\n        }}>\r\n          {match.sets && match.sets.map(set => {\r\n            return (\r\n              <div style={{ marginRight: '.3em', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                {match.team1Id == team.id && <Typography>{set.team1}</Typography>}\r\n                {match.team2Id == team.id && <Typography>{set.team2}</Typography>}\r\n                {set.tiebreaker && match.team1Id == team.id && set.team1 < set.team2\r\n                  && <Typography><sup>({set.tiebreaker})</sup></Typography>}\r\n                {set.tiebreaker && match.team2Id == team.id && set.team2 < set.team1\r\n                  && <Typography><sup>({set.tiebreaker})</sup></Typography>}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </Paper>\r\n    );\r\n  }\r\n\r\n  const TableView = (\r\n    <div className=\"table-root\">\r\n      <TableRow team={match.team1} isWinner={match.winnerId && match.winnerId == match.team1Id} />\r\n      <TableRow team={match.team2} isWinner={match.winnerId && match.winnerId == match.team2Id} />\r\n    </div>\r\n  );\r\n\r\n  const SingleTeamView = ({ team, hasWinner, isWinner }) => {\r\n    return (\r\n      <div className=\"player\">\r\n        {!team && <Typography variant=\"headline\" align=\"center\">TBD</Typography>}\r\n        {team && <React.Fragment>\r\n          <Thumbnail fileId={team.user1.thumbnailId} default=\"/assets/tennis-player-free-vector.jpg\" />\r\n          <div>\r\n            <Typography variant=\"headline\">{team.user1.name}</Typography>\r\n            {hasWinner && isWinner && <Typography color=\"primary\">Победител</Typography>}\r\n            {hasWinner && !isWinner && <Typography color=\"primary\">Финалист</Typography>}\r\n          </div>\r\n        </React.Fragment>}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const SingleView = (\r\n    <div className=\"root\">\r\n      <SingleTeamView team={match.team1} hasWinner={match.winnerId} isWinner={match.winnerId == match.team1Id} />\r\n\r\n      <div className=\"score\">\r\n        {match.sets && match.sets.map(set => {\r\n          return (\r\n            <Typography key={set.id} variant=\"title\" style={{ fontStyle: 'italic' }}>{set.team1} - {set.team2} {set.tiebreaker && <sup>({set.tiebreaker})</sup>}</Typography>\r\n          );\r\n        })}\r\n        {!match.sets.length && <Typography variant=\"headline\" style={{ fontStyle: 'italic' }}>VS</Typography>}\r\n      </div>\r\n\r\n      <SingleTeamView team={match.team2} hasWinner={match.winnerId} isWinner={match.winnerId == match.team2Id} />\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Hidden smUp>\r\n        <div className={classes.finale_widget}>\r\n          <Typography variant=\"title\" className={classes.mobile_heading}>Финал</Typography>\r\n          {TableView}\r\n        </div>\r\n\r\n      </Hidden>\r\n\r\n      <Hidden xsDown>\r\n        {/* <Paper style={{ padding: '1em 0' }} className={classes.finale_widget}>\r\n          <Typography align=\"center\" variant=\"title\" >Финал</Typography>\r\n          {TableView}\r\n        </Paper> */}\r\n        <ExpansionPanel defaultExpanded>\r\n          <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n            <Typography variant=\"title\">Финал</Typography>\r\n          </ExpansionPanelSummary>\r\n          {!scheme.singleTeams && <ExpansionPanelDetails className={classes.finale_widget}>\r\n            {TableView}\r\n          </ExpansionPanelDetails>}\r\n\r\n          {scheme.singleTeams && <ExpansionPanelDetails className={classes.single_teams_finale}>\r\n            {SingleView}\r\n          </ExpansionPanelDetails>}\r\n        </ExpansionPanel>\r\n      </Hidden>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport function splitAndFormatName(name) {\r\n  return (name || '')\r\n    .split(' ')\r\n    .map((part, index, split) => {\r\n      if (index == 0)\r\n        return part.charAt(0) + '.';\r\n      else if (index == split.length - 1)\r\n        return part;\r\n      else\r\n        return '';\r\n    })\r\n    .join(' ');\r\n}\r\n\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\n\r\nimport MessageModal from '../components/MessageModal';\r\nimport UserService from '../services/user.service';\r\nimport QueryService from '../services/query.service';\r\n\r\nclass InvitationsComponent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      userId: null,\r\n      page: 0,\r\n      rowsPerPage: 10,\r\n      // Handle errors: ExistingEnrollment, RequirementsNotMet, UserHasNoInfo\r\n      err: null\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setUserId();\r\n  }\r\n\r\n  setUserId() {\r\n    UserService.getAuthenticatedUser()\r\n      .then(user => {\r\n        if (user)\r\n          this.setState({ userId: user.id });\r\n        else\r\n          this.setState({ userId: null });\r\n      });\r\n  }\r\n\r\n  accept(invitation) {\r\n    this.setState({ err: null });\r\n    QueryService\r\n      .post(`/invitations/${invitation.id}`)\r\n      .then(() => this.props.onAccept())\r\n      .catch(err => this.setState({ err }));\r\n  }\r\n\r\n  cancel(invitation) {\r\n    QueryService\r\n      .delete(`/invitations/${invitation.id}`)\r\n      .then(() => this.props.onCancel())\r\n      .catch(() => null);\r\n  }\r\n\r\n  render() {\r\n    const { page, rowsPerPage, userId, err } = this.state;\r\n    const { invitations } = this.props;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <MessageModal activation={this.state.err}>\r\n          <Typography variant=\"subheading\" color=\"secondary\">Възникна грешка при приемане на поканата.</Typography>\r\n          {err && err.message == 'ExistingEnrollment' && <React.Fragment>\r\n            <Typography>Някой от играчите вече е записан за този турнир.</Typography>\r\n          </React.Fragment>}\r\n          {err && err.message == 'RequirementsNotMet' && <React.Fragment>\r\n            <Typography>Някой от играчите не покрива следните ограничения на турнира:</Typography>\r\n            <Typography variant=\"caption\">{err.errors.map(e => e == 'gender' ? 'пол' : 'възраст').join(', ')}</Typography>\r\n          </React.Fragment>}\r\n          {err && err.message == 'UserHasNoInfo' && <React.Fragment>\r\n            <Typography>Някой от играчите няма въведена информация за пол и/или дата на раждане, които са нужни за записване.</Typography>\r\n          </React.Fragment>}\r\n        </MessageModal>\r\n        {invitations.length == 0 && <Typography variant=\"caption\">Нямате текущи покани</Typography>}\r\n        <List>\r\n          {invitations.slice(page * rowsPerPage, (page + 1) * rowsPerPage).map(inv => {\r\n            return (\r\n              <ListItem key={inv.id} style={{ display: 'flex', justifyContent: 'space-between', borderBottom: '1px solid #f3f3f3' }}>\r\n                {userId == inv.inviterId &&\r\n                  <Typography>{inv.invited.name}</Typography>}\r\n                {userId == inv.invitedId &&\r\n                  <Typography>{inv.inviter.name}</Typography>}\r\n\r\n                <div>\r\n                  <Link to={`/schemes/${inv.scheme.id}`}>\r\n                    <Typography variant=\"body2\">\r\n                      {inv.scheme.name}\r\n                    </Typography>\r\n                  </Link>\r\n                </div>\r\n                {userId == inv.inviterId\r\n                  && <Button\r\n                    variant=\"outlined\"\r\n                    color=\"secondary\"\r\n                    size=\"small\"\r\n                    onClick={() => this.cancel(inv)}\r\n                  >\r\n                    Отказване\r\n                  </Button>}\r\n                {userId == inv.invitedId\r\n                  && <Button\r\n                    variant=\"outlined\"\r\n                    color=\"primary\"\r\n                    size=\"small\"\r\n                    onClick={() => this.accept(inv)}\r\n                  >\r\n                    Приемане\r\n                  </Button>}\r\n              </ListItem>\r\n            );\r\n          })}\r\n        </List>\r\n        {invitations.length > 0 && <TablePagination\r\n          component=\"div\"\r\n          count={invitations.length}\r\n          rowsPerPage={rowsPerPage}\r\n          rowsPerPageOptions={[5, 10, 25]}\r\n          labelRowsPerPage=\"Покажи:\"\r\n          labelDisplayedRows={({ from, to, count }) => `${from}-${to} от ${count}`}\r\n          page={page}\r\n          onChangePage={(e, page) => this.setState({ page })}\r\n          onChangeRowsPerPage={e => this.setState({ rowsPerPage: e.target.value, page: 0 })}\r\n        />}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default InvitationsComponent","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport AsyncSelect from '../../components/select/AsyncSelect';\r\nimport QueryService from '../../services/query.service';\r\nimport FormModal from '../../components/FormModal';\r\nimport InvitationsComponent from '../../users/InvitationsComponent';\r\n\r\nclass InvitationsModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      invitations: [],\r\n      selectedUser: null\r\n    }\r\n\r\n    this.handleChange = (user) => {\r\n      this.setState({ selectedUser: user });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    QueryService\r\n      .get(`/invitations?schemeId=${this.props.scheme.id}`)\r\n      .then(invitations => this.setState({ invitations }));\r\n  }\r\n\r\n  invite() {\r\n    if (!this.state.selectedUser)\r\n      return;\r\n\r\n    QueryService\r\n      .post('/invitations', {\r\n        invitedId: this.state.selectedUser.id,\r\n        schemeId: this.props.scheme.id\r\n      })\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  render() {\r\n    const { selectedUser } = this.state;\r\n    const { onClose, scheme, currentUser } = this.props;\r\n    const title = `Менажиране на поканите за схема ${scheme.name}`;\r\n    const actions = <Button variant=\"outlined\" color=\"primary\" onClick={onClose} size=\"small\">Затвори</Button>\r\n    const body = <React.Fragment>\r\n      {/* <Typography variant=\"caption\">\r\n        Ще бъдете записани за турнира, когато поканеният играч приеме.\r\n        В падащото меню за избор на играч се показват само играчи,\r\n        които могат да приемат поканата Ви (това означава, че отговарят на\r\n        изискванията на турнира и не са записани).\r\n      </Typography> */}\r\n      <div style={{ margin: '0 0 1rem 0', display: 'flex', justifyContent: 'space-between', alignItems: 'flex-end' }}>\r\n        <AsyncSelect\r\n          label=\"Играч\"\r\n          value={selectedUser}\r\n          query=\"invitable\"\r\n          filter={{\r\n            schemeId: scheme.id,\r\n            userId: currentUser.id\r\n          }}\r\n          noOptionsMessage={() => 'Няма намерени играчи, отговарящи на изискванията'}\r\n          formatOptionLabel={(option) => <Typography component=\"span\">\r\n            {option.name}\r\n          </Typography>}\r\n          onChange={this.handleChange}\r\n        />\r\n\r\n        <Button variant=\"contained\" color=\"primary\" size=\"small\" style={{ marginLeft: '1rem' }} disabled={!selectedUser} onClick={() => this.invite()}>Покани</Button>\r\n      </div>\r\n\r\n      <InvitationsComponent invitations={this.state.invitations} onCancel={() => this.getData()} onAccept={this.props.onChange} />\r\n    </React.Fragment>\r\n\r\n    return (\r\n      <FormModal\r\n        enableFullWidth={true}\r\n        onClose={onClose}\r\n        title={title}\r\n        body={body}\r\n        actions={actions}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default InvitationsModal;","import React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport UserService from '../services/user.service';\r\nimport QueryService from '../services/query.service';\r\nimport { ApplicationMode, BracketStatus } from '../enums';\r\nimport { catchEvent } from '../services/events.service';\r\nimport SchemeFormModal from '../schemes/SchemeFormModal';\r\nimport MessageModal from '../components/MessageModal';\r\nimport ScoresModal from '../schemes/components/ScoresModal';\r\nimport EliminationPreviewModal from '../schemes/components/EliminationPreviewModal';\r\nimport ConfirmationDialog from '../components/ConfirmationDialog';\r\nimport styles from './scheme.styles';\r\nimport {\r\n  SchemeInfoBar,\r\n  RegisterWidget,\r\n  SchemesWidget,\r\n  EnrollmentsWidget,\r\n  FinalMatchWidget\r\n} from './scheme.components';\r\nimport InvitationsModal from '../schemes/components/InvitationsModal';\r\n\r\nclass SchemeView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      scheme: {\r\n        edition: {\r\n          tournament: {}\r\n        },\r\n        matches: [{\r\n          team1: {\r\n            user1: {},\r\n            user2: {}\r\n          },\r\n          team2: {\r\n            user1: {},\r\n            user2: {}\r\n          },\r\n          sets: []\r\n        }]\r\n      },\r\n      schemeModel: null,\r\n      enrolled: [],\r\n      hasError: false,\r\n      scores: null,\r\n      eliminationPreview: null,\r\n      currentUser: null,\r\n      invitationsModal: null,\r\n      enrollError: false\r\n    }\r\n\r\n    this.onCompleteRegisterAction = (action) => {\r\n      if (action === 'enroll')\r\n        return () => {\r\n          this.getData();\r\n        }\r\n      else\r\n        return () => {\r\n          this.getData();\r\n        }\r\n    }\r\n\r\n    this.onErrorRegisterAction = (action) => {\r\n      if (action === 'enroll')\r\n        return () => {\r\n          this.setState({ enrollError: !this.state.enrollError });\r\n        }\r\n      else\r\n        return () => {\r\n\r\n        }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    UserService.getAuthenticatedUser()\r\n      .then(currentUser => this.setState({ currentUser }));\r\n    this.getData();\r\n    catchEvent('logged-in', () => {\r\n      this.getData();\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { scheme, schemeModel, enrolled, scores, eliminationPreview, invitationsModal, currentUser } = this.state;\r\n    const { classes, history } = this.props;\r\n\r\n    return (\r\n      <UserService.WithApplicationMode>\r\n        {mode => {\r\n          let hasPermission = mode == ApplicationMode.ADMIN || mode == ApplicationMode.TOURNAMENT;\r\n          let finalMatch = this.getFinalMatch();\r\n\r\n          return (\r\n            <div className=\"container\">\r\n              <MessageModal activation={this.state.hasError}>\r\n                <Typography>Неуспешно изтриване на схема. Възможна причина за грешката е съществуващи записи на играчи</Typography>\r\n              </MessageModal>\r\n              <MessageModal activation={this.state.enrollError}>\r\n                <Typography>\r\n                  Не отговаряте на изискванията за пол/възраст. Моля, попълнете допълнителните данни в профилната ви страница и позволете участие в турнири, след което се запишете\r\n                </Typography>\r\n              </MessageModal>\r\n              {hasPermission && schemeModel\r\n                && <SchemeFormModal\r\n                  model={schemeModel}\r\n                  onChange={() => {\r\n                    this.setState({ schemeModel: null });\r\n                    this.getData();\r\n                  }}\r\n                  onClose={() => this.setState({ schemeModel: null })}\r\n                />}\r\n              {scores && scores.length > 0\r\n                && <ScoresModal\r\n                  scores={scores}\r\n                  scheme={scheme}\r\n                  onChange={() => {\r\n                    this.setState({ scores: null });\r\n                    this.getData();\r\n                  }}\r\n                  onClose={() => this.setState({ scores: null })}\r\n                />}\r\n              {invitationsModal\r\n                && <InvitationsModal\r\n                  onChange={() => this.setState({ invitationsModal: false }, () => this.getData())}\r\n                  onClose={() => this.setState({ invitationsModal: false })}\r\n                  currentUser={currentUser}\r\n                  scheme={scheme}\r\n                />}\r\n\r\n              {eliminationPreview && <EliminationPreviewModal\r\n                teams={eliminationPreview}\r\n                scheme={scheme}\r\n                onClose={() => this.setState({ eliminationPreview: null })}\r\n                onDraw={() => this.setState({ eliminationPreview: null }, this.getData())}\r\n              />}\r\n\r\n              {hasPermission && this.getButtons()}\r\n\r\n\r\n              <Paper className={classes.root}>\r\n                <Typography className={classes.heading}>{scheme.name}</Typography>\r\n                <SchemeInfoBar scheme={scheme} playerCount={enrolled.length} classes={classes} />\r\n                <Typography style={{ marginBottom: '1em' }}>{scheme.info}</Typography>\r\n                <div className={classes.widgets_root}>\r\n                  {finalMatch && <div style={{ width: '100%', marginBottom: '1em' }}>\r\n                    <FinalMatchWidget match={finalMatch} classes={classes} scheme={scheme} />\r\n                  </div>}\r\n                  <div className={classes.widgets_second_row}>\r\n                    <div className=\"left\">\r\n                      {scheme.bracketStatus == BracketStatus.UNDRAWN && <div style={{ marginBottom: '1em' }}>\r\n                        <RegisterWidget\r\n                          scheme={scheme}\r\n                          classes={classes}\r\n                          enrollment={this.getCurrentUserEnrollment()}\r\n                          mode={mode}\r\n                          invitationTrigger={this.createInvitationTrigger()}\r\n                          onComplete={this.onCompleteRegisterAction}\r\n                          onError={this.onErrorRegisterAction}\r\n                        />\r\n                      </div>}\r\n                      <div>\r\n                        {scheme.bracketStatus != BracketStatus.UNDRAWN && <SchemesWidget scheme={scheme} classes={classes} history={history} />}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"right\">\r\n                      <EnrollmentsWidget scheme={scheme} mode={mode} classes={classes} enrolled={enrolled} />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Paper>\r\n            </div>\r\n          );\r\n        }}\r\n      </UserService.WithApplicationMode>\r\n    );\r\n  }\r\n\r\n  getCurrentUserEnrollment() {\r\n    const { currentUser, enrolled } = this.state;\r\n    if (!currentUser)\r\n      return null;\r\n    else {\r\n      var t = enrolled.find(e => e.team.user1Id == currentUser.id || e.team.user2Id == currentUser.id);\r\n      return t;\r\n    }\r\n  }\r\n\r\n  getFinalMatch() {\r\n    const { scheme } = this.state;\r\n    if (!scheme.matches || scheme.matches.length === 0 || !scheme.bracketRounds)\r\n      return null;\r\n    else\r\n      return scheme.matches.find(e => e.round == scheme.bracketRounds);\r\n  }\r\n\r\n  createInvitationTrigger() {\r\n    if (this.state.scheme.singleTeams)\r\n      return null;\r\n    else\r\n      return () => this.setState({ invitationsModal: true });\r\n  }\r\n\r\n  getData() {\r\n    const { id } = this.props.match.params;\r\n\r\n    QueryService\r\n      .get(`/schemes/${id}`)\r\n      .then(e => this.setState({ scheme: e }));\r\n\r\n    QueryService\r\n      .get(`/schemes/${id}/enrollments`)\r\n      .then(enrolled => this.setState({ enrolled }));\r\n  }\r\n\r\n  deleteScheme() {\r\n    this.setState({ hasError: false });\r\n    return QueryService.delete(`/schemes/${this.state.scheme.id}`)\r\n      .then(e => this.props.history.replace(`/editions/${this.state.scheme.edition.id}`))\r\n      .catch(err => this.setState({ hasError: true }));\r\n  }\r\n\r\n  getScores() {\r\n    return QueryService.get(`/schemes/${this.state.scheme.id}/scores`)\r\n      .then(scores => this.setState({ scores }));\r\n  }\r\n\r\n  previewElimination() {\r\n    return QueryService.get(`/schemes/${this.state.scheme.id}/draw/eliminationPhase/preview`)\r\n      .then(eliminationPreview => this.setState({ eliminationPreview }));\r\n  }\r\n\r\n  drawGroupPhase() {\r\n    return QueryService.get(`/schemes/${this.state.scheme.id}/draw/groupPhase`)\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  drawEliminationPhase() {\r\n    return QueryService.get(`/schemes/${this.state.scheme.id}/draw/eliminationPhase`)\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  finishPhase() {\r\n    return QueryService.get(`/schemes/${this.state.scheme.id}/draw/finish`)\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  getButtons() {\r\n    const { scheme } = this.state;\r\n\r\n    return (\r\n      <div style={{ margin: '.5rem 0' }}>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          size=\"small\"\r\n          onClick={() => this.setState({ schemeModel: scheme })}\r\n        >\r\n          Промяна\r\n        </Button>\r\n\r\n        {scheme.bracketStatus == BracketStatus.UNDRAWN\r\n          && <ConfirmationDialog\r\n            title=\"Изтриване на турнир\"\r\n            body={<Typography>Сигурни ли сте че искате да изтриете схема {scheme.name}?</Typography>}\r\n            onAccept={() => this.deleteScheme()}\r\n          >\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              size=\"small\"\r\n              style={{ marginLeft: '.3rem' }}\r\n            >\r\n              Изтриване\r\n                  </Button>\r\n          </ConfirmationDialog>}\r\n\r\n        {/* {((scheme.bracketStatus == BracketStatus.UNDRAWN && !scheme.hasGroupPhase)\r\n          || (scheme.bracketStatus == BracketStatus.GROUPS_END))\r\n          && <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ marginLeft: '.3rem' }}\r\n            onClick={() => this.previewElimination()}\r\n          >\r\n            Изтегляне\r\n        </Button>} */}\r\n\r\n        {((scheme.bracketStatus == BracketStatus.UNDRAWN && !scheme.hasGroupPhase)\r\n          || (scheme.bracketStatus == BracketStatus.GROUPS_END))\r\n          && <ConfirmationDialog\r\n            title=\"Изтегляне на схема\"\r\n            body={<Typography>Сигурни ли сте, че искате да изтеглите схемата?</Typography>}\r\n            onAccept={() => this.drawEliminationPhase()}\r\n          >\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              style={{ marginLeft: '.3rem' }}\r\n            >\r\n              Изтегляне\r\n        </Button>\r\n          </ConfirmationDialog>}\r\n\r\n        {scheme.bracketStatus == BracketStatus.UNDRAWN && scheme.hasGroupPhase\r\n          && <ConfirmationDialog\r\n            title=\"Изтегляне на схема\"\r\n            body={<Typography>Сигурни ли сте, че искате да изтеглите схемата?</Typography>}\r\n            onAccept={() => this.drawGroupPhase()}\r\n          >\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              style={{ marginLeft: '.3rem' }}\r\n            >\r\n              Изтегляне\r\n            </Button>\r\n          </ConfirmationDialog>}\r\n\r\n        {(scheme.bracketStatus == BracketStatus.GROUPS_DRAWN || scheme.bracketStatus == BracketStatus.ELIMINATION_DRAWN)\r\n          && <ConfirmationDialog\r\n            title=\"Приключване на фаза\"\r\n            body={<Typography>Сигурни ли сте че искате да приключите текущата фаза?</Typography>}\r\n            onAccept={() => this.finishPhase()}\r\n          >\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              style={{ marginLeft: '.3rem' }}\r\n            >\r\n              Приключване на фаза\r\n            </Button>\r\n          </ConfirmationDialog>}\r\n\r\n        {scheme.bracketStatus == BracketStatus.ELIMINATION_END\r\n          && <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ marginLeft: '.3rem' }}\r\n            onClick={() => this.getScores()}\r\n          >\r\n            Резултати\r\n          </Button>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(SchemeView);","export default (theme) => ({\r\n  root: {\r\n    padding: '2em'\r\n  },\r\n  heading: {\r\n    fontWeight: 700,\r\n    fontSize: '1.3em'\r\n  },\r\n  mobile_heading: {\r\n    margin: '0 0 .3em 0',\r\n    fontWeight: 700,\r\n    fontSize: '1.1em'\r\n  },\r\n  info_bar_root: {\r\n    display: 'flex',\r\n    justifyContent: 'flex-start',\r\n    color: theme.palette.primary.light,\r\n    marginBottom: '1em',\r\n    '& > *': {\r\n      color: theme.palette.primary.light,\r\n      fontWeight: 600,\r\n      marginRight: '.5em',\r\n      display: 'flex',\r\n      alignItems: 'center'\r\n    },\r\n    [theme.breakpoints.down('sm')]: {\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  widgets_root: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center'\r\n  },\r\n  widgets_second_row: {\r\n    display: 'flex',\r\n    width: '100%',\r\n    justifyContent: 'space-between',\r\n    flexWrap: 'wrap',\r\n    '& > .left': {\r\n      flexGrow: 1,\r\n      flexBasis: '40%',\r\n      [theme.breakpoints.down('sm')]: {\r\n        flexBasis: '100%'\r\n      }\r\n    },\r\n    '& > .right': {\r\n      flexGrow: 1,\r\n      flexBasis: '40%',\r\n      marginLeft: '1em',\r\n      [theme.breakpoints.down('sm')]: {\r\n        flexBasis: '100%',\r\n        marginLeft: '0',\r\n        marginTop: '1em'\r\n      }\r\n    }\r\n  },\r\n  schemes_widget: {\r\n    display: 'flex',\r\n    padding: '2em',\r\n    justifyContent: 'space-around',\r\n    alignItems: 'center'\r\n  },\r\n  schemes_widget_tile: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    padding: '.3em 1em',\r\n    background: 'linear-gradient(0deg, rgb(255, 232, 217) 0%, rgb(255, 255, 255) 100%)',\r\n    color: theme.palette.secondary.main,\r\n    cursor: 'pointer'\r\n  },\r\n  register_widget: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    padding: '.5em 1.5em',\r\n    '& .buttons': {\r\n      marginTop: '1em',\r\n      display: 'flex',\r\n      justifyContent: 'space-around',\r\n      alignItems: 'center',\r\n    }\r\n  },\r\n  enrollments_widget: {\r\n    padding: '1em',\r\n    background: 'linear-gradient(0deg, rgb(220, 220, 220) 0%, rgb(239, 239, 239) 100%)'\r\n  },\r\n  // single_teams_finale_mobile: {\r\n  //   padding: '1em',\r\n  //   background: 'linear-gradient(0deg, rgb(239, 239, 239) 0%, rgb(253, 253, 253) 100%)',\r\n  //   '& .root': {\r\n  //     flexDirection: 'column',\r\n  //     alignItems: 'center',\r\n  //     flexGrow: 1\r\n  //   },\r\n  //   '& .player': {\r\n  //     flexDirection: 'row',\r\n  //     justifyContent: 'flex-start',\r\n  //     margin: '.5em 0',\r\n  //     '& img': {\r\n  //       width: '50px !important',\r\n  //       height: '50px !important'\r\n  //     }\r\n  //   },\r\n  //   '& .score': {\r\n  //     alignSelf: 'center'\r\n  //   }\r\n  // },\r\n  single_teams_finale: {\r\n    background: 'linear-gradient(0deg, #faffd6 0%, rgb(255, 255, 255) 65%)',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    '& .player': {\r\n      margin: '0 2em',\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      justifyContent: 'center',\r\n      alignItems: 'center'\r\n    },\r\n    '& .root': {\r\n      display: 'flex',\r\n      justifyContent: 'space-around',\r\n      alignItems: 'center'\r\n    },\r\n    '& .score': {\r\n\r\n    },\r\n    // [theme.breakpoints.down('xs')]: {\r\n    //   // justifyContent: 'flex-start',\r\n    //   '& .root': {\r\n    //     flexDirection: 'column',\r\n    //     alignItems: 'flex-start'\r\n    //   },\r\n    //   '& *': {\r\n    //     fontSize: '1em'\r\n    //   },\r\n    //   '& .player': {\r\n    //     flexDirection: 'row',\r\n    //     justifyContent: 'flex-start',\r\n    //     margin: '.5em 0',\r\n    //     '& img': {\r\n    //       width: '50px !important',\r\n    //       height: '50px !important'\r\n    //     }\r\n    //   },\r\n    //   '& .score': {\r\n    //     margin: '0 0 0 50px'\r\n    //   }\r\n    // }\r\n  },\r\n  finale_widget: {\r\n    background: 'linear-gradient(0deg, rgb(239, 239, 239) 0%, rgb(255, 255, 255) 100%)',\r\n    '& .table-root': {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      width: '100%'\r\n    },\r\n    '& .row-root': {\r\n      marginBottom: '1em',\r\n      display: 'flex',\r\n      width: '67%',\r\n      marginBottom: '1em',\r\n      padding: '.5em .8em',\r\n      background: 'linear-gradient(0deg, rgb(239, 239, 239) 0%, rgb(253, 253, 253) 100%)',\r\n      '&.winner': {\r\n        background: 'linear-gradient(0deg, #faffd6 0%, rgb(255, 255, 255) 65%)'\r\n        // background: 'linear-gradient(0deg, #b2cc81 0%, rgb(253, 253, 253) 50%)'\r\n      }\r\n    },\r\n    [theme.breakpoints.down('xs')]: {\r\n      background: 'initial',\r\n      '& .table-root': {\r\n        display: 'initial'\r\n      },\r\n      '& .row-root': {\r\n        width: 'initial',\r\n        marginBottom: '.5em'\r\n      }\r\n    }\r\n  }\r\n});","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport SchemeView from '../tournaments/SchemeView';\r\n\r\nclass SchemesRoot extends React.Component {\r\n  render() {\r\n    return (\r\n      <Switch>\r\n        <Route\r\n          path=\"/schemes/:id\"\r\n          render={(props) => <SchemeView {...props} />}\r\n        />\r\n      </Switch>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SchemesRoot;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport AsyncSelect from '../../components/select/AsyncSelect';\r\nimport QueryService from '../../services/query.service';\r\n\r\nclass EditGroupModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      model: {\r\n        teams: []\r\n      },\r\n      errors: []\r\n    };\r\n\r\n    this.setTeam = (index) => (value) => {\r\n      const model = this.state.model;\r\n      model.teams[index].team = value;\r\n      model.teams[index].teamId = (value || { id: null }).id;\r\n      this.setState({ model });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ model: this.props.model });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.model != this.props.model)\r\n      this.setState({ model: this.props.model });\r\n  }\r\n\r\n  addTeam() {\r\n    const model = this.state.model;\r\n    model.teams.push({\r\n      groupId: model.id,\r\n      team: null,\r\n      teamId: null,\r\n      order: model.teams.length + 1\r\n    });\r\n    this.setState({ model });\r\n  }\r\n\r\n  removeTeam(index) {\r\n    const model = this.state.model;\r\n    model.teams.splice(index, 1);\r\n    this.setState({ model });\r\n  }\r\n\r\n  save() {\r\n    const model = this.state.model;\r\n    if (model.id)\r\n      return QueryService\r\n        .post(`/schemes/${model.schemeId}/groups/${model.id}`, model)\r\n        .then(e => this.props.onChange())\r\n        .catch(errors => this.setState({ errors }));\r\n    else\r\n      return QueryService\r\n        .post(`/schemes/${model.schemeId}/groups`, model)\r\n        .then(e => this.props.onChange())\r\n        .catch(errors => this.setState({ errors }));\r\n  }\r\n\r\n  render() {\r\n    const { model, errors } = this.state;\r\n    const { onClose, classes, fullScreen, scheme } = this.props;\r\n\r\n    return (\r\n      <Dialog\r\n        open={true}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        classes={{ paper: classes.root }}\r\n      >\r\n        <DialogTitle>\r\n          <Typography component=\"span\" variant=\"headline\">Създаване/промяна на група {getGroupHeader(model.group)}</Typography>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Typography variant=\"caption\">Отбори</Typography>\r\n          {model.teams.map((groupTeam, index) => {\r\n            return (\r\n              <div key={groupTeam.id} style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <Typography style={{ marginRight: '1rem' }}>{groupTeam.order}</Typography>\r\n                <AsyncSelect\r\n                  value={groupTeam.team}\r\n                  query=\"teams\"\r\n                  disableClear\r\n                  filter={{\r\n                    singleTeams: scheme.singleTeams,\r\n                    schemeId: scheme.id\r\n                  }}\r\n                  noOptionsMessage={() => 'Няма намерени играчи/отбори'}\r\n                  formatOptionLabel={(option) => {\r\n                    return (\r\n                      <React.Fragment>\r\n                        <Typography component=\"span\">{option.user1.name}</Typography>\r\n                        {!scheme.singleTeams && <Typography component=\"span\">{option.user2.name}</Typography>}\r\n                      </React.Fragment>\r\n                    );\r\n                  }}\r\n                  onChange={this.setTeam(index)}\r\n                />\r\n                <IconButton color=\"secondary\" onClick={() => this.removeTeam(index)}>\r\n                  <DeleteForeverIcon />\r\n                </IconButton>\r\n              </div>\r\n            );\r\n          })}\r\n          <Button style={{ marginTop: '1rem' }} variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.addTeam()}>Добави</Button>\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.save()}>\r\n            Запис\r\n          </Button>\r\n          <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nfunction getGroupHeader(groupOrder) {\r\n  if (groupOrder == null || groupOrder == undefined)\r\n    return null;\r\n  return String.fromCharCode(\"А\".charCodeAt(0) + groupOrder);\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(EditGroupModal)\r\n);","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport AsyncSelect from '../../components/select/AsyncSelect';\r\n\r\nclass MatchFormModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      model: {\r\n        sets: []\r\n      },\r\n      errors: []\r\n    }\r\n\r\n    this.handleChange = (prop) => (event) => {\r\n      let model = this.state.model;\r\n      model[prop] = event.target.value;\r\n      this.setState({ model });\r\n    }\r\n\r\n    this.handleCustomChange = (prop) => (value) => {\r\n      const model = this.state.model;\r\n\r\n      if (prop === 'team1') {\r\n        model.team1 = value;\r\n        model.team1Id = (value || { id: null }).id\r\n      }\r\n\r\n      if (prop === 'team2') {\r\n        model.team2 = value;\r\n        model.team2Id = (value || { id: null }).id\r\n      }\r\n\r\n      if (prop === 'withdraw') {\r\n        if (value == model.team1)\r\n          model.withdraw = 1;\r\n        else if (value == model.team2)\r\n          model.withdraw = 2;\r\n        else model.withdraw = null;\r\n      }\r\n\r\n      this.setState({ model });\r\n    }\r\n\r\n    this.handleSetsChange = (index, prop) => (event) => {\r\n      const model = this.state.model;\r\n      model.sets[index][prop] = event.target.value;\r\n      this.setState({ model });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ model: this.formatSets(this.props.model) });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.model != this.props.model)\r\n      this.setState({ model: this.formatSets(this.props.model) });\r\n  }\r\n\r\n  formatSets(match) {\r\n    match.sets = [1, 2, 3, 4, 5].map(order => {\r\n      let existingSet = match.sets.find(set => set.order == order);\r\n      if (existingSet && existingSet.tiebreaker) {\r\n        existingSet.team1 = existingSet.team1 < existingSet.team2 ?\r\n          `${existingSet.team1}(${existingSet.tiebreaker})` : existingSet.team1;\r\n        existingSet.team2 = existingSet.team2 < existingSet.team1 ?\r\n          `${existingSet.team2}(${existingSet.tiebreaker})` : existingSet.team2;\r\n      }\r\n      return existingSet || { order, matchId: match.id || null };\r\n    });\r\n    return match;\r\n  }\r\n\r\n  save() {\r\n    const model = this.state.model;\r\n    if (model.id)\r\n      return QueryService\r\n        .post(`/schemes/${model.schemeId}/matches/${model.id}`, model)\r\n        .then(e => this.props.onChange(e));\r\n    else\r\n      return QueryService\r\n        .post(`/schemes/${model.schemeId}/matches`, model)\r\n        .then(e => this.props.onChange(e));\r\n  }\r\n\r\n  render() {\r\n    const { model, errors } = this.state;\r\n    const { onClose, classes, fullScreen, singleTeams } = this.props;\r\n\r\n    const enableTeamChange = model.round == 1 || model.groupId;\r\n    const label = (singleTeams ? 'Играч ' : 'Отбор ');\r\n\r\n    return (\r\n      <Dialog\r\n        open={true}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        classes={{ paper: classes.root }}\r\n      >\r\n        <DialogTitle>\r\n          <Typography component=\"span\" variant=\"headline\">\r\n            Въвеждане/промяна на мач {model.match} рунд {model.round}\r\n          </Typography>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <TextField\r\n            style={{ marginBottom: '1em' }}\r\n            label=\"Допълнителна информация (до 64 символа)\"\r\n            value={model.info}\r\n            multiline={true}\r\n            fullWidth={true}\r\n            onChange={this.handleChange('info')}\r\n          />\r\n\r\n          {enableTeamChange && <React.Fragment>\r\n            <AsyncSelect\r\n              label={label + 1}\r\n              value={model.team1}\r\n              query=\"teams\"\r\n              filter={{\r\n                singleTeams: singleTeams,\r\n                schemeId: model.schemeId,\r\n                groupId: model.groupId\r\n              }}\r\n              noOptionsMessage={() => 'Няма намерени играчи/отбори'}\r\n              formatOptionLabel={(option) => <React.Fragment>\r\n                <Typography component=\"span\">\r\n                  {option.user1.name} ({option.user1.email})\r\n                </Typography>\r\n                {option.user2 && <Typography component=\"span\">\r\n                  {option.user2.name} ({option.user2.email})\r\n                </Typography>}\r\n              </React.Fragment>}\r\n              onChange={this.handleCustomChange('team1')}\r\n            />\r\n\r\n            <AsyncSelect\r\n              label={label + 2}\r\n              value={model.team2}\r\n              query=\"teams\"\r\n              filter={{\r\n                singleTeams: singleTeams,\r\n                schemeId: model.schemeId,\r\n                groupId: model.groupId\r\n              }}\r\n              noOptionsMessage={() => 'Няма намерени отбори'}\r\n              formatOptionLabel={(option) => <React.Fragment>\r\n                <Typography component=\"span\">\r\n                  {option.user1.name} ({option.user1.email})\r\n                </Typography>\r\n                {option.user2 && <Typography component=\"span\">\r\n                  {option.user2.name} ({option.user2.email})\r\n                </Typography>}\r\n              </React.Fragment>}\r\n              onChange={this.handleCustomChange('team2')}\r\n            />\r\n          </React.Fragment>}\r\n\r\n          {!enableTeamChange &&\r\n            <React.Fragment><Typography>\r\n              <Typography variant=\"caption\">{label + 1}</Typography>\r\n              {model.team1 ? model.team1.user1.name : 'BYE'}\r\n              {!singleTeams && model.team1 && <Typography>{model.team1.user2.name}</Typography>}\r\n            </Typography>\r\n\r\n              <Typography>\r\n                <Typography variant=\"caption\">{label + 2}</Typography>\r\n                {model.team2 ? model.team2.user1.name : 'BYE'}\r\n                {!singleTeams && model.team2 && <Typography>{model.team2.user2.name}</Typography>}\r\n              </Typography>\r\n            </React.Fragment>}\r\n\r\n          {model.team1 && model.team2 &&\r\n            <FormControl style={{ width: '300px' }}>\r\n              <InputLabel shrink>Отказал се</InputLabel>\r\n              <Select\r\n                onChange={this.handleChange('withdraw')}\r\n                value={model.withdraw}\r\n              >\r\n                <MenuItem value={null}>Няма</MenuItem>\r\n                <MenuItem value={1}>\r\n                  <Typography>{model.team1.user1.name} </Typography>\r\n                  {model.team1.user2 && <Typography>{model.team1.user2.name} </Typography>}\r\n                </MenuItem>\r\n                <MenuItem value={2}>\r\n                  <Typography>{model.team2.user1.name} </Typography>\r\n                  {model.team2.user2 && <Typography>{model.team2.user2.name} </Typography>}\r\n                </MenuItem>\r\n              </Select>\r\n            </FormControl>}\r\n\r\n          <Table>\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell padding=\"dense\">Сет №</TableCell>\r\n                <TableCell padding=\"none\">{label + 1}</TableCell>\r\n                <TableCell padding=\"none\">{label + 2}</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {model.sets.map((set, index) => {\r\n                return (\r\n                  <TableRow key={set.order}>\r\n                    <TableCell padding=\"dense\">{set.order}</TableCell>\r\n                    <TableCell padding=\"none\">\r\n                      <input value={set.team1} type=\"text\" style={{ maxWidth: '40px' }} onChange={this.handleSetsChange(index, 'team1')} />\r\n                    </TableCell>\r\n                    <TableCell padding=\"none\">\r\n                      <input value={set.team2} type=\"text\" style={{ maxWidth: '40px' }} onChange={this.handleSetsChange(index, 'team2')} />\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.save()}>\r\n            Запис\r\n          </Button>\r\n          <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog >\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(MatchFormModal)\r\n);","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Button from '@material-ui/core/Button';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport './styles.scss';\r\nimport { ApplicationMode } from '../../enums';\r\nimport UserService from '../../services/user.service';\r\nimport QueryService from '../../services/query.service';\r\nimport ConfirmationDialog from '../../components/ConfirmationDialog';\r\nimport EditGroupModal from './EditGroupModal';\r\nimport EditMatchModal from '../components/MatchFormModal';\r\nimport { BracketStatus } from '../../enums';\r\n\r\nclass GroupsBracket extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      groups: [],\r\n      scheme: {\r\n        edition: {}\r\n      },\r\n      groupModel: null,\r\n      matchModel: null,\r\n      enableActions: false\r\n    }\r\n\r\n    this.refreshHandle = null;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n    this.refreshHandle = setInterval(() => this.getData(), 15 * 1000);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.refreshHandle);\r\n  }\r\n\r\n  getData() {\r\n    return QueryService.get(`/schemes/${this.props.match.params.id}/matches/groups`)\r\n      .then(({ groups, scheme }) => this.setState({\r\n        groups,\r\n        scheme,\r\n        enableActions: scheme.bracketStatus == BracketStatus.GROUPS_DRAWN\r\n      }));\r\n  }\r\n\r\n  addGroup() {\r\n    this.setState({\r\n      groupModel: {\r\n        group: this.state.groups.length,\r\n        teams: [],\r\n        matches: [],\r\n        schemeId: this.state.scheme.id\r\n      }\r\n    });\r\n  }\r\n\r\n  addMatch(group) {\r\n    this.setState({\r\n      matchModel: {\r\n        groupId: group.id,\r\n        schemeId: this.state.scheme.id,\r\n        sets: []\r\n      }\r\n    })\r\n  }\r\n\r\n  deleteGroup(group) {\r\n    return QueryService\r\n      .delete(`/schemes/${group.schemeId}/groups/${group.id}`)\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  deleteMatch(match) {\r\n    return QueryService\r\n      .delete(`/schemes/${match.schemeId}/matches/${match.id}`)\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  render() {\r\n    const { scheme, groups, groupModel, matchModel, enableActions } = this.state;\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <UserService.WithApplicationMode>\r\n        {mode => {\r\n          let hasPermission = mode == ApplicationMode.ADMIN || mode == ApplicationMode.TOURNAMENT;\r\n\r\n          return (\r\n            <Paper elevation={4} style={{ padding: '2rem 0 3rem 0', backgroundColor: 'rgba(255, 255, 255, .9)' }}>\r\n              {groupModel\r\n                && <EditGroupModal\r\n                  model={groupModel}\r\n                  scheme={scheme}\r\n                  onChange={() => {\r\n                    this.getData();\r\n                    this.setState({ groupModel: null })\r\n                  }}\r\n                  onClose={() => this.setState({ groupModel: null })}\r\n                />}\r\n\r\n              {matchModel\r\n                && <EditMatchModal\r\n                  model={matchModel}\r\n                  onChange={() => {\r\n                    this.getData();\r\n                    this.setState({ matchModel: null })\r\n                  }}\r\n                  singleTeams={scheme.singleTeams}\r\n                  onClose={() => this.setState({ matchModel: null })}\r\n                />}\r\n\r\n              <Typography align=\"center\" variant=\"headline\">\r\n                Групова фаза\r\n              <Link to={`/schemes/${scheme.id}`}>\r\n                  <Typography variant=\"display1\">{scheme.name}</Typography>\r\n                </Link>\r\n              </Typography>\r\n\r\n              {hasPermission && enableActions\r\n                && <div style={{ margin: '1rem', display: 'flex', justifyContent: 'center' }}>\r\n                  <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.addGroup()}>Добави група</Button>\r\n                </div>}\r\n\r\n              <div className={classes.groupsContainer}>\r\n                {groups.map(group => {\r\n                  return (\r\n                    <Group\r\n                      key={group.id}\r\n                      group={group}\r\n                      hasPermission={hasPermission}\r\n                      onEdit={() => this.setState({ groupModel: group })}\r\n                      onDelete={() => this.deleteGroup(group)}\r\n                      onAddMatch={() => this.addMatch(group)}\r\n                      onEditMatch={(match) => this.setState({ matchModel: match })}\r\n                      onDeleteMatch={(match) => this.deleteMatch(match)}\r\n                      enableActions={enableActions}\r\n                    />\r\n                  );\r\n                })}\r\n              </div>\r\n            </Paper>\r\n          );\r\n        }}\r\n      </UserService.WithApplicationMode>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nclass Group extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      tabIndex: 0\r\n    };\r\n  }\r\n\r\n  getGroupHeader(groupOrder) {\r\n    return String.fromCharCode(\"А\".charCodeAt(0) + groupOrder);\r\n  }\r\n\r\n  render() {\r\n    const { hasPermission, group, onEdit, onDelete, onAddMatch, onEditMatch, onDeleteMatch, enableActions } = this.props;\r\n    const { tabIndex } = this.state;\r\n\r\n    return (\r\n      <Paper elevation={5} className=\"group-box\">\r\n        <div className=\"group-box-header\">\r\n          <Typography variant=\"headline\" style={{ padding: '0 1.5rem' }}>\r\n            {this.getGroupHeader(group.group)}\r\n          </Typography>\r\n          <Tabs\r\n            value={tabIndex}\r\n            onChange={(e, value) => this.setState({ tabIndex: value })}\r\n            indicatorColor=\"primary\"\r\n            textColor=\"primary\"\r\n          >\r\n            <Tab label=\"Класация\" />\r\n            <Tab label=\"Мачове\" />\r\n          </Tabs>\r\n        </div>\r\n\r\n        <div style={{ padding: '1.5rem', flexGrow: 1, transition: 'flex-grow .3s ease-out' }}>\r\n          {tabIndex == 0 && <GroupRankingView groupTeams={group.teams} />}\r\n          {tabIndex == 1 && <GroupMatchesView hasPermission={hasPermission} matches={group.matches} onEditMatch={onEditMatch} onDeleteMatch={onDeleteMatch} />}\r\n        </div>\r\n\r\n        {hasPermission && enableActions\r\n          && <div style={{ display: 'flex', padding: '1.5rem' }}>\r\n            <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={onEdit}>Промяна</Button>\r\n            <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={onAddMatch} style={{ margin: '0 .3rem' }}>Добавяне на мач</Button>\r\n            <ConfirmationDialog\r\n              title=\"Изтриване на група\"\r\n              body={<Typography>Сигурни ли сте че искате да група \"{this.getGroupHeader(group.group)}\"?</Typography>}\r\n              onAccept={onDelete}\r\n            >\r\n              <Button variant=\"contained\" color=\"secondary\" size=\"small\">Изтриване</Button>\r\n            </ConfirmationDialog>\r\n          </div>}\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nclass GroupRankingView extends React.Component {\r\n  render() {\r\n    const { groupTeams } = this.props;\r\n    return (\r\n      <div>\r\n        <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n          <Typography style={{ flexBasis: '4rem', fontStyle: 'italic' }}>W - L</Typography>\r\n        </div>\r\n        {groupTeams.map(groupTeam => {\r\n          return (\r\n            <GroupTeamInfo key={groupTeam.id} team={groupTeam.team} rank={groupTeam.order} stats={groupTeam.stats} />\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass GroupMatchesView extends React.Component {\r\n  render() {\r\n    const { hasPermission, matches, onEditMatch, onDeleteMatch } = this.props;\r\n\r\n    if (!matches || !matches.length)\r\n      return (<Typography variant=\"caption\" align=\"center\">Няма изиграни мачове</Typography>);\r\n\r\n    return (\r\n      <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n        {matches.map(match => {\r\n          return (\r\n            <div key={match.id} style={{ padding: '0.3rem 0', display: 'flex', width: '100%', justifyContent: 'space-between', borderBottom: '1px solid lightgrey' }}>\r\n              {match.team1 && <div style={{ margin: '0 .2rem' }}>\r\n                <Typography>\r\n                  {match.team1.user1.name}\r\n                </Typography>\r\n                {match.team1.user2\r\n                  && <Typography>\r\n                    {match.team1.user2.name}\r\n                  </Typography>}\r\n              </div>}\r\n\r\n              <Typography variant=\"caption\" align=\"center\">\r\n                {match.sets.map(set => {\r\n                  return (\r\n                    <span key={set.id} style={{ marginRight: '.3rem' }}>\r\n                      {set.team1}\r\n                      {set.team2}\r\n                      {set.tiebreaker && <sup>({set.tiebreaker})</sup>}\r\n                    </span>\r\n                  );\r\n                })}\r\n              </Typography>\r\n              {match.team2 && <div style={{ margin: '0 .2rem' }}>\r\n                <Typography>\r\n                  {match.team2.user1.name}\r\n                </Typography>\r\n                {match.team2.user2\r\n                  && <Typography>\r\n                    {match.team2.user2.name}\r\n                  </Typography>}\r\n              </div>}\r\n\r\n              {hasPermission && <div>\r\n                <EditIcon color=\"primary\" style={{ cursor: 'pointer' }} onClick={() => onEditMatch(match)}></EditIcon>\r\n                <ConfirmationDialog\r\n                  title=\"Изтриване на мач\"\r\n                  body={<Typography>Сигурни ли сте че искате да изтриете мача?</Typography>}\r\n                  onAccept={() => onDeleteMatch(match)}\r\n                >\r\n                  <DeleteForeverIcon color=\"secondary\" style={{ cursor: 'pointer' }}></DeleteForeverIcon>\r\n                </ConfirmationDialog>\r\n              </div>}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass GroupTeamInfo extends React.Component {\r\n  render() {\r\n    const { team, rank, stats } = this.props;\r\n    if (!team)\r\n      return null;\r\n\r\n    return (\r\n      <div className=\"group-box-team-info\">\r\n        <Typography style={{ marginRight: '1rem' }}>{rank}.</Typography>\r\n        <div style={{ flexGrow: 1 }}>\r\n          <Typography>{team.user1.name}</Typography>\r\n          {team.user2 && <Typography>{team.user2.name}</Typography>}\r\n        </div>\r\n        <Typography style={{ flexBasis: '4rem' }}>\r\n          <span style={{ marginRight: '.3rem', fontStyle: 'italic' }}>{stats.wonMatches}</span>\r\n          -\r\n          <span style={{ marginLeft: '.3rem', fontStyle: 'italic' }}>{stats.totalMatches - stats.wonMatches}</span>\r\n        </Typography>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  groupsContainer: {\r\n    display: 'flex',\r\n    justifyContent: 'space-around',\r\n    marginTop: '2rem',\r\n    flexWrap: 'wrap',\r\n    [theme.breakpoints.down('xs')]: {\r\n      display: 'initial'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(GroupsBracket);","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Zoom from '@material-ui/core/Zoom';\r\nimport './styles.scss';\r\n\r\nimport { ApplicationMode } from '../../enums';\r\nimport QueryService from '../../services/query.service';\r\nimport UserService from '../../services/user.service';\r\nimport MatchFormModal from '../components/MatchFormModal';\r\n\r\nclass EliminationBracket extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      matchModel: null,\r\n      bracket: [],\r\n      scheme: null\r\n    }\r\n    this.refreshHandle = null;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n    this.refreshHandle = setInterval(() => this.getData(), 15 * 1000);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.refreshHandle);\r\n  }\r\n\r\n  getData() {\r\n    return QueryService.get(`/schemes/${this.props.match.params.id}/matches/elimination`)\r\n      .then(e => this.setState({\r\n        bracket: this.constructBracket(e.matches, e.scheme),\r\n        scheme: e.scheme\r\n      }));\r\n  }\r\n\r\n  getRoundName(roundSize) {\r\n    let label = `R${roundSize}`;\r\n\r\n    if (roundSize == 8)\r\n      label = 'QF';\r\n    if (roundSize == 4)\r\n      label = 'SF';\r\n    if (roundSize == 2)\r\n      label = 'F';\r\n\r\n    return <Typography\r\n      component=\"span\"\r\n      variant=\"headline\"\r\n      color=\"textSecondary\"\r\n      align=\"center\"\r\n      style={{ borderBottom: '1px solid grey' }}\r\n    >\r\n      {label}\r\n    </Typography>\r\n  }\r\n\r\n  constructMatch(match, round, scheme) {\r\n    return {\r\n      schemeId: scheme.id,\r\n      match,\r\n      round,\r\n      team1: null,\r\n      team2: null,\r\n      seed: null,\r\n      sets: [],\r\n      withdraw: null\r\n    };\r\n  }\r\n\r\n  constructBracket(matches, scheme) {\r\n    let size = matches.filter(match => match.round == 1).length;\r\n    let rounds = Math.log2(size);\r\n    let bracket = [];\r\n\r\n    for (let round = 0; round < rounds + 1; round++) {\r\n      bracket[round] = [];\r\n      for (let match = 0; match < (size / (Math.pow(2, round))); match++) {\r\n        let currentMatch = matches.find(e => e.match == match + 1 && e.round == round + 1);\r\n        bracket[round].push(currentMatch || this.constructMatch(match + 1, round + 1, scheme));\r\n      }\r\n    }\r\n    return bracket;\r\n  }\r\n\r\n  render() {\r\n    const { matchModel, bracket, scheme } = this.state;\r\n    return (\r\n      <UserService.WithApplicationMode>\r\n        {mode => {\r\n          let hasPermission = mode == ApplicationMode.ADMIN || mode == ApplicationMode.TOURNAMENT;\r\n\r\n          return (\r\n            <Paper elevation={4} style={{ backgroundColor: 'rgba(255, 255, 255, .9)' }}>\r\n              {scheme && <Typography align=\"center\" variant=\"headline\" style={{ padding: '2rem 0' }}>\r\n                Елиминационна фаза\r\n              <Link to={`/schemes/${scheme.id}`}>\r\n                  <Typography variant=\"display1\">{scheme.name}</Typography>\r\n                </Link>\r\n              </Typography>}\r\n\r\n              {matchModel\r\n                && <MatchFormModal\r\n                  model={matchModel}\r\n                  onChange={() => {\r\n                    this.setState({ matchModel: null });\r\n                    this.getData();\r\n                  }}\r\n                  singleTeams={scheme.singleTeams}\r\n                  onClose={() => this.setState({ matchModel: null })}\r\n                />}\r\n\r\n              <div className=\"bracket\">\r\n                {bracket.map((round, index) => {\r\n                  return (\r\n                    <div key={index} className=\"round\">\r\n                      <h3 className=\"round-title\" style={{ padding: '.5rem' }}>\r\n                        {this.getRoundName(round.length * 2)}\r\n                      </h3>\r\n                      <ul className=\"list\">\r\n                        {round.map((match, i) => {\r\n                          return (\r\n                            <li className=\"item\" key={i}>\r\n                              <div className=\"match\">\r\n                                <Match\r\n                                  match={match}\r\n                                  onEvent={() => this.setState({ matchModel: match })}\r\n                                  hasPermission={hasPermission}\r\n                                />\r\n                              </div>\r\n                            </li>\r\n                          )\r\n                        })}\r\n                      </ul>\r\n                    </div>\r\n                  )\r\n                })}\r\n              </div>\r\n            </Paper>\r\n          );\r\n        }}\r\n      </UserService.WithApplicationMode>\r\n    );\r\n  }\r\n}\r\n\r\nclass Match extends React.Component {\r\n  render() {\r\n    const { match, hasPermission } = this.props;\r\n\r\n    if (hasPermission)\r\n      return (\r\n        <Tooltip\r\n          title=\"Въвеждане/промяна на резултат\"\r\n          placement=\"top\"\r\n          TransitionComponent={Zoom}\r\n          enterDelay={0}\r\n          onClick={this.props.onEvent}\r\n        >\r\n          <Paper elevation={4} className=\"match-box\" style={{ cursor: 'pointer' }}>\r\n            <TeamInfo team={match.team1} match={match} round={match.round} pos={1} />\r\n            <TeamInfo team={match.team2} match={match} round={match.round} pos={2} />\r\n            {match.info && <Typography style={{ position: 'absolute', top: '-40%', left: '0%' }}>{match.info}</Typography>}\r\n          </Paper>\r\n        </Tooltip>\r\n      );\r\n\r\n    else\r\n      return (\r\n        <Paper elevation={4} className=\"match-box\">\r\n          <TeamInfo team={match.team1} match={match} round={match.round} pos={1} />\r\n          <TeamInfo team={match.team2} match={match} round={match.round} pos={2} />\r\n          {match.info && <Typography style={{ position: 'absolute', top: '-40%', left: '0%' }}>{match.info}</Typography>}\r\n        </Paper>\r\n      );\r\n  }\r\n}\r\n\r\nclass TeamInfo extends React.Component {\r\n  composeScore(sets, pos) {\r\n    if (!sets)\r\n      return null;\r\n    let enemyPos = (pos == 1 ? 2 : 1);\r\n    let result = sets.map((set, i) => {\r\n      return (\r\n        <span key={i} style={{ width: set.tiebreaker ? '22px' : '10px', display: 'flex' }}>\r\n          {set['team' + pos]}\r\n          {set['team' + enemyPos] > set['team' + pos] && set.tiebreaker\r\n            && <div style={{ fontSize: '.5rem', marginTop: '-3px' }}>({set.tiebreaker})</div>}\r\n        </span>\r\n      );\r\n    });\r\n    return result;\r\n  }\r\n\r\n  render() {\r\n    const { team, match, round, pos } = this.props;\r\n\r\n    if (team)\r\n      return (\r\n        <div className=\"match-box-team\">\r\n          <div>\r\n            <Typography style={{ fontSize: '.8em' }}>{team.user1.name}</Typography>\r\n            {team.user2 &&\r\n              <Typography style={{ fontSize: '.8em' }}>{team.user2.name}</Typography>}\r\n          </div>\r\n          <Typography style={{ display: 'flex' }} variant=\"caption\">\r\n            {this.composeScore(match.sets, pos)}\r\n          </Typography>\r\n        </div>\r\n      );\r\n\r\n    else\r\n      return (\r\n        <div className=\"match-box-team\">\r\n          <Typography style={{ fontSize: '.8em' }} variant=\"caption\">\r\n            {round == 1 ? 'bye' : `winner of match ${match.match * 2 + pos - 2} round ${round - 1}`}\r\n          </Typography>\r\n        </div>\r\n      );\r\n  }\r\n}\r\n\r\nexport default EliminationBracket;","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport PhotoIcon from '@material-ui/icons/Photo';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\n\r\nimport FileUpload from './FileUpload';\r\nimport QueryService from '../services/query.service';\r\n\r\nclass ImageField extends React.Component {\r\n  render() {\r\n    const { value, onChange, style, imageStyle } = this.props;\r\n    return (\r\n      <span style={style}>\r\n        <input ref={ref => this.inputRef = ref} onChange={onChange} type=\"file\" style={{ display: 'none' }} />\r\n        {value\r\n          && <Typography>{value.name}</Typography>}\r\n        {value\r\n          && <img\r\n            src={QueryService.getFileUrl(value.id)}\r\n            style={imageStyle}\r\n          />}\r\n        <div>\r\n          <PhotoIcon\r\n            onClick={() => this.inputRef.click()}\r\n            style={{ fontSize: '2rem', cursor: 'pointer' }}\r\n            color=\"primary\"\r\n          />\r\n          {value\r\n            && <DeleteForeverIcon\r\n              style={{ fontSize: '2rem', cursor: 'pointer' }}\r\n              color=\"secondary\"\r\n              onClick={() => onChange(null)}\r\n            />}\r\n        </div>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageField;\r\n","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Button from '@material-ui/core/Button';\r\nimport PhotoIcon from '@material-ui/icons/Photo';\r\n\r\nclass FileUpload extends React.Component {\r\n  render() {\r\n    const { value, onChange, style } = this.props;\r\n\r\n    return (\r\n      <span onClick={e => this.inputRef.click()} style={style}>\r\n        <input ref={ref => this.inputRef = ref} onChange={onChange} type=\"file\" style={{ display: 'none' }} />\r\n        {this.props.children}\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FileUpload","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport ImageField from '../components/ImageField';\r\nimport EnumSelectToggle from '../components/EnumSelectToggle';\r\nimport QueryService from '../services/query.service';\r\n\r\nclass TournamentFormModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      model: {},\r\n      errors: []\r\n    }\r\n\r\n    this.save = this.save.bind(this);\r\n\r\n    this.handleChange = (prop) => (e) => {\r\n      const model = this.state.model;\r\n      model[prop] = e.target.value;\r\n      this.setState({ model });\r\n    }\r\n\r\n    this.handleThumbnail = (e) => {\r\n      const model = this.state.model;\r\n\r\n      if (!e || !e.target.files || !e.target.files[0]) {\r\n        model.thumbnail = null;\r\n        model.thumbnailId = null;\r\n        this.setState({ model });\r\n        return;\r\n      }\r\n\r\n      return QueryService\r\n        .uploadFile(e.target.files[0])\r\n        .then(file => {\r\n          model.thumbnail = file;\r\n          model.thumbnailId = file.id;\r\n          this.setState({ model });\r\n        });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ model: this.props.model });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.model != this.props.model)\r\n      this.setState({ model: this.props.model });\r\n  }\r\n\r\n  save() {\r\n    const model = this.state.model;\r\n    return QueryService\r\n      .post(`/tournaments/${model.id ? model.id : ''}`, model)\r\n      .then(e => this.props.onChange(e));\r\n  }\r\n\r\n  render() {\r\n    const { model, errors } = this.state;\r\n    const { onClose, classes, fullScreen } = this.props;\r\n\r\n    return (\r\n      <Dialog\r\n        open={true}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        classes={{ paper: classes.root }}\r\n        onClick={e => e.stopPropagation()}\r\n      >\r\n        <DialogTitle>\r\n          <Typography component=\"span\" variant=\"headline\">Създаване/промяна на лига</Typography>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <EnumSelectToggle\r\n            value={model.status}\r\n            enumName=\"Status\"\r\n            onChange={this.handleChange('status')}\r\n          />\r\n\r\n          <Typography variant=\"caption\" style={{ marginTop: '.5rem' }}>Лого</Typography>\r\n          <ImageField\r\n            value={model.thumbnail}\r\n            onChange={this.handleThumbnail}\r\n            style={{ marginTop: '.5rem' }}\r\n            imageStyle={{ maxWidth: '50px' }}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Име на лигата\"\r\n            value={model.name}\r\n            fullWidth={true}\r\n            onChange={this.handleChange('name')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Допълнителна информация\"\r\n            value={model.info}\r\n            multiline={true}\r\n            fullWidth={true}\r\n            onChange={this.handleChange('info')}\r\n          />\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.save()}>\r\n            Запис\r\n          </Button>\r\n          <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(TournamentFormModal)\r\n);","import React from 'react';\r\nimport moment from 'moment-timezone';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport DatePicker from 'material-ui-pickers/DatePicker';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../services/query.service';\r\nimport AsyncSelect from '../components/select/AsyncSelect';\r\nimport EnumSelectToggle from '../components/EnumSelectToggle';\r\n\r\nclass EditionFormModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      model: {\r\n        startDate: null,\r\n        endDate: null\r\n      },\r\n      errors: []\r\n    }\r\n\r\n    this.save = this.save.bind(this);\r\n\r\n    this.handleChange = (prop) => (e) => {\r\n      const model = this.state.model;\r\n      model[prop] = e.target.value;\r\n      this.setState({ model });\r\n    }\r\n\r\n    this.handleCustomChange = (prop) => (value) => {\r\n      const model = this.state.model;\r\n      model[prop] = value;\r\n\r\n      if (prop == 'tournament') {\r\n        if (value)\r\n          model.tournamentId = value.id;\r\n        else\r\n          model.tournamentId = null;\r\n      }\r\n\r\n      this.setState({ model });\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ model: this.props.model });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.model != this.props.model)\r\n      this.setState({ model: this.props.model });\r\n  }\r\n\r\n  save() {\r\n    const model = JSON.parse(JSON.stringify(this.state.model));\r\n    model.tournament = null;\r\n    model.schemes = null;\r\n\r\n    return QueryService\r\n      .post(`/editions/${model.id ? model.id : ''}`, model)\r\n      .then(e => this.props.onChange(e));\r\n  }\r\n\r\n  render() {\r\n    const { model, errors } = this.state;\r\n    const { onClose, classes, fullScreen } = this.props;\r\n\r\n    return (\r\n      <Dialog\r\n        open={true}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        classes={{ paper: classes.root }}\r\n      >\r\n        <DialogTitle>\r\n          <Typography component=\"span\" variant=\"headline\">Форма за издание на турнир</Typography>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <EnumSelectToggle\r\n            value={model.status}\r\n            enumName=\"Status\"\r\n            onChange={this.handleChange('status')}\r\n          />\r\n\r\n          <AsyncSelect\r\n            label=\"Лига\"\r\n            value={model.tournament}\r\n            query=\"tournaments\"\r\n            noOptionsMessage={() => 'Няма намерени лиги'}\r\n            formatOptionLabel={(option) => <Typography component=\"span\">\r\n              {option.name}\r\n              <Typography component=\"span\" variant=\"caption\" >{option.info}</Typography>\r\n            </Typography>}\r\n            onChange={this.handleCustomChange('tournament')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Име на изданието\"\r\n            value={model.name}\r\n            fullWidth={true}\r\n            onChange={this.handleChange('name')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Допълнителна информация\"\r\n            value={model.info}\r\n            multiline={true}\r\n            fullWidth={true}\r\n            onChange={this.handleChange('info')}\r\n          />\r\n\r\n          <DatePicker\r\n            autoOk\r\n            label=\"Дата\"\r\n            labelFunc={(date) => date ? moment(model.startDate).format('DD.MM.YYYY') : ''}\r\n            clearable\r\n            fullWidth={true}\r\n            value={model.startDate}\r\n            onChange={this.handleCustomChange('startDate')}\r\n          />\r\n\r\n          {/* <DatePicker\r\n            autoOk\r\n            label=\"Край на турнира\"\r\n            labelFunc={(date) => date ? new Date(date).toLocaleDateString() : ''}\r\n            clearable\r\n            fullWidth={true}\r\n            value={model.endDate}\r\n            onChange={this.handleCustomChange('endDate')}\r\n          /> */}\r\n\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.save()}>\r\n            Запис\r\n          </Button>\r\n          <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  },\r\n  truncateInfo: {\r\n    width: '100px',\r\n    whiteSpace: 'nowrap',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(EditionFormModal)\r\n);","import React from 'react';\r\n\r\nconst FlagIcon = (props) => <svg {...props}\r\n  x=\"0px\" y=\"0px\"\r\n  viewBox=\"0 0 491.325 491.325\" enableBackground=\"new 0 0 491.325 491.325\">\r\n  <path fill=\"currentColor\" d=\"M429.666,22.73c-108-77.849-215.982,73.553-323.981,20.898V32.427c0-13.911-11.286-25.197-25.196-25.197\r\n\tc-13.91,0-25.194,11.286-25.194,25.197V466.13c0,13.909,11.284,25.195,25.194,25.195c13.91,0,25.196-11.286,25.196-25.195V282.395\r\n\tc102.651,50.03,205.304-84.264,307.973-30.821c4.739,2.477,10.433,2.313,15.007-0.477c4.578-2.771,7.367-7.725,7.367-13.09\r\n\tc0-67.612,0-135.228,0-202.859C436.031,30.245,433.65,25.6,429.666,22.73z\"/>\r\n</svg>;\r\n\r\nexport default FlagIcon;","import React from 'react';\r\nimport moment from 'moment-timezone';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { ApplicationMode, Status, BracketStatus } from '../enums';\r\n\r\nimport PlayersIcon from '../components/icons/PlayersIcon';\r\nimport WinnerIcon from '../components/icons/WinnerIcon';\r\nimport FlagIcon from '../components/icons/FlagIcon';\r\nimport SeasonIcon from '../components/SeasonIcon';\r\n\r\nclass EditionsListTile extends React.Component {\r\n  navigate() {\r\n    const { edition, history, mode } = this.props;\r\n    let hasPermission = mode == ApplicationMode.ADMIN || mode == ApplicationMode.TOURNAMENT;\r\n\r\n    if (!hasPermission && edition.schemes && edition.schemes.length === 1)\r\n      history.push(`/schemes/${edition.schemes[0].id}`);\r\n    else\r\n      history.push(`/editions/${edition.id}`);\r\n  }\r\n\r\n  render() {\r\n    const { edition, classes, history } = this.props;\r\n\r\n    let showSchemeInfo = edition.schemes && edition.schemes.length === 1;\r\n    let ongoingSuffix = ' inactive';\r\n    if (moment(edition.startDate).isSameOrAfter(moment(), 'date'))\r\n      ongoingSuffix = ' ongoing'\r\n\r\n    if (edition.schemes && edition.schemes.length === 1 && edition.schemes[0].bracketStatus == BracketStatus.ELIMINATION_END)\r\n      ongoingSuffix = ' inactive';\r\n\r\n    return (\r\n      <Paper elevation={1} className={classes.tileRoot + ongoingSuffix} onClick={() => this.navigate()}>\r\n        <div className={classes.date_root + ongoingSuffix}>\r\n          <Typography className=\"month_part\" style={{ textTransform: 'uppercase' }}>\r\n            {moment(edition.startDate).format('MMM')}\r\n          </Typography>\r\n          <Typography className=\"date_part\">\r\n            {moment(edition.startDate).format('D')}\r\n          </Typography>\r\n        </div>\r\n        <div className={classes.name_root + ongoingSuffix}>\r\n          <Typography className=\"title\">{edition.name}</Typography>\r\n          <Typography variant=\"caption\">{edition.info}</Typography>\r\n          {showSchemeInfo && edition.schemes[0].bracketStatus != BracketStatus.ELIMINATION_END\r\n            && <Typography style={{ display: 'flex', alignItems: 'center' }}>\r\n              {moment(edition.schemes[0].date).format('hh:mm A')}\r\n              {moment().isAfter(moment(edition.schemes[0].date)) && <Typography variant=\"caption\" style={{ marginLeft: '.3em' }}>(Играе се)</Typography>}\r\n            </Typography>}\r\n          {showSchemeInfo && edition.schemes[0].final\r\n            && <div className={classes.finale}>\r\n              {getWinnerOrFirstTeam(edition.schemes[0].final)}\r\n              {getRunnerUpOrSecondTeam(edition.schemes[0].final)}\r\n            </div>}\r\n        </div>\r\n        {showSchemeInfo && <div className={classes.info_root + ongoingSuffix}>\r\n          <div>\r\n            <Typography color=\"secondary\" className={classes.icon_and_text}>\r\n              <SeasonIcon date={edition.schemes[0].date} />\r\n              {edition.tournament.name}\r\n            </Typography>\r\n\r\n            <Typography color=\"primary\" className={classes.icon_and_text}>\r\n              <PlayersIcon width=\"20px\" height=\"20px\" />\r\n              {edition.schemes[0].maxPlayerCount}\r\n            </Typography>\r\n          </div>\r\n          <div className=\"schemeType\">\r\n            {edition.schemes[0].hasGroupPhase && <Typography align=\"center\" color=\"primary\">Групова фаза</Typography>}\r\n            {!edition.schemes[0].hasGroupPhase && <Typography align=\"center\" color=\"primary\">Директна елиминация</Typography>}\r\n          </div>\r\n        </div>}\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nfunction getWinnerOrFirstTeam(match) {\r\n  if (match.winnerId) {\r\n    let winner = match.winnerId == match.team1Id ? match.team1 : match.team2;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <WinnerIcon width=\"18px\" height=\"18px\" />\r\n        <div>\r\n          <Typography>{winner.user1.name}</Typography>\r\n          {winner.user2 && <Typography>{winner.user2.name}</Typography>}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  } else if (match.team1) {\r\n    return (\r\n      <div>\r\n        <Typography>{match.team1.user1.name}</Typography>\r\n        {match.team1.user2 && <Typography>{match.team1.user2.name}</Typography>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction getRunnerUpOrSecondTeam(match) {\r\n  if (match.winnerId) {\r\n    let runnerUp = match.winnerId == match.team1Id ? match.team2 : match.team1;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <FlagIcon width=\"18px\" height=\"18px\" />\r\n        <div>\r\n          <Typography>{runnerUp.user1.name}</Typography>\r\n          {runnerUp.user2 && <Typography>{runnerUp.user2.name}</Typography>}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  } else if (match.team2) {\r\n    return (\r\n      <div>\r\n        <Typography>{match.team2.user1.name}</Typography>\r\n        {match.team2.user2 && <Typography>{match.team2.user2.name}</Typography>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst styles = (theme) => ({\r\n  tileRoot: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    padding: '.8em',\r\n    marginBottom: '1em',\r\n    cursor: 'pointer',\r\n    background: 'linear-gradient(0deg, rgb(220, 220, 220) 0%, rgb(239, 239, 239) 100%)',\r\n    '&.ongoing': {\r\n      background: 'linear-gradient(0deg, rgb(239, 239, 239) 0%, rgb(253, 253, 253) 100%)'\r\n    },\r\n    [theme.breakpoints.down('xs')]: {\r\n      flexWrap: 'wrap'\r\n    }\r\n  },\r\n  date_root: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    flexBasis: '60px',\r\n    height: '60px',\r\n    borderRadius: '3px',\r\n    marginRight: ' 1em',\r\n    backgroundColor: '#969696',\r\n    '&.ongoing': {\r\n      backgroundColor: theme.palette.secondary.main\r\n    },\r\n    '& .month_part': {\r\n      fontSize: '.8em'\r\n    },\r\n    '& .date_part': {\r\n      fontSize: '1.1em',\r\n      fontWeight: 700\r\n    },\r\n    '& *': {\r\n      color: 'white'\r\n    }\r\n  },\r\n  name_root: {\r\n    flexGrow: 1,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    '& .title': {\r\n      fontWeight: 700,\r\n      fontSize: '1.5em'\r\n    },\r\n    '& *': {\r\n      color: '#808080'\r\n    },\r\n    '&.ongoing *': {\r\n      color: theme.palette.text.primary\r\n    }\r\n  },\r\n  finale: {\r\n    display: 'flex',\r\n    justifyContent: 'flex-start',\r\n    alignItems: 'flex-start',\r\n    fontWeight: 700,\r\n    '& > *+*': {\r\n      marginLeft: '.3em'\r\n    }\r\n  },\r\n  icon_and_text: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center'\r\n  },\r\n  info_root: {\r\n    fontWeight: 700,\r\n    [theme.breakpoints.down('xs')]: {\r\n      marginTop: '.8em',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'space-between'\r\n    },\r\n    '&.inactive *': {\r\n      color: '#808080 !important'\r\n    },\r\n    '& *': {\r\n      fontWeight: 700\r\n    },\r\n    '& > div': {\r\n      display: 'flex',\r\n      '& > *': {\r\n        marginRight: '.3em'\r\n      }\r\n    },\r\n    '& > .schemeType': {\r\n      display: 'flex',\r\n      justifyContent: 'flex-end'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(EditionsListTile);","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport TournamentFormModal from '../tournaments/TournamentFormModal';\r\nimport EditionFormModal from '../editions/EditionFormModal';\r\nimport EditionsListTile from './EditionsListTile';\r\nimport QueryService from '../services/query.service';\r\nimport UserService from '../services/user.service';\r\nimport { catchEvent } from '../services/events.service';\r\nimport { ApplicationMode, Status } from '../enums';\r\n\r\nclass EditionsList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      editions: [],\r\n      editionModel: null,\r\n      tournamentModel: null,\r\n      page: 0,\r\n      rowsPerPage: 10,\r\n      totalCount: 0\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n    catchEvent('logged-in', () => {\r\n      this.getData();\r\n    });\r\n  }\r\n\r\n  getData() {\r\n    return QueryService\r\n      .post(`/editions/filter?offset=${this.state.page * this.state.rowsPerPage}&limit=${this.state.rowsPerPage}`, {})\r\n      .then(data => this.setState(data));\r\n  }\r\n\r\n  render() {\r\n    const { editions, editionModel, tournamentModel, page, rowsPerPage, totalCount } = this.state;\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <UserService.WithApplicationMode>\r\n        {mode => {\r\n          let hasPermission = mode == ApplicationMode.ADMIN || mode == ApplicationMode.TOURNAMENT;\r\n\r\n          return (\r\n            <div className=\"container\">\r\n              {hasPermission && editionModel\r\n                && <EditionFormModal\r\n                  model={editionModel}\r\n                  onChange={() => { this.setState({ editionModel: null }); this.getData(); }}\r\n                  onClose={() => this.setState({ editionModel: null })}\r\n                />}\r\n\r\n              {hasPermission && tournamentModel\r\n                && <TournamentFormModal\r\n                  model={tournamentModel}\r\n                  onChange={() => { this.setState({ tournamentModel: null }); this.getData(); }}\r\n                  onClose={() => this.setState({ tournamentModel: null })}\r\n                />}\r\n\r\n              {hasPermission && <div style={{ margin: '.5rem 0' }}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  size=\"small\"\r\n                  onClick={() => this.setState({ tournamentModel: { status: Status.DRAFT, name: '', info: '', thumbnailId: null } })}\r\n                >\r\n                  Нова Лига\r\n                  </Button>\r\n\r\n                <Button\r\n                  style={{ marginLeft: '.3rem' }}\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  size=\"small\"\r\n                  onClick={() => this.setState({ editionModel: { status: Status.DRAFT, name: '', info: '', startDate: null, endDate: null } })}\r\n                >\r\n                  Нов Турнир\r\n                  </Button>\r\n              </div>}\r\n\r\n              <Paper className={classes.root}>\r\n                <Typography variant=\"h5\" className={classes.heading}>Турнири</Typography>\r\n                {editions.map((edition) => <EditionsListTile key={edition.id} edition={edition} history={this.props.history} mode={mode} />)}\r\n                <TablePagination\r\n                  component=\"div\"\r\n                  count={totalCount}\r\n                  rowsPerPage={rowsPerPage}\r\n                  rowsPerPageOptions={[10, 25, 50]}\r\n                  labelRowsPerPage=\"Покажи:\"\r\n                  labelDisplayedRows={({ from, to, count }) => `${from}-${to} от ${count}`}\r\n                  page={page}\r\n                  onChangePage={(e, page) => this.setState({ page }, () => this.getData())}\r\n                  onChangeRowsPerPage={e => this.setState({ rowsPerPage: e.target.value, page: 0 }, () => this.getData())}\r\n                />\r\n              </Paper>\r\n            </div>\r\n          );\r\n        }}\r\n      </UserService.WithApplicationMode>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    padding: '2em',\r\n    [theme.breakpoints.down('sm')]: {\r\n      padding: '1em .5em'\r\n    },\r\n    [theme.breakpoints.down('xs')]: {\r\n      padding: '.5em .0'\r\n    }\r\n  },\r\n  heading: {\r\n    marginBottom: '.8em',\r\n    fontWeight: 700,\r\n    [theme.breakpoints.down('xs')]: {\r\n      display: 'flex',\r\n      justifyContent: 'center'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(EditionsList);","import React from 'react';\r\nimport { EnumLocalization } from '../enums';\r\n\r\nclass L10n extends React.Component {\r\n  render() {\r\n    const { children, translate, style } = this.props;\r\n    return <span style={style}>{l10n_text(children, translate)}</span>\r\n  }\r\n}\r\n\r\nexport function l10n_text(value, translate) {\r\n  const l10n = EnumLocalization[translate];\r\n  return l10n[value];\r\n}\r\n\r\nexport default L10n;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport moment from 'moment';\r\nimport ReplyIcon from '@material-ui/icons/Reply';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport { l10n_text } from '../../components/L10n';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nclass SchemeDetails extends React.Component {\r\n  render() {\r\n    const { scheme, enableEditionLink, classes } = this.props;\r\n\r\n    return (\r\n      <Card {...this.props.CardProps}>\r\n        <CardContent>\r\n          <Typography variant=\"headline\">\r\n            Схема\r\n            <Link to={`/schemes/${scheme.id}`}>\r\n              <span className={classes.schemeAccent}>{scheme.name}</span>\r\n            </Link>\r\n            {enableEditionLink && <span>\r\n              към турнир\r\n              <Link to={`/editions/${scheme.editionId}`}>\r\n                <span className={classes.editionAccent}>{scheme.edition.name}</span>\r\n                {/* <Typography variant=\"body2\">\r\n                    <ReplyIcon style={{ fontSize: '14px' }} />\r\n                    {scheme.edition.name}\r\n                  </Typography> */}\r\n              </Link>\r\n            </span>}\r\n          </Typography>\r\n          <Typography variant=\"caption\">{scheme.info}</Typography>\r\n\r\n          <div style={{ display: 'flex', flexWrap: 'wrap', margin: '.5rem 0' }}>\r\n            <Typography\r\n              variant=\"caption\"\r\n              style={{ paddingRight: '1rem' }}\r\n            >\r\n              Регистрация от\r\n              <Typography>\r\n                {moment(scheme.registrationStart).format('DD.MM.YYYY / HH:mm')}\r\n              </Typography>\r\n            </Typography>\r\n            <Typography\r\n              variant=\"caption\"\r\n              style={{ paddingRight: '1rem' }}\r\n            >\r\n              Регистрация до\r\n              <Typography>\r\n                {moment(scheme.registrationEnd).format('DD.MM.YYYY / HH:mm')}\r\n              </Typography>\r\n            </Typography>\r\n          </div>\r\n\r\n          <Typography variant=\"caption\">\r\n            Описание\r\n            <Typography>\r\n              {getSchemeTraits(scheme)}\r\n            </Typography>\r\n          </Typography>\r\n\r\n          <Typography variant=\"caption\" style={{ margin: '.5rem 0' }}>\r\n            Статус на схемата\r\n            <Typography>\r\n              {l10n_text(scheme.bracketStatus, \"BracketStatus\")}\r\n            </Typography>\r\n          </Typography>\r\n        </CardContent>\r\n        <CardActions disableActionSpacing={true}>\r\n          {this.props.actions}\r\n        </CardActions>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\nfunction getSchemeTraits(scheme) {\r\n  const traits = [];\r\n  if (scheme.hasGroupPhase)\r\n    traits.push('Групова фаза, елиминации');\r\n  else\r\n    traits.push('Елиминации');\r\n\r\n  if (scheme.singleTeams)\r\n    traits.push('сингъл');\r\n  else\r\n    traits.push('двойки');\r\n\r\n  if (scheme.maleTeams)\r\n    traits.push('мъже');\r\n\r\n  if (scheme.femaleTeams)\r\n    traits.push('жени');\r\n\r\n  if (scheme.mixedTeams)\r\n    traits.push('микс');\r\n\r\n  if (scheme.ageFrom || scheme.ageTo) {\r\n    const ageTrait = [];\r\n    if (scheme.ageFrom)\r\n      ageTrait.push(`от ${scheme.ageFrom}`);\r\n\r\n    if (scheme.ageTo)\r\n      ageTrait.push(`до ${scheme.ageTo}`);\r\n\r\n    ageTrait.push('години');\r\n    traits.push(ageTrait.join(' '));\r\n  }\r\n\r\n  return traits.join(', ');\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  schemeAccent: {\r\n    margin: '0 .3rem',\r\n    fontStyle: 'italic',\r\n    color: theme.palette.primary.main\r\n  },\r\n  editionAccent: {\r\n    margin: '0 .3rem',\r\n    fontStyle: 'italic',\r\n    color: theme.palette.secondary.main\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(SchemeDetails);","import React from 'react';\r\nimport moment from 'moment-timezone';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Link } from 'react-router-dom';\r\nimport Button from '@material-ui/core/Button';\r\nimport { BracketStatus, ApplicationMode } from '../../enums';\r\n\r\nimport MessageModal from '../../components/MessageModal';\r\nimport { dispatchEvent } from '../../services/events.service';\r\nimport ConfirmationDialog from '../../components/ConfirmationDialog';\r\nimport QueryService from '../../services/query.service';\r\nimport InvitationsModal from './InvitationsModal';\r\n\r\nclass SchemeDetailsActions extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      hasEnrolled: false,\r\n      hasCancelledEnrollment: false,\r\n      invitationsModal: false,\r\n      error: null,\r\n      hasEnrollmentError: false\r\n    }\r\n  }\r\n\r\n  enroll() {\r\n    this.setState({\r\n      hasEnrolled: false,\r\n      hasEnrollmentError: false\r\n    });\r\n\r\n    if (this.props.mode == ApplicationMode.GUEST)\r\n      dispatchEvent('menu-login');\r\n    else {\r\n      return QueryService\r\n        .get(`/schemes/${this.props.scheme.id}/enrollments/enroll`)\r\n        .then(e => {\r\n          this.setState({ hasEnrolled: true });\r\n          this.props.reload();\r\n        })\r\n        .catch(() => this.setState({ hasEnrollmentError: true }));\r\n    }\r\n  }\r\n\r\n  cancelEnroll() {\r\n    return QueryService\r\n      .delete(`/schemes/${this.props.scheme.id}/enrollments/${this.props.enrollment.id}/cancelEnroll`)\r\n      .then(e => {\r\n        this.setState({ hasCancelledEnrollment: true });\r\n        this.props.reload();\r\n      });\r\n  }\r\n\r\n  registrationOpen() {\r\n    return moment().isBetween(moment(this.props.scheme.registrationStart), moment(this.props.scheme.registrationEnd));\r\n  }\r\n\r\n  render() {\r\n    const { scheme, enableViewLink, enrollment } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <MessageModal activation={this.state.hasEnrolled}>\r\n          <Typography>Записване за турнир {this.props.scheme.name} беше успешно.</Typography>\r\n        </MessageModal>\r\n        <MessageModal activation={this.state.hasEnrollmentError}>\r\n          <Typography>Неуспешно записване за турнир {this.props.scheme.name}.\r\n          Не отговаряте на изискванията за пол и/или възраст за тази схема.\r\n          Моля ако не сте въвели тези данни в профила си, да ги въведете, защото те са задължителни за участие в турнирите.\r\n          </Typography>\r\n        </MessageModal>\r\n        <MessageModal activation={this.state.hasCancelledEnrollment}>\r\n          <Typography>Отписването от турнир {this.props.scheme.name} беше успешно.</Typography>\r\n        </MessageModal>\r\n        <MessageModal activation={this.state.error}>\r\n          <Typography variant=\"subheading\">Възникна грешка при записване за турнир {this.props.scheme.name}!</Typography>\r\n          <Typography>{this.state.error}</Typography>\r\n        </MessageModal>\r\n        {this.state.invitationsModal\r\n          && <InvitationsModal\r\n            onChange={() => {\r\n              this.props.reload();\r\n              this.setState({ invitationsModal: false });\r\n            }}\r\n            onClose={() => this.setState({ invitationsModal: false })}\r\n            scheme={this.props.scheme}\r\n          />}\r\n        {enableViewLink &&\r\n          <Link to={`/schemes/${scheme.id}`}>\r\n            <Button color=\"primary\">Преглед</Button>\r\n          </Link>}\r\n        {(scheme.bracketStatus == BracketStatus.GROUPS_DRAWN || scheme.bracketStatus == BracketStatus.GROUPS_END)\r\n          && <Link to={`/schemes/${scheme.id}/groups`}>\r\n            <Button color=\"primary\">Групи</Button>\r\n          </Link>}\r\n        {(scheme.bracketStatus == BracketStatus.ELIMINATION_DRAWN || scheme.bracketStatus == BracketStatus.ELIMINATION_END)\r\n          && <React.Fragment>\r\n            <Link to={`/schemes/${scheme.id}/elimination`}>\r\n              <Button color=\"primary\">Схема</Button>\r\n            </Link>\r\n            {scheme.hasGroupPhase\r\n              && <Link to={`/schemes/${scheme.id}/groups`}>\r\n                <Button color=\"primary\">Групи</Button>\r\n              </Link>}\r\n          </React.Fragment>}\r\n        {scheme.bracketStatus == BracketStatus.UNDRAWN\r\n          && <React.Fragment>\r\n            {!enrollment && this.registrationOpen()\r\n              && <React.Fragment>\r\n                {scheme.singleTeams && <Button color=\"primary\" onClick={() => this.enroll()}>Записване</Button>}\r\n                {!scheme.singleTeams && <Button color=\"primary\" onClick={() => this.setState({ invitationsModal: true })}>Записване</Button>}\r\n              </React.Fragment>}\r\n            {enrollment && <ConfirmationDialog\r\n              title=\"Отписване от турнир\"\r\n              body={<Typography>\r\n                Сигурни ли сте че искате да се отпишете от турнир {this.props.scheme.name}?\r\n                <Typography variant=\"caption\">Ако сте в отбор, то и другият играч ще бъде отписан.</Typography>\r\n              </Typography>}\r\n              onAccept={() => this.cancelEnroll()}\r\n            >\r\n              <Button color=\"secondary\">Отписване</Button>\r\n            </ConfirmationDialog>}\r\n          </React.Fragment>}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SchemeDetailsActions;","import React from 'react';\r\nimport moment from 'moment';\r\nimport { Link } from 'react-router-dom';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Status, BracketStatus, ApplicationMode } from '../enums';\r\nimport EditionFormModal from './EditionFormModal';\r\nimport SchemeFormModal from '../schemes/SchemeFormModal';\r\nimport SchemeDetails from '../schemes/components/SchemeDetails';\r\nimport SchemeDetailsActions from '../schemes/components/SchemeDetailsActions';\r\nimport DisplayImage from '../components/DisplayImage';\r\nimport QueryService from '../services/query.service';\r\nimport { catchEvent } from '../services/events.service';\r\nimport UserService from '../services/user.service';\r\nimport ConfirmationDialog from '../components/ConfirmationDialog';\r\nimport MessageModal from '../components/MessageModal';\r\n\r\nclass EditionView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      edition: {\r\n        tournament: {},\r\n        schemes: []\r\n      },\r\n      editionModel: null,\r\n      schemeModel: null,\r\n      enrolled: [],\r\n      hasError: false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n    catchEvent('logged-in', () => {\r\n      this.getData();\r\n    });\r\n  }\r\n\r\n  getData() {\r\n    QueryService\r\n      .get(`/editions/${this.props.match.params.id}`)\r\n      .then(e => this.setState({ edition: e }));\r\n\r\n    QueryService\r\n      .get('/users/enrollments')\r\n      .then(enrolled => this.setState({ enrolled }));\r\n  }\r\n\r\n  initSchemeModel() {\r\n    this.setState({\r\n      schemeModel: {\r\n        status: Status.DRAFT,\r\n        bracketStatus: BracketStatus.UNDRAWN,\r\n        edition: this.state.edition,\r\n        editionId: this.state.edition.id,\r\n        singleTeams: true,\r\n        maleTeams: false,\r\n        femaleTeams: false,\r\n        mixedTeams: false,\r\n        hasGroupPhase: false,\r\n        ageFrom: '',\r\n        ageTo: '',\r\n        maxPlayerCount: '',\r\n        groupCount: '',\r\n        teamsPerGroup: '',\r\n        date: null,\r\n        registrationStart: null,\r\n        registrationEnd: null,\r\n        pPoints: 1,\r\n        wPoints: 15,\r\n        cPoints: 20\r\n      }\r\n    });\r\n  }\r\n\r\n  remove() {\r\n    this.setState({ hasError: false });\r\n    return QueryService.delete(`/editions/${this.state.edition.id}`)\r\n      .then(() => this.props.history.replace('/editions'))\r\n      .catch(err => this.setState({ hasError: true }));\r\n  }\r\n\r\n  render() {\r\n    const { edition, editionModel, schemeModel, enrolled } = this.state;\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <UserService.WithApplicationMode>\r\n        {mode => {\r\n          let hasPermission = mode == ApplicationMode.ADMIN || mode == ApplicationMode.TOURNAMENT;\r\n\r\n          return (\r\n            <div className=\"container\">\r\n              <MessageModal activation={this.state.hasError}>\r\n                <Typography>Неуспешно изтриване на турнир. Възможна причина за грешката е съществуващи схеми със записани играчи в тях.</Typography>\r\n              </MessageModal>\r\n              {hasPermission && editionModel\r\n                && <EditionFormModal\r\n                  model={editionModel}\r\n                  onChange={() => {\r\n                    this.setState({ editionModel: null });\r\n                    this.getData();\r\n                  }}\r\n                  onClose={() => this.setState({ editionModel: null })}\r\n                />}\r\n\r\n              {hasPermission && schemeModel\r\n                && <SchemeFormModal\r\n                  model={schemeModel}\r\n                  onChange={() => {\r\n                    this.setState({ schemeModel: null });\r\n                    this.getData();\r\n                  }}\r\n                  onClose={() => this.setState({ schemeModel: null })}\r\n                />}\r\n\r\n              {hasPermission && <div style={{ margin: '.5rem 0' }}>\r\n                <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.initSchemeModel()}>Добави схема</Button>\r\n                <Button variant=\"contained\" color=\"primary\" size=\"small\" style={{ marginLeft: '.3rem' }} onClick={() => this.setState({ editionModel: edition })}>Промяна</Button>\r\n                <ConfirmationDialog\r\n                  title=\"Изтриване на турнир\"\r\n                  body={<Typography>Сигурни ли сте че искате да изтриете турнир {edition.name}?</Typography>}\r\n                  onAccept={() => this.remove()}\r\n                >\r\n                  <Button variant=\"contained\" color=\"secondary\" size=\"small\" style={{ marginLeft: '.3rem' }}>Изтриване</Button>\r\n                </ConfirmationDialog>\r\n\r\n              </div>}\r\n\r\n              <Card>\r\n                <CardContent>\r\n                  <Typography variant=\"headline\">\r\n                    {edition.name}\r\n                  </Typography>\r\n                  <Typography variant=\"caption\">{edition.info}</Typography>\r\n\r\n                  <Typography variant=\"caption\" style={{ marginTop: '1rem' }}>Лига</Typography>\r\n                  <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                    {edition.tournament.thumbnail\r\n                      && <DisplayImage image={edition.tournament.thumbnail} style={{ maxWidth: '50px', marginRight: '.5rem' }} />}\r\n                    <Link to={`/tournaments/${edition.tournament.id}`}>\r\n                      <Typography variant=\"body2\">{edition.tournament.name}</Typography>\r\n                    </Link>\r\n                  </div>\r\n\r\n                  <div style={{ display: 'flex', marginTop: '1rem' }}>\r\n                    <Typography variant=\"caption\" style={{ paddingRight: '1rem' }}>\r\n                      Дата\r\n                      <Typography>{moment(edition.startDate).format('DD.MM.YYYY')}</Typography>\r\n                    </Typography>\r\n\r\n                    {/* <Typography variant=\"caption\">\r\n                      Край\r\n                      <Typography>{moment(edition.endDate).format('DD.MM.YYYY')}</Typography>\r\n                    </Typography> */}\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <div className={classes.schemesRoot}>\r\n                {edition.schemes.map(scheme => {\r\n                  // const actions = <SchemeDetailsActions\r\n                  //   scheme={scheme}\r\n                  //   enableViewLink\r\n                  //   enrollment={enrolled[scheme.id]}\r\n                  //   mode={mode}\r\n                  //   reload={() => this.getData()}\r\n                  // />;\r\n                  return <SchemeDetails\r\n                    key={scheme.id}\r\n                    scheme={scheme}\r\n                    actions={null}\r\n                    CardProps={{\r\n                      className: classes.schemesItem\r\n                    }} />\r\n                })}\r\n              </div>\r\n            </div>\r\n          );\r\n        }}\r\n      </UserService.WithApplicationMode>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  schemesRoot: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'space-between',\r\n    marginTop: '.3rem'\r\n  },\r\n  schemesItem: {\r\n    width: '49.5%',\r\n    marginBottom: '.3rem',\r\n    paddingBottom: '0',\r\n    [theme.breakpoints.down('xs')]: {\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(EditionView);","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\n\r\nimport EditionsList from './EditionsList';\r\nimport EditionView from '../editions/EditionView';\r\n\r\nclass EditionsRoot extends React.Component {\r\n  render() {\r\n    return (\r\n      <Switch>\r\n        <Route\r\n          path=\"/editions/:id\"\r\n          render={(props) => <EditionView {...props} />}\r\n        />\r\n        <Route\r\n          exact\r\n          path=\"/editions\"\r\n          render={(props) => <EditionsList {...props} />}\r\n        />\r\n      </Switch>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditionsRoot;","import React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Switch, Link, Route } from 'react-router-dom';\r\n\r\nimport TournamentView from './TournamentView';\r\nimport TournamentFormModal from './TournamentFormModal';\r\nimport ConfirmationDialog from '../components/ConfirmationDialog';\r\nimport QueryService from '../services/query.service';\r\nimport UserService from '../services/user.service';\r\nimport { catchEvent } from '../services/events.service';\r\nimport { ApplicationMode, Status } from '../enums';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nclass TournamentsRouting extends React.Component {\r\n  render() {\r\n    return (\r\n      <Switch>\r\n        <Route path=\"/leagues/:id\" component={TournamentView} />\r\n        <Route path=\"/leagues\" render={() => {\r\n          return (\r\n            <UserService.WithApplicationMode>\r\n              {mode => <TournamentsRoot {...this.props} mode={mode} />}\r\n            </UserService.WithApplicationMode>\r\n          );\r\n        }} />\r\n      </Switch>\r\n    );\r\n  }\r\n}\r\n\r\nclass TournamentsRoot extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      tournaments: [],\r\n      tournamentModel: null\r\n    };\r\n  }\r\n\r\n  refresh() {\r\n    this.setState({ tournamentModel: null });\r\n    this.getData();\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n    catchEvent('logged-in', () => {\r\n      this.getData();\r\n    });\r\n  }\r\n\r\n  getData() {\r\n    return QueryService\r\n      .post('/tournaments/filter', {})\r\n      .then(tournaments => this.setState({ tournaments }));\r\n  }\r\n\r\n  openTournamentModal(model) {\r\n    if (!model)\r\n      this.setState({\r\n        tournamentModel: {\r\n          status: Status.DRAFT\r\n        }\r\n      });\r\n    else\r\n      this.setState({ tournamentModel: JSON.parse(JSON.stringify(model)) })\r\n  }\r\n\r\n  removeTournament(tournament) {\r\n    if (!tournament)\r\n      return;\r\n\r\n    return QueryService.delete(`/tournaments/${tournament.id}`)\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  render() {\r\n    const { classes, mode } = this.props;\r\n    const { tournaments, tournamentModel } = this.state;\r\n    let hasPermission = (mode == ApplicationMode.ADMIN || mode == ApplicationMode.TOURNAMENT);\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        {hasPermission && tournamentModel\r\n          && <TournamentFormModal\r\n            model={tournamentModel}\r\n            onChange={() => this.refresh()}\r\n            onClose={() => this.setState({ tournamentModel: null })}\r\n          />}\r\n\r\n        <div style={{ margin: '0 .5rem' }}>\r\n          <div>\r\n            {hasPermission && <Button variant=\"contained\" size=\"medium\" color=\"primary\" onClick={() => this.openTournamentModal()} >Нова лига</Button>}\r\n          </div>\r\n          <div className={classes.previewContainer}>\r\n            {tournaments.map(tournament => <TournamentPreview\r\n              {...this.props}\r\n              key={tournament.id}\r\n              tournament={tournament}\r\n              mode={mode}\r\n              onEdit={model => this.openTournamentModal(model)}\r\n              onRemove={tournament => this.removeTournament(tournament)}\r\n            />)}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass TournamentPreview extends React.Component {\r\n  edit(e) {\r\n    e.stopPropagation();\r\n    this.props.onEdit(this.props.tournament);\r\n  }\r\n\r\n  remove() {\r\n    this.props.onRemove(this.props.tournament);\r\n  }\r\n\r\n  navigate() {\r\n    this.props.history.push(`/tournaments/${this.props.tournament.id}`);\r\n  }\r\n\r\n  render() {\r\n    const { tournament, classes, mode } = this.props;\r\n    let hasPermission = (mode == ApplicationMode.ADMIN || mode == ApplicationMode.TOURNAMENT);\r\n\r\n    return (\r\n      <Paper className={classes.previewRoot} elevation={5} onClick={() => this.navigate()}>\r\n        {tournament.thumbnailId && <img src={QueryService.getFileUrl(tournament.thumbnailId)} className={classes.previewImage} />}\r\n\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n          <Typography variant=\"h4\" className={classes.previewBodyPart}>\r\n            {tournament.name}\r\n          </Typography>\r\n          {tournament.status == Status.DRAFT && <Typography className={classes.draftLabel}>чернова</Typography>}\r\n        </div>\r\n        <Typography variant=\"caption\" className={classes.previewBodyPart} style={{ flexGrow: 2 }}>{tournament.info}</Typography>\r\n\r\n        {hasPermission && <div className={classes.previewBodyPart}>\r\n          <Button variant=\"text\" size=\"small\" color=\"primary\" onClick={(e) => this.edit(e)}>Промяна</Button>\r\n\r\n          <ConfirmationDialog\r\n            title=\"Изтриване на лига\"\r\n            body={<Typography>Сигурни ли сте че искате да изтриете лигата {tournament.name}?</Typography>}\r\n            onAccept={() => this.remove()}\r\n          >\r\n            <Button variant=\"text\" size=\"small\" color=\"secondary\">Изтриване</Button>\r\n          </ConfirmationDialog>\r\n        </div>}\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  previewContainer: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    flexWrap: 'wrap'\r\n  },\r\n  previewRoot: {\r\n    margin: '.5rem 0 0 0',\r\n    width: '32%',\r\n    cursor: 'pointer',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    [theme.breakpoints.down('md')]: {\r\n      width: '49%'\r\n    },\r\n    [theme.breakpoints.down('sm')]: {\r\n      width: '100%'\r\n    }\r\n  },\r\n  draftLabel: {\r\n    borderRadius: '4px',\r\n    backgroundColor: '#3e3e3e',\r\n    color: 'white',\r\n    padding: '.2rem .5rem',\r\n    margin: '0 1rem 0 0',\r\n    fontSize: '.8rem'\r\n  },\r\n  previewImage: {\r\n    width: '100%',\r\n    borderTopLeftRadius: '5px',\r\n    borderTopRightRadius: '5px',\r\n    '&:hover': {\r\n      opacity: .9\r\n    }\r\n  },\r\n  previewBodyPart: {\r\n    padding: '0.5rem'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(TournamentsRouting);","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport FormModal from '../components/FormModal';\r\nimport QueryService from '../services/query.service';\r\n\r\nclass TeamStatisticsFormModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user1: {}\r\n    }\r\n\r\n    this.handleUpdate = (field) => (e) => {\r\n      let state = this.state;\r\n      state[field] = e.target.value;\r\n      this.setState(state);\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState(this.props.team);\r\n  }\r\n\r\n  componentDidUpdate(previousProps) {\r\n    if (previousProps.team != this.props.team)\r\n      this.setState(this.props.team);\r\n  }\r\n\r\n  save() {\r\n    return QueryService.post(`/teams/${this.state.id}`, this.state)\r\n      .then(res => this.props.onUpdate());\r\n  }\r\n\r\n  render() {\r\n    const handleUpdate = this.handleUpdate;\r\n    const { user1, user2, wonMatches, wonTournaments, totalMatches, totalTournaments } = this.state;\r\n    const { onClose } = this.props;\r\n\r\n    const title = `Промяна на статистиката за ${user2 ? `отбор ${user1.name} & ${user2.name}` : `играч ${user1.name}`}`;\r\n\r\n    const actions = <React.Fragment>\r\n      <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.save()}>\r\n        Запис\r\n      </Button>\r\n      <Button variant=\"outlined\" color=\"primary\" size=\"small\" onClick={onClose}>Отказ</Button>\r\n    </React.Fragment>;\r\n\r\n    const body = <div>\r\n      <TextField\r\n        fullWidth\r\n        label=\"Спечелени мачове\"\r\n        type=\"number\"\r\n        value={wonMatches}\r\n        onChange={handleUpdate('wonMatches')}\r\n      />\r\n\r\n      <TextField\r\n        fullWidth\r\n        label=\"Общо изиграни мачове\"\r\n        type=\"number\"\r\n        value={totalMatches}\r\n        onChange={handleUpdate('totalMatches')}\r\n      />\r\n\r\n      <TextField\r\n        fullWidth\r\n        label=\"Спечелени турнири\"\r\n        type=\"number\"\r\n        value={wonTournaments}\r\n        onChange={handleUpdate('wonTournaments')}\r\n      />\r\n\r\n      <TextField\r\n        fullWidth\r\n        label=\"Общо изиграни турнири\"\r\n        type=\"number\"\r\n        value={totalTournaments}\r\n        onChange={handleUpdate('totalTournaments')}\r\n      />\r\n    </div>;\r\n\r\n    return (\r\n      <FormModal\r\n        enableFullWidth={true}\r\n        onClose={onClose}\r\n        title={title}\r\n        body={body}\r\n        actions={actions}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default TeamStatisticsFormModal;","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport TeamStatisticsFormModal from './TeamStatisticsFormModal';\r\nimport QueryService from '../services/query.service';\r\nimport UserService from '../services/user.service';\r\nimport { ApplicationMode } from '../enums';\r\n\r\nclass PlayersRoot extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      teams: [],\r\n      teamsMode: 'single',\r\n      page: 0,\r\n      itemsPerPage: 10,\r\n      totalCount: 0,\r\n      searchTerm: '',\r\n      editTeamModel: null\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    const { teamsMode, searchTerm, page, itemsPerPage } = this.state;\r\n\r\n    return QueryService.get(`/teams?searchTerm=${searchTerm}&type=${teamsMode}&limit=${itemsPerPage}&offset=${page * itemsPerPage}`)\r\n      .then(({ count, rows }) => {\r\n        this.setState({\r\n          totalCount: count,\r\n          teams: rows\r\n        })\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { teams, totalCount, page, itemsPerPage, searchTerm, teamsMode, editTeamModel } = this.state;\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <UserService.WithApplicationMode>\r\n        {mode => {\r\n          let hasPermission = mode == ApplicationMode.ADMIN || mode == ApplicationMode.TOURNAMENT;\r\n\r\n          return (\r\n            <div className=\"container\">\r\n              {hasPermission && editTeamModel && <TeamStatisticsFormModal\r\n                team={editTeamModel}\r\n                onClose={() => this.setState({ editTeamModel: null })}\r\n                onUpdate={() => this.setState({ editTeamModel: null }, () => this.getData())}\r\n              />}\r\n\r\n              <Paper style={{ padding: '1rem' }}>\r\n                <Typography variant=\"headline\" color=\"primary\">Вечна класация на играчите</Typography>\r\n\r\n                <TextField\r\n                  label=\"Търсене\"\r\n                  fullWidth\r\n                  value={searchTerm}\r\n                  onChange={e => this.setState({ searchTerm: e.target.value }, () => this.getData())}\r\n                />\r\n\r\n                <Tabs\r\n                  value={teamsMode}\r\n                  onChange={(_, e) => this.setState({ teamsMode: e }, () => this.getData())}\r\n                  textColor=\"primary\"\r\n                  variant=\"fullWidth\">\r\n                  <Tab value=\"single\" label=\"Сингъл\"></Tab>\r\n                  <Tab value=\"double\" label=\"Двойки\"></Tab>\r\n                </Tabs>\r\n\r\n                <Hidden xsDown>\r\n                  <Table>\r\n                    <TableHead>\r\n                      <TableRow>\r\n                        <TableCell padding=\"dense\">#</TableCell>\r\n                        <TableCell>Име</TableCell>\r\n                        <TableCell>Спечелени мачове</TableCell>\r\n                        <TableCell>Общо мачове</TableCell>\r\n                        <TableCell>Спечелени турнири</TableCell>\r\n                        <TableCell>Общо турнири</TableCell>\r\n                        {hasPermission && <TableCell padding=\"none\"></TableCell>}\r\n                      </TableRow>\r\n\r\n                    </TableHead>\r\n                    <TableBody>\r\n                      {teams.map((team, i) => {\r\n                        let prefix = '';\r\n                        // if (team.globalRank === 1)\r\n                        //   prefix = 'gold'\r\n                        // else if (team.globalRank === 2)\r\n                        //   prefix = 'silver'\r\n                        // else if (team.globalRank === 3)\r\n                        //   prefix = 'bronze'\r\n\r\n                        return (\r\n                          <TableRow key={team.id} className={classes[prefix + 'Root']}>\r\n                            <TableCell padding=\"dense\">\r\n                              <Typography className={classes[prefix + 'Typography']}>\r\n                                {team.globalRank}\r\n                              </Typography>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              {!team.user2 && <Typography className={classes[prefix + 'Typography']}>{team.user1.name}</Typography>}\r\n                              {team.user2 && <React.Fragment>\r\n                                <Typography className={classes[prefix + 'Typography']}>{team.user1.name}</Typography>\r\n                                <Typography className={classes[prefix + 'Typography']}>{team.user2.name}</Typography>\r\n                              </React.Fragment>}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <Typography className={classes[prefix + 'Typography']}>\r\n                                {team.wonMatches} ({getWinRatio(team, 'Matches')}%)\r\n                              </Typography>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <Typography className={classes[prefix + 'Typography']}>\r\n                                {team.totalMatches}\r\n                              </Typography></TableCell>\r\n                            <TableCell>\r\n                              <Typography className={classes[prefix + 'Typography']}>\r\n                                {team.wonTournaments} ({getWinRatio(team, 'Tournaments')}%)\r\n                              </Typography>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <Typography className={classes[prefix + 'Typography']}>\r\n                                {team.totalTournaments}\r\n                              </Typography>\r\n                            </TableCell>\r\n                            {hasPermission && <TableCell padding=\"none\">\r\n                              <IconButton color=\"primary\" onClick={() => this.setState({ editTeamModel: team })}>\r\n                                <EditIcon />\r\n                              </IconButton></TableCell>}\r\n                          </TableRow>);\r\n                      })}\r\n                    </TableBody>\r\n                  </Table>\r\n                </Hidden>\r\n\r\n                <Hidden smUp>\r\n                  <List>\r\n                    {teams.map(team => {\r\n                      let prefix = 'basic';\r\n                      if (team.globalRank === 1)\r\n                        prefix = 'gold'\r\n                      else if (team.globalRank === 2)\r\n                        prefix = 'silver'\r\n                      else if (team.globalRank === 3)\r\n                        prefix = 'bronze'\r\n\r\n                      return (\r\n                        <React.Fragment key={team.id}>\r\n                          <ListItem style={{ display: 'flex' }}>\r\n                            <div style={{ flexBasis: '34%', display: 'flex' }}>\r\n                              <div className={classes.badge + ' ' + classes[prefix + 'Badge']}>\r\n                                <Typography className={classes[prefix + 'Typography']}>#{team.globalRank}</Typography>\r\n                              </div>\r\n                            </div>\r\n                            <div style={{ flexBasis: '66%', display: 'flex', flexDirection: 'column', alignItems: 'flex-start' }}>\r\n                              <div style={{ display: 'flex', width: '100%' }}>\r\n                                <div style={{ flexBasis: '85%', display: 'flex', alignItems: 'center' }}>\r\n                                  <Typography>{team.user1.name}</Typography>\r\n                                  {team.user2 && <Typography>{team.user2.name}</Typography>}\r\n                                </div>\r\n                                {hasPermission && <div style={{ flexBasis: '15%' }}>\r\n                                  <IconButton color=\"primary\" onClick={() => this.setState({ editTeamModel: team })} >\r\n                                    <EditIcon />\r\n                                  </IconButton>\r\n                                </div>}\r\n                              </div>\r\n                              <div style={{ width: '100%' }}>\r\n                                <Typography variant=\"caption\">\r\n                                  <span>Мачове: {team.wonMatches}/{team.totalMatches}</span>\r\n                                  <span style={{ marginLeft: '.3em' }}>({getWinRatio(team, 'Matches')}% win ratio)</span>\r\n                                </Typography>\r\n                                <Typography variant=\"caption\">\r\n                                  <span>Турнири: {team.wonTournaments}/{team.totalTournaments}</span>\r\n                                  <span style={{ marginLeft: '.3em' }}>({getWinRatio(team, 'Tournaments')}% win ratio)</span>\r\n                                </Typography>\r\n                              </div>\r\n                            </div>\r\n                          </ListItem>\r\n                          <Divider />\r\n                        </React.Fragment>\r\n                      );\r\n                    })}\r\n                  </List>\r\n                </Hidden>\r\n\r\n                <TablePagination\r\n                  component=\"div\"\r\n                  count={totalCount}\r\n                  rowsPerPage={itemsPerPage}\r\n                  rowsPerPageOptions={[10, 25, 50]}\r\n                  labelRowsPerPage=\"Покажи:\"\r\n                  labelDisplayedRows={({ from, to, count }) => `${from}-${to} от ${count}`}\r\n                  page={page}\r\n                  onChangePage={(e, page) => this.setState({ page }, () => this.getData())}\r\n                  onChangeRowsPerPage={e => this.setState({ itemsPerPage: e.target.value, page: 0 }, () => this.getData())}\r\n                />\r\n              </Paper>\r\n            </div>\r\n          );\r\n        }}\r\n      </UserService.WithApplicationMode >\r\n    );\r\n  }\r\n}\r\n\r\nfunction getWinRatio(team, suffix) {\r\n  if (team['total' + suffix] == 0)\r\n    return 0;\r\n  return Math.round(100 * 100 * team['won' + suffix] / team['total' + suffix]) / 100;\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  mobileRoot: {\r\n    display: 'flex'\r\n  },\r\n  badge: {\r\n    borderRadius: '50%',\r\n    width: '50px',\r\n    height: '50px',\r\n    margin: 'auto',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center'\r\n  },\r\n  basicBadge: {\r\n    border: '1px solid lightgray'\r\n  },\r\n  goldBadge: {\r\n    backgroundColor: '#FFD200',\r\n    backgroundImage: 'linear-gradient(15deg, #FFD200 0%, #F7971E 74%);'\r\n  },\r\n  silverBadge: {\r\n    backgroundColor: '#b8c6db',\r\n    backgroundImage: 'linear-gradient(315deg, #8ba2c3 0%, #f5f7fa 74%)'\r\n  },\r\n  bronzeBadge: {\r\n    backgroundColor: '#772f1a',\r\n    backgroundImage: 'linear-gradient(315deg, #772f1a 0%, #f2a65a 74%)'\r\n  },\r\n  goldRoot: {\r\n    backgroundColor: '#FFD200',\r\n    backgroundImage: 'linear-gradient(15deg, #FFD200 0%, #F7971E 74%);',\r\n    border: 'none'\r\n  },\r\n  goldTypography: {\r\n    fontWeight: 700,\r\n    color: 'white'\r\n  },\r\n  silverRoot: {\r\n    backgroundColor: '#b8c6db',\r\n    backgroundImage: 'linear-gradient(315deg, #8ba2c3 0%, #f5f7fa 74%)',\r\n    border: 'none'\r\n  },\r\n  silverTypography: {\r\n    fontWeight: 700\r\n  },\r\n  bronzeRoot: {\r\n    backgroundColor: '#772f1a',\r\n    backgroundImage: 'linear-gradient(315deg, #772f1a 0%, #f2a65a 74%)',\r\n    border: 'none'\r\n  },\r\n  bronzeTypography: {\r\n    fontWeight: 700,\r\n    color: 'whitesmoke'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(PlayersRoot);","export function getHour(hour) {\r\n  if (hour < 10)\r\n    return `0${hour}:00`;\r\n  else return `${hour}:00`;\r\n}\r\n\r\nexport function getRange(start, end) {\r\n  if (!start || !end)\r\n    return [];\r\n  return [...new Array(end - start + 1).keys()].map(e => e + start);\r\n}","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport EnumSelect from '../../components/EnumSelect';\r\nimport AsyncSelect from '../../components/select/AsyncSelect';\r\nimport { ReservationPayment, ReservationType } from '../../enums';\r\nimport { l10n_text } from '../../components/L10n';\r\nimport { getHour } from '../../utils';\r\n\r\nclass EditReservationModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      reservation: {\r\n        court: {},\r\n        type: '',\r\n        season: {},\r\n        payments: [],\r\n        administrator: {},\r\n        customer: {}\r\n      },\r\n      errors: []\r\n    }\r\n\r\n    this.handleChange = (prop) => (e) => {\r\n      const reservation = this.state.reservation;\r\n      reservation[prop] = e.target.value;\r\n      if (prop == 'type') {\r\n        reservation.customer = null;\r\n        reservation.customerId = null;\r\n        reservation.subscription = null;\r\n        reservation.subscriptionId = null;\r\n      }\r\n\r\n      this.setState({ reservation });\r\n    };\r\n\r\n    this.handleCustomChange = (prop) => (value) => {\r\n      const reservation = this.state.reservation;\r\n\r\n      if (prop == 'customer') {\r\n        reservation.customer = null;\r\n        reservation.customerId = (value || { id: null }).id;\r\n        reservation.subscription = null;\r\n        reservation.subscriptionId = null;\r\n      }\r\n\r\n      if (prop == 'subscription') {\r\n        reservation.subscription = null;\r\n        reservation.subscriptionId = (value || { id: null }).id;\r\n      }\r\n\r\n      reservation[prop] = value;\r\n\r\n      this.setState({ reservation });\r\n    };\r\n\r\n    this.handlePaymentChange = (prop, index) => (e) => {\r\n      this.state.reservation.payments[index][prop] = e.target.value;\r\n      this.setState({ reservation: this.state.reservation });\r\n    };\r\n\r\n    this.handlePaymentSubscriptionChange = (index) => (value) => {\r\n      this.state.reservation.payments[index].subscription = value;\r\n      if (value)\r\n        this.state.reservation.payments[index].subscriptionId = value.id;\r\n      else\r\n        this.state.reservation.payments[index].subscriptionId = null;\r\n      this.setState({ reservation: this.state.reservation });\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { reservation } = this.props;\r\n    this.setState({ reservation: JSON.parse(JSON.stringify(reservation)), errors: [] });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { reservation } = this.props;\r\n    if (prevProps.reservation != reservation)\r\n      this.setState({ reservation: JSON.parse(JSON.stringify(reservation)), errors: [] });\r\n  }\r\n\r\n  action() {\r\n    if (this.state.reservation.id)\r\n      return QueryService\r\n        .post(`/schedule/reservations/${this.state.reservation.id}`, this.state.reservation)\r\n        .then(_ => {\r\n          this.setState({ errors: [] });\r\n          this.props.onAction()\r\n        })\r\n        .catch(err => this.setState({ errors: err }));\r\n    else\r\n      return QueryService\r\n        .post(`/schedule/reservations`, this.state.reservation)\r\n        .then(_ => {\r\n          this.setState({ errors: [] });\r\n          this.props.onAction()\r\n        })\r\n        .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  cancelReservation() {\r\n    return QueryService\r\n      .delete(`/schedule/reservations/${this.state.reservation.id}/cancel`)\r\n      .then(_ => {\r\n        this.setState({ errors: [] });\r\n        this.props.onAction()\r\n      })\r\n      .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  addPayment() {\r\n    const reservation = this.state.reservation;\r\n    reservation.payments.unshift({\r\n      type: \"\",\r\n      amount: null,\r\n      reservationId: reservation.id || 0\r\n    });\r\n    this.setState({ reservation });\r\n  }\r\n\r\n  render() {\r\n    const { isOpen, onClose, classes } = this.props;\r\n    const { reservation } = this.state;\r\n\r\n    return (\r\n      <Dialog open={isOpen} onClose={onClose} fullWidth={true} classes={{ paper: classes.root }}>\r\n        <DialogTitle>\r\n          <DialogContentText variant=\"headline\">\r\n            Резервация на\r\n            <span style={{ marginLeft: '.5rem' }}>\r\n              {reservation.court.name}\r\n            </span>\r\n          </DialogContentText>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Typography variant=\"caption\">\r\n            Час\r\n            <Typography>{getHour(reservation.hour)} - {getHour(reservation.hour + 1)}</Typography>\r\n          </Typography>\r\n          {reservation.administrator && <Typography variant=\"caption\">\r\n            Администрирал\r\n            <Typography>{reservation.administrator.name}</Typography>\r\n          </Typography>}\r\n          {reservation.type == ReservationType.COMPETITOR\r\n            && reservation.customer\r\n            && <Typography variant=\"caption\">\r\n              Резервирал\r\n              <Typography>{reservation.customer.name}</Typography>\r\n            </Typography>}\r\n\r\n          <EnumSelect\r\n            label=\"Вид резервация\"\r\n            value={reservation.type}\r\n            fullWidth={false}\r\n            onChange={this.handleChange('type')}\r\n            EnumValues={ReservationType}\r\n            EnumName=\"ReservationType\" />\r\n\r\n          {(reservation.type == ReservationType.USER || reservation.type == ReservationType.SUBSCRIPTION)\r\n            && <AsyncSelect\r\n              label=\"Потребител\"\r\n              value={reservation.customer}\r\n              query=\"users\"\r\n              noOptionsMessage={() => 'Няма намерени потребители'}\r\n              formatOptionLabel={(option) => <Typography component=\"span\">\r\n                {option.name}\r\n                <Typography component=\"span\" variant=\"caption\">{option.email}</Typography>\r\n              </Typography>}\r\n              onChange={this.handleCustomChange('customer')}\r\n            />}\r\n\r\n          {reservation.type == ReservationType.SUBSCRIPTION && reservation.customer\r\n            && <AsyncSelect\r\n              disableSearch={true}\r\n              label=\"Абонамент\"\r\n              value={reservation.subscription}\r\n              query=\"subscriptions\"\r\n              filter={{\r\n                userId: reservation.customerId\r\n              }}\r\n              noOptionsMessage={() => 'Няма регистрирани абонаменти'}\r\n              formatOptionLabel={(option) => <Typography component=\"span\">\r\n                Абонамент {l10n_text(option.type, \"SubscriptionType\")}\r\n                <Typography component=\"span\" variant=\"caption\" style={{ display: 'inline', marginLeft: '1rem' }}>{option.season.name}</Typography>\r\n                <Typography component=\"span\" variant=\"caption\">{option.remainingHours} оставащи часа</Typography>\r\n              </Typography>}\r\n              onChange={this.handleCustomChange('subscription')}\r\n            />}\r\n\r\n          <Typography variant=\"subheading\" style={{ marginTop: '1rem', alignItems: 'center', display: 'flex' }}>\r\n            Плащания\r\n            <IconButton\r\n              color=\"primary\"\r\n              onClick={() => this.addPayment()}\r\n            >\r\n              <AddIcon />\r\n            </IconButton>\r\n          </Typography>\r\n\r\n          {reservation.payments && reservation.payments.map((payment, index) => {\r\n            return (\r\n              <div className={classes.paymentCell} key={index}>\r\n\r\n                <EnumSelect\r\n                  style={{ width: '100px' }}\r\n                  label=\"Вид плащане\"\r\n                  value={payment.type}\r\n                  onChange={this.handlePaymentChange('type', index)}\r\n                  EnumValues={ReservationPayment}\r\n                  EnumName=\"ReservationPayment\" />\r\n\r\n                {payment.type == ReservationPayment.CASH\r\n                  && <TextField\r\n                    label=\"Стойност\"\r\n                    value={payment.amount}\r\n                    InputProps={{\r\n                      endAdornment: <InputAdornment position=\"end\">Лв.</InputAdornment>\r\n                    }}\r\n                    onChange={this.handlePaymentChange('amount', index)}\r\n                  />}\r\n\r\n                {(payment.type == ReservationPayment.SUBS_ZONE_1 || payment.type == ReservationPayment.SUBS_ZONE_2)\r\n                  && reservation.customer\r\n                  && <AsyncSelect\r\n                    disableSearch={true}\r\n                    label=\"Абонамент\"\r\n                    value={payment.subscription}\r\n                    query=\"subscriptions\"\r\n                    filter={{\r\n                      userId: reservation.customerId,\r\n                      type: payment.type,\r\n                      onlyAvailable: true\r\n                    }}\r\n                    noOptionsMessage={() => 'Няма абонаменти с часове за отиграване'}\r\n                    formatOptionLabel={(option) => <Typography component=\"span\">\r\n                      Абонамент {l10n_text(option.type, \"SubscriptionType\")}\r\n                      <Typography component=\"span\" variant=\"caption\" style={{ display: 'inline', marginLeft: '1rem' }}>{option.season.name}</Typography>\r\n                      <Typography component=\"span\" variant=\"caption\">{option.remainingHours} оставащи часа</Typography>\r\n                    </Typography>}\r\n                    onChange={this.handlePaymentSubscriptionChange(index)}\r\n                  />}\r\n\r\n                {/* <span style={{ cursor: 'pointer' }} onClick={() => {\r\n                  this.state.reservation.payments.splice(index, 1);\r\n                  this.setState({ reservation: this.state.reservation });\r\n                }}>\r\n                  <ClearIcon style={{ color: 'darkred' }} />\r\n                </span> */}\r\n                <div style={{ margin: '1rem 0 .3rem 0' }}>\r\n                  <Button variant=\"contained\" color=\"secondary\" size=\"small\"\r\n                    onClick={() => {\r\n                      this.state.reservation.payments.splice(index, 1);\r\n                      this.setState({ reservation: this.state.reservation });\r\n                    }}\r\n                  >\r\n                    Премахване\r\n                </Button>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n\r\n          {reservation.payments.length == 0 && <Typography variant=\"caption\">Няма регистрирани плащания</Typography>}\r\n\r\n          <TextField\r\n            label=\"Бележка\"\r\n            value={reservation.info}\r\n            fullWidth={true}\r\n            multiline={true}\r\n            margin=\"none\"\r\n            onChange={this.handleChange('info')}\r\n          />\r\n\r\n          {this.state.errors && this.state.errors.length > 0\r\n            && <div style={{ margin: '1rem 0', color: 'red' }}>\r\n              {this.state.errors.map((err, index) => {\r\n                return (\r\n                  <div key={index}><em>{index + 1}. {ErrorTexts[err]}</em></div>\r\n                );\r\n              })}\r\n            </div>}\r\n\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => this.action()}\r\n          >\r\n            Запазване\r\n          </Button>\r\n          {this.state.reservation.id && <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            onClick={() => this.cancelReservation()}\r\n          >\r\n            Отмяна на резервацията\r\n          </Button>}\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={onClose}\r\n          >\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog >\r\n    );\r\n  }\r\n}\r\n\r\nconst ErrorTexts = {\r\n  'exist': 'Резервация за този ден, час и корт вече съществува.',\r\n  'typeRequired': '\"Вид резервация\" е задължително поле',\r\n  'customerRequired': '\"Потребител\" е задължително поле, когато вид резервация е \"Абонат\" или \"Потребител\".',\r\n  'subscriptionRequired': '\"Абонамент\" е задължително поле, когато вид резервация е \"Абонат\".',\r\n  'usedHoursExceedTotalHours': 'Абонаментът няма оставащи часове',\r\n  'paymentSubscriptionRequired': '\"Абонамент\" е задължително поле, когато вид плащане е \"Отиграване на абонамент\".',\r\n  'typeSubscriptionAndHasPaymentSubscription': 'Не може едновременно вид резервация да е \"Абонат\" и да има вид плащане \"Отиграване на абонамент\".',\r\n  'maxAllowedTimeDiff': 'Резервацията не може да бъде отказана, защото остават по-малко часове от минимално допустимите часове за отказ.',\r\n  'reservationInThePast': 'Часът за тази резервация вече е минал.'\r\n};\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: '800px'\r\n    }\r\n  },\r\n  paymentCell: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    border: `1px solid ${theme.palette.primary.light}`,\r\n    padding: '1rem',\r\n    marginBottom: '1rem',\r\n    borderRadius: '5%'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(EditReservationModal);","export const cell = {\r\n  padding: '.3rem',\r\n  fontSize: '.8em',\r\n  textAlign: 'center',\r\n  border: '1px solid lightgrey',\r\n  width: '50px',\r\n};\r\n\r\nexport const button = {\r\n  '&:hover': {\r\n    opacity: .8,\r\n    cursor: 'pointer'\r\n  }\r\n};\r\n\r\nexport const disabled = {\r\n  '&:hover': {\r\n    cursor: 'not-allowed'\r\n  }\r\n};","import React from 'react';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport EditReservationModal from './EditReservationModal';\r\nimport * as ReservationStyles from './styles';\r\nimport { ReservationType } from '../../enums';\r\nimport L10n from '../../components/L10n';\r\n\r\nclass AdminReservation extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      modal: false\r\n    }\r\n  }\r\n\r\n  getCellLabel(reservation) {\r\n    if (reservation.type == ReservationType.COMPETITOR)\r\n      return (<L10n translate=\"ReservationType\">{ReservationType.COMPETITOR}</L10n>);\r\n    else if (reservation.type == ReservationType.USER && reservation.customer)\r\n      return (<span>{reservation.customer.name}</span>);\r\n    else\r\n      return (<L10n translate=\"ReservationType\">{reservation.type}</L10n>);\r\n  }\r\n\r\n  render() {\r\n    const { reservation, onChange, classes } = this.props;\r\n    let type = classes.free;\r\n    if (reservation.id) {\r\n      if ((reservation.type != ReservationType.GUEST || reservation.payments.length > 0)\r\n        && (reservation.type != ReservationType.USER || reservation.payments.length > 0))\r\n        type = classes.paidReservation;\r\n      else\r\n        type = classes.unpaidReservation;\r\n    }\r\n\r\n    if (reservation.type == ReservationType.SERVICE)\r\n      type = classes.unavaliable;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <TableCell\r\n          padding=\"none\"\r\n          className={type}\r\n          onClick={() => this.setState({ modal: true })}\r\n        >\r\n          {this.getCellLabel(reservation)}\r\n        </TableCell>\r\n\r\n        <EditReservationModal\r\n          reservation={reservation}\r\n          isOpen={this.state.modal}\r\n          onAction={(e) => {\r\n            onChange(e);\r\n            this.setState({ modal: false });\r\n          }}\r\n          onClose={() => this.setState({ modal: false })}\r\n        />\r\n\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  free: {\r\n    ...ReservationStyles.cell,\r\n    backgroundColor: '#fff',\r\n    color: theme.palette.primary.main,\r\n    '&:hover': {\r\n      backgroundColor: '#F3FBF0',\r\n      cursor: 'pointer',\r\n    }\r\n  },\r\n  unpaidReservation: {\r\n    ...ReservationStyles.cell,\r\n    ...ReservationStyles.button,\r\n    backgroundColor: theme.palette.secondary.light,\r\n    color: theme.palette.secondary.contrastText,\r\n  },\r\n  paidReservation: {\r\n    ...ReservationStyles.cell,\r\n    ...ReservationStyles.button,\r\n    backgroundColor: theme.palette.primary.light,\r\n    color: theme.palette.primary.contrastText\r\n  },\r\n  unavaliable: {\r\n    ...ReservationStyles.cell,\r\n    cursor: 'pointer',\r\n    color: theme.palette.secondary.main,\r\n    fontWeight: '700',\r\n    background: 'url(assets/empty.png)'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(AdminReservation);","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport { getHour } from '../../utils';\r\n\r\n\r\nclass ViewReservationModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      errors: []\r\n    }\r\n  }\r\n  makeReservation() {\r\n    return QueryService\r\n      .post(`/schedule/reservations`, this.props.reservation)\r\n      .then(_ => this.props.onAction())\r\n      .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  cancelReservation() {\r\n    return QueryService\r\n      .delete(`/schedule/reservations/${this.props.reservation.id}/cancel`)\r\n      .then(_ => this.props.onAction())\r\n      .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  render() {\r\n    const { reservation, isOpen, onClose, classes } = this.props;\r\n\r\n    return (\r\n      <Dialog open={isOpen} onClose={onClose}>\r\n        <DialogTitle>\r\n          <DialogContentText variant=\"headline\">\r\n            Резервация на\r\n            <span style={{ marginLeft: '.5rem' }}>\r\n              {reservation.court.name}\r\n            </span>\r\n          </DialogContentText>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Typography variant=\"caption\">\r\n            Час:\r\n            <Typography>{getHour(reservation.hour)} - {getHour(reservation.hour + 1)}</Typography>\r\n          </Typography>\r\n          {!reservation.id && <Typography variant=\"caption\">\r\n            Поради възможността от възникване на премествания, запазването на\r\n            корт не ви гарантира на 100%, че ще играете точно на този корт.\r\n          </Typography>}\r\n          {reservation.id && <Typography variant=\"caption\">\r\n            Имате право да откажете часът до 4 часа (8 часа за абонамент) преди неговото начало.\r\n            След това системата отчита вашият час като използван.\r\n            Ако имате абонамент, часът ще ви се брои като използван.\r\n          </Typography>}\r\n\r\n          {this.state.errors && this.state.errors.length > 0\r\n            && <div style={{ margin: '1rem 0', color: 'red' }}>\r\n              {this.state.errors.map((err, index) => {\r\n                return (\r\n                  <div key={index}><em>{index + 1}. {ErrorTexts[err]}</em></div>\r\n                );\r\n              })}\r\n            </div>}\r\n        </DialogContent>\r\n\r\n        {!reservation.id && <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.makeReservation()}>\r\n            Резервиране\r\n          </Button>\r\n          <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>}\r\n\r\n        {reservation.id && <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"outlined\" color=\"secondary\" className={classes.btn} onClick={() => this.cancelReservation()}>\r\n            Отмяна на резервацията\r\n          </Button>\r\n          <Button variant=\"contained\" color=\"secondary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>}\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst ErrorTexts = {\r\n  'exist': 'Резервация за този ден, час и корт вече съществува.',\r\n  'maxAllowedTimeDiff': 'Резервацията не може да бъде отказана, защото остават по-малко часове от минимално допустимите часове за отказ.',\r\n  'reservationInThePast': 'Часът за тази резервация вече е минал.'\r\n};\r\n\r\nconst styles = (theme) => ({\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(ViewReservationModal);","import React from 'react';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport ViewReservationModal from './ViewReservationModal';\r\nimport * as ReservationStyles from './styles';\r\nimport L10n from '../../components/L10n';\r\n\r\nclass UserReservation extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      modal: false\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { reservation, onChange, classes } = this.props;\r\n    let type = classes.free;\r\n\r\n    if (reservation.id)\r\n      type = classes.reserved;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <TableCell\r\n          padding=\"none\"\r\n          className={type}\r\n          onClick={() => this.setState({ modal: true })}\r\n        >\r\n          {reservation.id && <L10n\r\n            translate=\"CustomReservationType\"\r\n          >\r\n            {reservation.type}\r\n          </L10n>}\r\n        </TableCell>\r\n\r\n        <ViewReservationModal\r\n          reservation={reservation}\r\n          isOpen={this.state.modal}\r\n          onAction={(e) => {\r\n            onChange(e);\r\n            this.setState({ modal: false });\r\n          }}\r\n          onClose={() => this.setState({ modal: false })}\r\n        />\r\n\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  free: {\r\n    ...ReservationStyles.cell,\r\n    backgroundColor: '#fff',\r\n    color: theme.palette.primary.main,\r\n    '&:hover': {\r\n      backgroundColor: '#F3FBF0',\r\n      cursor: 'pointer',\r\n    }\r\n  },\r\n  reserved: {\r\n    ...ReservationStyles.cell,\r\n    ...ReservationStyles.button,\r\n    backgroundColor: theme.palette.primary.light,\r\n    color: theme.palette.primary.contrastText,\r\n  },\r\n  unavaliable: {\r\n    ...ReservationStyles.cell,\r\n    background: 'url(assets/empty.png)',\r\n    '&:hover': {\r\n      cursor: 'not-allowed'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(UserReservation);","import React from 'react';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport * as ReservationStyles from './styles';\r\nimport { ReservationType } from '../../enums';\r\nimport { dispatchEvent } from '../../services/events.service';\r\n\r\nclass GuestReservation extends React.Component {\r\n  render() {\r\n    const { reservation, available, classes } = this.props;\r\n    let type = classes.free;\r\n    if (reservation.id)\r\n      type = classes.taken;\r\n\r\n    if (!available || reservation.type == ReservationType.SERVICE)\r\n      type = classes.unavaliable;\r\n\r\n    return (\r\n      <TableCell padding=\"none\" className={type} onClick={() => this.promptLogin()}></TableCell>\r\n    );\r\n  }\r\n\r\n  promptLogin() {\r\n    if (this.props.available)\r\n      dispatchEvent('menu-login');\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  free: {\r\n    ...ReservationStyles.cell,\r\n    backgroundColor: '#fff',\r\n    color: theme.palette.primary.main,\r\n  },\r\n  taken: {\r\n    ...ReservationStyles.cell,\r\n    backgroundColor: theme.palette.secondary.light,\r\n    color: theme.palette.secondary.contrastText,\r\n  },\r\n  unavaliable: {\r\n    ...ReservationStyles.cell,\r\n    background: 'url(assets/empty.png)',\r\n    '&:hover': {\r\n      cursor: 'not-allowed'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(GuestReservation);","import React from 'react';\r\n\r\nimport { ApplicationMode, ReservationType } from '../../enums';\r\nimport UserService from '../../services/user.service';\r\nimport AdminReservation from './AdminReservation';\r\nimport UserReservation from './UserReservation';\r\nimport GuestReservation from './GuestReservation';\r\n\r\nclass Reservation extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: null\r\n    };\r\n  }\r\n\r\n  setUser() {\r\n    UserService.getAuthenticatedUser()\r\n      .then(user => this.setState({ user }));\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setUser();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.mode != this.props.mode)\r\n      this.setUser();\r\n  }\r\n\r\n  render() {\r\n    const { reservation, mode } = this.props;\r\n    const { user } = this.state;\r\n\r\n    const available = reservation.hour <= reservation.court.workingHoursEnd - 1\r\n      && reservation.hour >= reservation.court.workingHoursStart;\r\n\r\n    if (!available)\r\n      return <GuestReservation {...this.props} available={available} />;\r\n\r\n    if (mode == ApplicationMode.ADMIN)\r\n      return <AdminReservation {...this.props} />;\r\n\r\n    if (mode == ApplicationMode.GUEST)\r\n      return <GuestReservation {...this.props} available={available} />\r\n\r\n    if (user && user.isTrainer && reservation.type == ReservationType.COMPETITOR)\r\n      return <UserReservation {...this.props} />\r\n\r\n    if (!reservation.id)\r\n      return <UserReservation {...this.props} />\r\n\r\n    if (reservation.customerId && user && reservation.customerId == user.id)\r\n      return <UserReservation {...this.props} />\r\n\r\n    return <GuestReservation {...this.props} available={available} />;\r\n  }\r\n}\r\n\r\nexport default Reservation;","import React from 'react';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport * as ReservationStyles from './styles';\r\nimport { l10n_text } from '../../components/L10n';\r\nimport { ReservationType } from '../../enums';\r\n\r\nclass ShuffleItem extends React.Component {\r\n\r\n  select() {\r\n    const { reservation, shuffle, onSelect, onUnselect } = this.props;\r\n    const index = this.findIndex(reservation, shuffle);\r\n\r\n    if (index != -1)\r\n      onUnselect(index);\r\n    else onSelect(reservation);\r\n  }\r\n\r\n  findIndex(reservation, shuffle) {\r\n    return shuffle.findIndex(e => e.date == reservation.date && e.hour == reservation.hour && e.courtId == reservation.courtId);\r\n  }\r\n\r\n  render() {\r\n    const { reservation, shuffle, classes } = this.props;\r\n    const available = reservation.hour <= reservation.court.workingHoursEnd - 1\r\n      && reservation.hour >= reservation.court.workingHoursStart;\r\n\r\n    if (!available)\r\n      return <TableCell padding=\"none\" className={classes.unavaliable}></TableCell>;\r\n\r\n    let type = classes.free;\r\n\r\n    if (this.findIndex(reservation, shuffle) != -1)\r\n      type = classes.selected;\r\n\r\n    if (!reservation.id)\r\n      return (\r\n        <TableCell padding=\"none\" className={type} onClick={() => this.select()}>\r\n        </TableCell>\r\n      );\r\n\r\n    if (type == classes.free)\r\n      type = classes.taken\r\n\r\n    if (reservation.type == ReservationType.USER || reservation.type == ReservationType.SUBSCRIPTION)\r\n      return (\r\n        <TableCell padding=\"none\" className={type} onClick={() => this.select()}>\r\n          {type != classes.free && reservation.customer && <span>{reservation.customer.name}</span>}\r\n        </TableCell>\r\n      );\r\n\r\n    return (\r\n      <TableCell padding=\"none\" className={type} onClick={() => this.select()}>\r\n        {type != classes.free\r\n          && <span>{l10n_text(reservation.type, \"ReservationType\")}</span>}\r\n      </TableCell>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst styles = (theme) => ({\r\n  free: {\r\n    ...ReservationStyles.cell,\r\n    ...ReservationStyles.button,\r\n    backgroundColor: '#fff',\r\n    color: theme.palette.primary.main,\r\n  },\r\n  taken: {\r\n    ...ReservationStyles.cell,\r\n    ...ReservationStyles.button,\r\n    backgroundColor: theme.palette.secondary.light,\r\n    color: theme.palette.secondary.contrastText,\r\n  },\r\n  unavaliable: {\r\n    ...ReservationStyles.cell,\r\n    background: 'url(assets/empty.png)',\r\n    '&:hover': {\r\n      cursor: 'not-allowed'\r\n    }\r\n  },\r\n  service: {\r\n    ...ReservationStyles.cell,\r\n    ...ReservationStyles.button,\r\n    color: theme.palette.secondary.main,\r\n    fontWeight: '700',\r\n    background: 'url(assets/empty.png)'\r\n  },\r\n  selected: {\r\n    ...ReservationStyles.cell,\r\n    ...ReservationStyles.button,\r\n    backgroundColor: theme.palette.primary.main,\r\n    color: theme.palette.primary.contrastText\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(ShuffleItem);","import moment from 'moment';\r\nimport React from 'react';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { ApplicationMode } from '../../enums';\r\n\r\nclass DateComponent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      selected: new Date().getDate() - 1,\r\n      previousSelected: null\r\n    };\r\n    this.weekDays = ['нед', 'пон', 'втор', 'ср', 'четв', 'пет', 'съб'];\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ selected: this.props.day - 1 });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.month != this.props.month || prevProps.year != this.props.year) {\r\n      if (this.state.previousSelected\r\n        && this.state.previousSelected.get('year') == this.props.year\r\n        && this.state.previousSelected.get('month') == this.props.month) {\r\n        this.props.onChange(this.state.previousSelected)\r\n        this.setState({\r\n          selected: this.state.previousSelected.get('date') - 1,\r\n          previousSelected: null\r\n        });\r\n      }\r\n\r\n      else if (this.state.previousSelected == null)\r\n        this.setState({\r\n          selected: false,\r\n          previousSelected: moment({ year: prevProps.year, month: prevProps.month, date: this.state.selected + 1 })\r\n        });\r\n      else\r\n        this.setState({ selected: false });\r\n    }\r\n  }\r\n\r\n  getLabel(day) {\r\n    let date = new Date(this.props.year, this.props.month, day);\r\n\r\n    return (\r\n      <div>\r\n        {day < 10 ? '0' : ''}\r\n        {day}\r\n        <div>{this.weekDays[date.getDay()]}</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getDays() {\r\n    const { year, month } = this.props;\r\n\r\n    const monthSizes = [31,\r\n      (year % 100 != 0\r\n        && (year % 4 == 0\r\n          || year % 400 == 0) ? 29 : 28),\r\n      31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\n\r\n    const start = 1;\r\n    const end = monthSizes[month];\r\n\r\n    return [...new Array(end - start + 1).keys()].map(k => k + start);\r\n  }\r\n\r\n  isDisabled(day) {\r\n    if (this.props.mode == ApplicationMode.ADMIN)\r\n      return false;\r\n    const { year, month, availiableDaysAhead } = this.props;\r\n    const MS_PER_DAY = 1000 * 60 * 60 * 24;\r\n\r\n    // Discard the time and time-zone information.\r\n    const targetDate = new Date(year, month, day);\r\n    const today = new Date();\r\n    const diff = Math.floor((today - targetDate) / MS_PER_DAY);\r\n    return diff > 0 || diff < -availiableDaysAhead;\r\n  }\r\n\r\n  isToday(day) {\r\n    const { year, month } = this.props;\r\n    const today = new Date();\r\n    return year == today.getFullYear() && month == today.getMonth() && day == today.getDate();\r\n  }\r\n\r\n  render() {\r\n    const { year, month, classes, onChange } = this.props;\r\n    const today = new Date().getDate();\r\n\r\n    return (\r\n      <Tabs\r\n        classes={{\r\n          root: classes.tabsRoot,\r\n          scroller: classes.tabsScroller,\r\n          indicator: classes.tabsIndicator,\r\n          scrollButtons: classes.tabsScrollButtons\r\n        }}\r\n        value={this.state.selected}\r\n        onChange={(_, value) => {\r\n          this.setState({ selected: value });\r\n          onChange(moment({ year, month, date: value + 1 }));\r\n        }}\r\n        variant=\"scrollable\"\r\n        scrollButtons=\"on\">\r\n        {this.getDays().map(day => {\r\n          let rootClass = classes.tab;\r\n          if (this.isToday(day) && this.state.selected != (today - 1))\r\n            rootClass = rootClass + ` ${classes.todayTab}`;\r\n\r\n          return (\r\n            <Tab\r\n              classes={{\r\n                root: rootClass,\r\n                selected: classes.selectedTab,\r\n                disabled: classes.disabledTab,\r\n                labelContainer: classes.labelContainer\r\n              }}\r\n              disabled={this.isDisabled(day)}\r\n              key={day}\r\n              label={this.getLabel(day)}\r\n            />\r\n          );\r\n        })}\r\n      </Tabs>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => {\r\n  return {\r\n    tabsRoot: {\r\n    },\r\n    labelContainer: {\r\n      padding: '.5rem 0'\r\n    },\r\n    tab: {\r\n      backgroundColor: 'white',\r\n      color: theme.palette.primary.dark,\r\n      [theme.breakpoints.down('xl')]: {\r\n        width: '60px',\r\n        minWidth: '0px',\r\n        minHeight: '0px',\r\n        fontWeight: 700,\r\n        border: '.5px solid lightgrey',\r\n      }\r\n    },\r\n    selectedTab: {\r\n      backgroundColor: theme.palette.primary.main,\r\n      color: theme.palette.primary.contrastText,\r\n      border: 'none'\r\n    },\r\n    todayTab: {\r\n      backgroundColor: theme.palette.secondary.main,\r\n      color: theme.palette.primary.contrastText,\r\n      border: 'none'\r\n    },\r\n    disabledTab: {\r\n      color: 'grey',\r\n      fontWeight: 500,\r\n      backgroundColor: 'whitesmoke'\r\n    },\r\n    tabsScroller: {\r\n      [theme.breakpoints.up('md')]: {\r\n        overflow: 'hidden'\r\n      }\r\n    },\r\n    tabsIndicator: {\r\n      backgroundColor: theme.palette.primary.main\r\n    },\r\n    tabsScrollButtons: {\r\n      color: theme.palette.primary.main,\r\n      flexBasis: '30px'\r\n    }\r\n  };\r\n};\r\n\r\nexport default withStyles(styles)(DateComponent);","import moment from 'moment';\r\nimport React from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport UserService from '../../services/user.service';\r\nimport DateComponent from './DateComponent';\r\nimport { getRange } from '../../utils';\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    paddingLeft: '1.3rem',\r\n    paddingRight: '2.3rem',\r\n    display: 'flex',\r\n    [theme.breakpoints.down('xs')]: {\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  formControl: {\r\n    width: '120px',\r\n    margin: '.5rem',\r\n    [theme.breakpoints.down('xs')]: {\r\n      margin: '.5rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nclass Calendar extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const today = moment().startOf('date');\r\n    this.state = {\r\n      year: today.get('year'),\r\n      month: today.get('month'),\r\n      day: today.get('date'),\r\n      date: today\r\n    };\r\n\r\n    this.years = getRange(2016, moment().get('year') + 2);\r\n    this.monts = ['Януари', 'Февруари', 'Март', 'Април', 'Май', 'Юни', 'Юли', 'Август', 'Септември', 'Октомври', 'Ноември', 'Декември'];\r\n\r\n    this.handleChange = (prop) => (e) => {\r\n      const state = this.state;\r\n      state[prop] = e.target.value;\r\n      this.setState(state);\r\n      if (this.props.emitDateOnAnyChange)\r\n        this.props.onChange(moment(state.date).set(prop, state[prop]));\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      year: this.props.value.get('year'),\r\n      month: this.props.value.get('month'),\r\n      day: this.props.value.get('date')\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { classes, onChange } = this.props;\r\n    const { year, month, day } = this.state;\r\n\r\n    return (\r\n      <div style={{ marginBottom: '1rem' }}>\r\n        <div className={classes.root}>\r\n          <FormControl className={classes.formControl}>\r\n            <Select\r\n              value={month}\r\n              onChange={this.handleChange('month')}\r\n            >\r\n              {this.monts.map((month, index) => {\r\n                return (\r\n                  <MenuItem key={index} value={index}>{month}</MenuItem>\r\n                );\r\n              })}\r\n            </Select>\r\n          </FormControl>\r\n          <FormControl className={classes.formControl}>\r\n            <Select\r\n              value={year}\r\n              onChange={this.handleChange('year')}\r\n            >\r\n              {this.years.map(year => {\r\n                return (\r\n                  <MenuItem key={year} value={year}>{year}</MenuItem>\r\n                );\r\n              })}\r\n            </Select>\r\n          </FormControl>\r\n        </div>\r\n\r\n        <UserService.WithApplicationMode>\r\n          {mode => <DateComponent\r\n            year={year}\r\n            month={month}\r\n            day={day}\r\n            availiableDaysAhead={14}\r\n            mode={mode}\r\n            onChange={(date) => {\r\n              this.setState({ date });\r\n              return onChange(date);\r\n            }}\r\n          />}\r\n        </UserService.WithApplicationMode>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(Calendar);","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    display: 'inline-flex',\r\n    flexDirection: 'column'\r\n  },\r\n  item: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    marginBottom: '.3rem',\r\n    '& div': {\r\n      width: '100px',\r\n      height: '20px',\r\n      border: '1px solid lightgrey'\r\n    }\r\n  },\r\n  reserved: {\r\n    backgroundColor: theme.palette.primary.light\r\n  },\r\n  taken: {\r\n    backgroundColor: theme.palette.secondary.light\r\n  },\r\n  unavailiable: {\r\n    background: 'url(assets/empty.png)'\r\n  }\r\n});\r\n\r\nclass Legend extends React.Component {\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        <div className={classes.item}>\r\n          <div></div>\r\n          <Typography variant=\"caption\"> - свободен час</Typography>\r\n        </div>\r\n        <div className={classes.item}>\r\n          <div className={classes.reserved}></div>\r\n          <Typography variant=\"caption\"> - резервиран от потребителя</Typography>\r\n        </div>\r\n        <div className={classes.item}>\r\n          <div className={classes.taken}></div>\r\n          <Typography variant=\"caption\"> - зает час</Typography>\r\n        </div>\r\n        <div className={classes.item}>\r\n          <div className={classes.unavailiable}></div>\r\n          <Typography variant=\"caption\"> - затворено игрище</Typography>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(Legend);","import moment from 'moment';\r\nimport React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport ReplayIcon from '@material-ui/icons/Replay';\r\nimport ShuffleIcon from '@material-ui/icons/Shuffle';\r\nimport { Button } from '@material-ui/core';\r\n\r\nimport QueryService from '../services/query.service';\r\nimport UserService from '../services/user.service';\r\nimport Reservation from './reservation/Reservation';\r\nimport ShuffleItem from './reservation/ShuffleItem';\r\nimport Calendar from '../components/calendar/Calendar';\r\nimport Legend from './Legend';\r\nimport ConfirmationDialog from '../components/ConfirmationDialog';\r\nimport AsyncSelect from '../components/select/AsyncSelect';\r\nimport { getHour, getRange } from '../utils';\r\nimport { ApplicationMode } from '../enums';\r\nimport { catchEvent } from '../services/events.service';\r\n\r\nconst scrollButton = (theme) => ({\r\n  zIndex: 1100,\r\n  backgroundColor: theme.palette.primary.main,\r\n  color: theme.palette.primary.contrastText,\r\n  position: 'absolute',\r\n  boxShadow: `0 0 20px ${theme.palette.primary.dark}`,\r\n  borderRadius: '50%',\r\n  padding: '8px',\r\n  display: 'flex',\r\n  alignItems: 'center',\r\n  opacity: '.9'\r\n});\r\n\r\nconst styles = (theme) => ({\r\n  hours: {\r\n    width: '10px',\r\n    textAlign: 'center'\r\n  },\r\n  disabled: {\r\n    cursor: 'not-allowed',\r\n    opacity: .5\r\n  },\r\n  scrollLeft: {\r\n    ...scrollButton(theme),\r\n    top: '50%',\r\n    left: '5px'\r\n  },\r\n  scrollRight: {\r\n    ...scrollButton(theme),\r\n    top: '50%',\r\n    right: '5px'\r\n  }\r\n});\r\n\r\n\r\nclass Schedule extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      administrator: null,\r\n      counter: 0,\r\n      season: null,\r\n      courts: [],\r\n      reservations: [],\r\n      date: moment().startOf('date'),\r\n      shuffle: null\r\n    };\r\n\r\n    const rootRef = document.getElementById('root');\r\n    rootRef.onscroll = () => {\r\n      if (!this.tableRef)\r\n        return;\r\n\r\n      const needScrollBtns = rootRef.clientWidth <= 600;\r\n      const tableInViewport = rootRef.scrollTop + 200 >= this.tableRef.offsetTop;\r\n\r\n      if (needScrollBtns && tableInViewport)\r\n        this.btnContainerRef.style.display = 'block';\r\n      else\r\n        this.btnContainerRef.style.display = 'none';\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    catchEvent('login', () => this.getAdministrator());\r\n    this.getAdministrator();\r\n    this.getConfig();\r\n    this.getData(this.state.date);\r\n  }\r\n\r\n  getAdministrator() {\r\n    return UserService.getAuthenticatedUser()\r\n      .then(user => this.setState({ administrator: user }));\r\n  }\r\n\r\n  getConfig() {\r\n    return QueryService\r\n      .get(`/schedule/config`)\r\n      .then(config => this.setState(config));\r\n  }\r\n\r\n  getData(date) {\r\n    return QueryService\r\n      .post(`/schedule/reservations/filter`, { date: date.format('YYYY-MM-DD') })\r\n      .then(reservations => this.setState({ reservations }));\r\n  }\r\n\r\n  getReservation(hour, court) {\r\n    const sameReservation = (e) => {\r\n      return e.courtId == court.id && e.hour == hour\r\n    };\r\n\r\n    const existing = this.state.reservations.find(e => sameReservation(e));\r\n    return (existing || this.constructReservation(this.state.date, hour, court));\r\n  }\r\n\r\n  shuffle() {\r\n    const shuffle = this.state.shuffle;\r\n    if (!shuffle || shuffle.length < 2)\r\n      return;\r\n\r\n    this.setState({ shuffleErrors: null });\r\n\r\n    return QueryService\r\n      .post('/schedule/shuffle', shuffle)\r\n      .then(_ => {\r\n        this.getData(this.state.date);\r\n        this.setState({ shuffle: null });\r\n      })\r\n      .catch(err => this.setState({ shuffleErrors: err }));\r\n  }\r\n\r\n  shuffleOnSelect(item) {\r\n    const shuffle = this.state.shuffle;\r\n    shuffle.unshift(item);\r\n    shuffle.splice(2, 1);\r\n    this.setState({ shuffle });\r\n  }\r\n\r\n  shuffleOnUnselect(index) {\r\n    const shuffle = this.state.shuffle;\r\n    shuffle.splice(index, 1);\r\n    this.setState({ shuffle });\r\n  }\r\n\r\n  constructReservation(date, hour, court) {\r\n    return {\r\n      date: date.format('YYYY-MM-DD'),\r\n      hour: hour,\r\n      court: court,\r\n      courtId: court.id,\r\n      season: this.state.season,\r\n      seasonId: this.state.season.id,\r\n      administrator: this.state.administrator,\r\n      info: '',\r\n      type: '',\r\n      payments: []\r\n    }\r\n  }\r\n\r\n  scroll(mode) {\r\n    if (mode === 'left')\r\n      this.tableRef.scrollLeft = this.tableRef.scrollLeft - 300;\r\n    if (mode === 'right')\r\n      this.tableRef.scrollLeft = this.tableRef.scrollLeft + 300;\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { season, courts, date } = this.state;\r\n\r\n    if (!season)\r\n      return <Paper style={{ padding: '1rem' }} className=\"container\">\r\n        <Typography variant=\"headline\" align=\"center\" color=\"secondary\">Няма текущ сезон</Typography>\r\n      </Paper>\r\n\r\n    return (\r\n      <UserService.WithApplicationMode>\r\n        {mode => <div className=\"container\">\r\n          <Paper style={{ padding: '1rem' }}>\r\n            <Typography align=\"center\" variant=\"headline\" gutterBottom={true}>\r\n              График - {date.format('DD.MM.YYYY')}\r\n            </Typography>\r\n            <Calendar\r\n              value={date}\r\n              onChange={date => {\r\n                this.setState({ date, shuffle: null });\r\n                this.getData(date);\r\n              }}\r\n            />\r\n\r\n            <Legend />\r\n            <div>\r\n              <Button variant=\"outlined\" color=\"primary\" size=\"small\"\r\n                style={{ marginRight: '.3rem' }}\r\n                onClick={() => this.getData(date)}\r\n              >\r\n                <ReplayIcon />\r\n                <span style={{ marginLeft: '.3rem' }}>Презареди</span>\r\n              </Button>\r\n\r\n              {mode == ApplicationMode.ADMIN\r\n                && <React.Fragment>\r\n                  {this.state.shuffle\r\n                    && <React.Fragment>\r\n                      <ConfirmationDialog\r\n                        title=\"Разместване на резервации\"\r\n                        body={<Typography>Сигурни ли сте че искате да направите разместването?</Typography>}\r\n                        onAccept={() => this.shuffle()}\r\n                      >\r\n                        <Button variant=\"contained\" color=\"primary\">\r\n                          Запис\r\n                      </Button>\r\n                      </ConfirmationDialog>\r\n                      <Button variant=\"outlined\" color=\"primary\"\r\n                        style={{ marginLeft: '.3rem' }}\r\n                        onClick={() => this.setState({ shuffle: null, shuffleErrors: null })}\r\n                      >\r\n                        Отказ\r\n                      </Button>\r\n                    </React.Fragment>}\r\n                  {!this.state.shuffle && <Button variant=\"outlined\" color=\"primary\" size=\"small\" onClick={() => this.setState({ shuffle: [] })}>\r\n                    <ShuffleIcon />\r\n                    Разместване\r\n                  </Button>}\r\n                  <div style={{ position: 'relative' }}>\r\n                    <AsyncSelect\r\n                      label=\"Сезон\"\r\n                      disableClear={true}\r\n                      disableSearch={true}\r\n                      value={season}\r\n                      query=\"seasons\"\r\n                      formatOptionLabel={(option) => <Typography component=\"span\">\r\n                        {option.name}\r\n                      </Typography>}\r\n                      onChange={season => this.setState({ season })}\r\n                    />\r\n                  </div>\r\n\r\n                </React.Fragment>}\r\n            </div>\r\n\r\n            {this.state.shuffleErrors\r\n              && <div style={{ margin: '1rem 0', color: 'red' }}>\r\n                <span><em>{ErrorTexts[this.state.shuffleErrors.message]}</em></span>\r\n              </div>}\r\n\r\n\r\n\r\n            <div style={{ overflowX: 'auto', scrollBehavior: 'smooth' }} ref={ref => this.tableRef = ref}>\r\n\r\n              <div ref={ref => this.btnContainerRef = ref} style={{ display: 'none' }}>\r\n                <div className={classes.scrollLeft} onClick={() => this.scroll('left')} >\r\n                  <ChevronLeftIcon />\r\n                </div>\r\n\r\n                <div className={classes.scrollRight} onClick={() => this.scroll('right')}>\r\n                  <ChevronRightIcon />\r\n                </div>\r\n              </div>\r\n\r\n              <Table style={{ minWidth: '600px' }} >\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell padding=\"none\" style={{ textAlign: 'center' }}>Час\\Корт</TableCell>\r\n                    {courts.map(court => {\r\n                      return (\r\n                        <TableCell\r\n                          padding=\"none\"\r\n                          style={{ textAlign: 'center' }}\r\n                          key={court.id}\r\n                        >\r\n                          {court.name}\r\n                        </TableCell>\r\n                      );\r\n                    })}\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {getRange(season.workingHoursStart, season.workingHoursEnd - 1).map(hour => {\r\n                    return (\r\n                      <TableRow key={hour}>\r\n                        <TableCell padding=\"none\"\r\n                          classes={{\r\n                            root: classes.hours\r\n                          }}\r\n                        >\r\n                          {getHour(hour)}\r\n                        </TableCell>\r\n\r\n                        {courts.map(court => {\r\n                          if (!this.state.shuffle)\r\n                            return (\r\n                              <Reservation\r\n                                mode={mode}\r\n                                key={court.id}\r\n                                season={this.state.season}\r\n                                reservation={this.getReservation(hour, court)}\r\n                                onChange={_ => this.getData(date)}\r\n                              />\r\n                            );\r\n                          else\r\n                            return (\r\n                              <ShuffleItem\r\n                                key={court.id}\r\n                                shuffle={this.state.shuffle}\r\n                                reservation={this.getReservation(hour, court)}\r\n                                onSelect={(e) => this.shuffleOnSelect(e)}\r\n                                onUnselect={(e) => this.shuffleOnUnselect(e)}\r\n                              />\r\n                            )\r\n                        })}\r\n                      </TableRow>\r\n                    );\r\n                  })}\r\n                </TableBody>\r\n              </Table>\r\n            </div>\r\n          </Paper>\r\n        </div>}\r\n      </UserService.WithApplicationMode>\r\n    );\r\n  }\r\n}\r\n\r\nconst ErrorTexts = {\r\n  'invalid': 'Моля изберете две полета за резервация',\r\n  'invalidTime': 'Не може да резмествате вече минали резервации'\r\n};\r\n\r\nexport default withStyles(styles)(Schedule);","import React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport { getHour } from '../../utils';\r\n\r\nconst styles = () => ({\r\n  card: {\r\n    width: '250px',\r\n    margin: '1rem',\r\n    padding: '1rem',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between'\r\n  },\r\n  cardActions: {\r\n    display: 'flex',\r\n    justifyContent: 'flex-start'\r\n  },\r\n  cardContent: {\r\n    paddingBottom: '0'\r\n  }\r\n});\r\n\r\nclass CourtItem extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      mode: 'view'\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.props.court.id)\r\n      this.setState({ mode: 'create' });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.court != this.props.court)\r\n      if (!this.props.court.id)\r\n        this.setState({ mode: 'create' });\r\n  }\r\n\r\n  handleCancel() {\r\n    if (this.state.mode == 'edit')\r\n      this.setState({ mode: 'view' });\r\n    else this.props.onCreateCancel();\r\n  }\r\n\r\n  render() {\r\n    const { mode } = this.state;\r\n    const { classes, court } = this.props;\r\n\r\n    if (mode != 'view')\r\n      return <CourtEdit\r\n        mode={mode}\r\n        court={court}\r\n        onChange={model => {\r\n          this.setState({ mode: 'view' });\r\n          this.props.onChange(model);\r\n        }}\r\n        onCancel={() => this.handleCancel()}\r\n      />;\r\n    else\r\n      return (\r\n        <Card classes={{ root: classes.card }} style={{ opacity: court.isActive ? 1 : .5 }}>\r\n          <CardContent classes={{ root: classes.cardContent }}>\r\n            <Typography variant=\"title\" style={{ display: 'flex', alignItems: 'center' }}>\r\n              {court.name}\r\n              {!court.isActive && <Typography variant=\"caption\">(неактивен)</Typography>}\r\n            </Typography>\r\n            <Typography variant=\"caption\">{court.info}</Typography>\r\n            <Typography variant=\"subheading\" style={{ paddingRight: '1rem' }}>\r\n              Работно време:\r\n              <Typography>{getHour(court.workingHoursStart)} - {getHour(court.workingHoursEnd)}</Typography>\r\n            </Typography>\r\n          </CardContent>\r\n          <CardActions classes={{ root: classes.cardActions }}>\r\n            <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.setState({ mode: 'edit' })}>Промяна</Button>\r\n          </CardActions>\r\n        </Card >\r\n      );\r\n  }\r\n}\r\n\r\nclass CourtEdit extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: null,\r\n      name: '',\r\n      info: '',\r\n      isActive: true,\r\n      workingHoursStart: '',\r\n      workingHoursEnd: ''\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState(this.props.court);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.court != this.props.court)\r\n      this.setState(this.props.court);\r\n  }\r\n\r\n  cancel() {\r\n    this.setState(this.props.court);\r\n    this.props.onCancel();\r\n  }\r\n\r\n  save() {\r\n    if (this.state.id)\r\n      return QueryService\r\n        .post(`/schedule/courts/${this.state.id}`, this.state)\r\n        .then(e => this.props.onChange(e))\r\n        .catch(err => console.log('ERR:', err));\r\n    else\r\n      return QueryService\r\n        .post(`/schedule/courts`, this.state)\r\n        .then(e => this.props.onChange(e))\r\n        .catch(err => console.log('ERR:', err));\r\n  }\r\n\r\n  render() {\r\n    const { mode } = this.props;\r\n\r\n    return (\r\n      <Paper style={{ flexBasis: '250px', display: 'flex', flexDirection: 'column', padding: '2rem' }}>\r\n        {mode == 'create' && <Typography align=\"center\" variant=\"headline\">Нов корт</Typography>}\r\n        {mode == 'edit' && <Typography align=\"center\" variant=\"headline\">Промяна на корт</Typography>}\r\n\r\n\r\n        <FormControlLabel\r\n          control={\r\n            <Switch\r\n              checked={this.state.isActive}\r\n              onChange={e => this.setState({ isActive: e.target.value === 'true' })}\r\n              value={this.state.isActive ? 'false' : 'true'}\r\n              color=\"primary\"\r\n            />\r\n          }\r\n          label=\"Активен\"\r\n        />\r\n\r\n        <TextField\r\n          id=\"name\"\r\n          label=\"Наименование\"\r\n          value={this.state.name}\r\n          onChange={(e) => this.setState({ name: e.target.value })}\r\n        />\r\n        <TextField\r\n          id=\"info\"\r\n          label=\"Информация\"\r\n          multiline\r\n          rowsMax=\"4\"\r\n          value={this.state.info}\r\n          onChange={(e) => this.setState({ info: e.target.value })}\r\n        />\r\n\r\n        <TextField\r\n          id=\"workingHoursStart\"\r\n          label=\"Работно време ОТ\"\r\n          type=\"number\"\r\n          value={this.state.workingHoursStart}\r\n          onChange={(e) => this.setState({ workingHoursStart: e.target.value })}\r\n        />\r\n\r\n        <TextField\r\n          id=\"workingHoursEnd\"\r\n          label=\"Работно време ДО\"\r\n          type=\"number\"\r\n          value={this.state.workingHoursEnd}\r\n          onChange={(e) => this.setState({ workingHoursEnd: e.target.value })}\r\n        />\r\n\r\n        {this.props.mode == 'create' && <div style={{ margin: '1rem 0 0 0' }}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem .5rem 0 0' }}\r\n            onClick={() => this.save()}\r\n          >\r\n            Създаване\r\n          </Button>\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem 0 0 0' }}\r\n            onClick={() => this.cancel()}\r\n          >\r\n            Отказ\r\n          </Button>\r\n        </div>}\r\n\r\n        {this.props.mode == 'edit' && <div>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem .5rem 0 0' }}\r\n            onClick={() => this.save()}\r\n          >\r\n            Запис\r\n          </Button>\r\n\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem 0 0 0' }}\r\n            onClick={() => this.cancel()}\r\n          >\r\n            Отказ\r\n          </Button>\r\n        </div>}\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(CourtItem);","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport CourtItem from './CourtItem';\r\n\r\nconst styles = () => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'center'\r\n  }\r\n});\r\n\r\nclass Courts extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      courts: []\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    return QueryService\r\n      .get(`/schedule/courts`)\r\n      .then(e => this.setState({ courts: e }));\r\n  }\r\n\r\n  updateModel(model, index) {\r\n    const courts = this.state.courts;\r\n    courts[index] = model;\r\n    this.setState({ courts });\r\n  }\r\n\r\n  addCourt() {\r\n    const courts = this.state.courts;\r\n    if (courts.length > 0 && !courts[0].id)\r\n      return;\r\n    const court = {\r\n      info: '',\r\n      name: '',\r\n      isActive: true,\r\n      workingHoursStart: '',\r\n      workingHoursEnd: ''\r\n    };\r\n\r\n\r\n    courts.unshift(court);\r\n\r\n    this.setState({ courts: courts });\r\n  }\r\n\r\n  removeCourt(index) {\r\n    const courts = this.state.courts;\r\n    courts.splice(index, 1);\r\n    this.setState({ courts: courts });\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <Button variant=\"contained\" size=\"medium\" color=\"primary\" onClick={() => this.addCourt()} style={{ marginBottom: '.5rem' }}>\r\n          Добави корт\r\n        </Button>\r\n        <div className={classes.root}>\r\n          {this.state.courts.map((court, index) => {\r\n            return (\r\n              <CourtItem\r\n                key={court.id || 0}\r\n                court={court}\r\n                onChange={model => this.updateModel(model, index)}\r\n                onCreateCancel={() => this.removeCourt(index)}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(Courts);","import React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport DatePicker from 'material-ui-pickers/DatePicker';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport ConfirmationDialog from '../../components/ConfirmationDialog';\r\nimport QueryService from '../../services/query.service';\r\nimport { getHour } from '../../utils';\r\n\r\nconst styles = () => ({\r\n  card: {\r\n    width: '250px',\r\n    margin: '1rem',\r\n    padding: '1rem',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between'\r\n  },\r\n  cardActions: {\r\n    display: 'flex',\r\n    justifyContent: 'flex-start'\r\n  },\r\n  cardContent: {\r\n    paddingBottom: '0'\r\n  }\r\n});\r\n\r\nclass SeasonItem extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      mode: 'view',\r\n      loading: false,\r\n      error: null\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.props.season.id)\r\n      this.setState({ mode: 'create' });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.season != this.props.season)\r\n      if (!this.props.season.id)\r\n        this.setState({ mode: 'create' });\r\n  }\r\n\r\n  handleCancel() {\r\n    if (this.state.mode == 'edit')\r\n      this.setState({ mode: 'view' });\r\n    else this.props.onCreateCancel();\r\n  }\r\n\r\n  onDelete() {\r\n    this.setState({ loading: true });\r\n\r\n    QueryService.delete(`/schedule/seasons/${this.props.season.id}`)\r\n      .then(() => {\r\n        this.setState({ loading: false });\r\n        this.props.onDelete()\r\n      })\r\n      .catch(error => {\r\n        this.setState({ loading: false, error });\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { mode } = this.state;\r\n    const { classes, season } = this.props;\r\n\r\n    if (mode != 'view')\r\n      return <SeasonEdit\r\n        mode={mode}\r\n        season={season}\r\n        onChange={model => {\r\n          this.setState({ mode: 'view' });\r\n          this.props.onChange(model);\r\n        }}\r\n        onCancel={() => this.handleCancel()}\r\n      />;\r\n    else\r\n      return (\r\n        <Card classes={{ root: classes.card }}>\r\n          <CardContent classes={{ root: classes.cardContent }}>\r\n            <Typography variant=\"title\" style={{ display: 'flex', alignItems: 'center' }}>\r\n              {season.name}\r\n            </Typography>\r\n            <Typography variant=\"caption\">{season.info}</Typography>\r\n            <Typography style={{ margin: '.3rem 0' }}>\r\n              {new Date(season.seasonStart).toLocaleDateString()} - {new Date(season.seasonEnd).toLocaleDateString()}\r\n            </Typography>\r\n            <Typography variant=\"subheading\" style={{ paddingRight: '1rem' }}>\r\n              Работно време:\r\n              <Typography>{getHour(season.workingHoursStart)} - {getHour(season.workingHoursEnd)}</Typography>\r\n            </Typography>\r\n          </CardContent>\r\n          <CardActions classes={{ root: classes.cardActions }}>\r\n            <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.setState({ mode: 'edit' })}>Промяна</Button>\r\n            <ConfirmationDialog\r\n              title=\"Изтриване на сезон\"\r\n              body={\r\n                <React.Fragment>\r\n                  <Typography>Сигурни ли сте че искате да изтриете сезон \"{season.name}\"</Typography>\r\n                  <Typography variant=\"caption\">Това ще доведе до изтриване на всички данни за резервации,\r\n                  плащания на часове и абонаменти свързани с този сезон.\r\n                  Информацията която ще бъде изтрита няма да може да бъде възвърната</Typography>\r\n                </React.Fragment>\r\n              }\r\n              onAccept={() => this.onDelete()}\r\n            >\r\n              {!this.state.loading && <Button variant=\"contained\" color=\"secondary\" size=\"small\" >Изтриване</Button>}\r\n              {this.state.loading && <CircularProgress color=\"secondary\" />}\r\n            </ConfirmationDialog>\r\n          </CardActions>\r\n          <Snackbar\r\n            anchorOrigin={{\r\n              vertical: 'bottom',\r\n              horizontal: 'left',\r\n            }}\r\n            open={Boolean(this.state.error)}\r\n            autoHideDuration={6000}\r\n            onClose={() => this.setState({ error: null })}\r\n            message={typeof this.state.error === 'string' ? <span>{this.state.error}</span> : \"Възникна грешка\"}\r\n            action={[\r\n              <IconButton\r\n                key=\"close\"\r\n                aria-label=\"close\"\r\n                color=\"inherit\"\r\n                onClick={() => this.setState({ error: null })}\r\n              >\r\n                <CloseIcon />\r\n              </IconButton>\r\n            ]}\r\n          />\r\n        </Card >\r\n      );\r\n  }\r\n}\r\n\r\nclass SeasonEdit extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: null,\r\n      name: '',\r\n      info: '',\r\n      seasonStart: null,\r\n      seasonEnd: null,\r\n      workingHoursStart: '',\r\n      workingHoursEnd: '',\r\n      isActive: true\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState(this.props.season);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.season != this.props.season)\r\n      this.setState(this.props.season);\r\n  }\r\n\r\n  cancel() {\r\n    this.setState(this.props.season);\r\n    this.props.onCancel();\r\n  }\r\n\r\n  save() {\r\n    if (this.state.id)\r\n      return QueryService\r\n        .post(`/schedule/seasons/${this.state.id}`, this.state)\r\n        .then(e => this.props.onChange(e))\r\n        .catch(err => console.log('ERR:', err));\r\n    else\r\n      return QueryService\r\n        .post(`/schedule/seasons`, this.state)\r\n        .then(e => this.props.onChange(e))\r\n        .catch(err => console.log('ERR:', err));\r\n  }\r\n\r\n  render() {\r\n    const { mode } = this.props;\r\n\r\n    return (\r\n      <Paper style={{ flexBasis: '250px', display: 'flex', flexDirection: 'column', padding: '2rem' }}>\r\n        {mode == 'create' && <Typography align=\"center\" variant=\"headline\">Нов сезон</Typography>}\r\n        {mode == 'edit' && <Typography align=\"center\" variant=\"headline\">Промяна на сезон</Typography>}\r\n\r\n        <TextField\r\n          id=\"name\"\r\n          label=\"Наименование\"\r\n          value={this.state.name}\r\n          onChange={(e) => this.setState({ name: e.target.value })}\r\n        />\r\n        <TextField\r\n          id=\"info\"\r\n          label=\"Информация\"\r\n          multiline\r\n          rowsMax=\"4\"\r\n          value={this.state.info}\r\n          onChange={(e) => this.setState({ info: e.target.value })}\r\n        />\r\n\r\n        <DatePicker\r\n          autoOk\r\n          label=\"Начало на сезона\"\r\n          labelFunc={(date) => date ? new Date(date).toLocaleDateString() : ''}\r\n          clearable\r\n          fullWidth={true}\r\n          value={this.state.seasonStart}\r\n          onChange={value => this.setState({ seasonStart: value })}\r\n        />\r\n\r\n        <DatePicker\r\n          autoOk\r\n          label=\"Край на сезона\"\r\n          labelFunc={(date) => date ? new Date(date).toLocaleDateString() : ''}\r\n          clearable\r\n          fullWidth={true}\r\n          value={this.state.seasonEnd}\r\n          onChange={value => this.setState({ seasonEnd: value })}\r\n        />\r\n\r\n        <TextField\r\n          id=\"workingHoursStart\"\r\n          label=\"Работно време ОТ\"\r\n          type=\"number\"\r\n          value={this.state.workingHoursStart}\r\n          onChange={(e) => this.setState({ workingHoursStart: e.target.value })}\r\n        />\r\n\r\n        <TextField\r\n          id=\"workingHoursEnd\"\r\n          label=\"Работно време ДО\"\r\n          type=\"number\"\r\n          value={this.state.workingHoursEnd}\r\n          onChange={(e) => this.setState({ workingHoursEnd: e.target.value })}\r\n        />\r\n\r\n        {this.props.mode == 'create' && <div style={{ margin: '1rem 0 0 0' }}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem .5rem 0 0' }}\r\n            onClick={() => this.save()}\r\n          >\r\n            Създаване\r\n          </Button>\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem 0 0 0' }}\r\n            onClick={() => this.cancel()}\r\n          >\r\n            Отказ\r\n          </Button>\r\n        </div>}\r\n\r\n        {this.props.mode == 'edit' && <div>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem .5rem 0 0' }}\r\n            onClick={() => this.save()}\r\n          >\r\n            Запис\r\n          </Button>\r\n\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem 0 0 0' }}\r\n            onClick={() => this.cancel()}\r\n          >\r\n            Отказ\r\n          </Button>\r\n        </div>}\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(SeasonItem);","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport SeasonItem from './SeasonItem';\r\nimport QueryService from '../../services/query.service';\r\n\r\nconst styles = () => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'center'\r\n  }\r\n});\r\n\r\nclass Seasons extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      seasons: []\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    return QueryService\r\n      .get(`/schedule/seasons`)\r\n      .then(e => this.setState({ seasons: e }));\r\n  }\r\n\r\n  updateModel(model, index) {\r\n    const seasons = this.state.seasons;\r\n    seasons[index] = model;\r\n    this.setState({ seasons });\r\n  }\r\n\r\n  addSeason() {\r\n    const seasons = this.state.seasons;\r\n    if (seasons.length > 0 && !seasons[0].id)\r\n      return;\r\n\r\n    const season = {\r\n      info: '',\r\n      name: '',\r\n      workingHoursStart: '',\r\n      workingHoursEnd: ''\r\n    };\r\n\r\n    seasons.unshift(season);\r\n    this.setState({ seasons });\r\n  }\r\n\r\n  removeSeason(index) {\r\n    const seasons = this.state.seasons;\r\n    seasons.splice(index, 1);\r\n    this.setState({ seasons });\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <Button variant=\"contained\" size=\"medium\" color=\"primary\" onClick={() => this.addSeason()} style={{ marginBottom: '.5rem' }}>\r\n          Добави сезон\r\n        </Button>\r\n        <div className={classes.root}>\r\n          {this.state.seasons.map((season, index) => {\r\n            return (\r\n              <SeasonItem\r\n                key={season.id || 0}\r\n                season={season}\r\n                onChange={model => this.updateModel(model, index)}\r\n                onCreateCancel={() => this.removeSeason(index)}\r\n                onDelete={() => this.removeSeason(index)}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(Seasons);","import React from 'react';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\r\n\r\nexport class SortableTableCell extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      active: false,\r\n      direction: 'desc'\r\n    };\r\n\r\n    this.handleClick = () => {\r\n      let { direction, active } = this.state;\r\n\r\n      if (!active)\r\n        active = true;\r\n      else if (direction === 'desc')\r\n        direction = 'asc';\r\n      else\r\n        direction = 'desc';\r\n\r\n\r\n      this.setState({ direction, active });\r\n      this.props.orderHandler(direction);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <TableCell onClick={this.handleClick}>\r\n        <TableSortLabel\r\n          active={this.state.active}\r\n          direction={this.state.direction}\r\n        >\r\n          {this.props.children}\r\n        </TableSortLabel>\r\n      </TableCell>\r\n    );\r\n  }\r\n}\r\n\r\nexport function orderData(data, ordering) {\r\n  if (!ordering)\r\n    return;\r\n\r\n  if (ordering[1] === 'asc')\r\n    data.sort((a, b) => b[ordering[0]] - a[ordering[0]]);\r\n  else\r\n    data.sort((a, b) => a[ordering[0]] - b[ordering[0]]);\r\n}\r\n\r\nexport function transformDailyData(data, classifier) {\r\n  const reduced = data\r\n    .reduce((acc, curr) => acc.concat(curr.payments), []);\r\n\r\n  const result = {};\r\n\r\n  Object.keys(classifier).forEach(key => {\r\n    result[classifier[key]] = 0\r\n  });\r\n\r\n  reduced.forEach(e => {\r\n    result[e.type]++\r\n  });\r\n\r\n  return Object.keys(result).map(key => {\r\n    return {\r\n      key,\r\n      count: result[key]\r\n    }\r\n  });\r\n}\r\n\r\nexport function transformMonthlyData(data, classifier) {\r\n  const users = {};\r\n\r\n  data.forEach(e => {\r\n    if (!users[e.customerId]) {\r\n      users[e.customerId] = {\r\n        customer: e.customer,\r\n        payments: {}\r\n      };\r\n\r\n      Object.keys(classifier).forEach(key => {\r\n        users[e.customerId].payments[classifier[key]] = 0\r\n      });\r\n    }\r\n\r\n    e.payments.forEach(payment => users[e.customerId].payments[payment.type]++)\r\n  });\r\n\r\n  return Object.keys(users).map(key => {\r\n    return {\r\n      user: users[key].customer,\r\n      payments: users[key].payments,\r\n      totalCount: Object.keys(users[key].payments).reduce((acc, pKey) => acc + users[key].payments[pKey], 0)\r\n    }\r\n  });\r\n}\r\n\r\nexport function transformToUserPlayedHours(data) {\r\n  const users = {};\r\n\r\n  data.forEach(e => {\r\n    if (!e.customerId)\r\n      return;\r\n\r\n    if (!users[e.customerId]) {\r\n      users[e.customerId] = {\r\n        customer: e.customer,\r\n        totalHours: 0\r\n      };\r\n    }\r\n\r\n    users[e.customerId].totalHours++;\r\n  });\r\n\r\n  return Object.keys(users).map(key => users[key]);\r\n}\r\n\r\nexport function transformByClassifier(data, classifier, customFn = () => null) {\r\n  const result = {};\r\n  const customValue = {};\r\n\r\n  Object.keys(classifier).forEach(key => {\r\n    result[classifier[key]] = 0\r\n  });\r\n\r\n  data.forEach(e => {\r\n    result[e.type]++;\r\n    customValue[e.type] = customFn(customValue[e.type], e);\r\n  });\r\n\r\n  return Object.keys(result).map(key => {\r\n    return {\r\n      key,\r\n      count: result[key],\r\n      custom: customValue[key]\r\n    }\r\n  });\r\n}","import React from 'react';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableCell from '@material-ui/core/TableCell';\r\n\r\nimport { l10n_text } from '../../components/L10n';\r\nimport { SortableTableCell, orderData, transformToUserPlayedHours, transformByClassifier } from './utils';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nexport class UserPlayedHours extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      order: null\r\n    };\r\n\r\n    this.handleOrder = (prop) => (direction) => {\r\n      this.setState({ order: [prop, direction] });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const data = transformToUserPlayedHours(this.props.data);\r\n    orderData(data, this.state.order);\r\n\r\n    return (\r\n      <Table>\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell style={{ width: '50%' }}>Потребител</TableCell>\r\n            <SortableTableCell orderHandler={this.handleOrder('totalHours')}>\r\n              Изиграни часове\r\n            </SortableTableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {data.map(e => {\r\n            return (\r\n              <TableRow key={e.customer.id}>\r\n                <TableCell>\r\n                  <Typography>\r\n                    {e.customer.name}\r\n                    <Typography variant=\"caption\">{e.customer.email}</Typography>\r\n                  </Typography>\r\n                </TableCell>\r\n                <TableCell>{e.totalHours}</TableCell>\r\n              </TableRow>\r\n            );\r\n          })}\r\n          <TableRow>\r\n            <TableCell>ОБЩО</TableCell>\r\n            <TableCell>{data.reduce((acc, curr) => acc + curr.totalHours, 0)}</TableCell>\r\n          </TableRow>\r\n        </TableBody>\r\n      </Table>\r\n    );\r\n  }\r\n}\r\n\r\nexport class StatisticByClassifier extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      order: null\r\n    };\r\n\r\n    this.handleOrder = (prop) => (direction) => {\r\n      this.setState({ order: [prop, direction] });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { data, classifier, translation, label1, label2, customFn, customValueSuffix } = this.props;\r\n    const transformed = transformByClassifier(data, classifier, customFn || (() => null));\r\n    orderData(transformed, this.state.order);\r\n\r\n    return (\r\n      <Table>\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell style={{ width: '50%' }}>{label1}</TableCell>\r\n            <SortableTableCell orderHandler={this.handleOrder('count')}>\r\n              {label2}\r\n            </SortableTableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {transformed.map(e => {\r\n            return (\r\n              <TableRow key={e.key}>\r\n                <TableCell>{l10n_text(e.key, translation)}</TableCell>\r\n                <TableCell>\r\n                  {e.count}\r\n                  {e.custom && <span style={{ marginLeft: '.3rem' }}>({e.custom}{customValueSuffix})</span>}\r\n                </TableCell>\r\n              </TableRow>\r\n            );\r\n          })}\r\n          <TableRow>\r\n            <TableCell>ОБЩО</TableCell>\r\n            <TableCell>{transformed.reduce((acc, curr) => acc + curr.count, 0)}</TableCell>\r\n          </TableRow>\r\n        </TableBody>\r\n      </Table>\r\n    );\r\n  }\r\n}\r\n","import moment from 'moment';\r\nimport React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\n\r\nimport Calendar from '../../components/calendar/Calendar';\r\nimport QueryService from '../../services/query.service';\r\nimport { StatisticsType, ReservationPayment, ReservationType } from '../../enums';\r\nimport { UserPlayedHours, StatisticByClassifier } from './MonthlyStatistics';\r\n\r\nclass StatisticsRoot extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      date: moment().startOf('date'),\r\n      type: StatisticsType.MONTHLY,\r\n      data: []\r\n    };\r\n\r\n    this.handleCalendarChange = (date) => {\r\n      this.setState({ date });\r\n      this.getData(date, this.state.type);\r\n    }\r\n\r\n    this.handleStatisticsChange = (_, value) => {\r\n      this.setState({ type: value });\r\n      this.getData(this.state.date, value);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData(this.state.date, this.state.type);\r\n  }\r\n\r\n  getData(date, type) {\r\n    return QueryService\r\n      .post('/statistics', { date: date.format('YYYY-MM-DD'), type })\r\n      .then(data => this.setState({ data }));\r\n  }\r\n\r\n  render() {\r\n    const { date, type, data } = this.state;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <Paper style={{ padding: '1rem' }}>\r\n          <Typography></Typography>\r\n          <Typography align=\"center\" variant=\"headline\" gutterBottom={true}>\r\n            Справки\r\n          </Typography>\r\n          <Calendar\r\n            emitDateOnAnyChange={true}\r\n            value={date}\r\n            onChange={this.handleCalendarChange}\r\n          />\r\n\r\n          <Tabs value={type} onChange={this.handleStatisticsChange} textColor=\"primary\">\r\n            <Tab value={StatisticsType.MONTHLY} label=\"Месечна\"></Tab>\r\n            <Tab value={StatisticsType.DAILY} label=\"Дневна\"></Tab>\r\n          </Tabs>\r\n\r\n          {type == StatisticsType.MONTHLY && <div style={{ margin: '2rem 0' }}>\r\n            <Typography variant=\"subheading\">Справка по потребители</Typography>\r\n            <UserPlayedHours data={data} />\r\n          </div>}\r\n\r\n          {type == StatisticsType.MONTHLY && <div style={{ margin: '2rem 0' }}>\r\n            <Typography variant=\"subheading\">Справка по вид резервация</Typography>\r\n            <StatisticByClassifier\r\n              label1=\"Вид резервация\"\r\n              label2=\"Регистрирани резервации\"\r\n              classifier={ReservationType}\r\n              translation=\"ReservationType\"\r\n              data={data} />\r\n          </div>}\r\n\r\n          <div style={{ margin: '2rem 0' }}>\r\n            <Typography variant=\"subheading\">Справка по регистрирани плащания</Typography>\r\n            <StatisticByClassifier\r\n              label1=\"Метод на плащане\"\r\n              label2=\"Регистрирани плащания\"\r\n              classifier={ReservationPayment}\r\n              translation=\"ReservationPayment\"\r\n              customFn={paymentsAmountAccumulator}\r\n              customValueSuffix=\" лв.\"\r\n              data={reduceToPayments(data)} />\r\n          </div>\r\n        </Paper>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction reduceToPayments(data) {\r\n  return data.reduce((acc, curr) => acc.concat(curr.payments), []);\r\n}\r\n\r\nfunction paymentsAmountAccumulator(current, payment) {\r\n  if (payment.amount)\r\n    return (current || 0) + parseFloat(payment.amount);\r\n  else return current;\r\n}\r\n\r\nexport default StatisticsRoot;","import React from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport DatePicker from 'material-ui-pickers/DatePicker';\r\n\r\nimport EnumSelect from '../components/EnumSelect';\r\nimport { Gender, CourtType, PlayStyle, BackhandType } from '../enums';\r\n\r\nclass UserModel {\r\n  constructor(props) {\r\n    this.UserAccountData = this.UserAccountData.bind(this);\r\n    this.UserAccountSecondaryData = this.UserAccountSecondaryData.bind(this);\r\n    this.UserPlayerMainData = this.UserPlayerMainData.bind(this);\r\n    this.UserPlayerSecondaryData = this.UserPlayerSecondaryData.bind(this);\r\n  }\r\n\r\n  get() {\r\n    return {\r\n      email: '',\r\n      password: '',\r\n      confirmPassword: '',\r\n      firstName: '',\r\n      lastName: '',\r\n      telephone: '',\r\n      gender: '',\r\n      birthDate: null,\r\n      startedPlaying: '',\r\n      playStyle: '',\r\n      courtType: '',\r\n      backhandType: '',\r\n      reservationDebt: 0,\r\n      subscriptionDebt: 0\r\n    };\r\n  }\r\n\r\n  getErrorsModel() {\r\n    return {\r\n      email: [],\r\n      password: [],\r\n      confirmPassword: [],\r\n      firstName: [],\r\n      lastName: [],\r\n      telephone: [],\r\n      gender: [],\r\n      birthDate: [],\r\n      startedPlaying: [],\r\n      playStyle: [],\r\n      courtType: [],\r\n      backhandType: [],\r\n      reservationDebt: [],\r\n      subscriptionDebt: []\r\n    };\r\n  }\r\n\r\n  composeErrors(errors, name) {\r\n    if (errors[name].length > 0)\r\n      return <span>\r\n        {errors[name].map((err, i) => {\r\n          return (\r\n            <span\r\n              key={i}\r\n              style={{ display: 'block' }}\r\n            >\r\n              {UET[name][err]}\r\n            </span>\r\n          );\r\n        })}\r\n      </span>\r\n    else\r\n      return null;\r\n  }\r\n\r\n  UserAccountData(props) {\r\n    const { user, onChange, errors } = props;\r\n    return (\r\n      <React.Fragment>\r\n        <TextField\r\n          id=\"email\"\r\n          label=\"Email\"\r\n          type=\"email\"\r\n          value={user.email}\r\n          required={true}\r\n          fullWidth={true}\r\n          error={errors.email.length > 0}\r\n          helperText={this.composeErrors(errors, 'email')}\r\n          onChange={onChange('email')}\r\n        />\r\n\r\n        {!user.id && <TextField\r\n          id=\"password\"\r\n          label=\"Парола\"\r\n          type=\"password\"\r\n          value={user.password}\r\n          required={true}\r\n          fullWidth={true}\r\n          error={errors.password.length > 0}\r\n          helperText={this.composeErrors(errors, 'password')}\r\n          onChange={onChange('password')}\r\n        />}\r\n\r\n        {!user.id && <TextField\r\n          id=\"confirmPassword\"\r\n          label=\"Повтори парола\"\r\n          type=\"password\"\r\n          value={user.confirmPassword}\r\n          required={true}\r\n          fullWidth={true}\r\n          error={errors.confirmPassword.length > 0}\r\n          helperText={this.composeErrors(errors, 'confirmPassword')}\r\n          onChange={onChange('confirmPassword')}\r\n        />}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  UserAccountSecondaryData(props) {\r\n    const { user, onChange, errors } = props;\r\n    return (\r\n      <React.Fragment>\r\n        <TextField\r\n          id=\"reservationDebt\"\r\n          label=\"Дължим брой часове\"\r\n          type=\"number\"\r\n          value={user.reservationDebt}\r\n          fullWidth={true}\r\n          error={errors.reservationDebt.length > 0}\r\n          helperText={this.composeErrors(errors, 'reservationDebt')}\r\n          onChange={onChange('reservationDebt')}\r\n        />\r\n\r\n        <TextField\r\n          id=\"reservationDebt\"\r\n          label=\"Дължим членски внос\"\r\n          type=\"number\"\r\n          value={user.subscriptionDebt}\r\n          fullWidth={true}\r\n          InputProps={{\r\n            endAdornment: <InputAdornment position=\"end\">Лв.</InputAdornment>\r\n          }}\r\n          error={errors.subscriptionDebt.length > 0}\r\n          helperText={this.composeErrors(errors, 'subscriptionDebt')}\r\n          onChange={onChange('subscriptionDebt')}\r\n        />\r\n\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  UserPlayerMainData(props) {\r\n    const { user, onChange, errors } = props;\r\n    return (\r\n      <React.Fragment>\r\n        <TextField\r\n          label=\"Име\"\r\n          value={user.firstName}\r\n          required={true}\r\n          fullWidth={true}\r\n          error={errors.firstName.length > 0}\r\n          helperText={this.composeErrors(errors, 'firstName')}\r\n          onChange={onChange('firstName')}\r\n        />\r\n\r\n        <TextField\r\n          label=\"Фамилия\"\r\n          value={user.lastName}\r\n          required={true}\r\n          fullWidth={true}\r\n          error={errors.lastName.length > 0}\r\n          helperText={this.composeErrors(errors, 'lastName')}\r\n          onChange={onChange('lastName')}\r\n        />\r\n\r\n        <TextField\r\n          label=\"Телефон\"\r\n          required={true}\r\n          fullWidth={true}\r\n          value={user.telephone}\r\n          error={errors.telephone.length > 0}\r\n          helperText={this.composeErrors(errors, 'telephone')}\r\n          onChange={onChange('telephone')}\r\n        />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  UserPlayerSecondaryData(props) {\r\n    const { user, onChange } = props;\r\n    const errors = {\r\n      birthDate: [],\r\n      gender: [],\r\n      startedPlaying: [],\r\n      playStyle: [],\r\n      backhandType: [],\r\n      courtType: [],\r\n      ...props.errors\r\n    };\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <DatePicker\r\n          autoOk\r\n          openToYearSelection\r\n          label=\"Дата на раждане\"\r\n          labelFunc={(date) => date ? new Date(date).toLocaleDateString() : ''}\r\n          clearable\r\n          fullWidth={true}\r\n          value={user.birthDate}\r\n          error={errors.birthDate.length > 0}\r\n          helperText={this.composeErrors(errors, 'birthDate')}\r\n          onChange={onChange('birthDate', true)}\r\n        />\r\n\r\n        <EnumSelect\r\n          label=\"Пол\"\r\n          value={user.gender}\r\n          error={errors.gender.length > 0}\r\n          errorText={this.composeErrors(errors, 'gender')}\r\n          onChange={onChange('gender')}\r\n          EnumValues={Gender}\r\n          EnumName=\"Gender\"\r\n          allowClear={true} />\r\n\r\n        <TextField\r\n          id=\"startedPlaying\"\r\n          label=\"Започнах да играя през\"\r\n          fullWidth={true}\r\n          value={user.startedPlaying}\r\n          error={errors.startedPlaying.length > 0}\r\n          helperText={this.composeErrors(errors, 'startedPlaying')}\r\n          onChange={onChange('startedPlaying')}\r\n          type=\"number\"\r\n        />\r\n\r\n        <EnumSelect\r\n          label=\"Играя със\"\r\n          value={user.playStyle}\r\n          error={errors.playStyle.length > 0}\r\n          errorText={this.composeErrors(errors, 'playStyle')}\r\n          onChange={onChange('playStyle')}\r\n          EnumValues={PlayStyle}\r\n          EnumName=\"PlayStyle\"\r\n          allowClear={true} />\r\n\r\n        <EnumSelect\r\n          label=\"Бекхенд\"\r\n          value={user.backhandType}\r\n          error={errors.backhandType.length > 0}\r\n          errorText={this.composeErrors(errors, 'backhandType')}\r\n          onChange={onChange('backhandType')}\r\n          EnumValues={BackhandType}\r\n          EnumName=\"BackhandType\"\r\n          allowClear={true} />\r\n\r\n        <EnumSelect\r\n          label=\"Любима настилка\"\r\n          value={user.courtType}\r\n          error={errors.courtType.length > 0}\r\n          errorText={this.composeErrors(errors, 'courtType')}\r\n          onChange={onChange('courtType')}\r\n          EnumValues={CourtType}\r\n          EnumName=\"CourtType\"\r\n          allowClear={true} />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\n//User Errors Transliteration\r\nconst UET = {\r\n  email: {\r\n    required: 'Задължително поле',\r\n    invalid: 'Невалиден имейл',\r\n    unique: 'Съществува потребител с такъв имейл'\r\n  },\r\n  password: {\r\n    required: 'Задължително поле',\r\n    short: 'Паролата трябва да бъде поне 6 символа'\r\n  },\r\n  confirmPassword: {\r\n    required: 'Задължително поле',\r\n    mismatch: 'Паролите не свъпадат'\r\n  },\r\n  firstName: {\r\n    required: 'Задължително поле',\r\n  },\r\n  lastName: {\r\n    required: 'Задължително поле',\r\n  },\r\n  telephone: {\r\n    required: 'Задължително поле',\r\n    invalid: 'Невалиден телефонен номер'\r\n  },\r\n  gender: {\r\n    required: 'Задължително поле',\r\n    invalid: 'Невалиден пол'\r\n  },\r\n  birthDate: {\r\n    invalid: 'Невалидна дата на раждане',\r\n    required: 'Задължително поле',\r\n  },\r\n  startedPlaying: {\r\n    invalid: 'Невалидна година',\r\n    future: 'Годината не може да е в бъдещето',\r\n    range: 'Годината не може да е преди датата на раждане'\r\n  },\r\n  playStyle: {\r\n    invalid: 'Невалидно поле'\r\n  },\r\n  courtType: {\r\n    invalid: 'Невалидно поле'\r\n  },\r\n  backhandType: {\r\n    invalid: 'Невалидно поле'\r\n  }\r\n};\r\n\r\nexport default new UserModel();","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport UserModel from '../../users/user.model';\r\n\r\nclass UserDetailsModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: UserModel.get(),\r\n      errors: UserModel.getErrorsModel()\r\n    }\r\n\r\n    this.handleChange = (prop, custom = false) => (event) => {\r\n      let user = this.state.user;\r\n      user[prop] = (custom ? event : event.target.value);\r\n      this.setState({ user });\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.user)\r\n      this.setState({ user: this.props.user });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.user != this.props.user && this.props.user)\r\n      this.setState({ user: this.props.user, errors: UserModel.getErrorsModel() });\r\n  }\r\n\r\n  save() {\r\n    const { user } = this.state;\r\n\r\n    if (user.id)\r\n      return QueryService\r\n        .post(`/users/${user.id}`, user)\r\n        .then(_ => this.props.onChange())\r\n        .catch(err => this.setState({ errors: err }));\r\n    else\r\n      return QueryService\r\n        .post(`/users`, user)\r\n        .then(_ => this.props.onChange())\r\n        .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  render() {\r\n    const { isOpen, onClose, classes, fullScreen } = this.props;\r\n    const { user, errors } = this.state;\r\n    if (!this.props.user)\r\n      return null;\r\n\r\n    return (\r\n      <Dialog\r\n        open={isOpen}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        classes={{ paper: classes.root }}\r\n      >\r\n        <DialogTitle>\r\n          <DialogContentText variant=\"headline\">\r\n            {user.name || 'Нов потребител'}\r\n          </DialogContentText>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <FormControlLabel\r\n            control={\r\n              <Switch\r\n                color=\"primary\"\r\n                checked={user.isActive}\r\n                onClick={() => this.handleChange('isActive', true)(!user.isActive)}\r\n              />\r\n            }\r\n            label=\"Активен\"\r\n          />\r\n\r\n          <FormControlLabel\r\n            control={\r\n              <Switch\r\n                color=\"primary\"\r\n                checked={user.isTrainer}\r\n                onClick={() => this.handleChange('isTrainer', true)(!user.isTrainer)}\r\n              />\r\n            }\r\n            label=\"Треньор\"\r\n          />\r\n\r\n          <FormControlLabel\r\n            control={\r\n              <Switch\r\n                color=\"primary\"\r\n                checked={user.isTournamentAdmin}\r\n                onClick={() => this.handleChange('isTournamentAdmin', true)(!user.isTournamentAdmin)}\r\n              />\r\n            }\r\n            label=\"Турнири\"\r\n          />\r\n\r\n          <UserModel.UserAccountData user={user} onChange={this.handleChange} errors={errors} />\r\n          <UserModel.UserPlayerMainData user={user} onChange={this.handleChange} errors={errors} />\r\n\r\n          <Typography\r\n            style={{ margin: '1rem 0 .3rem 0' }}\r\n            variant=\"subheading\"\r\n            color=\"primary\">Допълнителна информация за акаунт</Typography>\r\n          <UserModel.UserAccountSecondaryData user={user} onChange={this.handleChange} errors={errors} />\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.save()}>\r\n            Запис\r\n          </Button>\r\n          <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(UserDetailsModal)\r\n);","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport UserService from '../../services/user.service';\r\nimport L10n from '../../components/L10n';\r\nimport QueryService from '../../services/query.service';\r\nimport { SubscriptionType } from '../../enums';\r\nimport ConfirmationDialog from '../../components/ConfirmationDialog';\r\nimport AsyncSelect from '../../components/select/AsyncSelect';\r\nimport EnumSelect from '../../components/EnumSelect';\r\n\r\nclass UserSubscriptionsModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      administrator: null,\r\n      subscriptions: []\r\n    };\r\n\r\n    this.handleChange = (index) => (newValue) => {\r\n      const subscriptions = this.state.subscriptions;\r\n      subscriptions[index] = newValue\r\n      this.setState({ subscriptions });\r\n      this.props.onChange(subscriptions);\r\n    }\r\n\r\n    this.handleDelete = (index) => () => {\r\n      const subscriptions = this.state.subscriptions;\r\n      subscriptions.splice(index, 1);\r\n      this.setState({ subscriptions });\r\n      this.props.onChange(subscriptions);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    UserService.getAuthenticatedUser()\r\n      .then(user => this.setState({ administrator: user }));\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.user != this.props.user && this.props.user != null)\r\n      this.init();\r\n  }\r\n\r\n  init() {\r\n    this.setState({\r\n      subscriptions: JSON.parse(JSON.stringify(this.props.user.subscriptions))\r\n    });\r\n  }\r\n\r\n  addSubscription() {\r\n    const { subscriptions } = this.state;\r\n    if (subscriptions.length > 0 && !subscriptions[0].id)\r\n      return;\r\n\r\n    subscriptions.unshift({\r\n      customerId: this.props.user.id,\r\n      season: this.props.season,\r\n      seasonId: this.props.season.id,\r\n      administrator: this.state.administrator,\r\n      totalHours: 0,\r\n      remainingHours: 0,\r\n      type: ''\r\n    });\r\n\r\n    this.setState(subscriptions);\r\n  }\r\n\r\n  render() {\r\n    const { isOpen, user, onClose, classes, fullScreen } = this.props;\r\n    const { subscriptions } = this.state;\r\n\r\n    if (!this.props.user)\r\n      return null;\r\n\r\n    return (\r\n      <Dialog\r\n        open={isOpen}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        classes={{ paper: classes.root }}\r\n      >\r\n        <DialogTitle>\r\n          <DialogContentText variant=\"headline\">\r\n            Абонаменти на {user.name}\r\n          </DialogContentText>\r\n        </DialogTitle>\r\n        <DialogContent >\r\n          <Button variant=\"contained\" color=\"primary\" size=\"small\"\r\n            style={{ marginBottom: '1rem' }}\r\n            onClick={() => this.addSubscription()}\r\n          >\r\n            Добави абонамент\r\n          </Button>\r\n\r\n          {subscriptions.map((sub, index) => <Subscription\r\n            key={sub.id || 0}\r\n            model={sub}\r\n            onChange={this.handleChange(index)}\r\n            onDelete={this.handleDelete(index)}\r\n          />)}\r\n\r\n          {subscriptions.length == 0 && <Typography variant=\"caption\">Няма регистрирани абонаменти</Typography>}\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          {/* <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.save()}>\r\n            Запис\r\n          </Button> */}\r\n          <Button variant=\"outlined\" color=\"primary\" size=\"small\" className={classes.btn} onClick={onClose}>\r\n            <ArrowBackIcon />\r\n            Назад\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nclass Subscription extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      administrator: {},\r\n      season: {},\r\n      seasonId: null,\r\n      type: '',\r\n      totalHours: 0,\r\n      remainingHours: 0,\r\n      isEditMode: false,\r\n      expanded: false\r\n    }\r\n  }\r\n\r\n  changeSeason(season) {\r\n    if (!season)\r\n      return;\r\n\r\n    this.setState({\r\n      season: season,\r\n      seasonId: season.id\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      ...JSON.parse(JSON.stringify(this.props.model)),\r\n      isEditMode: !this.props.model.id,\r\n      expanded: !this.props.model.id\r\n    });\r\n  }\r\n\r\n  save() {\r\n    let query = null\r\n    if (this.state.id)\r\n      query = QueryService\r\n        .post(`/subscriptions/${this.state.id}`, this.state);\r\n    else\r\n      query = QueryService\r\n        .post(`/subscriptions`, this.state)\r\n\r\n    return query\r\n      .then(e => {\r\n        this.props.onChange(e);\r\n        this.setState({ ...e, isEditMode: false });\r\n      })\r\n      .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  remove() {\r\n    return QueryService\r\n      .delete(`/subscriptions/${this.state.id}`)\r\n      .then(_ => this.props.onDelete())\r\n      .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  cancelEdit() {\r\n    if (!this.state.id)\r\n      return this.props.onDelete();\r\n    else\r\n      return this.setState({\r\n        ...JSON.parse(JSON.stringify(this.props.model)),\r\n        isEditMode: false\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const model = this.state;\r\n\r\n    return (\r\n      <ExpansionPanel expanded={model.expanded}>\r\n        <ExpansionPanelSummary\r\n          expandIcon={<ExpandMoreIcon />}\r\n          onClick={() => this.setState({ expanded: !model.expanded })}\r\n        >\r\n          <Typography color=\"primary\" style={{ flexBasis: '50%' }}>\r\n            Абонамент\r\n            <L10n\r\n              style={{ marginLeft: '.3rem' }}\r\n              translate=\"SubscriptionType\"\r\n            >\r\n              {model.type}\r\n            </L10n>\r\n          </Typography>\r\n          <Typography color=\"textSecondary\">{model.season.name}</Typography>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails style={{ flexDirection: 'column' }}>\r\n          <Typography variant=\"caption\">\r\n            Администрирал:\r\n            <Typography>{model.administrator.name}</Typography>\r\n          </Typography>\r\n\r\n          <AsyncSelect\r\n            label=\"Сезон\"\r\n            disableClear={true}\r\n            disableSearch={true}\r\n            disabled={!model.isEditMode}\r\n            value={model.season}\r\n            query=\"seasons\"\r\n            formatOptionLabel={(option) => <Typography component=\"span\">\r\n              {option.name}\r\n            </Typography>}\r\n            onChange={season => this.changeSeason(season)}\r\n          />\r\n\r\n          {!this.state.isEditMode && <React.Fragment>\r\n            <Typography variant=\"caption\">\r\n              Тип абонамент:\r\n              <Typography>\r\n                <L10n\r\n                  translate=\"SubscriptionType\"\r\n                >\r\n                  {model.type}\r\n                </L10n>\r\n              </Typography>\r\n            </Typography>\r\n\r\n            <Typography variant=\"caption\">\r\n              Общо часове:\r\n              <Typography>{model.totalHours}</Typography>\r\n            </Typography>\r\n\r\n            <Typography variant=\"caption\">\r\n              Оставащи часове\r\n              <Typography>{model.remainingHours}</Typography>\r\n            </Typography>\r\n          </React.Fragment>}\r\n\r\n          {this.state.isEditMode && <React.Fragment>\r\n            <EnumSelect\r\n              label=\"Тип абонамент\"\r\n              value={model.type}\r\n              fullWidth={true}\r\n              onChange={(e) => this.setState({ type: e.target.value })}\r\n              EnumValues={SubscriptionType}\r\n              EnumName=\"SubscriptionType\"\r\n            />\r\n\r\n            <TextField\r\n              label=\"Общо часове\"\r\n              type=\"number\"\r\n              value={model.totalHours}\r\n              onChange={(e) => this.setState({ totalHours: e.target.value })}\r\n              fullWidth={true}\r\n            />\r\n\r\n            <Typography variant=\"caption\" style={{ marginTop: '.5rem' }}>\r\n              Оставащи часове (ще бъде обновено след запис)\r\n              <Typography>{model.remainingHours}</Typography>\r\n            </Typography>\r\n          </React.Fragment>}\r\n\r\n          {this.state.isEditMode && <div style={{ marginTop: '.5rem' }}>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              style={{ marginRight: '.3rem' }}\r\n              onClick={() => this.save()}\r\n            >\r\n              Запис\r\n            </Button>\r\n\r\n            <Button\r\n              variant=\"outlined\"\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => this.cancelEdit()}\r\n            >\r\n              Отказ\r\n            </Button>\r\n          </div>}\r\n\r\n          {!this.state.isEditMode && <div style={{ marginTop: '.5rem' }}>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              style={{ marginRight: '.3rem' }}\r\n              onClick={() => this.setState({ isEditMode: true })}\r\n            >\r\n              Редакция\r\n            </Button>\r\n\r\n            <ConfirmationDialog\r\n              title=\"Изтриване на абонамент\"\r\n              body={<Typography>Сигурни ли сте че искате да изтриете абонамента</Typography>}\r\n              onAccept={() => this.remove()}\r\n              style={{ marginTop: '.5rem' }}\r\n            >\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                size=\"small\"\r\n              >\r\n                Изтриване\r\n            </Button>\r\n            </ConfirmationDialog>\r\n          </div>}\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px',\r\n    padding: '0'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(UserSubscriptionsModal)\r\n);","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Button from '@material-ui/core/Button';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Zoom from '@material-ui/core/Zoom';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport DescriptionOutlinedIcon from '@material-ui/icons/DescriptionOutlined';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport BuildIcon from '@material-ui/icons/Build';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport ConfirmationDialog from '../../components/ConfirmationDialog';\r\nimport QueryService from '../../services/query.service';\r\nimport UserModel from '../../users/user.model';\r\nimport UserDetailsModal from './UserDetailsModal';\r\nimport UserSubscriptionsModal from './UserSubscriptionsModal';\r\n\r\nclass Users extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      currentSeason: null,\r\n      page: 0,\r\n      rowsPerPage: 10,\r\n      users: [],\r\n      usersFilter: '',\r\n      editUser: null,\r\n      subsUser: null\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    QueryService\r\n      .get('/schedule/config')\r\n      .then(({ season }) => this.setState({ currentSeason: season }));\r\n\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    return QueryService\r\n      .get('/users')\r\n      .then(e => this.setState({ users: e }));\r\n  }\r\n\r\n  filterUsers() {\r\n    if (this.state.usersFilter.length > 0)\r\n      return this.state.users.filter(e => {\r\n        return e.name.toLowerCase().includes(this.state.usersFilter)\r\n          || e.email.toLowerCase().includes(this.state.usersFilter);\r\n      });\r\n    else return this.state.users;\r\n  }\r\n\r\n  prepareForEdit(user) {\r\n    const names = user.name.split(' ');\r\n    user.firstName = names[0];\r\n    user.lastName = names[1];\r\n    user.startedPlaying = parseInt(user.startedPlaying) || '';\r\n    return user;\r\n  }\r\n\r\n  updateSubscriptions(user, subscriptions) {\r\n    const index = this.state.users.findIndex(e => e.id == user.id);\r\n    const users = this.state.users;\r\n    users[index].subscriptions = subscriptions;\r\n    this.setState({ users, subsUser: users[index] });\r\n  }\r\n\r\n  remove(userId) {\r\n    const users = this.state.users;\r\n\r\n    return QueryService\r\n      .delete(`/users/${userId}`)\r\n      .then(_ => this.getData())\r\n      .catch(err => null);\r\n  }\r\n\r\n  render() {\r\n    const { usersFilter, page, rowsPerPage } = this.state;\r\n    const users = this.filterUsers(usersFilter);\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <Paper style={{ padding: '1rem' }}>\r\n          <Typography variant=\"headline\">Потребители</Typography>\r\n          <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.setState({ editUser: UserModel.get() })}>\r\n            Нов потребител\r\n          </Button>\r\n          <TextField\r\n            label=\"Търсене по име\"\r\n            value={usersFilter}\r\n            fullWidth={true}\r\n            onChange={(e) => this.setState({ usersFilter: e.target.value })}\r\n          />\r\n\r\n          <UserDetailsModal\r\n            user={this.state.editUser}\r\n            isOpen={this.state.editUser != null}\r\n            onChange={() => {\r\n              this.setState({ editUser: null })\r\n              this.getData();\r\n            }}\r\n            onClose={() => this.setState({ editUser: null })}\r\n          />\r\n\r\n          <UserSubscriptionsModal\r\n            user={this.state.subsUser}\r\n            season={this.state.currentSeason}\r\n            isOpen={this.state.subsUser != null}\r\n            onChange={(subscriptions) => this.updateSubscriptions(this.state.subsUser, subscriptions)}\r\n            onClose={() => this.setState({ subsUser: null })}\r\n          />\r\n\r\n          <Hidden xsDown>\r\n            <Table padding=\"none\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell>Име</TableCell>\r\n                  <TableCell>Създаден</TableCell>\r\n                  <TableCell style={{ textAlign: 'center' }}>Активен</TableCell>\r\n                  <TableCell style={{ textAlign: 'center' }}>Треньор</TableCell>\r\n                  <TableCell style={{ textAlign: 'center' }}>Турнири</TableCell>\r\n                  <TableCell style={{ textAlign: 'center' }}>Админ</TableCell>\r\n                  <TableCell></TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {users.slice(page * rowsPerPage, (page + 1) * rowsPerPage).map((user, index) => {\r\n                  return (\r\n                    <TableRow key={user.id}>\r\n                      <TableCell>\r\n                        <Link to={`/users/${user.id}`}>\r\n                          <Typography variant=\"body2\">{user.name}</Typography>\r\n                        </Link>\r\n                        <Typography style={{ fontStyle: 'italic' }}>\r\n                          {user.email}\r\n                        </Typography>\r\n                      </TableCell>\r\n\r\n                      <TableCell>{new Date(user.createdAt).toLocaleDateString()}</TableCell>\r\n                      <TableCell style={{ textAlign: 'center' }}>{user.isActive && <DoneIcon color=\"action\" />}</TableCell>\r\n                      <TableCell style={{ textAlign: 'center' }}>{user.isTrainer && <DoneIcon color=\"action\" />}</TableCell>\r\n                      <TableCell style={{ textAlign: 'center' }}>{user.isTournamentAdmin && <DoneIcon color=\"action\" />}</TableCell>\r\n                      <TableCell style={{ textAlign: 'center' }}>{user.isAdmin && <DoneIcon color=\"action\" />}</TableCell>\r\n                      <TableCell>\r\n                        <Tooltip title=\"редакция\" placement=\"top-start\" TransitionComponent={Zoom} enterDelay={500}>\r\n                          <IconButton color=\"primary\" onClick={() => this.setState({ editUser: this.prepareForEdit(user) })}>\r\n                            {/* <BuildIcon /> */}\r\n                            <EditIcon />\r\n                          </IconButton>\r\n                        </Tooltip>\r\n                        <Tooltip title=\"абонаменти\" placement=\"top-start\" TransitionComponent={Zoom} enterDelay={500}>\r\n                          <IconButton color=\"primary\" onClick={() => this.setState({ subsUser: user })}>\r\n                            <DescriptionOutlinedIcon />\r\n                          </IconButton>\r\n                        </Tooltip>\r\n                        <ConfirmationDialog\r\n                          title=\"Изтриване на потребител\"\r\n                          body={<Typography>Сигурни ли сте че искате да изтриете {user.name}</Typography>}\r\n                          onAccept={() => this.remove(user.id)}\r\n                        >\r\n                          <Tooltip title=\"изтриване\" placement=\"top-start\" TransitionComponent={Zoom} enterDelay={500}>\r\n                            <IconButton color=\"secondary\">\r\n                              <DeleteForeverIcon />\r\n                            </IconButton>\r\n                          </Tooltip>\r\n                        </ConfirmationDialog>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  );\r\n                })}\r\n              </TableBody>\r\n            </Table>\r\n            <TablePagination\r\n              component=\"div\"\r\n              count={users.length}\r\n              rowsPerPage={rowsPerPage}\r\n              rowsPerPageOptions={[10, 25, 50]}\r\n              labelRowsPerPage=\"Покажи:\"\r\n              labelDisplayedRows={({ from, to, count }) => `${from}-${to} от ${count}`}\r\n              page={page}\r\n              onChangePage={(e, page) => this.setState({ page })}\r\n              onChangeRowsPerPage={e => this.setState({ rowsPerPage: e.target.value, page: 0 })}\r\n            />\r\n          </Hidden>\r\n\r\n          <Hidden smUp>\r\n            <List>\r\n              {users.map((user, index) => {\r\n                return (\r\n                  <React.Fragment key={index}>\r\n                    <ListItem style={{ padding: '0', justifyContent: 'space-between' }}>\r\n                      <div>\r\n                        <Link to={`/users/${user.id}`}>\r\n                          <Typography variant=\"body2\">{user.name}</Typography>\r\n                        </Link>\r\n                        <Typography style={{ fontStyle: 'italic' }}>\r\n                          {user.email}\r\n                        </Typography>\r\n                      </div>\r\n\r\n                      <div>\r\n                        <IconButton color=\"primary\" onClick={() => this.setState({ editUser: this.prepareForEdit(user) })}>\r\n                          <BuildIcon />\r\n                        </IconButton>\r\n                        <IconButton color=\"primary\" onClick={() => this.setState({ subsUser: user })}>\r\n                          <DescriptionOutlinedIcon />\r\n                        </IconButton>\r\n                        <ConfirmationDialog\r\n                          title=\"Изтриване на потребител\"\r\n                          body={<Typography>Сигурни ли сте че искате да изтриете {user.name}</Typography>}\r\n                          onAccept={() => this.remove(index)}\r\n                        >\r\n                          <IconButton color=\"secondary\">\r\n                            <DeleteForeverIcon />\r\n                          </IconButton>\r\n                        </ConfirmationDialog>\r\n                      </div>\r\n                    </ListItem>\r\n                    <Divider />\r\n                  </React.Fragment>\r\n                );\r\n              })}\r\n            </List>\r\n          </Hidden>\r\n\r\n        </Paper>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Users;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport FormModal from '../components/FormModal';\r\nimport UserModel from './user.model';\r\nimport QueryService from '../services/query.service';\r\n\r\nclass UserProfileFormModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      model: UserModel.get(),\r\n      errors: UserModel.getErrorsModel()\r\n    }\r\n\r\n    this.handleChange = (prop, custom = false) => (event) => {\r\n      let model = this.state.model;\r\n      model[prop] = (custom ? event : event.target.value);\r\n      this.setState({ model });\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ model: this.props.model });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.model != this.props.model)\r\n      this.setState({ model: this.props.model });\r\n  }\r\n\r\n  save() {\r\n    const { model } = this.state;\r\n\r\n    return QueryService\r\n      .post('/users/updateSecondaryData', model)\r\n      .then(() => this.props.onChange())\r\n      .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  render() {\r\n    const { model, errors } = this.state;\r\n    const { onClose } = this.props;\r\n\r\n    const title = 'Промяна на допълнителна информация за акаунт';\r\n    const actions = <React.Fragment>\r\n      <Button variant=\"contained\" color=\"primary\" onClick={() => this.save()}>Запис</Button>\r\n      <Button variant=\"outlined\" color=\"primary\" onClick={onClose}>Отказ</Button>\r\n    </React.Fragment>;\r\n    const body = <UserModel.UserPlayerSecondaryData user={model} onChange={this.handleChange} errors={errors} />\r\n\r\n    return (\r\n      <FormModal\r\n        enableFullWidth={true}\r\n        onClose={onClose}\r\n        title={title}\r\n        body={body}\r\n        actions={actions}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default UserProfileFormModal;","import React from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport QueryService from '../services/query.service';\r\nimport FormModal from '../components/FormModal';\r\n\r\nclass ChangePasswordModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      currentPassword: '',\r\n      newPassword: '',\r\n      confirmNewPassword: '',\r\n      errors: null\r\n    };\r\n\r\n    this.handleChange = (prop) => (event) => {\r\n      const state = this.state;\r\n      state[prop] = event.target.value;\r\n      this.setState(state);\r\n    }\r\n  }\r\n\r\n  save() {\r\n    return QueryService\r\n      .post('/users/changePassword', this.state)\r\n      .then(() => this.props.onClose())\r\n      .catch(err => this.setState({ errors: err.name }));\r\n  }\r\n\r\n  render() {\r\n    const { currentPassword, newPassword, confirmNewPassword, errors } = this.state;\r\n    const { onClose } = this.props;\r\n\r\n    const title = 'Промяна на парола';\r\n    const actions = <React.Fragment>\r\n      <Button variant=\"contained\" color=\"primary\" onClick={() => this.save()}>Запис</Button>\r\n      <Button variant=\"outlined\" color=\"primary\" onClick={onClose}>Отказ</Button>\r\n    </React.Fragment>;\r\n    const body = <React.Fragment>\r\n      <TextField\r\n        fullWidth\r\n        label=\"Текуща парола\"\r\n        type=\"password\"\r\n        value={currentPassword}\r\n        onChange={this.handleChange('currentPassword')}\r\n        error={errors == 'InvalidCredentialsException'}\r\n        helperText={errorTexts[errors]}\r\n      />\r\n      <TextField\r\n        fullWidth\r\n        label=\"Нова парола\"\r\n        type=\"password\"\r\n        value={newPassword}\r\n        onChange={this.handleChange('newPassword')}\r\n        error={errors == 'PasswordRequired'}\r\n        helperText={errorTexts[errors]}\r\n      />\r\n      <TextField\r\n        fullWidth\r\n        label=\"Повтори новата парола\"\r\n        type=\"password\"\r\n        value={confirmNewPassword}\r\n        onChange={this.handleChange('confirmNewPassword')}\r\n        error={errors == 'PasswordDoesntMatch'}\r\n        helperText={errorTexts[errors]}\r\n      />\r\n    </React.Fragment>;\r\n\r\n    return (\r\n      <FormModal\r\n        enableFullWidth={true}\r\n        onClose={onClose}\r\n        title={title}\r\n        body={body}\r\n        actions={actions}\r\n        hasError={errors}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst errorTexts = {\r\n  'InvalidCredentialsException': 'Неправилна парола',\r\n  'PasswordRequired': 'Задължително поле',\r\n  'PasswordDoesntMatch': 'Паролите не съвпадат'\r\n}\r\n\r\nexport default ChangePasswordModal;","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { l10n_text } from '../../components/L10n';\r\n\r\nclass PlayerInfoComponent extends React.Component {\r\n  render() {\r\n    const { user, style } = this.props;\r\n    return (\r\n      <div style={style}>\r\n        <Typography variant=\"caption\">\r\n          Играе от\r\n          <Typography>{user.startedPlaying ? user.startedPlaying + 'г.' : 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Играе с\r\n          <Typography>{l10n_text(user.playStyle, \"PlayStyle\") || 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Бекхенд\r\n          <Typography>{l10n_text(user.backhandType, \"BackhandType\") || 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Любима настилка\r\n          <Typography>{l10n_text(user.courtType, \"CourtType\") || 'няма'}</Typography>\r\n        </Typography>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PlayerInfoComponent;","import React from 'react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport List from '@material-ui/core/List';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport UserService from '../services/user.service';\r\nimport QueryService from '../services/query.service';\r\nimport { l10n_text } from '../components/L10n';\r\nimport { getHour } from '../utils';\r\nimport UserProfileFormModal from './UserProfileFormModal';\r\nimport ChangePasswordModal from './ChangePasswordModal'\r\nimport InvitationsComponent from './InvitationsComponent';\r\n\r\nimport PlayerInfoComponent from './components/PlayerInfoComponent';\r\n\r\nclass TeamView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: null\r\n    }\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    QueryService\r\n      .get(`/users/${this.props.match.params.id}/playerInfo`)\r\n      .then(user => this.setState({ user }));\r\n  }\r\n\r\n  render() {\r\n    const { user } = this.state;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        {user &&\r\n          <Card>\r\n            <CardContent>\r\n              <Typography variant=\"headline\">{user.name}</Typography>\r\n              <PlayerInfoComponent user={user} />\r\n            </CardContent>\r\n          </Card>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TeamView;","import React from 'react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport List from '@material-ui/core/List';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport UserService from '../services/user.service';\r\nimport QueryService from '../services/query.service';\r\nimport { l10n_text } from '../components/L10n';\r\nimport { getHour } from '../utils';\r\nimport UserProfileFormModal from './UserProfileFormModal';\r\nimport ChangePasswordModal from './ChangePasswordModal'\r\nimport InvitationsComponent from './InvitationsComponent';\r\n\r\nclass UserProfile extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loggedInUser: null,\r\n      user: {\r\n        team: {}\r\n      },\r\n      subscriptions: null,\r\n      reservations: null,\r\n      invitations: null,\r\n      subsCollapsed: true,\r\n      resCollapsed: true,\r\n      invCollapsed: true,\r\n      userModel: null,\r\n      changePassword: false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setUser()\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  setUser() {\r\n    return UserService.getAuthenticatedUser()\r\n      .then(user => this.setState({ loggedInUser: user }));\r\n  }\r\n\r\n  getData() {\r\n    const id = this.props.match.params.id || this.state.loggedInUser.id;\r\n\r\n    if (!this.props.match.params.id || this.props.match.params.id == this.state.loggedInUser.id)\r\n      QueryService.get('/invitations')\r\n        .then(invitations => this.setState({ invitations }));\r\n\r\n    QueryService\r\n      .get(`/users/${id}`)\r\n      .then(e => this.setState(e));\r\n  }\r\n\r\n  identity() {\r\n    return this.props.match.params.id && this.state.loggedInUser && this.props.match.params.id == this.state.loggedInUser.id;\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      user,\r\n      userModel,\r\n      reservations,\r\n      subscriptions,\r\n      invitations,\r\n      subsCollapsed,\r\n      resCollapsed,\r\n      invCollapsed,\r\n      changePassword\r\n    } = this.state;\r\n    const { mode, classes } = this.props;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        {userModel\r\n          && <UserProfileFormModal\r\n            model={userModel}\r\n            onChange={() => { this.getData(); this.setState({ userModel: null }) }}\r\n            onClose={() => this.setState({ userModel: null })}\r\n          />}\r\n\r\n        {changePassword && <ChangePasswordModal onClose={() => this.setState({ changePassword: false })} />}\r\n\r\n        <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography classes={{ root: classes.sectionHeadline }} variant=\"headline\">{user.name}</Typography>\r\n            <div style={{ display: 'flex', justifyContent: 'flex-start' }}>\r\n              <div style={{ position: 'relative', margin: '0 1rem' }}>\r\n                {!user.thumbnailId && <img src=\"/assets/tennis-player-free-vector.jpg\" style={{ borderRadius: '5px', height: '150px' }} />}\r\n                {user.thumbnailId && <img src={QueryService.getFileUrl(user.thumbnailId)} style={{ borderRadius: '5px', height: '150px' }} />}\r\n              </div>\r\n              <UserPersonalInfo user={user} />\r\n              <UserPlayerInfo user={user} style={{ marginLeft: '2rem' }} />\r\n            </div>\r\n          </CardContent>\r\n          <CardActions>\r\n          </CardActions>\r\n        </Card>\r\n\r\n        {invitations && <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography\r\n              variant=\"headline\"\r\n              classes={{ root: classes.sectionHeadline }}\r\n              onClick={() => this.setState({ invCollapsed: !invCollapsed })}\r\n            >\r\n              <span>Покани за турнири</span>\r\n              {invCollapsed && <ExpandLessIcon />}\r\n              {!invCollapsed && <ExpandMoreIcon />}\r\n            </Typography>\r\n            {invCollapsed && <InvitationsComponent invitations={this.state.invitations} onChange={() => this.getData()} />}\r\n          </CardContent>\r\n        </Card>}\r\n\r\n        {reservations != null && <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography\r\n              variant=\"headline\"\r\n              classes={{ root: classes.sectionHeadline }}\r\n              onClick={() => this.setState({ resCollapsed: !resCollapsed })}\r\n            >\r\n              <span>Резервации</span>\r\n              <Typography component=\"em\">\r\n                Дължим брой часове: {user.reservationDebt}\r\n              </Typography>\r\n              {resCollapsed && <ExpandLessIcon />}\r\n              {!resCollapsed && <ExpandMoreIcon />}\r\n            </Typography>\r\n            {resCollapsed\r\n              && <React.Fragment>\r\n                <List>\r\n                  {reservations.map(reservation => {\r\n                    return (\r\n                      <Typography classes={{ root: classes.listItemRoot }} key={reservation.id}>\r\n                        {l10n_text(reservation.type, \"CustomReservationType\")}\r\n                        <Typography component=\"span\" variant=\"caption\" style={{ display: 'inline', marginLeft: '1rem' }}>{reservation.court.name}</Typography>\r\n                        {!reservation.isActive && <Typography component=\"span\" color=\"secondary\">ОТМЕНЕНО</Typography>}\r\n                        <Typography component=\"span\" variant=\"caption\">\r\n                          {reservation.season.name}\r\n                          <span style={{ marginLeft: '1rem' }}>{new Date(reservation.date).toLocaleDateString()}</span>\r\n                          <span style={{ marginLeft: '1rem' }}>\r\n                            {getHour(reservation.hour)} - {getHour(reservation.hour + 1)}\r\n                          </span>\r\n                        </Typography>\r\n                      </Typography>\r\n                    );\r\n                  })}\r\n                </List>\r\n                {reservations.length == 0 && <Typography variant=\"caption\">Няма регистрирани резервации.</Typography>}\r\n              </React.Fragment>}\r\n          </CardContent>\r\n        </Card>}\r\n\r\n        {subscriptions != null && <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography\r\n              variant=\"headline\"\r\n              classes={{ root: classes.sectionHeadline }}\r\n              onClick={() => this.setState({ subsCollapsed: !subsCollapsed })}\r\n            >\r\n              <span>Абонаменти</span>\r\n              <Typography component=\"em\">\r\n                Дължим членски внос: {user.subscriptionDebt}лв.\r\n              </Typography>\r\n              {subsCollapsed && <ExpandLessIcon />}\r\n              {!subsCollapsed && <ExpandMoreIcon />}\r\n            </Typography>\r\n            {subsCollapsed\r\n              && <React.Fragment>\r\n                <List>\r\n                  {subscriptions.map(subscription => {\r\n                    return (\r\n                      <Typography classes={{ root: classes.listItemRoot }} key={subscription.id}>\r\n                        Абонамент {l10n_text(subscription.type, \"SubscriptionType\")}\r\n                        <Typography component=\"span\" variant=\"caption\" style={{ display: 'inline', marginLeft: '1rem' }}>{subscription.season.name}</Typography>\r\n                        <Typography component=\"span\" variant=\"caption\">{subscription.remainingHours} оставащи часове</Typography>\r\n                      </Typography>\r\n                    );\r\n                  })}\r\n                </List>\r\n                {subscriptions.length == 0 && <Typography variant=\"caption\">Няма регистрирани абонаменти.</Typography>}\r\n              </React.Fragment>}\r\n          </CardContent>\r\n        </Card>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport class UserPersonalInfo extends React.Component {\r\n  render() {\r\n    const { user } = this.props;\r\n    return (\r\n      <div>\r\n        <Typography variant=\"caption\">\r\n          Email\r\n          <Typography>{user.email}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Телефон\r\n          <Typography>{user.telephone || 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Рожденна дата\r\n          <Typography>{user.birthDate || 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Пол\r\n          <Typography>{l10n_text(user.gender, \"Gender\") || 'няма'}</Typography>\r\n        </Typography>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport class UserPlayerInfo extends React.Component {\r\n  render() {\r\n    const { user, style } = this.props;\r\n    return (\r\n      <div style={style}>\r\n        <Typography variant=\"caption\">\r\n          Играе от\r\n          <Typography>{user.startedPlaying ? user.startedPlaying + 'г.' : 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Играе с\r\n          <Typography>{l10n_text(user.playStyle, \"PlayStyle\") || 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Бекхенд\r\n          <Typography>{l10n_text(user.backhandType, \"BackhandType\") || 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Любима настилка\r\n          <Typography>{l10n_text(user.courtType, \"CourtType\") || 'няма'}</Typography>\r\n        </Typography>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  sectionRoot: {\r\n    marginBottom: '1rem'\r\n  },\r\n  cardContentRoot: {\r\n    '&:last-child': {\r\n    }\r\n  },\r\n  sectionHeadline: {\r\n    cursor: 'pointer',\r\n    display: 'flex',\r\n    justifyContent: 'space-between'\r\n  },\r\n  listItemRoot: {\r\n    padding: '.3rem 0',\r\n    borderBottom: '1px solid lightgrey'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(UserProfile);","import React, { useReducer } from 'react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport List from '@material-ui/core/List';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Switch from '@material-ui/core/Switch';\r\n\r\nimport UserService from '../services/user.service';\r\nimport QueryService from '../services/query.service';\r\nimport { l10n_text } from '../components/L10n';\r\nimport { getHour } from '../utils';\r\nimport { UserPersonalInfo, UserPlayerInfo } from './UserProfile';\r\nimport UserProfileFormModal from './UserProfileFormModal';\r\nimport ChangePasswordModal from './ChangePasswordModal'\r\nimport InvitationsComponent from './InvitationsComponent';\r\nimport ImageField from '../components/ImageField';\r\n\r\nclass AccountView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loggedInUser: null,\r\n      user: {\r\n        team: {}\r\n      },\r\n      subscriptions: null,\r\n      reservations: null,\r\n      invitations: null,\r\n      subsCollapsed: true,\r\n      resCollapsed: true,\r\n      invCollapsed: true,\r\n      userModel: null,\r\n      changePassword: false,\r\n      errorMessage: null\r\n    }\r\n\r\n    this.handleThumbnail = (e, isDelete) => {\r\n      const user = this.state.user;\r\n      if (isDelete) {\r\n        user.thumbnail = null;\r\n        user.thumbnailId = null;\r\n        this.setState({ user, errorMessage: null });\r\n        return QueryService\r\n          .post(`/users/${user.id}/updateThumbnail`, { fileId: null })\r\n          .catch(({ message }) => {\r\n            this.setState({ errorMessage: message });\r\n            setTimeout(() => this.setState({ errorMessage: null }), 60 * 1000);\r\n          });\r\n      }\r\n\r\n      if (!e || !e.target.files || !e.target.files[0])\r\n        return;\r\n\r\n      return QueryService\r\n        .uploadFile(e.target.files[0])\r\n        .then(file => {\r\n          user.thumbnail = file;\r\n          user.thumbnailId = file.id;\r\n          return QueryService.post(`/users/${user.id}/updateThumbnail`, { fileId: file.id });\r\n        }).then(({ thumbnailId }) => {\r\n          user.thumbnailId = thumbnailId;\r\n          this.setState({ user, errorMessage: null });\r\n        }).catch(({ message }) => {\r\n          this.setState({ errorMessage: message });\r\n          setTimeout(() => this.setState({ errorMessage: null }), 60 * 1000);\r\n        });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setUser()\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  setUser() {\r\n    return UserService.getAuthenticatedUser()\r\n      .then(user => this.setState({ loggedInUser: user }));\r\n  }\r\n\r\n  getData() {\r\n    const id = this.props.match.params.id || this.state.loggedInUser.id;\r\n\r\n    if (!this.props.match.params.id || this.props.match.params.id == this.state.loggedInUser.id)\r\n      QueryService.get('/invitations')\r\n        .then(invitations => this.setState({ invitations }));\r\n\r\n    QueryService\r\n      .get(`/users/${id}`)\r\n      .then(e => this.setState(e));\r\n  }\r\n\r\n  participateInTournaments() {\r\n    QueryService.get(`/teams/${this.state.user.team.id}/participateInTournaments?timestamp=${new Date().getTime()}`)\r\n      .then(_ => {\r\n        let user = this.state.user;\r\n        user.team.participateInTournaments = !user.team.participateInTournaments;\r\n        this.setState({ user });\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      user,\r\n      userModel,\r\n      reservations,\r\n      subscriptions,\r\n      invitations,\r\n      subsCollapsed,\r\n      resCollapsed,\r\n      invCollapsed,\r\n      changePassword,\r\n      errorMessage\r\n    } = this.state;\r\n    const { mode, classes } = this.props;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        {userModel\r\n          && <UserProfileFormModal\r\n            model={userModel}\r\n            onChange={() => { this.getData(); this.setState({ userModel: null }) }}\r\n            onClose={() => this.setState({ userModel: null })}\r\n          />}\r\n\r\n        {changePassword && <ChangePasswordModal onClose={() => this.setState({ changePassword: false })} />}\r\n\r\n        <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography style={{ color: 'darkred', fontStyle: 'italic', fontWeight: 700 }}>{errorMessage}</Typography>\r\n            <Typography classes={{ root: classes.sectionHeadline }} variant=\"headline\">{user.name}</Typography>\r\n            <div style={{ display: 'flex', justifyContent: 'flex-start', flexWrap: 'wrap', marginLeft: '-1rem' }}>\r\n              <div style={{ position: 'relative', margin: '0 1rem' }}>\r\n                <input ref={ref => this.inputRef = ref} onChange={this.handleThumbnail} type=\"file\" style={{ display: 'none' }} accept=\"image/*\" />\r\n                {!user.thumbnailId && <img src=\"/assets/tennis-player-free-vector.jpg\" style={{ borderRadius: '5px', height: '150px' }} />}\r\n                {user.thumbnailId && <img src={QueryService.getFileUrl(user.thumbnailId)} style={{ borderRadius: '5px', height: '150px' }} />}\r\n                <EditIcon color=\"primary\" style={{ position: 'absolute', top: '5px', left: '5px', height: '25px', cursor: 'pointer' }} onClick={() => this.inputRef.click()} />\r\n                {user.thumbnailId && <ClearIcon color=\"secondary\" style={{ position: 'absolute', top: '5px', right: '5px', height: '25px', cursor: 'pointer' }} onClick={(e) => this.handleThumbnail(e, true)} />}\r\n              </div>\r\n              <UserPersonalInfo user={user} style={{ marginLeft: '1.1rem' }} />\r\n              <UserPlayerInfo user={user} style={{ marginLeft: '1.1rem' }} />\r\n            </div>\r\n            <div style={{ marginBottom: '1rem' }}>\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    color=\"primary\"\r\n                    checked={Boolean(user.team.participateInTournaments)}\r\n                    onClick={() => this.participateInTournaments()}\r\n                  />\r\n                }\r\n                label=\"Участие в турнири\"\r\n              />\r\n              <Typography variant=\"caption\" color=\"secondary\">\r\n                При активиране на тази опция се съгласявате с условията и правилата на клуба спрямо провеждането на турнири по тенис и ще бъдете включени в класацията на играчите.\r\n              </Typography>\r\n            </div>\r\n            <div>\r\n              <Button variant=\"contained\" size=\"small\" color=\"primary\" onClick={() => this.setState({ userModel: Object.assign({}, user) })}>Промяна</Button>\r\n              <Button variant=\"contained\" size=\"small\" color=\"primary\" style={{ marginLeft: '.3rem' }} onClick={() => this.setState({ changePassword: true })}>Смяна на парола</Button>\r\n            </div>\r\n          </CardContent>\r\n          <CardActions>\r\n          </CardActions>\r\n        </Card>\r\n\r\n        {invitations && <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography\r\n              variant=\"headline\"\r\n              classes={{ root: classes.sectionHeadline }}\r\n              onClick={() => this.setState({ invCollapsed: !invCollapsed })}\r\n            >\r\n              <span>Покани за турнири</span>\r\n              {invCollapsed && <ExpandLessIcon />}\r\n              {!invCollapsed && <ExpandMoreIcon />}\r\n            </Typography>\r\n            {invCollapsed && <InvitationsComponent invitations={this.state.invitations} onCancel={() => this.getData()} onAccept={() => this.getData()} />}\r\n          </CardContent>\r\n        </Card>}\r\n\r\n        {reservations != null && <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography\r\n              variant=\"headline\"\r\n              classes={{ root: classes.sectionHeadline }}\r\n              onClick={() => this.setState({ resCollapsed: !resCollapsed })}\r\n            >\r\n              <span>Резервации</span>\r\n              <Typography component=\"em\">\r\n                Дължим брой часове: {user.reservationDebt}\r\n              </Typography>\r\n              {resCollapsed && <ExpandLessIcon />}\r\n              {!resCollapsed && <ExpandMoreIcon />}\r\n            </Typography>\r\n            {resCollapsed\r\n              && <React.Fragment>\r\n                <List>\r\n                  {reservations.map(reservation => {\r\n                    return (\r\n                      <Typography classes={{ root: classes.listItemRoot }} key={reservation.id}>\r\n                        {l10n_text(reservation.type, \"CustomReservationType\")}\r\n                        <Typography component=\"span\" variant=\"caption\" style={{ display: 'inline', marginLeft: '1rem' }}>{reservation.court.name}</Typography>\r\n                        {!reservation.isActive && <Typography component=\"span\" color=\"secondary\">ОТМЕНЕНО</Typography>}\r\n                        <Typography component=\"span\" variant=\"caption\">\r\n                          {reservation.season.name}\r\n                          <span style={{ marginLeft: '1rem' }}>{new Date(reservation.date).toLocaleDateString()}</span>\r\n                          <span style={{ marginLeft: '1rem' }}>\r\n                            {getHour(reservation.hour)} - {getHour(reservation.hour + 1)}\r\n                          </span>\r\n                        </Typography>\r\n                      </Typography>\r\n                    );\r\n                  })}\r\n                </List>\r\n                {reservations.length == 0 && <Typography variant=\"caption\">Няма регистрирани резервации.</Typography>}\r\n              </React.Fragment>}\r\n          </CardContent>\r\n        </Card>}\r\n\r\n        {subscriptions != null && <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography\r\n              variant=\"headline\"\r\n              classes={{ root: classes.sectionHeadline }}\r\n              onClick={() => this.setState({ subsCollapsed: !subsCollapsed })}\r\n            >\r\n              <span>Абонаменти</span>\r\n              <Typography component=\"em\">\r\n                Дължим членски внос: {user.subscriptionDebt}лв.\r\n              </Typography>\r\n              {subsCollapsed && <ExpandLessIcon />}\r\n              {!subsCollapsed && <ExpandMoreIcon />}\r\n            </Typography>\r\n            {subsCollapsed\r\n              && <React.Fragment>\r\n                <List>\r\n                  {subscriptions.map(subscription => {\r\n                    return (\r\n                      <Typography classes={{ root: classes.listItemRoot }} key={subscription.id}>\r\n                        Абонамент {l10n_text(subscription.type, \"SubscriptionType\")}\r\n                        <Typography component=\"span\" variant=\"caption\" style={{ display: 'inline', marginLeft: '1rem' }}>{subscription.season.name}</Typography>\r\n                        <Typography component=\"span\" variant=\"caption\">{subscription.remainingHours} оставащи часове</Typography>\r\n                      </Typography>\r\n                    );\r\n                  })}\r\n                </List>\r\n                {subscriptions.length == 0 && <Typography variant=\"caption\">Няма регистрирани абонаменти.</Typography>}\r\n              </React.Fragment>}\r\n          </CardContent>\r\n        </Card>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  sectionRoot: {\r\n    marginBottom: '1rem'\r\n  },\r\n  cardContentRoot: {\r\n    '&:last-child': {\r\n    }\r\n  },\r\n  sectionHeadline: {\r\n    cursor: 'pointer',\r\n    display: 'flex',\r\n    justifyContent: 'space-between'\r\n  },\r\n  listItemRoot: {\r\n    padding: '.3rem 0',\r\n    borderBottom: '1px solid lightgrey'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(AccountView);","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../services/query.service';\r\n\r\nclass AccountActivation extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      err: false,\r\n      success: false,\r\n      timer: 5\r\n    };\r\n    this.interval = null;\r\n  }\r\n\r\n  componentDidMount() {\r\n    let token = this.props.location.search.split('?token=');\r\n    if (token.length > 1)\r\n      token = token[1].trim();\r\n    else\r\n      token = \"\";\r\n\r\n    return QueryService\r\n      .get(`/users/activation?token=${token}`)\r\n      .then(_ => {\r\n        this.setState({ success: true, err: false });\r\n        this.interval = setInterval(() => {\r\n          if (this.state.timer === 0) {\r\n            clearInterval(this.interval);\r\n            this.props.history.replace('/');\r\n          } else {\r\n            this.setState({ timer: this.state.timer - 1 });\r\n          }\r\n        }, 1000);\r\n      })\r\n      .catch(_ => this.setState({ err: true, success: false }));\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <Paper className={classes.root}>\r\n          <Typography align=\"center\" variant=\"headline\">Активация на акунт</Typography>\r\n          {!this.state.success && !this.state.err && <Typography align=\"center\" variant=\"subheading\">\r\n            Проверка на ключ за активация...\r\n          </Typography>}\r\n\r\n          {this.state.success && <Typography align=\"center\" variant=\"subheading\" color=\"primary\" className={classes.success}>\r\n            Активацията на Вашият акаунт беше успешна!\r\n          </Typography>}\r\n          {this.state.success && <Typography align=\"center\" variant=\"headline\" style={{ fontWeight: 700, fontSize: '1.3em' }}>{this.state.timer}</Typography>}\r\n\r\n          {this.state.err && <Typography align=\"center\" variant=\"subheading\" color=\"secondary\" className={classes.error}>\r\n            Невалиден или изтекъл ключ за активация.\r\n        </Typography>}\r\n        </Paper>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    padding: '3rem',\r\n    [theme.breakpoints.down('sm')]: {\r\n      height: '100vh'\r\n    }\r\n  },\r\n  success: {\r\n    marginTop: '2rem',\r\n    color: theme.palette.primary.dark,\r\n    fontWeight: '700'\r\n  },\r\n  error: {\r\n    marginTop: '2rem',\r\n    color: theme.palette.secondary.dark,\r\n    fontWeight: '700'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(AccountActivation);","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../services/query.service';\r\n\r\nclass RecoveryStep1 extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      email: '',\r\n      error: null,\r\n      success: false\r\n    };\r\n  }\r\n\r\n  issueRecoverEmail() {\r\n    this.setState({ error: null, success: false });\r\n    return QueryService\r\n      .get(`/users/recovery/step1?email=${this.state.email}`)\r\n      .then(_ => {\r\n        this.setState({ success: true })\r\n        setTimeout(() => this.props.history.replace('/'), 5000);\r\n      })\r\n      .catch(err => this.setState({ error: err }));\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return <div className=\"container\">\r\n      <Paper elevation={0} className={classes.root}>\r\n        <Typography variant=\"headline\">Възстановяване на забравена парола</Typography>\r\n        <TextField\r\n          id=\"email\"\r\n          label=\"E-mail\"\r\n          type=\"text\"\r\n          value={this.state.email}\r\n          fullWidth={true}\r\n          error={this.state.error}\r\n          onChange={e => this.setState({ email: e.target.value })}\r\n        />\r\n\r\n        {this.state.success && <Typography\r\n          variant=\"subheading\"\r\n          color=\"primary\"\r\n          className={classes.success}>\r\n          Успешно изпратен имейл с инструкции за възстановяване на парола.\r\n        </Typography>}\r\n\r\n        {this.state.error && <Typography\r\n          variant=\"subheading\"\r\n          color=\"secondary\"\r\n          className={classes.error}>\r\n          {this.state.error.message}\r\n        </Typography>}\r\n\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          size=\"small\"\r\n          style={{ marginTop: '1rem' }}\r\n          onClick={() => this.issueRecoverEmail()}\r\n        >\r\n          Изпрати\r\n        </Button>\r\n      </Paper>\r\n    </div>\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    padding: '3rem',\r\n    [theme.breakpoints.down('sm')]: {\r\n      height: '100vh'\r\n    }\r\n  },\r\n  success: {\r\n    marginTop: '2rem',\r\n    color: theme.palette.primary.dark,\r\n    fontWeight: '700'\r\n  },\r\n  error: {\r\n    marginTop: '2rem',\r\n    color: theme.palette.secondary.dark,\r\n    fontWeight: '700'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(RecoveryStep1);","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../services/query.service';\r\n\r\nclass RecoveryStep2 extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      token: '',\r\n      password: '',\r\n      confirmPassword: '',\r\n      error: null,\r\n      success: false\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    let token = this.props.location.search.split('?token=');\r\n    if (token.length > 1)\r\n      token = token[1].trim();\r\n    else\r\n      token = \"\";\r\n\r\n    this.setState({ token });\r\n  }\r\n\r\n  recover() {\r\n    this.setState({ error: null, success: false });\r\n    return QueryService\r\n      .post(`/users/recovery/step2`, { token: this.state.token, password: this.state.password, confirmPassword: this.state.confirmPassword })\r\n      .then(_ => {\r\n        this.setState({ success: true });\r\n        setTimeout(() => this.props.history.replace('/'), 5000);\r\n      })\r\n      .catch(err => this.setState({ error: err }));\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return <div className=\"container\">\r\n      <Paper elevation={0} className={classes.root}>\r\n        <Typography variant=\"headline\">Възстановяване на забравена парола</Typography>\r\n\r\n        <TextField\r\n          id=\"password\"\r\n          label=\"Парола\"\r\n          type=\"password\"\r\n          value={this.state.password}\r\n          fullWidth={true}\r\n          error={this.state.error}\r\n          onChange={e => this.setState({ password: e.target.value })}\r\n        />\r\n\r\n        <TextField\r\n          id=\"confirmPassword\"\r\n          label=\"Повтори парола\"\r\n          type=\"password\"\r\n          value={this.state.confirmPassword}\r\n          fullWidth={true}\r\n          error={this.state.error}\r\n          onChange={e => this.setState({ confirmPassword: e.target.value })}\r\n        />\r\n\r\n        {this.state.success && <Typography\r\n          variant=\"subheading\"\r\n          color=\"primary\"\r\n          className={classes.success}>\r\n          Смяната на паролата ви беше успешна!\r\n        </Typography>}\r\n\r\n        {this.state.error && <Typography\r\n          variant=\"subheading\"\r\n          color=\"secondary\"\r\n          className={classes.error}>\r\n          {this.state.error.message}\r\n        </Typography>}\r\n\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          size=\"small\"\r\n          style={{ marginTop: '1rem' }}\r\n          onClick={() => this.recover()}\r\n        >\r\n          Потвърждаване\r\n        </Button>\r\n      </Paper>\r\n    </div>\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    padding: '3rem',\r\n    [theme.breakpoints.down('sm')]: {\r\n      height: '100vh'\r\n    }\r\n  },\r\n  success: {\r\n    marginTop: '2rem',\r\n    color: theme.palette.primary.dark,\r\n    fontWeight: '700'\r\n  },\r\n  error: {\r\n    marginTop: '2rem',\r\n    color: theme.palette.secondary.dark,\r\n    fontWeight: '700'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(RecoveryStep2);","import BuildRoundedIcon from '@material-ui/icons/BuildRounded';\r\nimport ViewQuiltRoundedIcon from '@material-ui/icons/ViewQuiltRounded';\r\nimport WbSunnyRoundedIcon from '@material-ui/icons/WbSunnyRounded';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport LoyaltyIcon from '@material-ui/icons/Loyalty';\r\nimport AssessmentIcon from '@material-ui/icons/Assessment';\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\n\r\nexport const desktopRoutes = [\r\n  { id: 1, to: '/schedule', name: 'График', Icon: CalendarTodayIcon, tag: 'schedule' },\r\n  { id: 2, to: '/editions', name: 'Турнири', faIcon: 'trophy', tag: 'tournaments' }\r\n];\r\n\r\nexport const adminRoutes = [\r\n  { id: 4, to: '/admin/users', name: 'Потребители', Icon: PersonIcon },\r\n  { id: 5, to: '/admin/seasons', name: 'Сезони', Icon: WbSunnyRoundedIcon },\r\n  { id: 6, to: '/admin/courts', name: 'Кортове', Icon: ViewQuiltRoundedIcon },\r\n  { id: 7, to: '/admin/statistics', name: 'Справки', Icon: AssessmentIcon }\r\n];\r\n\r\nexport const tournamentAdditional = [\r\n  { id: 8, to: '/players', name: 'Играчи', faIcon: 'user-friends' },\r\n  { id: 9, to: '/leagues', name: 'Ранглисти', faIcon: 'list-ol' },\r\n  //{ id: 10, to: '/champions', name: 'Шампиони', faIcon: 'medal' },\r\n];\r\n\r\nexport const userRoutes = [\r\n  { id: 3, to: '/account', name: 'Профил', Icon: PersonIcon }\r\n];","import React from 'react';\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\n\r\nimport NotFoundPage from './NotFoundPage';\r\nimport TournamentView from '../tournaments/TournamentView';\r\nimport SchemesRoot from '../schemes/SchemesRoot';\r\nimport GroupsBracket from '../schemes/brackets/GroupsBracket';\r\nimport EliminationBracket from '../schemes/brackets/EliminationBracket';\r\nimport EditionsRoot from '../tournaments/EditionsRoot';\r\nimport TournamentsRoot from '../tournaments/TournamentsRoot';\r\nimport PlayersRoot from '../tournaments/PlayersRoot';\r\n\r\nimport Schedule from '../schedule/Schedule';\r\nimport Courts from '../admin/courts/Courts';\r\nimport Seasons from '../admin/seasons/Seasons';\r\nimport Statistics from '../admin/statistics/Statistics';\r\nimport Users from '../admin/users/Users';\r\nimport TeamView from '../users/TeamView';\r\nimport UserService from '../services/user.service';\r\nimport UserProfile from '../users/UserProfile';\r\nimport AccountView from '../users/AccountView';\r\nimport AccountActivation from '../login/Activation';\r\nimport RecoveryStep1 from '../login/RecoveryStep1';\r\nimport RecoveryStep2 from '../login/RecoveryStep2';\r\nimport { ApplicationMode } from '../enums';\r\n\r\nimport {\r\n  adminRoutes,\r\n  tournamentAdditional,\r\n  desktopRoutes,\r\n  userRoutes\r\n} from '../menu/menu.configuration';\r\n\r\nconst routeMapping = {\r\n  '/schedule': Schedule,\r\n  '/editions': EditionsRoot,\r\n\r\n  //tournament routes\r\n  '/players': PlayersRoot,\r\n  '/leagues': TournamentsRoot,\r\n  //'/champions': ChampionsRoot,\r\n\r\n  //admin routes\r\n  '/admin/courts': Courts,\r\n  '/admin/seasons': Seasons,\r\n  '/admin/users': Users,\r\n  '/admin/statistics': Statistics,\r\n\r\n  //user routes\r\n  '/account': AccountView\r\n};\r\n\r\nconst AppRouting = () => (\r\n  <UserService.WithApplicationMode>\r\n    {mode => <Switch>\r\n      <Route path=\"/tournaments/:id\" component={TournamentView} />\r\n      <Route path=\"/schemes/:id/groups\" component={GroupsBracket} />\r\n      <Route path=\"/schemes/:id/elimination\" component={EliminationBracket} />\r\n      <Route path=\"/schemes\" component={SchemesRoot} />\r\n      <Route path=\"/teams/:id\" component={TeamView} />\r\n\r\n      {desktopRoutes.map(route => {\r\n        return (\r\n          <Route key={route.id} path={route.to} component={routeMapping[route.to]} mode={mode} />\r\n        );\r\n      })}\r\n\r\n      {tournamentAdditional.map(route => {\r\n        return (\r\n          <Route key={route.id} path={route.to} component={routeMapping[route.to]} mode={mode} />\r\n        );\r\n      })}\r\n\r\n      {mode == ApplicationMode.ADMIN && adminRoutes.map(route => {\r\n        return (\r\n          <Route key={route.id} path={route.to} component={routeMapping[route.to]} mode={mode} />\r\n        );\r\n      })}\r\n\r\n      {mode != ApplicationMode.GUEST && userRoutes.map(route => {\r\n        return (\r\n          <Route key={route.id} path={route.to} component={routeMapping[route.to]} mode={mode} />\r\n        );\r\n      })}\r\n\r\n      {(mode == ApplicationMode.USER || mode == ApplicationMode.ADMIN)\r\n        && <Route path=\"/users/:id\" render={(props) => <UserProfile {...props} mode={mode} />} />}\r\n\r\n      <Route path=\"/oops\" component={NotFoundPage} />\r\n      <Route path=\"/account/activation\" render={(props) => <AccountActivation {...props} />} />\r\n      <Route path=\"/recovery/step1\" render={(props) => <RecoveryStep1 {...props} />} />\r\n      <Route path=\"/recovery/step2\" render={(props) => <RecoveryStep2 {...props} />} />\r\n      <Route exact path=\"/\">\r\n        <Redirect to=\"/schedule\" />\r\n      </Route>\r\n      <Route component={NotFoundPage} />\r\n    </Switch>\r\n    }\r\n  </UserService.WithApplicationMode>\r\n);\r\n\r\nexport default AppRouting;\r\n\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../services/query.service';\r\nimport UserService from '../services/user.service';\r\nimport { dispatchEvent } from '../services/events.service';\r\n\r\nconst styles = (theme) => ({\r\n  form: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    //width: 250,\r\n    //margin: '1.5rem auto'\r\n  },\r\n  link: {\r\n    color: theme.palette.primary.main,\r\n    padding: '.3rem 0',\r\n    '&:hover': {\r\n      color: theme.palette.primary.dark,\r\n      borderBottom: '1px solid',\r\n      borderColor: theme.palette.primary.main,\r\n    }\r\n  }\r\n});\r\n\r\nclass Login extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      email: '',\r\n      password: '',\r\n      hasError: false\r\n    };\r\n\r\n    this.handleChange = (name) => (event) => {\r\n      this.setState({\r\n        [name]: event.target.value\r\n      });\r\n    }\r\n  }\r\n\r\n  login() {\r\n    QueryService\r\n      .post(`/login`, this.state)\r\n      .then(({ token }) => {\r\n        UserService.login(token);\r\n        dispatchEvent('logged-in');\r\n        this.props.onClose();\r\n      })\r\n      .catch(() => {\r\n        this.setState({ hasError: true });\r\n        //setTimeout(() => this.setState({ hasError: false }), 10 * 1000);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <form className={classes.form} onKeyDown={e => e.key === 'Enter' ? this.login() : null}>\r\n        <TextField\r\n          label=\"Email\"\r\n          fullWidth={true}\r\n          value={this.state.email}\r\n          onChange={this.handleChange('email')}\r\n        />\r\n\r\n        <TextField\r\n          label=\"Парола\"\r\n          fullWidth={true}\r\n          type=\"password\"\r\n          value={this.state.password}\r\n          onChange={this.handleChange('password')}\r\n        />\r\n\r\n        <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n          <Button variant=\"contained\" color=\"primary\" style={{ marginTop: '1rem', padding: '.3rem  4rem' }}\r\n            onClick={() => this.login()}\r\n          >\r\n            Вход\r\n        </Button>\r\n        </div>\r\n        {this.state.hasError && <em style={{ color: 'red', marginTop: '.5rem' }}>Невалидна комбинация от потребителско име и парола</em>}\r\n        <div style={{ marginTop: '.5rem', display: 'flex', justifyContent: 'center' }}>\r\n          <Link to=\"/recovery/step1\" className={classes.link} onClick={this.props.onClose}>\r\n            Забравена парола?\r\n        </Link>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(Login);","import React from 'react';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\nimport StepContent from '@material-ui/core/StepContent';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport UserModel from '../users/user.model';\r\nimport QueryService from '../services/query.service';\r\n\r\nconst styles = (theme) => ({\r\n  action: {\r\n    marginTop: '1rem',\r\n    display: 'flex',\r\n    justifyContent: 'center'\r\n  },\r\n  focused: {\r\n    marginTop: '.5rem',\r\n    color: 'orange'\r\n  }\r\n});\r\n\r\nclass RegistrationStepper extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      activeStep: 0,\r\n      completed: [false, false, false],\r\n      user: UserModel.get(),\r\n      errors: UserModel.getErrorsModel()\r\n    }\r\n\r\n    this.handleChange = (prop, custom = false) => (event) => {\r\n      let user = this.state.user;\r\n      user[prop] = (custom ? event : event.target.value);\r\n      this.setState({\r\n        user: user\r\n      });\r\n    }\r\n\r\n    this.changeStep = (value) => () => {\r\n      let completed = this.state.completed;\r\n      completed[this.state.activeStep] = true;\r\n      this.setState({ activeStep: value, completed: completed });\r\n    }\r\n  }\r\n\r\n  register() {\r\n    this.setState({ errors: UserModel.getErrorsModel() });\r\n    return QueryService\r\n      .post(`/users`, this.state.user)\r\n      .then(_ => this.props.onSuccess())\r\n      .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  render() {\r\n    const { user, activeStep, completed, errors } = this.state;\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <React.Fragment>\r\n\r\n        <UserModel.UserAccountData\r\n          user={user}\r\n          errors={errors}\r\n          onChange={this.handleChange} />\r\n\r\n        <UserModel.UserPlayerMainData\r\n          user={user}\r\n          errors={errors}\r\n          onChange={this.handleChange} />\r\n\r\n        {/* <UserModel.UserPlayerSecondaryData\r\n          user={user}\r\n          errors={errors}\r\n          onChange={this.handleChange} /> */}\r\n\r\n        <div style={{ margin: '1rem 0' }}>\r\n          <em>\r\n            Натискайки бутона \"Регистрация\", Вие се съгласявате при нужда да бъдете потърсени на предоставения телефонен номер\r\n          </em>\r\n          <div className={classes.action}>\r\n            <Button style={{ marginRight: '.3rem', padding: '.3rem 2rem' }} variant=\"contained\" color=\"primary\" onClick={() => this.register()}>\r\n              Регистрация\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nclass StepActions extends React.Component {\r\n  render() {\r\n    const { activeStep, changeStep, finalStep, className } = this.props;\r\n\r\n    return (\r\n      <div className={className}>\r\n        {activeStep != 0 && <Button\r\n          variant=\"outlined\"\r\n          color=\"primary\"\r\n          size=\"small\"\r\n          disabled={activeStep === 0}\r\n          onClick={changeStep(activeStep - 1)}\r\n        >\r\n          Назад\r\n          </Button>}\r\n\r\n        <Button\r\n          style={{ marginLeft: '.3rem' }}\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          size=\"small\"\r\n          onClick={changeStep(activeStep + 1)}\r\n        >\r\n          {activeStep === finalStep ? 'Приключване' : 'Продължи'}\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default withStyles(styles)(RegistrationStepper);\r\n\r\n// render() {\r\n//   const { user, activeStep, completed, errors } = this.state;\r\n//   const { classes } = this.props;\r\n\r\n//   return (\r\n//     <React.Fragment>\r\n//       <Stepper\r\n//         nonLinear\r\n//         activeStep={activeStep}\r\n//         orientation=\"vertical\"\r\n//       >\r\n//         <Step>\r\n//           <StepLabel\r\n//             style={{ cursor: 'pointer' }}\r\n//             onClick={this.changeStep(0)}\r\n//             completed={completed[0]}\r\n//             error={errors.email.length\r\n//               + errors.password.length\r\n//               + errors.confirmPassword.length > 0}\r\n//           >\r\n//             Данни за акаунт\r\n//             </StepLabel>\r\n//           <StepContent>\r\n//             <UserModel.UserAccountData\r\n//               user={user}\r\n//               errors={errors}\r\n//               onChange={this.handleChange} />\r\n\r\n//             <StepActions\r\n//               activeStep={activeStep}\r\n//               finalStep={2}\r\n//               className={classes.action}\r\n//               changeStep={this.changeStep} />\r\n//           </StepContent>\r\n//         </Step>\r\n//         <Step>\r\n//           <StepLabel\r\n//             style={{ cursor: 'pointer' }}\r\n//             completed={completed[1]}\r\n//             onClick={this.changeStep(1)}\r\n//             error={errors.firstName.length\r\n//               + errors.lastName.length\r\n//               + errors.telephone.length\r\n//               + errors.gender.length\r\n//               + errors.birthDate.length > 0}\r\n//           >\r\n//             Основни данни за играч\r\n//             </StepLabel>\r\n//           <StepContent>\r\n//             <UserModel.UserPlayerMainData\r\n//               user={user}\r\n//               errors={errors}\r\n//               onChange={this.handleChange} />\r\n\r\n//             <StepActions\r\n//               activeStep={activeStep}\r\n//               finalStep={2}\r\n//               className={classes.action}\r\n//               changeStep={this.changeStep} />\r\n//           </StepContent>\r\n//         </Step>\r\n//         <Step>\r\n//           <StepLabel\r\n//             style={{ cursor: 'pointer' }}\r\n//             onClick={this.changeStep(2)}\r\n//             completed={completed[2]}\r\n//             error={errors.startedPlaying.length\r\n//               + errors.playStyle.length\r\n//               + errors.courtType.length\r\n//               + errors.backhandType.length > 0}\r\n//           >\r\n//             Допълнителни данни за играч\r\n//             </StepLabel>\r\n//           <StepContent>\r\n//             <UserModel.UserPlayerSecondaryData\r\n//               user={user}\r\n//               errors={errors}\r\n//               onChange={this.handleChange} />\r\n\r\n//             <StepActions\r\n//               activeStep={activeStep}\r\n//               finalStep={2}\r\n//               className={classes.action}\r\n//               changeStep={this.changeStep} />\r\n//           </StepContent>\r\n//         </Step>\r\n//       </Stepper>\r\n\r\n//       {activeStep === 3 && <div>\r\n//         <em>\r\n//           Натискайки бутонът \"Регистрация\" Вие се съгласявате да получавате съобщения относно\r\n//           статуса на турнири за които сте записани, както и при нужда да бъдете потърсени по\r\n//           телефонния номер който сте задали.\r\n//           </em>\r\n//         <div className={classes.action}>\r\n//           <Button variant=\"outlined\" color=\"primary\" size=\"small\" onClick={this.changeStep(0)}>\r\n//             Промяна\r\n//           </Button>\r\n\r\n//           <Button style={{ marginLeft: '.3rem' }} variant=\"contained\" size=\"small\" color=\"primary\" onClick={() => this.register()}>\r\n//             Регистрация\r\n//           </Button>\r\n//         </div>\r\n//       </div>\r\n//       }\r\n//     </React.Fragment>\r\n//   );\r\n// }","import React from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport SwipeableViews from 'react-swipeable-views';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport Button from '@material-ui/core/Button';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Login from './Login';\r\nimport Registration from './Registration';\r\nimport EventService from '../services/events.service';\r\n\r\nconst styles = (theme) => ({\r\n  centered: {\r\n    display: 'flex',\r\n    justifyContent: 'center'\r\n  },\r\n  smallContainer: {\r\n    width: 320\r\n  },\r\n  closeBtn: {\r\n    position: 'absolute',\r\n    color: theme.palette.primary.main,\r\n    top: '5px',\r\n    right: '5px',\r\n    cursor: 'pointer',\r\n    '&:hover': {\r\n      color: theme.palette.primary.dark\r\n    }\r\n  }\r\n});\r\n\r\nclass SignIn extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      index: 0,\r\n      open: false,\r\n      successfulRegistration: false\r\n    };\r\n\r\n    this.handleTabChange = (event, index) => {\r\n      this.setState({ index });\r\n    };\r\n\r\n    this.handleRegistration = () => {\r\n      this.setState({ successfulRegistration: true, open: false });\r\n      setTimeout(() => this.setState({ successfulRegistration: false }), 5000);\r\n    }\r\n  }\r\n\r\n  componentWillMount() {\r\n    EventService.catchEvent('menu-login', () => this.setState({ open: true }));\r\n  }\r\n\r\n  render() {\r\n    const { index, open, successfulRegistration } = this.state;\r\n    const { classes, fullScreen } = this.props;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <Dialog\r\n          open={open}\r\n          fullScreen={fullScreen}\r\n          onClose={() => this.setState({ open: false, index: 0 })}\r\n          aria-labelledby=\"login-dialog\"\r\n        >\r\n          <DialogTitle id=\"login-dialog\"\r\n            className={classes.centered}\r\n          >\r\n            <Tabs\r\n              className={classes.smallContainer}\r\n              centered={true}\r\n              value={index}\r\n              onChange={this.handleTabChange}\r\n              indicatorColor=\"primary\"\r\n              textColor=\"primary\"\r\n            >\r\n              <Tab label=\"Вход\" key=\"1\" />\r\n              <Tab label=\"Регистрация\" key=\"2\" />\r\n            </Tabs>\r\n            <span className={classes.closeBtn} onClick={() => this.setState({ open: false, index: 0 })}>\r\n              <ClearIcon />\r\n            </span>\r\n          </DialogTitle>\r\n          <DialogContent\r\n            className={classes.centered}>\r\n            <SwipeableViews\r\n              className={classes.smallContainer}\r\n              index={index}\r\n              onChangeIndex={(index) => this.handleTabChange(null, index)}\r\n            >\r\n              <Login onClose={() => this.setState({ open: false, index: 0 })} />\r\n              <Registration onSuccess={this.handleRegistration} />\r\n            </SwipeableViews>\r\n          </DialogContent>\r\n          <DialogActions>\r\n\r\n          </DialogActions>\r\n        </Dialog>\r\n\r\n        <Dialog\r\n          open={successfulRegistration}\r\n          fullScreen={fullScreen}\r\n          onClose={() => this.setState({ successfulRegistration: false })}\r\n          aria-labelledby=\"successful-registration\"\r\n        >\r\n          <DialogContent>\r\n            <Typography variant=\"headline\" color=\"primary\" align=\"center\">\r\n              Регистрацията Ви беше успешна!\r\n            </Typography>\r\n            <Typography variant=\"subheading\" align=\"center\">\r\n              На зададеният от Вас имейл е изпратено съобщение, с което може да активирате вашият акаунт.</Typography>\r\n            <Typography variant=\"caption\" color=\"secondary\" align=\"center\">\r\n              В случай, че не получавате имейл за активация, моля потърсете някой\r\n              от администраторите на системата, който да активира вашият акаунт.\r\n            </Typography>\r\n          </DialogContent>\r\n          <DialogActions style={{ justifyContent: 'center' }}>\r\n            <Button variant=\"contained\" color=\"primary\" size=\"small\"\r\n              onClick={() => this.setState({ successfulRegistration: false })}\r\n            >\r\n              Добре\r\n          </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(SignIn)\r\n);","import React from 'react';\r\n\r\nclass MenuContext {\r\n  constructor() {\r\n    const { Provider, Consumer } = React.createContext(0);\r\n    this.SetCurrentRoute = Provider;\r\n    this.WithCurrentRoute = Consumer;\r\n  }\r\n}\r\n\r\nexport default new MenuContext();","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Link } from 'react-router-dom';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Button from '@material-ui/core/Button';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport PowerSettingsNewIcon from '@material-ui/icons/PowerSettingsNew';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport UserService from '../services/user.service';\r\nimport MenuContext from './menu.context';\r\nimport { dispatchEvent } from '../services/events.service';\r\nimport { ApplicationMode } from '../enums';\r\nimport {\r\n  adminRoutes,\r\n  desktopRoutes,\r\n  userRoutes,\r\n  tournamentAdditional\r\n} from './menu.configuration';\r\n\r\nclass Menu extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      drawerOpen: false\r\n    }\r\n\r\n    this.login = () => {\r\n      this.setState({ drawerOpen: false });\r\n      dispatchEvent('menu-login');\r\n    };\r\n\r\n    this.logout = () => {\r\n      this.setState({ drawerOpen: false });\r\n      UserService.logout();\r\n    }\r\n  }\r\n\r\n  mapToolbarRoute(route, currentRoute) {\r\n    return (\r\n      <Link to={route.to} key={route.id}>\r\n        <Button color=\"primary\" size=\"large\" variant={route.tag == currentRoute ? 'outlined' : 'text'}>\r\n          {route.name}\r\n        </Button>\r\n      </Link>\r\n    );\r\n  }\r\n\r\n  mapDrawerRoute(route) {\r\n    return (\r\n      <Link to={route.to} key={route.id}>\r\n        <ListItem button onClick={() => this.setState({ drawerOpen: false })}>\r\n          {route.Icon && <ListItemIcon style={{ width: '25px' }}>\r\n            <route.Icon />\r\n          </ListItemIcon>}\r\n          {route.faIcon && <ListItemIcon style={{ width: '25px' }}>\r\n            <FontAwesomeIcon icon={route.faIcon} style={{ marginLeft: '.2rem' }} />\r\n          </ListItemIcon>}\r\n          <ListItemText primary={route.name} />\r\n        </ListItem>\r\n      </Link>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <MenuContext.WithCurrentRoute>\r\n        {currentRoute => (<UserService.WithApplicationMode>\r\n          {mode => (\r\n            <div className={\"container \" + classes.root}>\r\n              <img src=\"/assets/logo3.png\" />\r\n              <Toolbar className={classes.toolbar} >\r\n                <Hidden smDown>\r\n                  {desktopRoutes.map(route => this.mapToolbarRoute(route, currentRoute))}\r\n                </Hidden>\r\n\r\n                <IconButton color=\"primary\" onClick={() => this.setState({ drawerOpen: true })}>\r\n                  <MenuIcon />\r\n                </IconButton>\r\n\r\n                <Drawer\r\n                  anchor=\"right\"\r\n                  open={this.state.drawerOpen}\r\n                  onClose={() => this.setState({ drawerOpen: false })}\r\n                >\r\n                  <div className={classes.drawerIcon}>\r\n                    <Hidden mdUp>\r\n                      <IconButton onClick={() => this.setState({ drawerOpen: false })}>\r\n                        <MenuIcon />\r\n                      </IconButton>\r\n                    </Hidden>\r\n                  </div>\r\n\r\n                  <List >\r\n                    <Hidden mdUp>\r\n                      {desktopRoutes.map(route => this.mapDrawerRoute(route))}\r\n                    </Hidden>\r\n                    {tournamentAdditional.map(route => this.mapDrawerRoute(route))}\r\n                    <Divider />\r\n                    {mode == ApplicationMode.ADMIN && <React.Fragment>\r\n                      {adminRoutes.map(route => this.mapDrawerRoute(route))}\r\n                      <Divider />\r\n                    </React.Fragment>}\r\n\r\n                    {mode == ApplicationMode.GUEST && <a>\r\n                      <ListItem button onClick={this.login} >\r\n                        <ListItemIcon>\r\n                          <PowerSettingsNewIcon />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Вход\" />\r\n                      </ListItem>\r\n                    </a>}\r\n\r\n                    {mode != ApplicationMode.GUEST && <React.Fragment>\r\n                      {userRoutes.map(route => this.mapDrawerRoute(route))}\r\n                      <a>\r\n                        <ListItem button onClick={this.logout} >\r\n                          <ListItemIcon>\r\n                            <PowerSettingsNewIcon />\r\n                          </ListItemIcon>\r\n                          <ListItemText primary=\"Изход\" />\r\n                        </ListItem>\r\n                      </a>\r\n                    </React.Fragment>}\r\n                  </List>\r\n                </Drawer>\r\n              </Toolbar>\r\n            </div>\r\n          )}\r\n        </UserService.WithApplicationMode>)}\r\n      </MenuContext.WithCurrentRoute>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = () => ({\r\n  root: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    marginBottom: '1.5rem',\r\n    alignItems: 'center'\r\n  },\r\n  toolbar: {\r\n    justifyContent: 'flex-end',\r\n    paddingRight: 0\r\n  },\r\n  drawerIcon: {\r\n    display: 'flex',\r\n    justifyContent: 'flex-end',\r\n    marginTop: '1rem'\r\n  },\r\n  list: {\r\n    width: '250px'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(Menu);","import { createMuiTheme } from '@material-ui/core/styles';\r\n\r\nexport default createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#828A00',\r\n      // '#629900'\r\n      contrastText: '#fff'\r\n    },\r\n    secondary: {\r\n      // main: '#E87114',\r\n      main: '#f47521',\r\n      contrastText: '#fff'\r\n    }\r\n  },\r\n  overrides: {\r\n    MuiFormControl: {\r\n      root: {\r\n        marginTop: '.5rem'\r\n      }\r\n    },\r\n    MuiDialog: {\r\n      paper: {\r\n        overflowY: 'visible'\r\n      }\r\n    },\r\n    MuiTypography: {\r\n      caption: {\r\n        fontStyle: 'italic'\r\n      },\r\n      body2: {\r\n        color: '#828A00'\r\n      },\r\n      display1: {\r\n        color: '#828A00',\r\n        display: 'inline',\r\n        fontSize: '1.5rem',\r\n        margin: '0 0.3rem'\r\n      },\r\n      display2: {\r\n        fontSize: '1rem',\r\n        color: '#828A00',\r\n        fontWeight: 700\r\n      },\r\n      h4: {\r\n        color: '#828A00'\r\n      }\r\n    },\r\n    MuiCardActions: {\r\n      root: {\r\n        padding: 0\r\n      }\r\n    },\r\n    MuiDrawer: {\r\n      modal: {\r\n        zIndex: 1200\r\n      }\r\n    }\r\n  }\r\n});","import React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport MuiPickersUtilsProvider from 'material-ui-pickers/MuiPickersUtilsProvider';\r\nimport DateFnsUtils from 'material-ui-pickers/utils/date-fns-utils';\r\nimport { MuiThemeProvider } from '@material-ui/core/styles';\r\n\r\nimport AppRouting from './app.routing';\r\nimport SignIn from '../login/SignIn';\r\nimport Menu from '../menu';\r\nimport MenuContext from '../menu/menu.context';\r\nimport { catchEvent } from '../services/events.service';\r\nimport UserService from '../services/user.service';\r\nimport { ApplicationMode } from '../enums';\r\nimport theme from '../theme';\r\nimport './app.styles.scss';\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      applicationMode: ApplicationMode.GUEST,\r\n      currentRoute: 0\r\n    }\r\n\r\n    this.handleLoginTab = (event, index) => {\r\n      this.setState({ index });\r\n    };\r\n  }\r\n\r\n  setApplicationMode() {\r\n    UserService.getAuthenticatedUser()\r\n      .then(user => {\r\n        let mode = ApplicationMode.GUEST\r\n        if (user)\r\n          mode = ApplicationMode.USER;\r\n\r\n        if (user && user.isAdmin)\r\n          mode = ApplicationMode.ADMIN;\r\n\r\n        if (user && user.isTournamentAdmin)\r\n          mode = ApplicationMode.TOURNAMENT;\r\n\r\n        this.setState({ applicationMode: mode });\r\n      });\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.body.classList.add('background');\r\n    this.setApplicationMode();\r\n\r\n    catchEvent('not-found', () => this.props.history.replace('/oops'));\r\n    catchEvent('login', () => this.setApplicationMode());\r\n    catchEvent('logout', () => {\r\n      this.setState({\r\n        applicationMode: ApplicationMode.GUEST\r\n      });\r\n      this.props.history.replace('/');\r\n    });\r\n    this.onRouteChanged(this.props.location);\r\n    if (!UserService.isLoggedIn())\r\n      UserService.logout();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.location.pathname !== prevProps.location.pathname) {\r\n      this.onRouteChanged(this.props.location);\r\n    }\r\n  }\r\n\r\n  onRouteChanged(location) {\r\n    if (location.pathname.indexOf(\"/schedule\") != -1)\r\n      this.setState({ currentRoute: 'schedule' });\r\n    else if (location.pathname.indexOf(\"/editions\") != -1\r\n      || location.pathname.indexOf(\"/players\") != -1\r\n      || location.pathname.indexOf(\"/leagues\") != -1\r\n      || location.pathname.indexOf(\"/schemes\") != -1)\r\n      this.setState({ currentRoute: 'tournaments' });\r\n    else\r\n      this.setState({ currentRoute: 'other' });\r\n\r\n    // var route = (NavigationModel.routes\r\n    //   .find(route => location.pathname.indexOf(route.to) != -1)\r\n    //   || NavigationModel.adminRoutes\r\n    //     .find(route => location.pathname.indexOf(route.to) != -1));\r\n    // if (route)\r\n    //   this.setState({ currentRoute: route.id });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n        <MuiThemeProvider theme={theme}>\r\n          <UserService.SetApplicationMode value={this.state.applicationMode}>\r\n            <MenuContext.SetCurrentRoute value={this.state.currentRoute}>\r\n              <div className=\"wrapper\">\r\n                {/* <Navigation /> */}\r\n                <Menu />\r\n                {/* <Home /> */}\r\n                <SignIn />\r\n                <AppRouting />\r\n              </div>\r\n            </MenuContext.SetCurrentRoute>\r\n          </UserService.SetApplicationMode>\r\n        </MuiThemeProvider>\r\n      </MuiPickersUtilsProvider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(App);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './app';\r\n\r\nimport { library } from '@fortawesome/fontawesome-svg-core';\r\nimport { faTrophy, faMedal, faUserFriends, faListOl } from '@fortawesome/free-solid-svg-icons';\r\nlibrary.add(faTrophy, faMedal, faUserFriends, faListOl);\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById(\"root\")\r\n);","import React from 'react';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport App from './App';\r\n\r\nexport default () => {\r\n  return (\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\n"],"sourceRoot":""}