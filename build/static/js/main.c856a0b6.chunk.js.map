{"version":3,"sources":["components/DisplayImage.js","app/NotFoundPage.js","services/events.service.js","configuration.js","services/query.service.js","tournaments/TournamentView.js","components/ConfirmationDialog.js","enums.js","services/user.service.js","components/select/components.js","components/select/AsyncSelect.js","components/select/styles.js","components/FormModal.js","schemes/components/SelectTeamModal.js","schemes/components/Enrollments.js","components/EnumSelect.js","components/EnumSelectToggle.js","schemes/SchemeFormModal.js","components/L10n.js","schemes/components/SchemeDetails.js","components/MessageModal.js","users/InvitationsComponent.js","schemes/components/InvitationsModal.js","schemes/components/SchemeDetailsActions.js","schemes/components/ScoresModal.js","schemes/components/EliminationPreviewModal.js","schemes/SchemeView.js","schemes/SchemesRoot.js","schemes/brackets/EditGroupModal.js","schemes/components/MatchFormModal.js","schemes/brackets/GroupsBracket.js","schemes/brackets/EliminationBracket.js","components/ImageField.js","components/FileUpload.js","tournaments/TournamentFormModal.js","editions/EditionFormModal.js","editions/EditionsDesktopView.js","editions/EditionsMobileView.js","editions/EditionsList.js","editions/EditionsViewActions.js","editions/EditionView.js","editions/EditionsRoot.js","tournaments/TournamentsRoot.js","tournaments/TeamStatisticsFormModal.js","tournaments/PlayersRoot.js","utils.js","schedule/reservation/EditReservationModal.js","schedule/reservation/styles.js","schedule/reservation/AdminReservation.js","schedule/reservation/ViewReservationModal.js","schedule/reservation/UserReservation.js","schedule/reservation/GuestReservation.js","schedule/reservation/Reservation.js","schedule/reservation/ShuffleItem.js","components/calendar/DateComponent.js","components/calendar/Calendar.js","schedule/Legend.js","schedule/Schedule.js","admin/courts/CourtItem.js","admin/courts/Courts.js","admin/seasons/SeasonItem.js","admin/seasons/Seasons.js","admin/statistics/utils.js","admin/statistics/MonthlyStatistics.js","admin/statistics/Statistics.js","users/user.model.js","admin/users/UserDetailsModal.js","admin/users/UserSubscriptionsModal.js","admin/users/Users.js","users/UserProfileFormModal.js","users/ChangePasswordModal.js","users/components/PlayerInfoComponent.js","users/TeamView.js","users/UserProfile.js","users/AccountView.js","login/Activation.js","login/RecoveryStep1.js","login/RecoveryStep2.js","menu/menu.configuration.js","app/app.routing.js","login/Login.js","login/Registration.js","login/SignIn.js","menu/menu.context.js","menu/index.js","theme.js","app/App.js","index.js","app/index.js"],"names":["Buffer","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","DisplayImage","_ref","image","style","buffer","content","data","b64","toString","mimeType","a","createElement","src","concat","NotFoundPage","react_default","className","Paper_default","height","display","justifyContent","alignItems","Typography_default","color","variant","React","Component","dispatchEvent","name","options","root","document","getElementById","event","CustomEvent","detail","catchEvent","cb","listener","bind","removeEventListener","addEventListener","events_service","configuration","backend","query_service","QueryService","Object","classCallCheck","this","window","Configuration","console","log","_this","FormData","append","method","mode","body","fetch","then","res","errorHandling","json","fileId","resource","request","headers","Content-Type","JSON","stringify","_this2","token","localStorage","getItem","status","err","setItem","location","replace","item","TournamentView","props","possibleConstructorReturn","getPrototypeOf","call","state","tournament","rankings","get","match","params","id","setState","Card_default","CardContent_default","info","Table_default","TableHead_default","TableRow_default","TableCell_default","padding","TableBody_default","map","ranking","index","Fragment","key","team","user1","user2","points","ConfirmationDialog","isOpen","open","e","stopPropagation","close","accept","onAccept","_this$props","title","children","classes","Dialog_default","onClose","paper","DialogTitle_default","DialogContent_default","DialogActions_default","btnContainer","Button_default","btn","onClick","withStyles","theme","width","defineProperty","breakpoints","down","flexDirection","marginBottom","ApplicationMode","GUEST","USER","ADMIN","TRAINER","TOURNAMENT","RouteTypeEnum","PUBLIC","PROTECTED","Gender","MALE","FEMALE","Status","DRAFT","PUBLISHED","BracketStatus","UNDRAWN","GROUPS_DRAWN","GROUPS_END","ELIMINATION_DRAWN","ELIMINATION_END","CourtType","CLAY","HARD","GRASS","INDOOR","BackhandType","ONE","TWO","PlayStyle","LEFT","RIGHT","ReservationPayment","SODEXO","MULTISPORT","ABK","CASH","SUBS_ZONE_1","SUBS_ZONE_2","ReservationType","SUBSCRIPTION","COMPETITOR","ELDER_GROUP","TENNIS_SCHOOL","SERVICE","SUMMER_CAMP","OTHER","SubscriptionType","ZONE_1","ZONE_2","StatisticsType","MONTHLY","DAILY","EnumLocalization","_BracketStatus","_StatisticsType","_ReservationPayment","_ReservationType","CustomReservationType","_CustomReservationTyp","_SubscriptionType","_Status","FINALIZED","INACTIVE","_Gender","_CourtType","_BackhandType","_PlayStyle","user_service","UserService","_React$createContext","createContext","Provider","Consumer","SetApplicationMode","WithApplicationMode","cached","user","removeItem","inputComponent","inputRef","objectWithoutProperties","assign","ref","cursor","components","ClearIndicator","_props$innerProps","innerProps","restInnerProps","zIndex","Clear_default","Control","TextField_default","fullWidth","InputProps","inputProps","objectSpread","selectProps","input","innerRef","textFieldProps","Menu","marginTop","MultiValue","Chip_default","tabIndex","label","classNames","chip","chipFocused","isFocused","onDelete","removeProps","deleteIcon","Cancel_default","NoOptionsMessage","noOptionsMessage","Option","MenuItem_default","buttonRef","selected","component","fontWeight","isSelected","Placeholder","SingleValue","singleValue","ValueContainer","valueContainer","AsyncSelect","searchTerm","limit","defaultLimit","totalCount","load","prevProps","filter","loadMore","_this$state","length","post","query","result","_this3","disableClear","disableSearch","disabled","value","getOptionLabel","getOptionValue","formatOptionLabel","onChange","selectStyles","container","base","position","menuList","paddingBottom","palette","text","primary","& input","font","_getOptionLabel","option","_getOptionValue","_noOptionsMessage","NoSsr_default","react_select_esm","isClearable","isSearchable","isDisabled","Boolean","InputLabelProps","shrink","onInputChange","trim","onMenuScrollToBottom","styles","SelectComponents","customStyles","flexGrow","margin","original","flexWrap","flex","spacing","unit","backgroundColor","emphasize","type","grey","fontSize","placeholder","left","right","divider","withTheme","FormModal","actions","fullScreen","hasError","enableFullWidth","rootClass","rootWithError","closeBtn","boxSizing","border","boxShadow","& button","marginLeft","main","top","&:hover","dark","withMobileDialog","breakpoint","SelectTeamModal","scheme","catch","singleTeams","errTextPrefix","canSave","save","select_AsyncSelect","email","message","components_FormModal","EnrollmentsComponent","openTeamModal","enrolled","getData","teamId","schemeId","user1Id","user2Id","_this4","delete","_this5","hasPermission","ExpansionPanel_default","defaultExpanded","ExpansionPanelSummary_default","expandIcon","ExpandMore_default","ExpansionPanelDetails_default","components_SelectTeamModal","size","enrollment","borderClass","default","seed","seedDivider","maxPlayerCount","enrolledDivider","removeEnrollment","DeleteForever_default","lighten","borderBottom","light","secondary","EnumSelect","EnumValues","EnumName","required","error","errorText","allowClear","FormControl_default","InputLabel_default","Select_default","keys","i","EnumSelectToggle","enumName","values","Enums","translation","leftRounded","target","borderTopLeftRadius","borderBottomLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderRight","rightRounded","borderRadius","borderLeft","SchemeFormModal","model","errors","assertThisInitialized","handleChange","prop","handleCustomChange","mixedTeams","groupCount","teamsPerGroup","edition","components_EnumSelectToggle","multiline","FormControlLabel_default","control","Checkbox_default","checked","maleTeams","femaleTeams","hasGroupPhase","ageFrom","ageTo","DatePicker_default","autoOk","labelFunc","date","moment","format","clearable","DateTimePicker_default","registrationStart","ampm","registrationEnd","pPoints","wPoints","cPoints","l10n_text","translate","L10n","SchemeDetails","enableEditionLink","CardProps","Link","to","schemeAccent","editionId","editionAccent","paddingRight","traits","push","ageTrait","join","getSchemeTraits","bracketStatus","CardActions_default","disableActionSpacing","fontStyle","MessageModal","activation","show","duration","setTimeout","InvitationsComponent","userId","page","rowsPerPage","setUserId","getAuthenticatedUser","invitation","invitations","components_MessageModal","List_default","slice","inv","ListItem_default","inviterId","invited","invitedId","inviter","cancel","TablePagination_default","count","rowsPerPageOptions","labelRowsPerPage","labelDisplayedRows","from","onChangePage","onChangeRowsPerPage","InvitationsModal","selectedUser","invite","users_InvitationsComponent","SchemeDetailsActions","hasEnrolled","hasCancelledEnrollment","invitationsModal","hasEnrollmentError","reload","isBetween","enableViewLink","components_InvitationsModal","registrationOpen","enroll","components_ConfirmationDialog","cancelEnroll","ScoresModal","scores","parseInt","isWinner","flexBasis","score","wonMatches","totalMatches","Divider_default","getTeamView","EliminationPreviewModal","teams","onDraw","order","sort","b","reorder","draw","marginRight","changeOrder","SchemeView","schemeModel","eliminationPreview","schemes_SchemeFormModal","components_ScoresModal","components_EliminationPreviewModal","getButtons","components_SchemeDetails","components_SchemeDetailsActions","Enrollments","deleteScheme","previewElimination","drawGroupPhase","finishPhase","getScores","_this6","history","_this7","_this8","_this9","_this10","SchemesRoot","Switch","Route","path","render","schemes_SchemeView","EditGroupModal","setTeam","groupId","splice","groupOrder","group","undefined","String","fromCharCode","charCodeAt","groupTeam","IconButton_default","removeTeam","addTeam","MatchFormModal","sets","team1","team1Id","team2","team2Id","withdraw","handleSetsChange","formatSets","existingSet","find","set","tiebreaker","matchId","doubles","enableTeamChange","round","maxWidth","GroupsBracket","groups","groupModel","matchModel","enableActions","matches","elevation","brackets_EditGroupModal","components_MatchFormModal","align","addGroup","GroupsBracket_Group","onEdit","deleteGroup","onAddMatch","addMatch","onEditMatch","onDeleteMatch","deleteMatch","Group","getGroupHeader","Tabs_default","indicatorColor","textColor","Tab_default","transition","GroupsBracket_GroupRankingView","groupTeams","GroupsBracket_GroupMatchesView","GroupRankingView","GroupsBracket_GroupTeamInfo","rank","stats","GroupMatchesView","_this$props2","Edit_default","GroupTeamInfo","_this$props3","EliminationBracket","bracket","constructBracket","roundSize","rounds","Math","log2","_loop","_loop2","currentMatch","constructMatch","pow","getRoundName","EliminationBracket_Match","onEvent","Match","Tooltip_default","placement","TransitionComponent","Zoom","enterDelay","EliminationBracket_TeamInfo","pos","TeamInfo","enemyPos","composeScore","ImageField","imageStyle","getFileUrl","Photo_default","click","TournamentFormModal","handleThumbnail","files","uploadFile","file","thumbnail","thumbnailId","components_ImageField","EditionFormModal","startDate","endDate","tournamentId","parse","schemes","Date","toLocaleDateString","truncateInfo","whiteSpace","overflow","textOverflow","EditionsDesktopView","editions","EditionsMobileView","EditionsList","editionModel","tournamentModel","handleOpenModal","handleRemoveEdition","onRemove","_React$Component","_class","apply","arguments","inherits","createClass","editions_EditionFormModal","tournaments_TournamentFormModal","Hidden_default","smDown","editions_EditionsDesktopView","mdUp","editions_EditionsMobileView","EditionView","initSchemeModel","remove","schemesRoot","schemesItem","EditionsRoot","editions_EditionView","exact","editions_EditionsList","TournamentsRouting","TournamentsRoot_TournamentsRoot","TournamentsRoot","tournaments","refresh","openTournamentModal","previewContainer","TournamentsRoot_TournamentPreview","removeTournament","TournamentPreview","previewRoot","navigate","previewImage","previewBodyPart","draftLabel","edit","_previewRoot","opacity","TeamStatisticsFormModal","handleUpdate","field","previousProps","onUpdate","wonTournaments","totalTournaments","PlayersRoot","teamsMode","itemsPerPage","editTeamModel","rows","_this$state2","tournaments_TeamStatisticsFormModal","_","xsDown","globalRank","getWinRatio","smUp","badge","_ref2","suffix","mobileRoot","basicBadge","goldBadge","backgroundImage","silverBadge","bronzeBadge","goldRoot","goldTypography","silverRoot","silverTypography","bronzeRoot","bronzeTypography","getHour","hour","EditReservationModal","reservation","court","season","payments","administrator","customer","customerId","subscription","subscriptionId","handlePaymentChange","handlePaymentSubscriptionChange","onAction","unshift","amount","reservationId","DialogContentText_default","components_EnumSelect","remainingHours","addPayment","Add_default","payment","paymentCell","endAdornment","InputAdornment_default","onlyAvailable","ErrorTexts","action","cancelReservation","exist","typeRequired","customerRequired","subscriptionRequired","usedHoursExceedTotalHours","paymentSubscriptionRequired","typeSubscriptionAndHasPaymentSubscription","maxAllowedTimeDiff","reservationInThePast","up","cell","textAlign","button","AdminReservation","modal","components_L10n","free","paidReservation","unpaidReservation","unavaliable","getCellLabel","reservation_EditReservationModal","ReservationStyles","contrastText","background","ViewReservationModal","makeReservation","UserReservation","reserved","reservation_ViewReservationModal","GuestReservation","available","taken","Reservation","setUser","workingHoursEnd","workingHoursStart","reservation_AdminReservation","reservation_GuestReservation","isTrainer","reservation_UserReservation","ShuffleItem","shuffle","onSelect","onUnselect","findIndex","courtId","select","service","DateComponent","getDate","previousSelected","weekDays","day","month","year","getDay","end","toConsumableArray","Array","k","availiableDaysAhead","targetDate","today","diff","floor","getFullYear","getMonth","_this$props4","tabsRoot","scroller","tabsScroller","indicator","tabsIndicator","scrollButtons","tabsScrollButtons","getDays","tab","isToday","todayTab","selectedTab","disabledTab","labelContainer","getLabel","minWidth","minHeight","Calendar","startOf","years","monts","emitDateOnAnyChange","formControl","calendar_DateComponent","paddingLeft","Legend","unavailiable","& div","scrollButton","Schedule","counter","courts","reservations","rootRef","onscroll","tableRef","needScrollBtns","clientWidth","tableInViewport","scrollTop","offsetTop","btnContainerRef","getAdministrator","getConfig","config","sameReservation","constructReservation","shuffleErrors","seasonId","scrollLeft","gutterBottom","calendar_Calendar","schedule_Legend","index_es","Replay_default","Shuffle_default","overflowX","scrollBehavior","scroll","ChevronLeft_default","scrollRight","ChevronRight_default","start","hours","reservation_ShuffleItem","getReservation","shuffleOnSelect","shuffleOnUnselect","reservation_Reservation","invalid","invalidTime","CourtItem","onCreateCancel","CourtItem_CourtEdit","onCancel","handleCancel","card","isActive","cardContent","cardActions","CourtEdit","Switch_default","rowsMax","Courts","addCourt","courts_CourtItem","updateModel","removeCourt","SeasonItem","loading","SeasonItem_SeasonEdit","seasonStart","seasonEnd","CircularProgress_default","Snackbar_default","anchorOrigin","vertical","horizontal","autoHideDuration","aria-label","Close_default","SeasonEdit","Seasons","seasons","addSeason","seasons_SeasonItem","removeSeason","SortableTableCell","active","direction","handleClick","orderHandler","TableSortLabel_default","orderData","ordering","UserPlayedHours","handleOrder","users","forEach","totalHours","transformToUserPlayedHours","utils_SortableTableCell","reduce","acc","curr","StatisticByClassifier","_React$Component2","classifier","label1","label2","customFn","customValueSuffix","transformed","customValue","custom","transformByClassifier","reduceToPayments","paymentsAmountAccumulator","current","parseFloat","StatisticsRoot","handleCalendarChange","handleStatisticsChange","MonthlyStatistics_UserPlayedHours","MonthlyStatistics_StatisticByClassifier","UserModel","UserAccountData","UserAccountSecondaryData","UserPlayerMainData","UserPlayerSecondaryData","password","confirmPassword","firstName","lastName","telephone","gender","birthDate","startedPlaying","playStyle","courtType","backhandType","reservationDebt","subscriptionDebt","UET","helperText","composeErrors","openToYearSelection","unique","short","mismatch","future","range","user_model","UserDetailsModal","getErrorsModel","isTournamentAdmin","UserSubscriptionsModal","subscriptions","newValue","handleDelete","init","addSubscription","sub","UserSubscriptionsModal_Subscription","ArrowBack_default","Subscription","isEditMode","expanded","changeSeason","cancelEdit","Users","currentSeason","usersFilter","editUser","subsUser","toLowerCase","includes","names","split","filterUsers","users_UserDetailsModal","users_UserSubscriptionsModal","updateSubscriptions","createdAt","Done_default","isAdmin","prepareForEdit","DescriptionOutlined_default","Build_default","UserProfileFormModal","ChangePasswordModal","currentPassword","newPassword","confirmNewPassword","errorTexts","InvalidCredentialsException","PasswordRequired","PasswordDoesntMatch","PlayerInfoComponent","TeamView","components_PlayerInfoComponent","UserProfile","loggedInUser","subsCollapsed","resCollapsed","invCollapsed","userModel","changePassword","users_UserProfileFormModal","users_ChangePasswordModal","sectionRoot","cardContentRoot","sectionHeadline","UserProfile_UserPersonalInfo","UserProfile_UserPlayerInfo","ExpandLess_default","listItemRoot","UserPersonalInfo","UserPlayerInfo","_React$Component3","&:last-child","AccountView","AccountActivation","success","timer","interval","search","setInterval","clearInterval","RecoveryStep1","issueRecoverEmail","RecoveryStep2","recover","desktopRoutes","Icon","CalendarTodayIcon","faIcon","adminRoutes","PersonIcon","WbSunnyRoundedIcon","ViewQuiltRoundedIcon","AssessmentIcon","tournamentAdditional","userRoutes","routeMapping","/schedule","/editions","/players","/leagues","/admin/courts","/admin/seasons","/admin/users","/admin/statistics","Statistics","/account","AppRouting","route","users_UserProfile","Activation","login_RecoveryStep1","login_RecoveryStep2","Redirect","Login","login","form","onKeyDown","link","borderColor","RegistrationStepper","activeStep","completed","changeStep","onSuccess","register","focused","SignIn","successfulRegistration","handleTabChange","handleRegistration","EventService","aria-labelledby","centered","smallContainer","lib_default","onChangeIndex","login_Login","Registration","menu_context","MenuContext","SetCurrentRoute","WithCurrentRoute","drawerOpen","logout","currentRoute","ListItemIcon_default","react_fontawesome_index_es","icon","ListItemText_default","Toolbar_default","toolbar","mapToolbarRoute","Menu_default","Drawer_default","anchor","drawerIcon","mapDrawerRoute","PowerSettingsNew_default","list","createMuiTheme","overrides","MuiFormControl","MuiDialog","overflowY","MuiTypography","caption","body2","display1","display2","h4","MuiCardActions","MuiDrawer","App","applicationMode","handleLoginTab","classList","add","setApplicationMode","onRouteChanged","pathname","MuiPickersUtilsProvider_default","utils","DateFnsUtils","core_styles","menu","login_SignIn","app_routing","withRouter","library","faTrophy","faMedal","faUserFriends","faListOl","ReactDOM","BrowserRouter","app_App"],"mappings":"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","file":"static/js/main.c856a0b6.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst DisplayImage = ({ image, style }) => {\r\n  const buffer = image.content.data;\r\n  const b64 = new Buffer(buffer).toString('base64')\r\n  const mimeType = image.mimeType;\r\n\r\n  return <img src={`data:${mimeType};base64,${b64}`} style={style} />\r\n};\r\n\r\nexport default DisplayImage;","import React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nclass NotFoundPage extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <Paper style={{ height: '300px', display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n          <Typography color=\"secondary\" variant=\"headline\">\r\n            Страницата, която търсите, вече не съществува 🙉\r\n      </Typography>\r\n        </Paper>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NotFoundPage;","export function dispatchEvent(name, options) {\r\n  const root = document.getElementById('root');\r\n  const event = new CustomEvent(name, { detail: options });\r\n  root.dispatchEvent(event);\r\n}\r\n\r\nexport function catchEvent(name, cb) {\r\n  const root = document.getElementById('root');\r\n  const listener = customEventListener.bind(null, cb);\r\n  root.removeEventListener(name, listener);\r\n  root.addEventListener(name, listener);\r\n}\r\n\r\nfunction customEventListener(cb, event) {\r\n  return cb(event.detail);\r\n}\r\n\r\nexport default {\r\n  dispatchEvent,\r\n  catchEvent\r\n};","export default {\r\n  backend: 'http://localhost:4000/api'\r\n}","import { dispatchEvent } from './events.service';\r\nimport Configuration from '../configuration';\r\n\r\nclass QueryService {\r\n  constructor() {\r\n    this.backend = (window.configuration || Configuration).backend;\r\n\r\n    console.log(this.backend);\r\n  }\r\n\r\n  uploadFile(content) {\r\n    let data = new FormData();\r\n    data.append('file', content);\r\n\r\n    let options = {\r\n      method: 'POST',\r\n      mode: 'cors',\r\n      body: data\r\n    }\r\n\r\n    return fetch(this.backend + '/files', options)\r\n      .then(res => this.errorHandling(res))\r\n      .then(res => res.json());\r\n  }\r\n\r\n  getFileUrl(fileId) {\r\n    return `${this.backend}/files/${fileId}`;\r\n  }\r\n\r\n  get(resource) {\r\n    let options = {\r\n      method: 'GET',\r\n      mode: 'cors',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    };\r\n\r\n    return this\r\n      .request(resource, options);\r\n    //.then(this.notFoundHandling);\r\n  }\r\n\r\n  post(resource, body) {\r\n    let options = {\r\n      method: 'POST',\r\n      mode: 'cors',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(body)\r\n    };\r\n\r\n    return this.request(resource, options);\r\n  }\r\n\r\n  delete(resource) {\r\n    let options = {\r\n      method: 'DELETE',\r\n      mode: 'cors',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    };\r\n\r\n    return this.request(resource, options);\r\n  }\r\n\r\n  request(resource, options) {\r\n    let token = window.localStorage.getItem('token');\r\n    if (token)\r\n      options.headers['Authorization'] = 'Bearer ' + token;\r\n\r\n    return fetch(this.backend + resource, options)\r\n      .then(res => this.errorHandling(res))\r\n      .then(res => res.json());\r\n  }\r\n\r\n  errorHandling(res) {\r\n    if (res.status === 404) {\r\n      dispatchEvent('not-found');\r\n      throw null;\r\n    }\r\n    if (res.status === 422)\r\n      return res\r\n        .json()\r\n        .then(err => { throw err; });\r\n    if (res.status === 500)\r\n      throw null;\r\n    if (res.status === 401) {\r\n      window.localStorage.setItem('token', null);\r\n      window.location.replace('/');\r\n    }\r\n    else return res || null;\r\n  }\r\n\r\n  notFoundHandling(item) {\r\n    if (item == null) {\r\n      dispatchEvent('not-found');\r\n      throw null;\r\n    }\r\n    else return item;\r\n  }\r\n}\r\n\r\nexport default new QueryService();","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nimport QueryService from '../services/query.service';\r\n\r\nclass TournamentView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      tournament: {\r\n        rankings: []\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    QueryService\r\n      .get(`/tournaments/${this.props.match.params.id}`)\r\n      .then(tournament => this.setState({ tournament }));\r\n  }\r\n\r\n  render() {\r\n    const tournament = this.state.tournament;\r\n    const rankings = tournament.rankings;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <Card>\r\n          <CardContent>\r\n            <Typography variant=\"headline\">Лига {tournament.name}</Typography>\r\n            <Typography variant=\"caption\">{tournament.info}</Typography>\r\n\r\n            <Table>\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell padding=\"none\">№</TableCell>\r\n                  <TableCell>Играч/отбор</TableCell>\r\n                  <TableCell padding=\"dense\">Точки</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n\r\n                {rankings.map((ranking, index) => {\r\n                  return (\r\n                    <React.Fragment key={ranking.id}>\r\n                      <TableRow>\r\n                        <TableCell padding=\"none\">{index + 1}</TableCell>\r\n                        <TableCell>\r\n                          <Typography variant=\"body2\">{ranking.team.user1.name}</Typography>\r\n                          {ranking.team.user2 && <Typography variant=\"body2\">{ranking.team.user2.name}</Typography>}\r\n                        </TableCell>\r\n                        <TableCell padding=\"dense\">\r\n                          <Typography variant=\"caption\">{ranking.points}</Typography>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    </React.Fragment>\r\n                  );\r\n                })}\r\n              </TableBody>\r\n            </Table>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TournamentView;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nclass ConfirmationDialog extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isOpen: false\r\n    };\r\n\r\n    this.open = (e) => {\r\n      e.stopPropagation();\r\n      this.setState({ isOpen: true });\r\n    };\r\n    this.close = (e) => {\r\n      e.stopPropagation();\r\n      this.setState({ isOpen: false });\r\n    }\r\n    this.accept = (e) => {\r\n      e.stopPropagation();\r\n      this.close(e);\r\n      this.props.onAccept(e);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { isOpen } = this.state;\r\n    const { title, body, onAccept, children, classes, style } = this.props;\r\n\r\n    return (\r\n      <span style={style}>\r\n        <Dialog open={isOpen} onClose={this.close} classes={{ paper: classes.root }}>\r\n          <DialogTitle>{title}</DialogTitle>\r\n          <DialogContent>{body}</DialogContent>\r\n          <DialogActions className={classes.btnContainer}>\r\n            <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={this.accept}>\r\n              Да\r\n          </Button>\r\n            <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={this.close}>\r\n              Не\r\n          </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n        <span onClick={this.open}>\r\n          {children}\r\n        </span>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(ConfirmationDialog);","export const ApplicationMode = {\r\n  GUEST: 'guest',\r\n  USER: 'user',\r\n  ADMIN: 'admin',\r\n  TRAINER: 'trainer',\r\n  TOURNAMENT: 'tournament'\r\n};\r\n\r\nexport const RouteTypeEnum = {\r\n  PUBLIC: 'public',\r\n  PROTECTED: 'protected',\r\n  ADMIN: 'admin'\r\n};\r\n\r\nexport const Gender = {\r\n  MALE: 'male',\r\n  FEMALE: 'female'\r\n};\r\n\r\nexport const Status = {\r\n  DRAFT: 'draft',\r\n  PUBLISHED: 'published'\r\n};\r\n\r\n// export const SchemeType = {\r\n//   GROUP: 'round-robin',\r\n//   ELIMINATION: 'elimination'\r\n// };\r\n\r\nexport const BracketStatus = {\r\n  UNDRAWN: 'undrawn',\r\n  GROUPS_DRAWN: 'groups-in-progress',\r\n  GROUPS_END: 'groups-finished',\r\n  ELIMINATION_DRAWN: 'elimination-in-progress',\r\n  ELIMINATION_END: 'elimination-finished'\r\n};\r\n\r\nexport const CourtType = {\r\n  CLAY: 'clay',\r\n  HARD: 'hard',\r\n  GRASS: 'grass',\r\n  INDOOR: 'indoor'\r\n};\r\n\r\nexport const BackhandType = {\r\n  ONE: '1h',\r\n  TWO: '2h'\r\n};\r\n\r\nexport const PlayStyle = {\r\n  LEFT: 'left-handed',\r\n  RIGHT: 'right-handed'\r\n};\r\n\r\nexport const ReservationPayment = {\r\n  SODEXO: 'sodexo',\r\n  MULTISPORT: 'multisport',\r\n  ABK: 'abk',\r\n  CASH: 'cash',\r\n  SUBS_ZONE_1: 'zone1',\r\n  SUBS_ZONE_2: 'zone2'\r\n}\r\n\r\nexport const ReservationType = {\r\n  GUEST: 'guest',\r\n  USER: 'user',\r\n  SUBSCRIPTION: 'subscription',\r\n  COMPETITOR: 'competitor',\r\n  ELDER_GROUP: 'elder',\r\n  TENNIS_SCHOOL: 'school',\r\n  TOURNAMENT: 'tournament',\r\n  SERVICE: 'service',\r\n  SUMMER_CAMP: 'camp',\r\n  OTHER: 'other'\r\n};\r\n\r\nexport const SubscriptionType = {\r\n  ZONE_1: 'zone1',\r\n  ZONE_2: 'zone2'\r\n};\r\n\r\nexport const StatisticsType = {\r\n  MONTHLY: 'month',\r\n  DAILY: 'day'\r\n};\r\n\r\nexport const EnumLocalization = {\r\n  // 'SchemeType': {\r\n  //   [SchemeType.ELIMINATION]: 'Елиминации',\r\n  //   [SchemeType.GROUP]: 'Групи'\r\n  // },\r\n  'BracketStatus': {\r\n    [BracketStatus.UNDRAWN]: 'Неизтеглена схема',\r\n    [BracketStatus.GROUPS_DRAWN]: 'Групова фаза',\r\n    [BracketStatus.GROUPS_END]: 'Приключила групова фаза',\r\n    [BracketStatus.ELIMINATION_DRAWN]: 'Елиминационна фаза',\r\n    [BracketStatus.ELIMINATION_END]: 'Приключена схема'\r\n  },\r\n  'StatisticsType': {\r\n    [StatisticsType.MONTHLY]: 'Месечна',\r\n    [StatisticsType.DAILY]: 'Дневна'\r\n  },\r\n  'ReservationPayment': {\r\n    [ReservationPayment.CASH]: 'В брой',\r\n    [ReservationPayment.SODEXO]: 'Карта \"Содексо\"',\r\n    [ReservationPayment.MULTISPORT]: 'Карта \"Мултиспорт\"',\r\n    [ReservationPayment.ABK]: 'Абонаментна карта (АБК)',\r\n    [ReservationPayment.SUBS_ZONE_1]: 'Отиграване на абонамент \"ЗОНА 1\"',\r\n    [ReservationPayment.SUBS_ZONE_2]: 'Отиграване на абонамент \"ЗОНА 2\"'\r\n  },\r\n  'ReservationType': {\r\n    [ReservationType.GUEST]: 'Гост',\r\n    [ReservationType.USER]: 'Потребител',\r\n    [ReservationType.SUBSCRIPTION]: 'Абонат',\r\n    [ReservationType.COMPETITOR]: 'Състезатели',\r\n    [ReservationType.TENNIS_SCHOOL]: 'Тенис училище',\r\n    [ReservationType.ELDER_GROUP]: 'Група за възрастни',\r\n    [ReservationType.TOURNAMENT]: 'Турнир',\r\n    [ReservationType.SERVICE]: 'Неработещо игрище',\r\n    [ReservationType.SUMMER_CAMP]: 'Летен лагер',\r\n    [ReservationType.OTHER]: 'Друго'\r\n  },\r\n  'CustomReservationType': {\r\n    [ReservationType.USER]: 'Резервация',\r\n    [ReservationType.SUBSCRIPTION]: 'Абонамент',\r\n    [ReservationType.COMPETITOR]: 'Състезатели'\r\n  },\r\n  'SubscriptionType': {\r\n    [SubscriptionType.ZONE_1]: 'ЗОНА 1',\r\n    [SubscriptionType.ZONE_2]: 'ЗОНА 2'\r\n  },\r\n  'Status': {\r\n    [Status.DRAFT]: 'чернова',\r\n    [Status.PUBLISHED]: 'публикувано',\r\n    [Status.FINALIZED]: 'приключено',\r\n    [Status.INACTIVE]: 'неактивно'\r\n  },\r\n  'Gender': {\r\n    [Gender.MALE]: 'Мъж',\r\n    [Gender.FEMALE]: 'Жена'\r\n  },\r\n  'CourtType': {\r\n    [CourtType.CLAY]: 'клей',\r\n    [CourtType.HARD]: 'твърда настилка',\r\n    [CourtType.GRASS]: 'трева',\r\n    [CourtType.INDOOR]: 'на закрито'\r\n  },\r\n  'BackhandType': {\r\n    [BackhandType.ONE]: 'с една ръка',\r\n    [BackhandType.TWO]: 'с две ръце'\r\n  },\r\n  'PlayStyle': {\r\n    [PlayStyle.LEFT]: 'лява ръка',\r\n    [PlayStyle.RIGHT]: 'дясна ръка'\r\n  }\r\n};","import React from 'react';\r\nimport { dispatchEvent } from './events.service';\r\nimport QueryService from './query.service';\r\nimport { ApplicationMode } from '../enums';\r\n\r\n\r\nclass UserService {\r\n  constructor() {\r\n    const { Provider, Consumer } = React.createContext(ApplicationMode.GUEST);\r\n    this.SetApplicationMode = Provider;\r\n    this.WithApplicationMode = Consumer;\r\n    this.cached = false;\r\n    this.user = null;\r\n  }\r\n\r\n  async getAuthenticatedUser() {\r\n    if (!this.cached)\r\n\r\n      this.user = QueryService.get('/login/authData')\r\n        .then(({ data }) => {\r\n          this.cached = true;\r\n          return data;\r\n        });\r\n\r\n    return this.user;\r\n  }\r\n\r\n  login(data) {\r\n    localStorage.setItem('token', data.token);\r\n    this.cached = false;\r\n    dispatchEvent('login');\r\n  }\r\n\r\n  logout() {\r\n    localStorage.removeItem('token');\r\n    this.cached = false;\r\n    dispatchEvent('logout');\r\n  }\r\n}\r\n\r\nexport default new UserService();","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\n\r\nfunction ClearIndicator(props) {\r\n  const { innerProps: { ref, ...restInnerProps } } = props;\r\n  return (\r\n    <div {...restInnerProps} ref={ref}>\r\n      <div style={{ padding: '0px 5px', zIndex: 2, cursor: 'pointer' }}>\r\n        <Typography><ClearIcon color=\"action\" /></Typography>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction NoOptionsMessage(props) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.noOptionsMessage}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction inputComponent({ inputRef, ...props }) {\r\n  return <div ref={inputRef} {...props} style={{ cursor: 'pointer' }} />;\r\n}\r\n\r\nfunction Control(props) {\r\n  return (\r\n    <TextField\r\n      fullWidth\r\n      InputProps={{\r\n        inputComponent,\r\n        inputProps: {\r\n          className: props.selectProps.classes.input,\r\n          inputRef: props.innerRef,\r\n          children: props.children,\r\n          ...props.innerProps,\r\n        },\r\n      }}\r\n      {...props.selectProps.textFieldProps}\r\n    />\r\n  );\r\n}\r\n\r\nexport function Option(props) {\r\n  return (\r\n    <MenuItem\r\n      buttonRef={props.innerRef}\r\n      selected={props.isFocused}\r\n      component=\"div\"\r\n      style={{\r\n        fontWeight: props.isSelected ? 500 : 400\r\n      }}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </MenuItem>\r\n  );\r\n}\r\n\r\n// export function Placeholder(props) {\r\n//   return (\r\n//     <Typography\r\n//       color=\"textSecondary\"\r\n//       className={props.selectProps.classes.placeholder}\r\n//       {...props.innerProps}\r\n//     >\r\n//       {props.children}\r\n//     </Typography>\r\n//   );\r\n// }\r\n\r\nexport const Placeholder = () => null;\r\n\r\nexport function SingleValue(props) {\r\n  return (\r\n    <Typography className={props.selectProps.classes.singleValue} {...props.innerProps}>\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nexport function ValueContainer(props) {\r\n  return <div className={props.selectProps.classes.valueContainer}>{props.children}</div>;\r\n}\r\n\r\nexport function MultiValue(props) {\r\n  return (\r\n    <Chip\r\n      tabIndex={-1}\r\n      label={props.children}\r\n      className={classNames(props.selectProps.classes.chip, {\r\n        [props.selectProps.classes.chipFocused]: props.isFocused,\r\n      })}\r\n      onDelete={props.removeProps.onClick}\r\n      deleteIcon={<CancelIcon {...props.removeProps} />}\r\n    />\r\n  );\r\n}\r\n\r\nexport function Menu(props) {\r\n  return (\r\n    <Paper className={props.selectProps.classes.paper} {...props.innerProps} style={{ marginTop: '0' }}>\r\n      {props.children}\r\n    </Paper>\r\n  );\r\n}\r\n\r\nexport default {\r\n  ClearIndicator,\r\n  Control,\r\n  Menu,\r\n  MultiValue,\r\n  NoOptionsMessage,\r\n  Option,\r\n  Placeholder,\r\n  SingleValue,\r\n  ValueContainer,\r\n};","import React from 'react';\r\nimport Select from 'react-select';\r\nimport NoSsr from '@material-ui/core/NoSsr';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport SelectComponents from './components';\r\nimport styles from './styles';\r\n\r\nimport QueryService from '../../services/query.service';\r\n\r\nclass AsyncSelect extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      searchTerm: '',\r\n      limit: 25,\r\n      defaultLimit: 25,\r\n      options: [],\r\n      totalCount: null\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.load();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.filter != this.props.filter)\r\n      this.load();\r\n  }\r\n\r\n  load(loadMore) {\r\n    const { options, totalCount, searchTerm, defaultLimit } = this.state;\r\n    let limit = this.state.limit;\r\n\r\n    if (loadMore)\r\n      limit += defaultLimit;\r\n\r\n    if (loadMore && options.length == totalCount)\r\n      return;\r\n\r\n    QueryService\r\n      .post(`/select/${this.props.query}`, {\r\n        ...this.props.filter,\r\n        searchTerm,\r\n        limit\r\n      })\r\n      .then(result => this.setState({ ...result, limit }));\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      disableClear,\r\n      disableSearch,\r\n      disabled,\r\n      label,\r\n      value,\r\n      query,\r\n      filter,\r\n      getOptionLabel,\r\n      getOptionValue,\r\n      formatOptionLabel,\r\n      noOptionsMessage,\r\n      onChange,\r\n\r\n      classes, theme\r\n    } = this.props;\r\n\r\n    const selectStyles = {\r\n      container: base => ({\r\n        ...base,\r\n        position: 'default'\r\n      }),\r\n      menuList: base => ({\r\n        ...base,\r\n        paddingBottom: '3rem'\r\n      }),\r\n      input: base => ({\r\n        ...base,\r\n        color: theme.palette.text.primary,\r\n        '& input': {\r\n          font: 'inherit',\r\n        },\r\n      }),\r\n    };\r\n\r\n    let _getOptionLabel = getOptionLabel || ((option) => option.name);\r\n    let _getOptionValue = getOptionValue || ((option) => option.id);\r\n    let _noOptionsMessage = noOptionsMessage || (() => \"Няма елементи в колекцията\");\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        {/* <pre>item   count: {this.state.options.length}</pre>\r\n        <pre>total  count: {this.state.totalCount}</pre>\r\n        <pre>limit       : {this.state.limit}</pre> */}\r\n        <NoSsr>\r\n          <Select\r\n            isClearable={!disableClear}\r\n            isSearchable={!disableSearch}\r\n            isDisabled={Boolean(disabled)}\r\n            textFieldProps={{\r\n              label,\r\n              InputLabelProps: {\r\n                shrink: Boolean(value) || Boolean(this.state.searchTerm)\r\n              }\r\n            }}\r\n            value={value}\r\n            options={this.state.options}\r\n            getOptionLabel={_getOptionLabel}\r\n            getOptionValue={_getOptionValue}\r\n            formatOptionLabel={formatOptionLabel}\r\n            noOptionsMessage={_noOptionsMessage}\r\n            onChange={onChange}\r\n            onInputChange={value => {\r\n              this.setState({ searchTerm: value.trim() });\r\n              this.load();\r\n            }}\r\n            onMenuScrollToBottom={() => this.load(true)}\r\n            classes={classes}\r\n            styles={selectStyles}\r\n            components={SelectComponents}\r\n          />\r\n        </NoSsr>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst customStyles = {\r\n  root: {\r\n    flexGrow: 1,\r\n    margin: 0,\r\n    cursor: 'pointer'\r\n  }\r\n};\r\n\r\nconst augmentedStyles = (theme) => {\r\n  const original = styles(theme);\r\n  const result = { ...original, ...customStyles };\r\n  return result;\r\n}\r\n\r\nexport default withStyles(augmentedStyles, { withTheme: true })(AsyncSelect);","\r\nimport { emphasize } from '@material-ui/core/styles/colorManipulator';\r\nexport default theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    margin: '1rem'\r\n  },\r\n  input: {\r\n    display: 'flex',\r\n    padding: 0,\r\n  },\r\n  valueContainer: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    flex: 1,\r\n    alignItems: 'center',\r\n  },\r\n  chip: {\r\n    margin: `${theme.spacing.unit / 2}px ${theme.spacing.unit / 4}px`,\r\n  },\r\n  chipFocused: {\r\n    backgroundColor: emphasize(\r\n      theme.palette.type === 'light' ? theme.palette.grey[300] : theme.palette.grey[700],\r\n      0.08,\r\n    ),\r\n  },\r\n  noOptionsMessage: {\r\n    padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`,\r\n  },\r\n  singleValue: {\r\n    fontSize: 16,\r\n  },\r\n  placeholder: {\r\n    position: 'absolute',\r\n    left: 2,\r\n    fontSize: 16,\r\n  },\r\n  paper: {\r\n    position: 'absolute',\r\n    zIndex: 1,\r\n    marginTop: theme.spacing.unit,\r\n    left: 0,\r\n    right: 0,\r\n  },\r\n  divider: {\r\n    height: theme.spacing.unit * 2,\r\n  },\r\n});","import React from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nclass FormModal extends React.Component {\r\n  render() {\r\n    const { title, body, actions, onClose, classes, fullScreen, hasError, enableFullWidth } = this.props;\r\n    const rootClass = hasError ? classes.rootWithError : classes.root;\r\n\r\n    return (\r\n      <Dialog\r\n        open={true}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen && enableFullWidth}\r\n        classes={{ paper: rootClass }}\r\n      >\r\n        <DialogTitle>\r\n          <Typography component=\"span\" variant=\"headline\">{title}</Typography>\r\n          {enableFullWidth && <span className={classes.closeBtn} onClick={onClose}>\r\n            <ClearIcon />\r\n          </span>}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          {body}\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          {actions}\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  rootWithError: {\r\n    boxSizing: 'border-box',\r\n    width: '600px',\r\n    border: `1px solid red`,\r\n    boxShadow: `0 0 10px red`\r\n  },\r\n  btnContainer: {\r\n    '& button': {\r\n      marginLeft: '.3rem'\r\n    },\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      '& button': {\r\n        marginBottom: '.3rem',\r\n        width: '100%'\r\n      }\r\n    }\r\n  },\r\n  closeBtn: {\r\n    position: 'absolute',\r\n    color: theme.palette.primary.main,\r\n    top: '5px',\r\n    right: '5px',\r\n    cursor: 'pointer',\r\n    '&:hover': {\r\n      color: theme.palette.primary.dark\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(FormModal)\r\n);","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport AsyncSelect from '../../components/select/AsyncSelect';\r\nimport FormModal from '../../components/FormModal';\r\n\r\nclass SelectTeamModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user1: null,\r\n      user2: null,\r\n      err: null\r\n    };\r\n  }\r\n\r\n  save() {\r\n    this.setState({ err: null });\r\n\r\n    QueryService\r\n      .post(`/schemes/${this.props.scheme.id}/enrollments`, this.state)\r\n      .then(e => this.props.onChange())\r\n      .catch(err => this.setState({ err }));\r\n  }\r\n\r\n  canSave() {\r\n    return (this.props.scheme.singleTeams && this.state.user1)\r\n      || (this.state.user1 && this.state.user2);\r\n  }\r\n\r\n  render() {\r\n    const { onClose, scheme } = this.props;\r\n    const { user1, user2, err } = this.state;\r\n\r\n    const errTextPrefix = scheme.singleTeams ? \"Играчът\" : \"Някой от играчите\";\r\n\r\n    const title = 'Записване на играч/двойка';\r\n    const actions = <React.Fragment>\r\n      <Button disabled={!this.canSave()} variant=\"contained\" color=\"primary\" onClick={() => this.save()}>\r\n        Запис\r\n      </Button>\r\n      <Button variant=\"outlined\" color=\"primary\" onClick={onClose}>\r\n        Отказ\r\n      </Button>\r\n    </React.Fragment>;\r\n\r\n    const body = <React.Fragment>\r\n      <AsyncSelect\r\n        value={user1}\r\n        label=\"Избор на играч\"\r\n        query=\"users\"\r\n        formatOptionLabel={(option) => <Typography component=\"span\">\r\n          {option.name}\r\n          <Typography component=\"span\" variant=\"caption\">{option.email}</Typography>\r\n        </Typography>}\r\n        onChange={user1 => this.setState({ user1 })} />\r\n      {!scheme.singleTeams && <AsyncSelect\r\n        value={user2}\r\n        label=\"Избор на играч\"\r\n        query=\"users\"\r\n        formatOptionLabel={(option) => <Typography component=\"span\">\r\n          {option.name}\r\n          <Typography component=\"span\" variant=\"caption\">{option.email}</Typography>\r\n        </Typography>}\r\n        onChange={user2 => this.setState({ user2 })} />}\r\n\r\n      {err && <div style={{ marginTop: '1rem', color: 'red', fontSize: '.8rem' }}>\r\n        {err.message == 'ExistingEnrollment'\r\n          && <em className=\"exception\">{errTextPrefix} вече са записани.</em>}\r\n        {err.message == 'RequirementsNotMet'\r\n          && <em className=\"exception\">{errTextPrefix} не покрива изискванията на схемата.</em>}\r\n        {err.message == 'UserHasNoInfo'\r\n          && <em className=\"exception\">{errTextPrefix} няма въведена информация за пол и/или дата на раждане.</em>}\r\n\r\n      </div>}\r\n    </React.Fragment>;\r\n\r\n    return (\r\n      <FormModal\r\n        enableFullWidth={true}\r\n        onClose={onClose}\r\n        title={title}\r\n        body={body}\r\n        actions={actions}\r\n        hasError={err}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default SelectTeamModal;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Button from '@material-ui/core/Button';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport SelectTeamModal from './SelectTeamModal';\r\nimport QueryService from '../../services/query.service';\r\nimport { ApplicationMode } from '../../enums';\r\nimport { lighten } from '@material-ui/core/styles/colorManipulator';\r\n\r\nclass EnrollmentsComponent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      openTeamModal: false,\r\n      enrolled: []\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.scheme != this.props.scheme)\r\n      this.getData();\r\n  }\r\n\r\n  getData() {\r\n    const { scheme } = this.props;\r\n\r\n    QueryService\r\n      .get(`/schemes/${scheme.id}/enrollments`)\r\n      .then(e => this.setState({ enrolled: e }));\r\n  }\r\n\r\n  add(team) {\r\n    const { scheme } = this.props;\r\n    return QueryService\r\n      .post(`/schemes/${scheme.id}/enrollments`, {\r\n        teamId: team.id,\r\n        schemeId: scheme.id,\r\n        user1Id: team.user1Id,\r\n        user2Id: team.user2Id\r\n      })\r\n      .then(e => {\r\n        this.setState({ openTeamModal: false });\r\n        this.getData();\r\n      });\r\n  }\r\n\r\n  removeEnrollment(id) {\r\n    const { scheme } = this.props;\r\n\r\n    return QueryService\r\n      .delete(`/schemes/${scheme.id}/enrollments/${id}`)\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  render() {\r\n    const { enrolled, openTeamModal } = this.state;\r\n    const { scheme, classes, mode } = this.props;\r\n    let hasPermission = mode == ApplicationMode.ADMIN || mode == ApplicationMode.TOURNAMENT;\r\n\r\n    return (\r\n      <ExpansionPanel style={{ marginTop: '1rem' }} defaultExpanded>\r\n        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n          <Typography variant=\"title\">Играчи</Typography>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails style={{ flexDirection: 'column' }}>\r\n          {openTeamModal && <SelectTeamModal\r\n            scheme={scheme}\r\n            onChange={() => {\r\n              this.setState({ openTeamModal: false });\r\n              this.getData();\r\n            }}\r\n            onClose={() => this.setState({ openTeamModal: false })}\r\n          />}\r\n\r\n          {hasPermission && <div><Button variant=\"outlined\" color=\"primary\" size=\"small\"\r\n            onClick={() => this.setState({ openTeamModal: true })}\r\n          >\r\n            Добави\r\n            </Button></div>}\r\n\r\n          <Table>\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell padding=\"none\">№</TableCell>\r\n\r\n                <TableCell>Отбор</TableCell>\r\n                <TableCell padding=\"dense\">Точки</TableCell>\r\n                {hasPermission && <TableCell padding=\"none\"></TableCell>}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n\r\n              {enrolled.map((enrollment, index) => {\r\n                let borderClass = classes.default;\r\n                if (index < scheme.seed)\r\n                  borderClass = classes.seed;\r\n                if (index + 1 == scheme.seed)\r\n                  borderClass = classes.seedDivider;\r\n                if (index + 1 == scheme.maxPlayerCount)\r\n                  borderClass = classes.enrolledDivider;\r\n                if (index + 1 > scheme.maxPlayerCount)\r\n                  borderClass = classes.enrolled;\r\n\r\n                return (\r\n                  <React.Fragment key={enrollment.id}>\r\n                    <TableRow className={borderClass}>\r\n                      <TableCell padding=\"none\">{index + 1}</TableCell>\r\n                      <TableCell>\r\n                        <Typography variant=\"body2\">{enrollment.team.user1.name}</Typography>\r\n                        {enrollment.team.user2 &&\r\n                          <Typography variant=\"body2\">{enrollment.team.user2.name}</Typography>}\r\n                        {/* <Link to={`/teams/${enrollment.team.user1.id}`} >\r\n                          <Typography variant=\"body2\">{enrollment.team.user1.name}</Typography>\r\n                        </Link>\r\n                        {enrollment.team.user2 &&\r\n                          <Link to={`/teams/${enrollment.team.user2.id}`} >\r\n                            <Typography variant=\"body2\">{enrollment.team.user2.name}</Typography>\r\n                          </Link>} */}\r\n                      </TableCell>\r\n                      <TableCell padding=\"dense\">\r\n                        {enrollment.team.rankings && enrollment.team.rankings[0]\r\n                          && <Typography variant=\"caption\">{enrollment.team.rankings[0].points}</Typography>}\r\n                        {(!enrollment.team.rankings || !enrollment.team.rankings[0])\r\n                          && <Typography variant=\"caption\">няма</Typography>}\r\n                      </TableCell>\r\n                      {hasPermission && <TableCell padding=\"none\">\r\n                        <Button variant=\"text\" color=\"secondary\" size=\"small\"\r\n                          onClick={() => this.removeEnrollment(enrollment.id)}\r\n                        >\r\n                          <DeleteForeverIcon />\r\n                        </Button>\r\n                      </TableCell>}\r\n                    </TableRow>\r\n                  </React.Fragment>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n    )\r\n  }\r\n}\r\n\r\nconst styles = (theme) => {\r\n  return ({\r\n    root: {\r\n      marginLeft: 0\r\n    },\r\n    seedDivider: {\r\n      backgroundColor: lighten(theme.palette.primary.main, .9),\r\n      borderBottom: `2px solid ${theme.palette.primary.light}`\r\n    },\r\n    enrolledDivider: {\r\n      borderBottom: `2px solid ${theme.palette.secondary.light}`\r\n    },\r\n    seed: {\r\n      backgroundColor: lighten(theme.palette.primary.main, .9)\r\n    },\r\n    enrolled: {\r\n      backgroundColor: lighten(theme.palette.secondary.main, .9),\r\n    }\r\n  });\r\n}\r\n\r\nexport default withStyles(styles)(EnrollmentsComponent);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\nimport { EnumLocalization } from '../enums';\r\n\r\nclass EnumSelect extends React.Component {\r\n  render() {\r\n    const {\r\n      value,\r\n      onChange,\r\n      EnumValues,\r\n      EnumName,\r\n      label,\r\n      required,\r\n      error,\r\n      errorText,\r\n      allowClear\r\n    } = this.props;\r\n\r\n    return (\r\n      <FormControl fullWidth={true} error={error}>\r\n        <InputLabel required={required} shrink={Boolean(value)}>\r\n          {label}\r\n        </InputLabel>\r\n        <Select\r\n          value={value}\r\n          onChange={onChange}\r\n        >\r\n          <MenuItem value={null} disabled={true}>\r\n            <Typography variant=\"display2\">{label}</Typography>\r\n          </MenuItem>\r\n          {allowClear && <MenuItem value=\"\">\r\n            <Typography variant=\"caption\">Няма</Typography>\r\n          </MenuItem>}\r\n          {Object.keys(EnumValues).map((key, i) => {\r\n            return (\r\n              <MenuItem key={i} value={EnumValues[key]}>\r\n                {EnumLocalization[EnumName][EnumValues[key]]}\r\n              </MenuItem>\r\n            );\r\n          })}\r\n        </Select>\r\n        <Typography style={{ color: 'red', fontSize: '.8rem' }}>{errorText}</Typography>\r\n      </FormControl>\r\n    );\r\n  }\r\n}\r\n\r\n// EnumSelect.propTypes = {\r\n//   value: PropTypes.string.isRequired,\r\n//   label: PropTypes.string.isRequired,\r\n//   EnumValues: PropTypes.object.isRequired,\r\n//   EnumName: PropTypes.string.isRequired,\r\n//   onChange: PropTypes.func.isRequired\r\n// };\r\n\r\nexport default EnumSelect;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport * as Enums from '../enums';\r\n\r\nclass EnumSelectToggle extends React.Component {\r\n  render() {\r\n    const { style, enumName, value, onChange, classes } = this.props;\r\n    const values = Enums[enumName];\r\n    const translation = Enums.EnumLocalization[enumName];\r\n\r\n    return (\r\n      <div style={style} className={classes.root}>\r\n        {Object.keys(values).map((key, index) => {\r\n          let btnClass = classes.btn;\r\n          if (index == 0)\r\n            btnClass = classes.leftRounded;\r\n\r\n          return (\r\n            <Button\r\n              className={classes.btn}\r\n              key={key}\r\n              variant={values[key] === value ? 'contained' : 'outlined'}\r\n              color=\"primary\" size=\"small\" onClick={e => {\r\n                e.target.value = values[key];\r\n                return onChange(e);\r\n              }}>\r\n              {translation[values[key]]}\r\n            </Button>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  leftRounded: {\r\n    borderTopLeftRadius: '3px',\r\n    borderBottomLeftRadius: '3px',\r\n    borderTopRightRadius: '0',\r\n    borderBottomRightRadius: '0',\r\n    borderRight: 'none',\r\n    '&:hover': {\r\n      borderRight: 'none'\r\n    }\r\n  },\r\n  rightRounded: {\r\n    borderRadius: '5px',\r\n    borderLeft: 'none'\r\n  },\r\n  btn: {\r\n    borderRadius: '0',\r\n    boxSizing: 'border-box'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(EnumSelectToggle);","import React from 'react';\r\nimport moment from 'moment';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport DatePicker from 'material-ui-pickers/DatePicker';\r\nimport DateTimePicker from 'material-ui-pickers/DateTimePicker';\r\n\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Select from '@material-ui/core/Select';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport EnumSelect from '../components/EnumSelect';\r\nimport EnumSelectToggle from '../components/EnumSelectToggle';\r\nimport QueryService from '../services/query.service';\r\n\r\n\r\nclass SchemeFormModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      model: {\r\n      },\r\n      errors: []\r\n    }\r\n\r\n    this.save = this.save.bind(this);\r\n\r\n    this.handleChange = (prop) => (e) => {\r\n      const model = this.state.model;\r\n      model[prop] = e.target.value;\r\n      this.setState({ model });\r\n    }\r\n\r\n    this.handleCustomChange = (prop) => (value) => {\r\n      const model = this.state.model;\r\n      if (prop === 'singleTeams')\r\n        model.mixedTeams = false;\r\n\r\n      if (prop === 'hasGroupPhase') {\r\n        model.maxPlayerCount = '';\r\n        model.groupCount = '';\r\n        model.teamsPerGroup = '';\r\n      }\r\n\r\n      model[prop] = value;\r\n      this.setState({ model });\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ model: this.props.model });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.model != this.props.model)\r\n      this.setState({ model: this.props.model });\r\n  }\r\n\r\n  save() {\r\n    const model = Object.assign({}, this.state.model, { edition: null });\r\n    return QueryService\r\n      .post(`/schemes/${model.id ? model.id : ''}`, model)\r\n      .then(e => this.props.onChange(e));\r\n  }\r\n\r\n  render() {\r\n    const { model, errors } = this.state;\r\n    const { onClose, classes, fullScreen } = this.props;\r\n\r\n    return (\r\n      <Dialog\r\n        open={true}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        classes={{ paper: classes.root }}\r\n      >\r\n        <DialogTitle>\r\n          <Typography component=\"span\" variant=\"headline\">Форма за промяна/създаване на схема</Typography>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <EnumSelectToggle\r\n            value={model.status}\r\n            enumName=\"Status\"\r\n            onChange={this.handleChange('status')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Име на схемата\"\r\n            value={model.name}\r\n            required\r\n            fullWidth={true}\r\n            onChange={this.handleChange('name')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Допълнителна информация\"\r\n            value={model.info}\r\n            multiline={true}\r\n            fullWidth={true}\r\n            onChange={this.handleChange('info')}\r\n          />\r\n\r\n          <Typography variant=\"headline\" style={{ marginTop: '2rem' }}>Параметри</Typography>\r\n\r\n          <FormControl fullWidth={true} required>\r\n            <InputLabel>Формат</InputLabel>\r\n            <Select\r\n              onChange={e => this.handleCustomChange('singleTeams')(e.target.value)}\r\n              value={model.singleTeams}\r\n            >\r\n              <MenuItem value={true}>Сингъл</MenuItem>\r\n              <MenuItem value={false}>Двойки</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n\r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                color=\"primary\"\r\n                checked={model.maleTeams}\r\n                onChange={e => this.handleCustomChange('maleTeams')(e.target.value === 'true')}\r\n                value={!model.maleTeams + ''}\r\n              />\r\n            }\r\n            label=\"Мъже\"\r\n          />\r\n\r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                color=\"primary\"\r\n                checked={model.femaleTeams}\r\n                onChange={e => this.handleCustomChange('femaleTeams')(e.target.value === 'true')}\r\n                value={!model.femaleTeams + ''} />\r\n            }\r\n            label=\"Жени\"\r\n          />\r\n\r\n          {!model.singleTeams && <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                color=\"primary\"\r\n                checked={model.mixedTeams}\r\n                onChange={e => this.handleCustomChange('mixedTeams')(e.target.value === 'true')}\r\n                value={!model.mixedTeams + ''}\r\n              />\r\n            }\r\n            label=\"Микс\"\r\n          />}\r\n\r\n          <div>\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  color=\"primary\"\r\n                  checked={model.hasGroupPhase}\r\n                  onChange={e => this.handleCustomChange('hasGroupPhase')(e.target.value === 'true')}\r\n                  value={!model.hasGroupPhase + ''}\r\n                />\r\n              }\r\n              label=\"Включване на групова фаза\"\r\n            />\r\n          </div>\r\n\r\n          {!model.hasGroupPhase\r\n            && <TextField\r\n              label=\"Брой играчи\"\r\n              value={model.maxPlayerCount}\r\n              type=\"number\"\r\n              required={true}\r\n              fullWidth={true}\r\n              onChange={this.handleChange('maxPlayerCount')}\r\n            />}\r\n\r\n          {model.hasGroupPhase\r\n            && <TextField\r\n              label=\"Брой групи\"\r\n              value={model.groupCount}\r\n              type=\"number\"\r\n              required={true}\r\n              fullWidth={true}\r\n              onChange={this.handleChange('groupCount')}\r\n            />}\r\n\r\n          {model.hasGroupPhase\r\n            && <TextField\r\n              label=\"Брой играчи в група\"\r\n              value={model.teamsPerGroup}\r\n              type=\"number\"\r\n              required={true}\r\n              fullWidth={true}\r\n              onChange={this.handleChange('teamsPerGroup')}\r\n            />}\r\n\r\n          <TextField\r\n            label=\"Брой поставени играчи\"\r\n            value={model.seed}\r\n            type=\"number\"\r\n            fullWidth={true}\r\n            onChange={this.handleChange('seed')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Възраст От\"\r\n            value={model.ageFrom}\r\n            type=\"number\"\r\n            fullWidth={true}\r\n            onChange={this.handleChange('ageFrom')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Възраст До\"\r\n            value={model.ageTo}\r\n            type=\"number\"\r\n            fullWidth={true}\r\n            onChange={this.handleChange('ageTo')}\r\n          />\r\n\r\n\r\n          <Typography variant=\"headline\" style={{ marginTop: '2rem' }}>Дати</Typography>\r\n\r\n          <DatePicker\r\n            autoOk\r\n            label=\"Дата на схемата\"\r\n            labelFunc={(date) => date ? moment(model.date).format('DD.MM.YYYY') : ''}\r\n            clearable\r\n            required={true}\r\n            fullWidth={true}\r\n            value={model.date}\r\n            onChange={this.handleCustomChange('date')}\r\n          />\r\n\r\n          <DateTimePicker\r\n            label=\"Начало на регистрациите\"\r\n            labelFunc={(date) => date ? moment(model.registrationStart).format('DD.MM.YYYY  HH:mm') : ''}\r\n            clearable\r\n            ampm={false}\r\n            required={true}\r\n            fullWidth={true}\r\n            value={model.registrationStart}\r\n            onChange={this.handleCustomChange('registrationStart')}\r\n          />\r\n\r\n          <DateTimePicker\r\n            label=\"Край на регистрациите\"\r\n            labelFunc={(date) => date ? moment(model.registrationEnd).format('DD.MM.YYYY  HH:mm') : ''}\r\n            clearable\r\n            ampm={false}\r\n            required={true}\r\n            fullWidth={true}\r\n            value={model.registrationEnd}\r\n            onChange={this.handleCustomChange('registrationEnd')}\r\n          />\r\n\r\n\r\n          <Typography variant=\"headline\" style={{ marginTop: '2rem' }}>Точки</Typography>\r\n\r\n          <TextField\r\n            label=\"Точки за участие\"\r\n            value={model.pPoints}\r\n            type=\"number\"\r\n            fullWidth={true}\r\n            onChange={this.handleChange('pPoints')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Точки за победа\"\r\n            value={model.wPoints}\r\n            type=\"number\"\r\n            fullWidth={true}\r\n            onChange={this.handleChange('wPoints')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Точки за шампион\"\r\n            value={model.cPoints}\r\n            type=\"number\"\r\n            fullWidth={true}\r\n            onChange={this.handleChange('cPoints')}\r\n          />\r\n\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.save()}>\r\n            Запис\r\n          </Button>\r\n          <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(SchemeFormModal)\r\n);","import React from 'react';\r\nimport { EnumLocalization } from '../enums';\r\n\r\nclass L10n extends React.Component {\r\n  render() {\r\n    const { children, translate, style } = this.props;\r\n    return <span style={style}>{l10n_text(children, translate)}</span>\r\n  }\r\n}\r\n\r\nexport function l10n_text(value, translate) {\r\n  const l10n = EnumLocalization[translate];\r\n  return l10n[value];\r\n}\r\n\r\nexport default L10n;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport moment from 'moment';\r\nimport ReplyIcon from '@material-ui/icons/Reply';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport { l10n_text } from '../../components/L10n';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nclass SchemeDetails extends React.Component {\r\n  render() {\r\n    const { scheme, enableEditionLink, classes } = this.props;\r\n\r\n    return (\r\n      <Card {...this.props.CardProps}>\r\n        <CardContent>\r\n          <Typography variant=\"headline\">\r\n            Схема\r\n            <Link to={`/schemes/${scheme.id}`}>\r\n              <span className={classes.schemeAccent}>{scheme.name}</span>\r\n            </Link>\r\n            {enableEditionLink && <span>\r\n              към турнир\r\n              <Link to={`/editions/${scheme.editionId}`}>\r\n                <span className={classes.editionAccent}>{scheme.edition.name}</span>\r\n                {/* <Typography variant=\"body2\">\r\n                    <ReplyIcon style={{ fontSize: '14px' }} />\r\n                    {scheme.edition.name}\r\n                  </Typography> */}\r\n              </Link>\r\n            </span>}\r\n          </Typography>\r\n          <Typography variant=\"caption\">{scheme.info}</Typography>\r\n\r\n          <div style={{ display: 'flex', flexWrap: 'wrap', margin: '.5rem 0' }}>\r\n            <Typography\r\n              variant=\"caption\"\r\n              style={{ paddingRight: '1rem' }}\r\n            >\r\n              Регистрация от\r\n              <Typography>\r\n                {moment(scheme.registrationStart).format('DD.MM.YYYY / HH:mm')}\r\n              </Typography>\r\n            </Typography>\r\n            <Typography\r\n              variant=\"caption\"\r\n              style={{ paddingRight: '1rem' }}\r\n            >\r\n              Регистрация до\r\n              <Typography>\r\n                {moment(scheme.registrationEnd).format('DD.MM.YYYY / HH:mm')}\r\n              </Typography>\r\n            </Typography>\r\n          </div>\r\n\r\n          <Typography variant=\"caption\">\r\n            Описание\r\n            <Typography>\r\n              {getSchemeTraits(scheme)}\r\n            </Typography>\r\n          </Typography>\r\n\r\n          <Typography variant=\"caption\" style={{ margin: '.5rem 0' }}>\r\n            Статус на схемата\r\n            <Typography>\r\n              {l10n_text(scheme.bracketStatus, \"BracketStatus\")}\r\n            </Typography>\r\n          </Typography>\r\n        </CardContent>\r\n        <CardActions disableActionSpacing={true}>\r\n          {this.props.actions}\r\n        </CardActions>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\nfunction getSchemeTraits(scheme) {\r\n  const traits = [];\r\n  if (scheme.hasGroupPhase)\r\n    traits.push('Групова фаза, елиминации');\r\n  else\r\n    traits.push('Елиминации');\r\n\r\n  if (scheme.singleTeams)\r\n    traits.push('сингъл');\r\n  else\r\n    traits.push('двойки');\r\n\r\n  if (scheme.maleTeams)\r\n    traits.push('мъже');\r\n\r\n  if (scheme.femaleTeams)\r\n    traits.push('жени');\r\n\r\n  if (scheme.mixedTeams)\r\n    traits.push('микс');\r\n\r\n  if (scheme.ageFrom || scheme.ageTo) {\r\n    const ageTrait = [];\r\n    if (scheme.ageFrom)\r\n      ageTrait.push(`от ${scheme.ageFrom}`);\r\n\r\n    if (scheme.ageTo)\r\n      ageTrait.push(`до ${scheme.ageTo}`);\r\n\r\n    ageTrait.push('години');\r\n    traits.push(ageTrait.join(' '));\r\n  }\r\n\r\n  return traits.join(', ');\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  schemeAccent: {\r\n    margin: '0 .3rem',\r\n    fontStyle: 'italic',\r\n    color: theme.palette.primary.main\r\n  },\r\n  editionAccent: {\r\n    margin: '0 .3rem',\r\n    fontStyle: 'italic',\r\n    color: theme.palette.secondary.main\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(SchemeDetails);","import React from 'react';\r\nimport FormModal from './FormModal';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nclass MessageModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: false\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.activation != this.props.activation && this.props.activation)\r\n      this.show();\r\n  }\r\n\r\n  show() {\r\n    let duration = this.props.duration || 60;\r\n    this.setState({ open: true });\r\n    setTimeout(() => this.setState({ open: false }), duration * 1000);\r\n  }\r\n\r\n  render() {\r\n    const { open } = this.state;\r\n\r\n    const closeBtn = <Button\r\n      variant=\"outlined\"\r\n      onClick={() => this.setState({ open: false })}\r\n    >\r\n      Добре\r\n    </Button>;\r\n\r\n    if (open)\r\n      return <FormModal\r\n        title={null}\r\n        body={this.props.children}\r\n        actions={closeBtn}\r\n        onClose={() => this.setState({ open: false })}\r\n      />;\r\n    else\r\n      return null;\r\n  }\r\n}\r\n\r\nexport default MessageModal;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\n\r\nimport MessageModal from '../components/MessageModal';\r\nimport UserService from '../services/user.service';\r\nimport QueryService from '../services/query.service';\r\n\r\nclass InvitationsComponent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      userId: null,\r\n      page: 0,\r\n      rowsPerPage: 10,\r\n      // Handle errors: ExistingEnrollment, RequirementsNotMet, UserHasNoInfo\r\n      err: null\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setUserId();\r\n  }\r\n\r\n  setUserId() {\r\n    UserService.getAuthenticatedUser()\r\n      .then(user => {\r\n        if (user)\r\n          this.setState({ userId: user.id });\r\n        else\r\n          this.setState({ userId: null });\r\n      });\r\n  }\r\n\r\n  accept(invitation) {\r\n    this.setState({ err: null });\r\n    QueryService\r\n      .post(`/invitations/${invitation.id}`)\r\n      .then(() => this.props.onChange())\r\n      .catch(err => this.setState({ err }));\r\n  }\r\n\r\n  cancel(invitation) {\r\n    QueryService\r\n      .delete(`/invitations/${invitation.id}`)\r\n      .then(() => this.props.onChange())\r\n      .catch(() => null);\r\n  }\r\n\r\n  render() {\r\n    const { page, rowsPerPage, userId, err } = this.state;\r\n    const { invitations } = this.props;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <MessageModal activation={this.state.err}>\r\n          <Typography variant=\"subheading\" color=\"secondary\">Възникна грешка при приемане на поканата.</Typography>\r\n          {err && err.message == 'ExistingEnrollment' && <React.Fragment>\r\n            <Typography>Някой от играчите вече е записан за този турнир.</Typography>\r\n          </React.Fragment>}\r\n          {err && err.message == 'RequirementsNotMet' && <React.Fragment>\r\n            <Typography>Някой от играчите не покрива следните ограничения на турнира:</Typography>\r\n            <Typography variant=\"caption\">{err.errors.map(e => e == 'gender' ? 'пол' : 'възраст').join(', ')}</Typography>\r\n          </React.Fragment>}\r\n          {err && err.message == 'UserHasNoInfo' && <React.Fragment>\r\n            <Typography>Някой от играчите няма въведена информация за пол и/или дата на раждане, които са нужни за записване.</Typography>\r\n          </React.Fragment>}\r\n        </MessageModal>\r\n        {invitations.length == 0 && <Typography variant=\"caption\">Нямате текущи покани</Typography>}\r\n        <List>\r\n          {invitations.slice(page * rowsPerPage, (page + 1) * rowsPerPage).map(inv => {\r\n            return (\r\n              <ListItem key={inv.id} style={{ display: 'flex', justifyContent: 'space-between', borderBottom: '1px solid #f3f3f3' }}>\r\n                {userId == inv.inviterId &&\r\n                  <Typography>{inv.invited.name}</Typography>}\r\n                {userId == inv.invitedId &&\r\n                  <Typography>{inv.inviter.name}</Typography>}\r\n\r\n                <div>\r\n                  <Link to={`/editions/${inv.scheme.editionId}`}>\r\n                    <Typography variant=\"body2\">\r\n                      {inv.scheme.edition.name}\r\n                    </Typography>\r\n                  </Link>\r\n                  <Link to={`/schemes/${inv.scheme.id}`}>\r\n                    <Typography variant=\"body2\">\r\n                      {inv.scheme.name}\r\n                    </Typography>\r\n                  </Link>\r\n                </div>\r\n                {userId == inv.inviterId\r\n                  && <Button\r\n                    variant=\"outlined\"\r\n                    color=\"secondary\"\r\n                    size=\"small\"\r\n                    onClick={() => this.cancel(inv)}\r\n                  >\r\n                    Отказване\r\n                  </Button>}\r\n                {userId == inv.invitedId\r\n                  && <Button\r\n                    variant=\"outlined\"\r\n                    color=\"primary\"\r\n                    size=\"small\"\r\n                    onClick={() => this.accept(inv)}\r\n                  >\r\n                    Приемане\r\n                  </Button>}\r\n              </ListItem>\r\n            );\r\n          })}\r\n        </List>\r\n        {invitations.length > 0 && <TablePagination\r\n          component=\"div\"\r\n          count={invitations.length}\r\n          rowsPerPage={rowsPerPage}\r\n          rowsPerPageOptions={[5, 10, 25]}\r\n          labelRowsPerPage=\"Покажи:\"\r\n          labelDisplayedRows={({ from, to, count }) => `${from}-${to} от ${count}`}\r\n          page={page}\r\n          onChangePage={(e, page) => this.setState({ page })}\r\n          onChangeRowsPerPage={e => this.setState({ rowsPerPage: e.target.value, page: 0 })}\r\n        />}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default InvitationsComponent","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport AsyncSelect from '../../components/select/AsyncSelect';\r\nimport QueryService from '../../services/query.service';\r\nimport FormModal from '../../components/FormModal';\r\nimport InvitationsComponent from '../../users/InvitationsComponent';\r\n\r\nclass InvitationsModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      invitations: [],\r\n      selectedUser: null\r\n    }\r\n\r\n    this.handleChange = (user) => {\r\n      this.setState({ selectedUser: user });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    QueryService\r\n      .get('/invitations')\r\n      .then(invitations => this.setState({ invitations }));\r\n  }\r\n\r\n  invite() {\r\n    if (!this.state.selectedUser)\r\n      return;\r\n\r\n    QueryService\r\n      .post('/invitations', {\r\n        invitedId: this.state.selectedUser.id,\r\n        schemeId: this.props.scheme.id\r\n      })\r\n      .then(() => this.getData())\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  render() {\r\n    const { selectedUser } = this.state;\r\n    const { onClose, scheme } = this.props;\r\n    const title = `Менажиране на поканите за схема ${scheme.name}`;\r\n    const actions = <Button variant=\"outlined\" color=\"primary\" onClick={onClose} size=\"small\">Затвори</Button>\r\n    const body = <React.Fragment>\r\n      {/* <Typography variant=\"caption\">\r\n        Ще бъдете записани за турнира, когато поканеният играч приеме.\r\n        В падащото меню за избор на играч се показват само играчи,\r\n        които могат да приемат поканата Ви (това означава, че отговарят на\r\n        изискванията на турнира и не са записани).\r\n      </Typography> */}\r\n      <div style={{ margin: '0 0 1rem 0', display: 'flex', justifyContent: 'space-between', alignItems: 'flex-end' }}>\r\n        <AsyncSelect\r\n          label=\"Играч\"\r\n          value={selectedUser}\r\n          query=\"invitable\"\r\n          filter={{\r\n            schemeId: scheme.id\r\n          }}\r\n          noOptionsMessage={() => 'Няма намерени играчи, отговарящи на изискванията'}\r\n          formatOptionLabel={(option) => <Typography component=\"span\">\r\n            {option.name}\r\n          </Typography>}\r\n          onChange={this.handleChange}\r\n        />\r\n\r\n        <Button variant=\"contained\" color=\"primary\" size=\"small\" style={{ marginLeft: '1rem' }} disabled={!selectedUser} onClick={() => this.invite()}>Покани</Button>\r\n      </div>\r\n\r\n      <InvitationsComponent invitations={this.state.invitations} onChange={() => this.getData()} />\r\n    </React.Fragment>\r\n\r\n    return (\r\n      <FormModal\r\n        enableFullWidth={true}\r\n        onClose={onClose}\r\n        title={title}\r\n        body={body}\r\n        actions={actions}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default InvitationsModal;","import React from 'react';\r\nimport moment from 'moment-timezone';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Link } from 'react-router-dom';\r\nimport Button from '@material-ui/core/Button';\r\nimport { BracketStatus, ApplicationMode } from '../../enums';\r\n\r\nimport MessageModal from '../../components/MessageModal';\r\nimport { dispatchEvent } from '../../services/events.service';\r\nimport ConfirmationDialog from '../../components/ConfirmationDialog';\r\nimport QueryService from '../../services/query.service';\r\nimport InvitationsModal from './InvitationsModal';\r\n\r\nclass SchemeDetailsActions extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      hasEnrolled: false,\r\n      hasCancelledEnrollment: false,\r\n      invitationsModal: false,\r\n      error: null,\r\n      hasEnrollmentError: false\r\n    }\r\n  }\r\n\r\n  enroll() {\r\n    this.setState({\r\n      hasEnrolled: false,\r\n      hasEnrollmentError: false\r\n    });\r\n\r\n    if (this.props.mode == ApplicationMode.GUEST)\r\n      dispatchEvent('menu-login');\r\n    else {\r\n      return QueryService\r\n        .get(`/schemes/${this.props.scheme.id}/enrollments/enroll`)\r\n        .then(e => {\r\n          this.setState({ hasEnrolled: true });\r\n          this.props.reload();\r\n        })\r\n        .catch(() => this.setState({ hasEnrollmentError: true }));\r\n    }\r\n  }\r\n\r\n  cancelEnroll() {\r\n    return QueryService\r\n      .delete(`/schemes/${this.props.scheme.id}/enrollments/${this.props.enrollment.id}/cancelEnroll`)\r\n      .then(e => {\r\n        this.setState({ hasCancelledEnrollment: true });\r\n        this.props.reload();\r\n      });\r\n  }\r\n\r\n  registrationOpen() {\r\n    return moment().isBetween(moment(this.props.scheme.registrationStart), moment(this.props.scheme.registrationEnd));\r\n  }\r\n\r\n  render() {\r\n    const { scheme, enableViewLink, enrollment } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <MessageModal activation={this.state.hasEnrolled}>\r\n          <Typography>Записване за турнир {this.props.scheme.name} беше успешно.</Typography>\r\n        </MessageModal>\r\n        <MessageModal activation={this.state.hasEnrollmentError}>\r\n          <Typography>Неуспешно записване за турнир {this.props.scheme.name}.\r\n          Не отговаряте на изискванията за пол и/или възраст за тази схема.\r\n          Моля ако не сте въвели тези данни в профила си, да ги въведете, защото те са задължителни за участие в турнирите.\r\n          </Typography>\r\n        </MessageModal>\r\n        <MessageModal activation={this.state.hasCancelledEnrollment}>\r\n          <Typography>Отписването от турнир {this.props.scheme.name} беше успешно.</Typography>\r\n        </MessageModal>\r\n        <MessageModal activation={this.state.error}>\r\n          <Typography variant=\"subheading\">Възникна грешка при записване за турнир {this.props.scheme.name}!</Typography>\r\n          <Typography>{this.state.error}</Typography>\r\n        </MessageModal>\r\n        {this.state.invitationsModal\r\n          && <InvitationsModal\r\n            onChange={() => {\r\n              this.props.reload();\r\n              this.setState({ invitationsModal: false });\r\n            }}\r\n            onClose={() => this.setState({ invitationsModal: false })}\r\n            scheme={this.props.scheme}\r\n          />}\r\n        {enableViewLink &&\r\n          <Link to={`/schemes/${scheme.id}`}>\r\n            <Button color=\"primary\">Преглед</Button>\r\n          </Link>}\r\n        {(scheme.bracketStatus == BracketStatus.GROUPS_DRAWN || scheme.bracketStatus == BracketStatus.GROUPS_END)\r\n          && <Link to={`/schemes/${scheme.id}/groups`}>\r\n            <Button color=\"primary\">Групи</Button>\r\n          </Link>}\r\n        {(scheme.bracketStatus == BracketStatus.ELIMINATION_DRAWN || scheme.bracketStatus == BracketStatus.ELIMINATION_END)\r\n          && <React.Fragment>\r\n            <Link to={`/schemes/${scheme.id}/elimination`}>\r\n              <Button color=\"primary\">Схема</Button>\r\n            </Link>\r\n            {scheme.hasGroupPhase\r\n              && <Link to={`/schemes/${scheme.id}/groups`}>\r\n                <Button color=\"primary\">Групи</Button>\r\n              </Link>}\r\n          </React.Fragment>}\r\n        {scheme.bracketStatus == BracketStatus.UNDRAWN\r\n          && <React.Fragment>\r\n            {!enrollment && this.registrationOpen()\r\n              && <React.Fragment>\r\n                {scheme.singleTeams && <Button color=\"primary\" onClick={() => this.enroll()}>Записване</Button>}\r\n                {!scheme.singleTeams && <Button color=\"primary\" onClick={() => this.setState({ invitationsModal: true })}>Записване</Button>}\r\n              </React.Fragment>}\r\n            {enrollment && <ConfirmationDialog\r\n              title=\"Отписване от турнир\"\r\n              body={<Typography>\r\n                Сигурни ли сте че искате да се отпишете от турнир {this.props.scheme.name}?\r\n                <Typography variant=\"caption\">Ако сте в отбор, то и другият играч ще бъде отписан.</Typography>\r\n              </Typography>}\r\n              onAccept={() => this.cancelEnroll()}\r\n            >\r\n              <Button color=\"secondary\">Отписване</Button>\r\n            </ConfirmationDialog>}\r\n          </React.Fragment>}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SchemeDetailsActions;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport List from '@material-ui/core/List';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport FormModal from '../../components/FormModal';\r\nimport QueryService from '../../services/query.service';\r\n\r\nclass ScoresModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      scores: []\r\n    }\r\n\r\n    this.handleChange = (index, prop) => (e) => {\r\n      const scores = this.state.scores;\r\n      if (prop != 'isWinner')\r\n        scores[index][prop] = parseInt(e.target.value);\r\n      else\r\n        scores[index].isWinner = e.target.value === 'true';\r\n\r\n      this.setState({ scores });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ scores: this.props.scores });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.scores != this.props.scores)\r\n      this.setState({ scores: this.props.scores });\r\n  }\r\n\r\n  save() {\r\n    return QueryService\r\n      .post(`/schemes/${this.props.scheme.id}/scores/save`, this.props.scores)\r\n      .then(() => this.props.onChange())\r\n  }\r\n\r\n  getTeamView(model, index) {\r\n    return (\r\n      <React.Fragment key={model.team.id}>\r\n        <ListItem style={{ display: 'flex', }}>\r\n          <div style={{ display: 'flex', flexBasis: '35%' }}>\r\n            {model.team.user1 && <Typography>{model.team.user1.name}</Typography>}\r\n            {model.team.user2 && <Typography>{model.team.user2.name}</Typography>}\r\n          </div>\r\n          <div style={{ display: 'flex', flexBasis: '65%' }}>\r\n            <TextField type=\"number\" value={model.score} onChange={this.handleChange(index, 'score')} label=\"Точки\" />\r\n            <TextField type=\"number\" value={model.wonMatches} onChange={this.handleChange(index, 'wonMatches')} label=\"Спечелени мачове\" />\r\n            <TextField type=\"number\" value={model.totalMatches} onChange={this.handleChange(index, 'totalMatches')} label=\"Общо мачове\" />\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  color=\"primary\"\r\n                  checked={model.isWinner}\r\n                  value={!model.isWinner + ''}\r\n                  onChange={this.handleChange(index, 'isWinner')}\r\n                />\r\n              }\r\n              label=\"Победител\"\r\n            />\r\n          </div>\r\n        </ListItem>\r\n        <Divider />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { scores } = this.state;\r\n    const { onClose, onChange, scheme } = this.props;\r\n    const title = `Разпределение на точките за схема ${scheme.name}`;\r\n\r\n    const actions = <React.Fragment>\r\n      <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.save()}>Запис</Button>\r\n      <Button variant=\"outlined\" color=\"primary\" size=\"small\" onClick={onClose}>Отказ</Button>\r\n    </React.Fragment>\r\n\r\n    const body = <List style={{ width: '100%' }}>\r\n      {scores.map((model, index) => this.getTeamView(model, index))}\r\n    </List>\r\n\r\n    return (\r\n      <FormModal\r\n        enableFullWidth={true}\r\n        onClose={onClose}\r\n        title={title}\r\n        body={body}\r\n        actions={actions}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default ScoresModal;","import React from 'react';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport FormModal from '../../components/FormModal';\r\nimport ConfirmationDialog from '../../components/ConfirmationDialog';\r\n\r\nclass EliminationPreviewModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      teams: []\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ teams: this.props.teams });\r\n  }\r\n\r\n  draw() {\r\n    return QueryService.post(`/schemes/${this.props.scheme.id}/draw/eliminationPhase`, { teams: this.state.teams })\r\n      .then(() => this.props.onDraw());\r\n  }\r\n\r\n  changeOrder(e, index) {\r\n    let teams = this.state.teams;\r\n    teams[index].order = e.target.value;\r\n    this.setState({ teams });\r\n  }\r\n\r\n  reorder() {\r\n    let teams = this.state.teams;\r\n    teams.sort((a, b) => {\r\n      if (!b.order)\r\n        return -1;\r\n      if (!a.order)\r\n        return 1;\r\n      return a.order - b.order;\r\n    });\r\n    this.setState({ teams });\r\n  }\r\n\r\n  render() {\r\n    const { teams } = this.state;\r\n    const { scheme, onClose } = this.props;\r\n\r\n    const title = `Подредба на играчи/отбори преди изтегляне на елиминационна схема`;\r\n    const actions = <React.Fragment>\r\n      <Button variant=\"outlined\" color=\"primary\" size=\"small\" onClick={() => this.reorder()}>\r\n        Пренареждане\r\n      </Button>\r\n      <ConfirmationDialog\r\n        title=\"Изтегляне на схема\"\r\n        body={<Typography>Сигурни ли сте че искате да изтеглите схемата</Typography>}\r\n        onAccept={() => this.draw()}\r\n      >\r\n        <Button variant=\"contained\" color=\"primary\" size=\"small\" >\r\n          Изтегляне на схема\r\n        </Button>\r\n      </ConfirmationDialog>\r\n    </React.Fragment>;\r\n\r\n    const body = <List>\r\n      <Typography color=\"secondary\">Играч/oтбор без позиция бива изключен от схемата!</Typography>\r\n      {teams.map((team, index) => {\r\n        return (<React.Fragment key={team.team.id}>\r\n          <div style={{ display: 'flex', width: '100%' }}>\r\n            <div style={{ marginRight: '.3em', display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n              <Typography>{index + 1}.</Typography>\r\n            </div>\r\n            <div style={{ flexBasis: '70%', display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n              <Typography>{team.team.user1.name}</Typography>\r\n              {team.team.user2 && <Typography>{team.team.user2.name}</Typography>}\r\n            </div>\r\n            <div style={{}}>\r\n              <TextField label={team.order ? 'Позиция' : 'НЕ ИГРАЕ'} value={team.order} type=\"number\" onChange={e => this.changeOrder(e, index)} />\r\n            </div>\r\n          </div>\r\n          <Divider />\r\n        </React.Fragment>);\r\n      })}\r\n    </List>\r\n    return (\r\n      <FormModal\r\n        enableFullWidth={true}\r\n        onClose={onClose}\r\n        title={title}\r\n        body={body}\r\n        actions={actions}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default EliminationPreviewModal;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ConfirmationDialog from '../components/ConfirmationDialog';\r\nimport UserService from '../services/user.service';\r\nimport QueryService from '../services/query.service';\r\nimport EnrollmentsComponent from './components/Enrollments';\r\nimport SchemeFormModal from './SchemeFormModal';\r\nimport SchemeDetails from './components/SchemeDetails';\r\nimport SchemeDetailsActions from './components/SchemeDetailsActions';\r\nimport { BracketStatus, ApplicationMode } from '../enums';\r\nimport { catchEvent } from '../services/events.service';\r\nimport MessageModal from '../components/MessageModal';\r\nimport ScoresModal from './components/ScoresModal';\r\nimport EliminationPreviewModal from './components/EliminationPreviewModal';\r\n\r\nclass SchemeView extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      scheme: {\r\n        edition: {}\r\n      },\r\n      schemeModel: null,\r\n      enrolled: [],\r\n      hasError: false,\r\n      scores: null,\r\n      eliminationPreview: null\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { scheme, schemeModel, enrolled, scores, eliminationPreview } = this.state;\r\n\r\n    return (\r\n      <UserService.WithApplicationMode>\r\n        {mode => {\r\n          let hasPermission = mode == ApplicationMode.ADMIN || mode == ApplicationMode.TOURNAMENT;\r\n\r\n          return (\r\n            <div className=\"container\">\r\n              <MessageModal activation={this.state.hasError}>\r\n                <Typography>Неуспешно изтриване на схема. Възможна причина за грешката е съществуващи записи на играчи.</Typography>\r\n              </MessageModal>\r\n              {hasPermission && schemeModel\r\n                && <SchemeFormModal\r\n                  model={schemeModel}\r\n                  onChange={() => {\r\n                    this.setState({ schemeModel: null });\r\n                    this.getData();\r\n                  }}\r\n                  onClose={() => this.setState({ schemeModel: null })}\r\n                />}\r\n              {scores && scores.length > 0\r\n                && <ScoresModal\r\n                  scores={scores}\r\n                  scheme={scheme}\r\n                  onChange={() => {\r\n                    this.setState({ scores: null });\r\n                    this.getData();\r\n                  }}\r\n                  onClose={() => this.setState({ scores: null })}\r\n                />}\r\n\r\n              {eliminationPreview && <EliminationPreviewModal\r\n                teams={eliminationPreview}\r\n                scheme={scheme}\r\n                onClose={() => this.setState({ eliminationPreview: null })}\r\n                onDraw={() => this.setState({ eliminationPreview: null }, this.getData())}\r\n              />}\r\n\r\n              {hasPermission && this.getButtons()}\r\n\r\n              <SchemeDetails\r\n                scheme={scheme}\r\n                actions={\r\n                  <SchemeDetailsActions mode={mode} scheme={scheme} reload={() => this.getData()} enrollment={enrolled[scheme.id]} />\r\n                }\r\n                enableEditionLink\r\n              />\r\n              <EnrollmentsComponent scheme={scheme} style={{ marginTop: '1rem' }} mode={mode} />\r\n            </div>\r\n          );\r\n        }}\r\n      </UserService.WithApplicationMode>\r\n    );\r\n  }\r\n\r\n  getButtons() {\r\n    const { scheme } = this.state;\r\n\r\n    return (\r\n      <div style={{ margin: '.5rem 0' }}>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          size=\"small\"\r\n          onClick={() => this.setState({ schemeModel: scheme })}\r\n        >\r\n          Промяна\r\n        </Button>\r\n\r\n        {scheme.bracketStatus == BracketStatus.UNDRAWN\r\n          && <ConfirmationDialog\r\n            title=\"Изтриване на турнир\"\r\n            body={<Typography>Сигурни ли сте че искате да изтриете схема {scheme.name}?</Typography>}\r\n            onAccept={() => this.deleteScheme()}\r\n          >\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              size=\"small\"\r\n              style={{ marginLeft: '.3rem' }}\r\n            >\r\n              Изтриване\r\n                  </Button>\r\n          </ConfirmationDialog>}\r\n\r\n        {((scheme.bracketStatus == BracketStatus.UNDRAWN && !scheme.hasGroupPhase)\r\n          || (scheme.bracketStatus == BracketStatus.GROUPS_END))\r\n          && <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ marginLeft: '.3rem' }}\r\n            onClick={() => this.previewElimination()}\r\n          >\r\n            Изтегляне\r\n        </Button>}\r\n\r\n        {scheme.bracketStatus == BracketStatus.UNDRAWN && scheme.hasGroupPhase\r\n          && <ConfirmationDialog\r\n            title=\"Изтегляне на схема\"\r\n            body={<Typography>Сигурни ли сте, че искате да изтеглите схемата?</Typography>}\r\n            onAccept={() => this.drawGroupPhase()}\r\n          >\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              style={{ marginLeft: '.3rem' }}\r\n            >\r\n              Изтегляне\r\n            </Button>\r\n          </ConfirmationDialog>}\r\n\r\n        {(scheme.bracketStatus == BracketStatus.GROUPS_DRAWN || scheme.bracketStatus == BracketStatus.ELIMINATION_DRAWN)\r\n          && <ConfirmationDialog\r\n            title=\"Приключване на фаза\"\r\n            body={<Typography>Сигурни ли сте че искате да приключите текущата фаза?</Typography>}\r\n            onAccept={() => this.finishPhase()}\r\n          >\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              style={{ marginLeft: '.3rem' }}\r\n            >\r\n              Приключване на фаза\r\n            </Button>\r\n          </ConfirmationDialog>}\r\n\r\n        {scheme.bracketStatus == BracketStatus.ELIMINATION_END\r\n          && <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ marginLeft: '.3rem' }}\r\n            onClick={() => this.getScores()}\r\n          >\r\n            Резултати\r\n          </Button>}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n    catchEvent('logged-in', () => {\r\n      this.getData();\r\n    })\r\n  }\r\n\r\n  getData() {\r\n    const { id } = this.props.match.params;\r\n\r\n    QueryService\r\n      .get(`/schemes/${id}`)\r\n      .then(e => this.setState({ scheme: e }));\r\n\r\n    QueryService\r\n      .get('/users/enrollments')\r\n      .then(enrolled => this.setState({ enrolled }));\r\n  }\r\n\r\n  deleteScheme() {\r\n    this.setState({ hasError: false });\r\n    return QueryService.delete(`/schemes/${this.state.scheme.id}`)\r\n      .then(e => this.props.history.replace(`/editions/${this.state.scheme.edition.id}`))\r\n      .catch(err => this.setState({ hasError: true }));\r\n  }\r\n\r\n  getScores() {\r\n    return QueryService.get(`/schemes/${this.state.scheme.id}/scores`)\r\n      .then(scores => this.setState({ scores }));\r\n  }\r\n\r\n  previewElimination() {\r\n    return QueryService.get(`/schemes/${this.state.scheme.id}/draw/eliminationPhase/preview`)\r\n      .then(eliminationPreview => this.setState({ eliminationPreview }));\r\n  }\r\n\r\n  drawGroupPhase() {\r\n    return QueryService.get(`/schemes/${this.state.scheme.id}/draw/groupPhase`)\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  finishPhase() {\r\n    return QueryService.get(`/schemes/${this.state.scheme.id}/draw/finish`)\r\n      .then(() => this.getData());\r\n  }\r\n}\r\n\r\nexport default SchemeView;","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport SchemeView from './SchemeView';\r\n\r\nclass SchemesRoot extends React.Component {\r\n  render() {\r\n    return (\r\n      <Switch>\r\n        <Route\r\n          path=\"/schemes/:id\"\r\n          render={(props) => <SchemeView {...props} />}\r\n        />\r\n      </Switch>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SchemesRoot;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport AsyncSelect from '../../components/select/AsyncSelect';\r\nimport QueryService from '../../services/query.service';\r\n\r\nclass EditGroupModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      model: {\r\n        teams: []\r\n      },\r\n      errors: []\r\n    };\r\n\r\n    this.setTeam = (index) => (value) => {\r\n      const model = this.state.model;\r\n      model.teams[index].team = value;\r\n      model.teams[index].teamId = (value || { id: null }).id;\r\n      this.setState({ model });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ model: this.props.model });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.model != this.props.model)\r\n      this.setState({ model: this.props.model });\r\n  }\r\n\r\n  addTeam() {\r\n    const model = this.state.model;\r\n    model.teams.push({\r\n      groupId: model.id,\r\n      team: null,\r\n      teamId: null,\r\n      order: model.teams.length + 1\r\n    });\r\n    this.setState({ model });\r\n  }\r\n\r\n  removeTeam(index) {\r\n    const model = this.state.model;\r\n    model.teams.splice(index, 1);\r\n    this.setState({ model });\r\n  }\r\n\r\n  save() {\r\n    const model = this.state.model;\r\n    if (model.id)\r\n      return QueryService\r\n        .post(`/schemes/${model.schemeId}/groups/${model.id}`, model)\r\n        .then(e => this.props.onChange())\r\n        .catch(errors => this.setState({ errors }));\r\n    else\r\n      return QueryService\r\n        .post(`/schemes/${model.schemeId}/groups`, model)\r\n        .then(e => this.props.onChange())\r\n        .catch(errors => this.setState({ errors }));\r\n  }\r\n\r\n  render() {\r\n    const { model, errors } = this.state;\r\n    const { onClose, classes, fullScreen, scheme } = this.props;\r\n\r\n    return (\r\n      <Dialog\r\n        open={true}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        classes={{ paper: classes.root }}\r\n      >\r\n        <DialogTitle>\r\n          <Typography component=\"span\" variant=\"headline\">Създаване/промяна на група {getGroupHeader(model.group)}</Typography>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Typography variant=\"caption\">Отбори</Typography>\r\n          {model.teams.map((groupTeam, index) => {\r\n            return (\r\n              <div key={groupTeam.id} style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <Typography style={{ marginRight: '1rem' }}>{groupTeam.order}</Typography>\r\n                <AsyncSelect\r\n                  value={groupTeam.team}\r\n                  query=\"teams\"\r\n                  disableClear\r\n                  filter={{\r\n                    singleTeams: scheme.singleTeams,\r\n                    schemeId: scheme.id\r\n                  }}\r\n                  noOptionsMessage={() => 'Няма намерени играчи/отбори'}\r\n                  formatOptionLabel={(option) => {\r\n                    return (\r\n                      <React.Fragment>\r\n                        <Typography component=\"span\">{option.user1.name}</Typography>\r\n                        {!scheme.singleTeams && <Typography component=\"span\">{option.user2.name}</Typography>}\r\n                      </React.Fragment>\r\n                    );\r\n                  }}\r\n                  onChange={this.setTeam(index)}\r\n                />\r\n                <IconButton color=\"secondary\" onClick={() => this.removeTeam(index)}>\r\n                  <DeleteForeverIcon />\r\n                </IconButton>\r\n              </div>\r\n            );\r\n          })}\r\n          <Button style={{ marginTop: '1rem' }} variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.addTeam()}>Добави</Button>\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.save()}>\r\n            Запис\r\n          </Button>\r\n          <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nfunction getGroupHeader(groupOrder) {\r\n  if (groupOrder == null || groupOrder == undefined)\r\n    return null;\r\n  return String.fromCharCode(\"А\".charCodeAt(0) + groupOrder);\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(EditGroupModal)\r\n);","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport AsyncSelect from '../../components/select/AsyncSelect';\r\n\r\nclass MatchFormModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      model: {\r\n        sets: []\r\n      },\r\n      errors: []\r\n    }\r\n\r\n    this.handleChange = (prop) => (event) => {\r\n      let model = this.state.model;\r\n      model[prop] = event.target.value;\r\n      this.setState({ model });\r\n    }\r\n\r\n    this.handleCustomChange = (prop) => (value) => {\r\n      const model = this.state.model;\r\n\r\n      if (prop === 'team1') {\r\n        model.team1 = value;\r\n        model.team1Id = (value || { id: null }).id\r\n      }\r\n\r\n      if (prop === 'team2') {\r\n        model.team2 = value;\r\n        model.team2Id = (value || { id: null }).id\r\n      }\r\n\r\n      if (prop === 'withdraw') {\r\n        if (value == model.team1)\r\n          model.withdraw = 1;\r\n        else if (value == model.team2)\r\n          model.withdraw = 2;\r\n        else model.withdraw = null;\r\n      }\r\n\r\n      this.setState({ model });\r\n    }\r\n\r\n    this.handleSetsChange = (index, prop) => (event) => {\r\n      const model = this.state.model;\r\n      model.sets[index][prop] = event.target.value;\r\n      this.setState({ model });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ model: this.formatSets(this.props.model) });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.model != this.props.model)\r\n      this.setState({ model: this.formatSets(this.props.model) });\r\n  }\r\n\r\n  formatSets(match) {\r\n    match.sets = [1, 2, 3, 4, 5].map(order => {\r\n      let existingSet = match.sets.find(set => set.order == order);\r\n      if (existingSet && existingSet.tiebreaker) {\r\n        existingSet.team1 = existingSet.team1 < existingSet.team2 ?\r\n          `${existingSet.team1}(${existingSet.tiebreaker})` : existingSet.team1;\r\n        existingSet.team2 = existingSet.team2 < existingSet.team1 ?\r\n          `${existingSet.team2}(${existingSet.tiebreaker})` : existingSet.team2;\r\n      }\r\n      return existingSet || { order, matchId: match.id || null };\r\n    });\r\n    return match;\r\n  }\r\n\r\n  save() {\r\n    const model = this.state.model;\r\n    if (model.id)\r\n      return QueryService\r\n        .post(`/schemes/${model.schemeId}/matches/${model.id}`, model)\r\n        .then(e => this.props.onChange(e));\r\n    else\r\n      return QueryService\r\n        .post(`/schemes/${model.schemeId}/matches`, model)\r\n        .then(e => this.props.onChange(e));\r\n  }\r\n\r\n  render() {\r\n    const { model, errors } = this.state;\r\n    const { onClose, classes, fullScreen, doubles } = this.props;\r\n\r\n    const enableTeamChange = model.round == 1 || model.groupId;\r\n    const label = (doubles ? 'Отбор ' : 'Играч ');\r\n\r\n    return (\r\n      <Dialog\r\n        open={true}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        classes={{ paper: classes.root }}\r\n      >\r\n        <DialogTitle>\r\n          <Typography component=\"span\" variant=\"headline\">\r\n            Въвеждане/промяна на мач {model.match} рунд {model.round}\r\n          </Typography>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          {enableTeamChange && <React.Fragment>\r\n            <AsyncSelect\r\n              label={label + 1}\r\n              value={model.team1}\r\n              query=\"teams\"\r\n              filter={{\r\n                singleTeams: !doubles,\r\n                schemeId: model.schemeId,\r\n                groupId: model.groupId\r\n              }}\r\n              noOptionsMessage={() => 'Няма намерени играчи/отбори'}\r\n              formatOptionLabel={(option) => {\r\n                return (\r\n                  <React.Fragment>\r\n                    <Typography component=\"span\">{option.user1.name}</Typography>\r\n                    {doubles && <Typography component=\"span\">{option.user2.name}</Typography>}\r\n                  </React.Fragment>\r\n                );\r\n              }}\r\n              onChange={this.handleCustomChange('team1')}\r\n            />\r\n\r\n            <AsyncSelect\r\n              label={label + 2}\r\n              value={model.team2}\r\n              query=\"teams\"\r\n              filter={{\r\n                singleTeams: !doubles,\r\n                schemeId: model.schemeId,\r\n                groupId: model.groupId\r\n              }}\r\n              noOptionsMessage={() => 'Няма намерени отбори'}\r\n              formatOptionLabel={(option) => {\r\n                return (\r\n                  <React.Fragment>\r\n                    <Typography component=\"span\">{option.user1.name}</Typography>\r\n                    {doubles && <Typography component=\"span\">{option.user2.name}</Typography>}\r\n                  </React.Fragment>\r\n                );\r\n              }}\r\n              onChange={this.handleCustomChange('team2')}\r\n            />\r\n          </React.Fragment>}\r\n\r\n          {!enableTeamChange &&\r\n            <React.Fragment><Typography>\r\n              <Typography variant=\"caption\">{label + 1}</Typography>\r\n              {model.team1 ? model.team1.user1.name : 'BYE'}\r\n              {doubles && model.team1 && <Typography>{model.team1.user2.name}</Typography>}\r\n            </Typography>\r\n\r\n              <Typography>\r\n                <Typography variant=\"caption\">{label + 2}</Typography>\r\n                {model.team2 ? model.team2.user1.name : 'BYE'}\r\n                {doubles && model.team2 && <Typography>{model.team2.user2.name}</Typography>}\r\n              </Typography>\r\n            </React.Fragment>}\r\n\r\n          {model.team1 && model.team2 &&\r\n            <FormControl style={{ width: '300px' }}>\r\n              <InputLabel shrink>Отказал се</InputLabel>\r\n              <Select\r\n                onChange={this.handleChange('withdraw')}\r\n                value={model.withdraw}\r\n              >\r\n                <MenuItem value={null}>Няма</MenuItem>\r\n                <MenuItem value={1}>\r\n                  <Typography>{model.team1.user1.name} </Typography>\r\n                  {doubles && <Typography>{model.team1.user2.name} </Typography>}\r\n                </MenuItem>\r\n                <MenuItem value={2}>\r\n                  <Typography>{model.team2.user1.name} </Typography>\r\n                  {doubles && <Typography>{model.team2.user2.name} </Typography>}\r\n                </MenuItem>\r\n              </Select>\r\n            </FormControl>}\r\n\r\n          <Table>\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell padding=\"dense\">Сет №</TableCell>\r\n                <TableCell padding=\"none\">{label + 1}</TableCell>\r\n                <TableCell padding=\"none\">{label + 2}</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {model.sets.map((set, index) => {\r\n                return (\r\n                  <TableRow key={set.order}>\r\n                    <TableCell padding=\"dense\">{set.order}</TableCell>\r\n                    <TableCell padding=\"none\">\r\n                      <input value={set.team1} type=\"text\" style={{ maxWidth: '40px' }} onChange={this.handleSetsChange(index, 'team1')} />\r\n                    </TableCell>\r\n                    <TableCell padding=\"none\">\r\n                      <input value={set.team2} type=\"text\" style={{ maxWidth: '40px' }} onChange={this.handleSetsChange(index, 'team2')} />\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.save()}>\r\n            Запис\r\n          </Button>\r\n          <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(MatchFormModal)\r\n);","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Button from '@material-ui/core/Button';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\n\r\nimport './styles.scss';\r\nimport { ApplicationMode } from '../../enums';\r\nimport UserService from '../../services/user.service';\r\nimport QueryService from '../../services/query.service';\r\nimport ConfirmationDialog from '../../components/ConfirmationDialog';\r\nimport EditGroupModal from './EditGroupModal';\r\nimport EditMatchModal from '../components/MatchFormModal';\r\nimport { BracketStatus } from '../../enums';\r\n\r\nclass GroupsBracket extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      groups: [],\r\n      scheme: {\r\n        edition: {}\r\n      },\r\n      groupModel: null,\r\n      matchModel: null,\r\n      enableActions: false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    return QueryService.get(`/schemes/${this.props.match.params.id}/matches/groups`)\r\n      .then(({ groups, scheme }) => this.setState({\r\n        groups,\r\n        scheme,\r\n        enableActions: scheme.bracketStatus == BracketStatus.GROUPS_DRAWN || scheme.bracketStatus == BracketStatus.GROUPS_END\r\n      }));\r\n  }\r\n\r\n  addGroup() {\r\n    this.setState({\r\n      groupModel: {\r\n        group: this.state.groups.length,\r\n        teams: [],\r\n        matches: [],\r\n        schemeId: this.state.scheme.id\r\n      }\r\n    });\r\n  }\r\n\r\n  addMatch(group) {\r\n    this.setState({\r\n      matchModel: {\r\n        groupId: group.id,\r\n        schemeId: this.state.scheme.id,\r\n        sets: []\r\n      }\r\n    })\r\n  }\r\n\r\n  deleteGroup(group) {\r\n    return QueryService\r\n      .delete(`/schemes/${group.schemeId}/groups/${group.id}`)\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  deleteMatch(match) {\r\n    return QueryService\r\n      .delete(`/schemes/${match.schemeId}/matches/${match.id}`)\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  render() {\r\n    const { scheme, groups, groupModel, matchModel, enableActions } = this.state;\r\n\r\n    return (\r\n      <UserService.WithApplicationMode>\r\n        {mode => {\r\n          let hasPermission = mode == ApplicationMode.ADMIN || mode == ApplicationMode.TOURNAMENT;\r\n\r\n          return (\r\n            <Paper elevation={4} style={{ padding: '2rem 0 3rem 0', backgroundColor: 'rgba(255, 255, 255, .9)' }}>\r\n              {groupModel\r\n                && <EditGroupModal\r\n                  model={groupModel}\r\n                  scheme={scheme}\r\n                  onChange={() => {\r\n                    this.getData();\r\n                    this.setState({ groupModel: null })\r\n                  }}\r\n                  onClose={() => this.setState({ groupModel: null })}\r\n                />}\r\n\r\n              {matchModel\r\n                && <EditMatchModal\r\n                  model={matchModel}\r\n                  onChange={() => {\r\n                    this.getData();\r\n                    this.setState({ matchModel: null })\r\n                  }}\r\n                  onClose={() => this.setState({ matchModel: null })}\r\n                />}\r\n\r\n              <Typography align=\"center\" variant=\"headline\">\r\n                Групова фаза за\r\n              <Link to={`/editions/${scheme.edition.id}`}>\r\n                  <Typography variant=\"display1\">{scheme.edition.name}</Typography>\r\n                </Link>\r\n                -\r\n              <Link to={`/schemes/${scheme.id}`}>\r\n                  <Typography variant=\"display1\">{scheme.name}</Typography>\r\n                </Link>\r\n              </Typography>\r\n\r\n              {hasPermission && enableActions\r\n                && <div style={{ margin: '1rem', display: 'flex', justifyContent: 'center' }}>\r\n                  <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.addGroup()}>Добави група</Button>\r\n                </div>}\r\n\r\n              <div style={{ display: 'flex', justifyContent: 'space-around', marginTop: '2rem', flexWrap: 'wrap' }}>\r\n                {groups.map(group => {\r\n                  return (\r\n                    <Group\r\n                      key={group.id}\r\n                      group={group}\r\n                      hasPermission={hasPermission}\r\n                      onEdit={() => this.setState({ groupModel: group })}\r\n                      onDelete={() => this.deleteGroup(group)}\r\n                      onAddMatch={() => this.addMatch(group)}\r\n                      onEditMatch={(match) => this.setState({ matchModel: match })}\r\n                      onDeleteMatch={(match) => this.deleteMatch(match)}\r\n                      enableActions={enableActions}\r\n                    />\r\n                  );\r\n                })}\r\n              </div>\r\n            </Paper>\r\n          );\r\n        }}\r\n      </UserService.WithApplicationMode>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nclass Group extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      tabIndex: 0\r\n    };\r\n  }\r\n\r\n  getGroupHeader(groupOrder) {\r\n    return String.fromCharCode(\"А\".charCodeAt(0) + groupOrder);\r\n  }\r\n\r\n  render() {\r\n    const { hasPermission, group, onEdit, onDelete, onAddMatch, onEditMatch, onDeleteMatch, enableActions } = this.props;\r\n    const { tabIndex } = this.state;\r\n\r\n    return (\r\n      <Paper elevation={5} className=\"group-box\">\r\n        <div className=\"group-box-header\">\r\n          <Typography variant=\"headline\" style={{ padding: '0 1.5rem' }}>\r\n            {this.getGroupHeader(group.group)}\r\n          </Typography>\r\n          <Tabs\r\n            value={tabIndex}\r\n            onChange={(e, value) => this.setState({ tabIndex: value })}\r\n            indicatorColor=\"primary\"\r\n            textColor=\"primary\"\r\n          >\r\n            <Tab label=\"Класация\" />\r\n            <Tab label=\"Мачове\" />\r\n          </Tabs>\r\n        </div>\r\n\r\n        <div style={{ padding: '1.5rem', flexGrow: 1, transition: 'flex-grow .3s ease-out' }}>\r\n          {tabIndex == 0 && <GroupRankingView groupTeams={group.teams} />}\r\n          {tabIndex == 1 && <GroupMatchesView hasPermission={hasPermission} matches={group.matches} onEditMatch={onEditMatch} onDeleteMatch={onDeleteMatch} />}\r\n        </div>\r\n\r\n        {hasPermission && enableActions\r\n          && <div style={{ display: 'flex', padding: '1.5rem' }}>\r\n            <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={onEdit}>Промяна</Button>\r\n            <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={onAddMatch} style={{ margin: '0 .3rem' }}>Добавяне на мач</Button>\r\n            <ConfirmationDialog\r\n              title=\"Изтриване на група\"\r\n              body={<Typography>Сигурни ли сте че искате да група \"{this.getGroupHeader(group.group)}\"?</Typography>}\r\n              onAccept={onDelete}\r\n            >\r\n              <Button variant=\"contained\" color=\"secondary\" size=\"small\">Изтриване</Button>\r\n            </ConfirmationDialog>\r\n          </div>}\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nclass GroupRankingView extends React.Component {\r\n  render() {\r\n    const { groupTeams } = this.props;\r\n    return (\r\n      <div>\r\n        <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n          <Typography style={{ flexBasis: '4rem', fontStyle: 'italic' }}>W - L</Typography>\r\n        </div>\r\n        {groupTeams.map(groupTeam => {\r\n          return (\r\n            <GroupTeamInfo key={groupTeam.id} team={groupTeam.team} rank={groupTeam.order} stats={groupTeam.stats} />\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass GroupMatchesView extends React.Component {\r\n  render() {\r\n    const { hasPermission, matches, onEditMatch, onDeleteMatch } = this.props;\r\n\r\n    if (!matches || !matches.length)\r\n      return (<Typography variant=\"caption\" align=\"center\">Няма изиграни мачове</Typography>);\r\n\r\n    return (\r\n      <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n        {matches.map(match => {\r\n          return (\r\n            <div key={match.id} style={{ padding: '0.3rem 0', display: 'flex', width: '100%', justifyContent: 'space-between', borderBottom: '1px solid lightgrey' }}>\r\n              <div style={{ margin: '0 .2rem' }}>\r\n                <Typography>\r\n                  {match.team1.user1.name}\r\n                </Typography>\r\n                {match.team1.user2\r\n                  && <Typography>\r\n                    {match.team1.user2.name}\r\n                  </Typography>}\r\n              </div>\r\n              <Typography variant=\"caption\" align=\"center\">\r\n                {match.sets.map(set => {\r\n                  return (\r\n                    <span key={set.id} style={{ marginRight: '.3rem' }}>\r\n                      {set.team1}\r\n                      {set.team2}\r\n                      {set.tiebreaker && <sup>({set.tiebreaker})</sup>}\r\n                    </span>\r\n                  );\r\n                })}\r\n              </Typography>\r\n              <div style={{ margin: '0 .2rem' }}>\r\n                <Typography>\r\n                  {match.team2.user1.name}\r\n                </Typography>\r\n                {match.team2.user2\r\n                  && <Typography>\r\n                    {match.team2.user2.name}\r\n                  </Typography>}\r\n              </div>\r\n\r\n              {hasPermission && <div>\r\n                <EditIcon color=\"primary\" style={{ cursor: 'pointer' }} onClick={() => onEditMatch(match)}></EditIcon>\r\n                <ConfirmationDialog\r\n                  title=\"Изтриване на мач\"\r\n                  body={<Typography>Сигурни ли сте че искате да изтриете мача?</Typography>}\r\n                  onAccept={() => onDeleteMatch(match)}\r\n                >\r\n                  <DeleteForeverIcon color=\"secondary\" style={{ cursor: 'pointer' }}></DeleteForeverIcon>\r\n                </ConfirmationDialog>\r\n              </div>}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass GroupTeamInfo extends React.Component {\r\n  render() {\r\n    const { team, rank, stats } = this.props;\r\n    if (!team)\r\n      return null;\r\n\r\n    return (\r\n      <div className=\"group-box-team-info\">\r\n        <Typography style={{ marginRight: '1rem' }}>{rank}.</Typography>\r\n        <div style={{ flexGrow: 1 }}>\r\n          <Typography>{team.user1.name}</Typography>\r\n          {team.user2 && <Typography>{team.user2.name}</Typography>}\r\n        </div>\r\n        <Typography style={{ flexBasis: '4rem' }}>\r\n          <span style={{ marginRight: '.3rem', fontStyle: 'italic' }}>{stats.wonMatches}</span>\r\n          -\r\n          <span style={{ marginLeft: '.3rem', fontStyle: 'italic' }}>{stats.totalMatches - stats.wonMatches}</span>\r\n        </Typography>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GroupsBracket;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Zoom from '@material-ui/core/Zoom';\r\nimport './styles.scss';\r\n\r\nimport { ApplicationMode } from '../../enums';\r\nimport QueryService from '../../services/query.service';\r\nimport UserService from '../../services/user.service';\r\nimport MatchFormModal from '../components/MatchFormModal';\r\n\r\nclass EliminationBracket extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      matchModel: null,\r\n      bracket: [],\r\n      scheme: null\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    return QueryService.get(`/schemes/${this.props.match.params.id}/matches/elimination`)\r\n      .then(e => this.setState({\r\n        bracket: this.constructBracket(e.matches, e.scheme),\r\n        scheme: e.scheme\r\n      }));\r\n  }\r\n\r\n  getRoundName(roundSize) {\r\n    let label = `R${roundSize}`;\r\n\r\n    if (roundSize == 8)\r\n      label = 'QF';\r\n    if (roundSize == 4)\r\n      label = 'SF';\r\n    if (roundSize == 2)\r\n      label = 'F';\r\n\r\n    return <Typography\r\n      component=\"span\"\r\n      variant=\"headline\"\r\n      color=\"textSecondary\"\r\n      align=\"center\"\r\n      style={{ borderBottom: '1px solid grey' }}\r\n    >\r\n      {label}\r\n    </Typography>\r\n  }\r\n\r\n  constructMatch(match, round, scheme) {\r\n    return {\r\n      schemeId: scheme.id,\r\n      match,\r\n      round,\r\n      team1: null,\r\n      team2: null,\r\n      seed: null,\r\n      sets: [],\r\n      withdraw: null\r\n    };\r\n  }\r\n\r\n  constructBracket(matches, scheme) {\r\n    let size = matches.filter(match => match.round == 1).length;\r\n    let rounds = Math.log2(size);\r\n    let bracket = [];\r\n\r\n    for (let round = 0; round < rounds + 1; round++) {\r\n      bracket[round] = [];\r\n      for (let match = 0; match < (size / (Math.pow(2, round))); match++) {\r\n        let currentMatch = matches.find(e => e.match == match + 1 && e.round == round + 1);\r\n        bracket[round].push(currentMatch || this.constructMatch(match + 1, round + 1, scheme));\r\n      }\r\n    }\r\n    return bracket;\r\n  }\r\n\r\n  render() {\r\n    const { matchModel, bracket, scheme } = this.state;\r\n    return (\r\n      <UserService.WithApplicationMode>\r\n        {mode => {\r\n          let hasPermission = mode == ApplicationMode.ADMIN || mode == ApplicationMode.TOURNAMENT;\r\n\r\n          return (\r\n            <Paper elevation={4} style={{ backgroundColor: 'rgba(255, 255, 255, .9)' }}>\r\n              {scheme && <Typography align=\"center\" variant=\"headline\" style={{ padding: '2rem 0' }}>\r\n                Елиминационна фаза за\r\n              <Link to={`/editions/${scheme.edition.id}`}>\r\n                  <Typography variant=\"display1\">{scheme.edition.name}</Typography>\r\n                </Link>\r\n                -\r\n              <Link to={`/schemes/${scheme.id}`}>\r\n                  <Typography variant=\"display1\">{scheme.name}</Typography>\r\n                </Link>\r\n              </Typography>}\r\n\r\n              {matchModel\r\n                && <MatchFormModal\r\n                  model={matchModel}\r\n                  onChange={() => {\r\n                    this.setState({ matchModel: null });\r\n                    this.getData();\r\n                  }}\r\n                  onClose={() => this.setState({ matchModel: null })}\r\n                />}\r\n\r\n              <div className=\"bracket\">\r\n                {bracket.map((round, index) => {\r\n                  return (\r\n                    <div key={index} className=\"round\">\r\n                      <h3 className=\"round-title\" style={{ padding: '.5rem' }}>\r\n                        {this.getRoundName(round.length * 2)}\r\n                      </h3>\r\n                      <ul className=\"list\">\r\n                        {round.map((match, i) => {\r\n                          return (\r\n                            <li className=\"item\" key={i}>\r\n                              <div className=\"match\">\r\n                                <Match\r\n                                  match={match}\r\n                                  onEvent={() => this.setState({ matchModel: match })}\r\n                                  hasPermission={hasPermission}\r\n                                />\r\n                              </div>\r\n                            </li>\r\n                          )\r\n                        })}\r\n                      </ul>\r\n                    </div>\r\n                  )\r\n                })}\r\n              </div>\r\n            </Paper>\r\n          );\r\n        }}\r\n      </UserService.WithApplicationMode>\r\n    );\r\n  }\r\n}\r\n\r\nclass Match extends React.Component {\r\n  render() {\r\n    const { match, hasPermission } = this.props;\r\n\r\n    if (hasPermission)\r\n      return (\r\n        <Tooltip\r\n          title=\"Въвеждане/промяна на резултат\"\r\n          placement=\"top\"\r\n          TransitionComponent={Zoom}\r\n          enterDelay={0}\r\n          onClick={this.props.onEvent}\r\n        >\r\n          <Paper elevation={4} className=\"match-box\" style={{ cursor: 'pointer' }}>\r\n            <TeamInfo team={match.team1} match={match} round={match.round} pos={1} />\r\n            <TeamInfo team={match.team2} match={match} round={match.round} pos={2} />\r\n          </Paper>\r\n        </Tooltip>\r\n      );\r\n\r\n    else\r\n      return (\r\n        <Paper elevation={4} className=\"match-box\">\r\n          <TeamInfo team={match.team1} match={match} round={match.round} pos={1} />\r\n          <TeamInfo team={match.team2} match={match} round={match.round} pos={2} />\r\n        </Paper>\r\n      );\r\n  }\r\n}\r\n\r\nclass TeamInfo extends React.Component {\r\n  composeScore(sets, pos) {\r\n    if (!sets)\r\n      return null;\r\n    let enemyPos = (pos == 1 ? 2 : 1);\r\n    let result = sets.map((set, i) => {\r\n      return (\r\n        <span key={i} style={{ width: set.tiebreaker ? '22px' : '10px', display: 'flex' }}>\r\n          {set['team' + pos]}\r\n          {set['team' + enemyPos] > set['team' + pos] && set.tiebreaker\r\n            && <div style={{ fontSize: '.5rem', marginTop: '-3px' }}>({set.tiebreaker})</div>}\r\n        </span>\r\n      );\r\n    });\r\n    return result;\r\n  }\r\n\r\n  render() {\r\n    const { team, match, round, pos } = this.props;\r\n\r\n    if (team)\r\n      return (\r\n        <div className=\"match-box-team\">\r\n          <div>\r\n            <Typography style={{ fontSize: '.8em' }}>{team.user1.name}</Typography>\r\n            {team.user2 &&\r\n              <Typography style={{ fontSize: '.8em' }}>{team.user2.name}</Typography>}\r\n          </div>\r\n          <Typography style={{ display: 'flex' }} variant=\"caption\">\r\n            {this.composeScore(match.sets, pos)}\r\n          </Typography>\r\n        </div>\r\n      );\r\n\r\n    else\r\n      return (\r\n        <div className=\"match-box-team\">\r\n          <Typography style={{ fontSize: '.8em' }} variant=\"caption\">\r\n            {round == 1 ? 'bye' : `winner of match ${match.match * 2 + pos - 2} round ${round - 1}`}\r\n          </Typography>\r\n        </div>\r\n      );\r\n  }\r\n}\r\n\r\nexport default EliminationBracket;","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport PhotoIcon from '@material-ui/icons/Photo';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\n\r\nimport FileUpload from './FileUpload';\r\nimport QueryService from '../services/query.service';\r\n\r\nclass ImageField extends React.Component {\r\n  render() {\r\n    const { value, onChange, style, imageStyle } = this.props;\r\n    return (\r\n      <span style={style}>\r\n        <input ref={ref => this.inputRef = ref} onChange={onChange} type=\"file\" style={{ display: 'none' }} />\r\n        {value\r\n          && <Typography>{value.name}</Typography>}\r\n        {value\r\n          && <img\r\n            src={QueryService.getFileUrl(value.id)}\r\n            style={imageStyle}\r\n          />}\r\n        <div>\r\n          <PhotoIcon\r\n            onClick={() => this.inputRef.click()}\r\n            style={{ fontSize: '2rem', cursor: 'pointer' }}\r\n            color=\"primary\"\r\n          />\r\n          {value\r\n            && <DeleteForeverIcon\r\n              style={{ fontSize: '2rem', cursor: 'pointer' }}\r\n              color=\"secondary\"\r\n              onClick={() => onChange(null)}\r\n            />}\r\n        </div>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageField;\r\n","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Button from '@material-ui/core/Button';\r\nimport PhotoIcon from '@material-ui/icons/Photo';\r\n\r\nclass FileUpload extends React.Component {\r\n  render() {\r\n    const { value, onChange, style } = this.props;\r\n\r\n    return (\r\n      <span onClick={e => this.inputRef.click()} style={style}>\r\n        <input ref={ref => this.inputRef = ref} onChange={onChange} type=\"file\" style={{ display: 'none' }} />\r\n        {this.props.children}\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FileUpload","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport ImageField from '../components/ImageField';\r\nimport EnumSelectToggle from '../components/EnumSelectToggle';\r\nimport QueryService from '../services/query.service';\r\n\r\nclass TournamentFormModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      model: {},\r\n      errors: []\r\n    }\r\n\r\n    this.save = this.save.bind(this);\r\n\r\n    this.handleChange = (prop) => (e) => {\r\n      const model = this.state.model;\r\n      model[prop] = e.target.value;\r\n      this.setState({ model });\r\n    }\r\n\r\n    this.handleThumbnail = (e) => {\r\n      const model = this.state.model;\r\n\r\n      if (!e || !e.target.files || !e.target.files[0]) {\r\n        model.thumbnail = null;\r\n        model.thumbnailId = null;\r\n        this.setState({ model });\r\n        return;\r\n      }\r\n\r\n      return QueryService\r\n        .uploadFile(e.target.files[0])\r\n        .then(file => {\r\n          model.thumbnail = file;\r\n          model.thumbnailId = file.id;\r\n          this.setState({ model });\r\n        });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ model: this.props.model });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.model != this.props.model)\r\n      this.setState({ model: this.props.model });\r\n  }\r\n\r\n  save() {\r\n    const model = this.state.model;\r\n    return QueryService\r\n      .post(`/tournaments/${model.id ? model.id : ''}`, model)\r\n      .then(e => this.props.onChange(e));\r\n  }\r\n\r\n  render() {\r\n    const { model, errors } = this.state;\r\n    const { onClose, classes, fullScreen } = this.props;\r\n\r\n    return (\r\n      <Dialog\r\n        open={true}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        classes={{ paper: classes.root }}\r\n        onClick={e => e.stopPropagation()}\r\n      >\r\n        <DialogTitle>\r\n          <Typography component=\"span\" variant=\"headline\">Създаване/промяна на лига</Typography>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <EnumSelectToggle\r\n            value={model.status}\r\n            enumName=\"Status\"\r\n            onChange={this.handleChange('status')}\r\n          />\r\n\r\n          <Typography variant=\"caption\" style={{ marginTop: '.5rem' }}>Лого</Typography>\r\n          <ImageField\r\n            value={model.thumbnail}\r\n            onChange={this.handleThumbnail}\r\n            style={{ marginTop: '.5rem' }}\r\n            imageStyle={{ maxWidth: '50px' }}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Име на лигата\"\r\n            value={model.name}\r\n            fullWidth={true}\r\n            onChange={this.handleChange('name')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Допълнителна информация\"\r\n            value={model.info}\r\n            multiline={true}\r\n            fullWidth={true}\r\n            onChange={this.handleChange('info')}\r\n          />\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.save()}>\r\n            Запис\r\n          </Button>\r\n          <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(TournamentFormModal)\r\n);","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport DatePicker from 'material-ui-pickers/DatePicker';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../services/query.service';\r\nimport AsyncSelect from '../components/select/AsyncSelect';\r\nimport EnumSelectToggle from '../components/EnumSelectToggle';\r\n\r\nclass EditionFormModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      model: {\r\n        startDate: null,\r\n        endDate: null\r\n      },\r\n      errors: []\r\n    }\r\n\r\n    this.save = this.save.bind(this);\r\n\r\n    this.handleChange = (prop) => (e) => {\r\n      const model = this.state.model;\r\n      model[prop] = e.target.value;\r\n      this.setState({ model });\r\n    }\r\n\r\n    this.handleCustomChange = (prop) => (value) => {\r\n      const model = this.state.model;\r\n      model[prop] = value;\r\n\r\n      if (prop == 'tournament') {\r\n        if (value)\r\n          model.tournamentId = value.id;\r\n        else\r\n          model.tournamentId = null;\r\n      }\r\n\r\n      this.setState({ model });\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ model: this.props.model });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.model != this.props.model)\r\n      this.setState({ model: this.props.model });\r\n  }\r\n\r\n  save() {\r\n    const model = JSON.parse(JSON.stringify(this.state.model));\r\n    model.tournament = null;\r\n    model.schemes = null;\r\n\r\n    return QueryService\r\n      .post(`/editions/${model.id ? model.id : ''}`, model)\r\n      .then(e => this.props.onChange(e));\r\n  }\r\n\r\n  render() {\r\n    const { model, errors } = this.state;\r\n    const { onClose, classes, fullScreen } = this.props;\r\n\r\n    return (\r\n      <Dialog\r\n        open={true}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        classes={{ paper: classes.root }}\r\n      >\r\n        <DialogTitle>\r\n          <Typography component=\"span\" variant=\"headline\">Форма за издание на турнир</Typography>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <EnumSelectToggle\r\n            value={model.status}\r\n            enumName=\"Status\"\r\n            onChange={this.handleChange('status')}\r\n          />\r\n\r\n          <AsyncSelect\r\n            label=\"Лига\"\r\n            value={model.tournament}\r\n            query=\"tournaments\"\r\n            noOptionsMessage={() => 'Няма намерени лиги'}\r\n            formatOptionLabel={(option) => <Typography component=\"span\">\r\n              {option.name}\r\n              <Typography component=\"span\" variant=\"caption\" >{option.info}</Typography>\r\n            </Typography>}\r\n            onChange={this.handleCustomChange('tournament')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Име на изданието\"\r\n            value={model.name}\r\n            fullWidth={true}\r\n            onChange={this.handleChange('name')}\r\n          />\r\n\r\n          <TextField\r\n            label=\"Допълнителна информация\"\r\n            value={model.info}\r\n            multiline={true}\r\n            fullWidth={true}\r\n            onChange={this.handleChange('info')}\r\n          />\r\n\r\n          <DatePicker\r\n            autoOk\r\n            label=\"Начало на турнира\"\r\n            labelFunc={(date) => date ? new Date(date).toLocaleDateString() : ''}\r\n            clearable\r\n            fullWidth={true}\r\n            value={model.startDate}\r\n            onChange={this.handleCustomChange('startDate')}\r\n          />\r\n\r\n          <DatePicker\r\n            autoOk\r\n            label=\"Край на турнира\"\r\n            labelFunc={(date) => date ? new Date(date).toLocaleDateString() : ''}\r\n            clearable\r\n            fullWidth={true}\r\n            value={model.endDate}\r\n            onChange={this.handleCustomChange('endDate')}\r\n          />\r\n\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.save()}>\r\n            Запис\r\n          </Button>\r\n          <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  },\r\n  truncateInfo: {\r\n    width: '100px',\r\n    whiteSpace: 'nowrap',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(EditionFormModal)\r\n);","import React from 'react';\r\nimport moment from 'moment';\r\nimport { Link } from 'react-router-dom';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nimport DisplayImage from '../components/DisplayImage';\r\nimport QueryService from '../services/query.service';\r\n\r\nclass EditionsDesktopView extends React.Component {\r\n  render() {\r\n    const { editions } = this.props;\r\n    return (\r\n      <Table>\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>Лига</TableCell>\r\n            <TableCell>Турнир</TableCell>\r\n            <TableCell>Провеждане</TableCell>\r\n            {/* <TableCell padding=\"none\"></TableCell> */}\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {editions.map(edition => {\r\n            return (\r\n              <TableRow key={edition.id}>\r\n                <TableCell >\r\n                  <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                    {edition.tournament.thumbnail\r\n                      && <DisplayImage image={edition.tournament.thumbnail} style={{ maxWidth: '50px', marginRight: '.5rem' }} />}\r\n                    <Link to={`/tournaments/${edition.tournament.id}`}>\r\n                      <Typography variant=\"body2\">{edition.tournament.name}</Typography>\r\n                    </Link>\r\n                  </div>\r\n                </TableCell>\r\n                <TableCell>\r\n                  <Link to={`/editions/${edition.id}`}>\r\n                    <Typography variant=\"body2\">{edition.name}</Typography>\r\n                  </Link>\r\n                </TableCell>\r\n                <TableCell>\r\n                  {moment(edition.startDate).format('DD.MM.YYYY')} - {moment(edition.endDate).format('DD.MM.YYYY')}\r\n                </TableCell>\r\n                {/* <TableCell>\r\n                  <Link to={`/editions/${edition.id}`}>\r\n                    <Button variant=\"text\" color=\"primary\">Преглед</Button>\r\n                  </Link>\r\n                </TableCell> */}\r\n              </TableRow>\r\n            );\r\n          })}\r\n        </TableBody>\r\n      </Table>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditionsDesktopView;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport moment from 'moment-timezone';\r\n\r\nclass EditionsMobileView extends React.Component {\r\n  render() {\r\n    const { editions } = this.props;\r\n    return (\r\n      <List style={{ width: '100%' }}>\r\n        {editions.map(edition => {\r\n          return (\r\n            <div style={{ padding: '.5rem 0', borderBottom: '1px solid lightgrey' }}>\r\n              <div style={{ display: 'flex' }}>\r\n                <Link to={`/editions/${edition.id}`}>\r\n                  <Typography variant=\"display2\" style={{ marginRight: '.5rem' }}>{edition.name}</Typography>\r\n                </Link>\r\n\r\n                <Link to={`/tournaments/${edition.tournamentId}`}>\r\n                  <Typography variant=\"display2\">{edition.tournament.name}</Typography>\r\n                </Link>\r\n              </div>\r\n\r\n              <Typography variant=\"caption\">{edition.info}</Typography>\r\n\r\n              <Typography>\r\n                {moment(edition.startDate).format('DD.MM.YYYY')}\r\n                -\r\n                  {moment(edition.endDate).format('DD.MM.YYYY')}\r\n              </Typography>\r\n            </div>\r\n          );\r\n        })}\r\n      </List>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditionsMobileView;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\n\r\nimport TournamentFormModal from '../tournaments/TournamentFormModal';\r\nimport EditionFormModal from './EditionFormModal';\r\nimport EditionsDesktopView from './EditionsDesktopView';\r\nimport EditionsMobileView from './EditionsMobileView';\r\nimport editionsViewActions from './EditionsViewActions';\r\nimport QueryService from '../services/query.service';\r\nimport UserService from '../services/user.service';\r\nimport { ApplicationMode, Status } from '../enums';\r\n\r\nclass EditionsList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      editions: [],\r\n      editionModel: null,\r\n      tournamentModel: null\r\n    }\r\n\r\n    this.handleOpenModal = (editionModel) => {\r\n      this.setState({ editionModel });\r\n    }\r\n\r\n    this.handleRemoveEdition = (edition) => {\r\n\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    return QueryService\r\n      .post(`/editions/filter`, {})\r\n      .then(editions => this.setState({ editions }));\r\n  }\r\n\r\n  render() {\r\n    const { editions, editionModel, tournamentModel } = this.state;\r\n    const actions = editionsViewActions(this.handleOpenModal, this.handleRemoveEdition);\r\n\r\n    return (\r\n      <UserService.WithApplicationMode>\r\n        {mode => {\r\n          let hasPermission = mode == ApplicationMode.ADMIN || mode == ApplicationMode.TOURNAMENT;\r\n\r\n          return (\r\n            <div className=\"container\">\r\n              {hasPermission && editionModel\r\n                && <EditionFormModal\r\n                  model={editionModel}\r\n                  onChange={() => { this.setState({ editionModel: null }); this.getData(); }}\r\n                  onClose={() => this.setState({ editionModel: null })}\r\n                />}\r\n\r\n              {hasPermission && tournamentModel\r\n                && <TournamentFormModal\r\n                  model={tournamentModel}\r\n                  onChange={() => { this.setState({ tournamentModel: null }); this.getData(); }}\r\n                  onClose={() => this.setState({ tournamentModel: null })}\r\n                />}\r\n\r\n              {hasPermission && <div style={{ margin: '.5rem 0' }}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  size=\"small\"\r\n                  onClick={() => this.setState({ tournamentModel: { status: Status.DRAFT, name: '', info: '', thumbnailId: null } })}\r\n                >\r\n                  Нова Лига\r\n                  </Button>\r\n\r\n                <Button\r\n                  style={{ marginLeft: '.3rem' }}\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  size=\"small\"\r\n                  onClick={() => this.setState({ editionModel: { status: Status.DRAFT, name: '', info: '', startDate: null, endDate: null } })}\r\n                >\r\n                  Нов Турнир\r\n                  </Button>\r\n              </div>}\r\n\r\n              <Paper style={{ padding: '1em' }}>\r\n                <Typography variant=\"headline\" color=\"primary\">Турнири</Typography>\r\n                {editions.length == 0 && <Typography variant=\"caption\">Няма регистрирани турнири</Typography>}\r\n                {editions.length != 0 && <React.Fragment>\r\n                  <Hidden smDown>\r\n                    <EditionsDesktopView editions={editions} actions={actions} />\r\n                  </Hidden>\r\n                  <Hidden mdUp>\r\n                    <EditionsMobileView editions={editions} actions={actions} />\r\n                  </Hidden>\r\n                </React.Fragment>}\r\n              </Paper>\r\n\r\n              {/* <ExpansionPanel defaultExpanded={true}>\r\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                  <Typography variant=\"headline\">Турнири</Typography>\r\n                </ExpansionPanelSummary>\r\n                <ExpansionPanelDetails>\r\n\r\n                  {editions.length == 0 && <Typography variant=\"caption\">Няма регистрирани турнири</Typography>}\r\n                  {editions.length > 0 && <Hidden smDown>\r\n                    <EditionsDesktopView editions={editions} actions={actions} />\r\n                  </Hidden>}\r\n\r\n                  {editions.length > 0 && <Hidden mdUp>\r\n                    <EditionsMobileView editions={editions} actions={actions} />\r\n                  </Hidden>}\r\n                </ExpansionPanelDetails>\r\n              </ExpansionPanel> */}\r\n            </div>\r\n          );\r\n        }}\r\n      </UserService.WithApplicationMode>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditionsList;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport ConfirmationDialog from '../components/ConfirmationDialog';\r\n\r\nexport default function generateActions(onChange, onRemove) {\r\n  return class extends React.Component {\r\n    render() {\r\n      const { edition } = this.props;\r\n\r\n      return (\r\n        <span>\r\n          <Button onClick={onChange(edition)}>\r\n            Редакция\r\n        </Button>\r\n          <Button onClick={onRemove(edition)}>\r\n            Изтриване\r\n        </Button>\r\n        </span>\r\n      );\r\n    }\r\n  }\r\n}","import React from 'react';\r\nimport moment from 'moment';\r\nimport { Link } from 'react-router-dom';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport { Status, BracketStatus, ApplicationMode } from '../enums';\r\nimport EditionFormModal from './EditionFormModal';\r\nimport SchemeFormModal from '../schemes/SchemeFormModal';\r\nimport SchemeDetails from '../schemes/components/SchemeDetails';\r\nimport SchemeDetailsActions from '../schemes/components/SchemeDetailsActions';\r\nimport DisplayImage from '../components/DisplayImage';\r\nimport QueryService from '../services/query.service';\r\nimport { catchEvent } from '../services/events.service';\r\nimport UserService from '../services/user.service';\r\nimport ConfirmationDialog from '../components/ConfirmationDialog';\r\nimport MessageModal from '../components/MessageModal';\r\n\r\nclass EditionView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      edition: {\r\n        tournament: {},\r\n        schemes: []\r\n      },\r\n      editionModel: null,\r\n      schemeModel: null,\r\n      enrolled: [],\r\n      hasError: false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n    catchEvent('logged-in', () => {\r\n      this.getData();\r\n    });\r\n  }\r\n\r\n  getData() {\r\n    QueryService\r\n      .get(`/editions/${this.props.match.params.id}`)\r\n      .then(e => this.setState({ edition: e }));\r\n\r\n    QueryService\r\n      .get('/users/enrollments')\r\n      .then(enrolled => this.setState({ enrolled }));\r\n  }\r\n\r\n  initSchemeModel() {\r\n    this.setState({\r\n      schemeModel: {\r\n        status: Status.DRAFT,\r\n        bracketStatus: BracketStatus.UNDRAWN,\r\n        edition: this.state.edition,\r\n        editionId: this.state.edition.id,\r\n        singleTeams: true,\r\n        maleTeams: false,\r\n        femaleTeams: false,\r\n        mixedTeams: false,\r\n        hasGroupPhase: false,\r\n        ageFrom: '',\r\n        ageTo: '',\r\n        maxPlayerCount: '',\r\n        groupCount: '',\r\n        teamsPerGroup: '',\r\n        date: null,\r\n        registrationStart: null,\r\n        registrationEnd: null,\r\n        pPoints: 1,\r\n        wPoints: 15,\r\n        cPoints: 20\r\n      }\r\n    });\r\n  }\r\n\r\n  remove() {\r\n    this.setState({ hasError: false });\r\n    return QueryService.delete(`/editions/${this.state.edition.id}`)\r\n      .then(() => this.props.history.replace('/editions'))\r\n      .catch(err => this.setState({ hasError: true }));\r\n  }\r\n\r\n  render() {\r\n    const { edition, editionModel, schemeModel, enrolled } = this.state;\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <UserService.WithApplicationMode>\r\n        {mode => {\r\n          let hasPermission = mode == ApplicationMode.ADMIN || mode == ApplicationMode.TOURNAMENT;\r\n\r\n          return (\r\n            <div className=\"container\">\r\n              <MessageModal activation={this.state.hasError}>\r\n                <Typography>Неуспешно изтриване на турнир. Възможна причина за грешката е съществуващи схеми със записани играчи в тях.</Typography>\r\n              </MessageModal>\r\n              {hasPermission && editionModel\r\n                && <EditionFormModal\r\n                  model={editionModel}\r\n                  onChange={() => {\r\n                    this.setState({ editionModel: null });\r\n                    this.getData();\r\n                  }}\r\n                  onClose={() => this.setState({ editionModel: null })}\r\n                />}\r\n\r\n              {hasPermission && schemeModel\r\n                && <SchemeFormModal\r\n                  model={schemeModel}\r\n                  onChange={() => {\r\n                    this.setState({ schemeModel: null });\r\n                    this.getData();\r\n                  }}\r\n                  onClose={() => this.setState({ schemeModel: null })}\r\n                />}\r\n\r\n              {hasPermission && <div style={{ margin: '.5rem 0' }}>\r\n                <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.initSchemeModel()}>Добави схема</Button>\r\n                <Button variant=\"contained\" color=\"primary\" size=\"small\" style={{ marginLeft: '.3rem' }} onClick={() => this.setState({ editionModel: edition })}>Промяна</Button>\r\n                <ConfirmationDialog\r\n                  title=\"Изтриване на турнир\"\r\n                  body={<Typography>Сигурни ли сте че искате да изтриете турнир {edition.name}?</Typography>}\r\n                  onAccept={() => this.remove()}\r\n                >\r\n                  <Button variant=\"contained\" color=\"secondary\" size=\"small\" style={{ marginLeft: '.3rem' }}>Изтриване</Button>\r\n                </ConfirmationDialog>\r\n\r\n              </div>}\r\n\r\n              <Card>\r\n                <CardContent>\r\n                  <Typography variant=\"headline\">\r\n                    {edition.name}\r\n                  </Typography>\r\n                  <Typography variant=\"caption\">{edition.info}</Typography>\r\n\r\n                  <Typography variant=\"caption\" style={{ marginTop: '1rem' }}>Лига</Typography>\r\n                  <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                    {edition.tournament.thumbnail\r\n                      && <DisplayImage image={edition.tournament.thumbnail} style={{ maxWidth: '50px', marginRight: '.5rem' }} />}\r\n                    <Link to={`/tournaments/${edition.tournament.id}`}>\r\n                      <Typography variant=\"body2\">{edition.tournament.name}</Typography>\r\n                    </Link>\r\n                  </div>\r\n\r\n                  <div style={{ display: 'flex', marginTop: '1rem' }}>\r\n                    <Typography variant=\"caption\" style={{ paddingRight: '1rem' }}>\r\n                      Начало\r\n              <Typography>{moment(edition.startDate).format('DD.MM.YYYY')}</Typography>\r\n                    </Typography>\r\n\r\n                    <Typography variant=\"caption\">\r\n                      Край\r\n              <Typography>{moment(edition.endDate).format('DD.MM.YYYY')}</Typography>\r\n                    </Typography>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <div className={classes.schemesRoot}>\r\n                {edition.schemes.map(scheme => {\r\n                  const actions = <SchemeDetailsActions\r\n                    scheme={scheme}\r\n                    enableViewLink\r\n                    enrollment={enrolled[scheme.id]}\r\n                    mode={mode}\r\n                    reload={() => this.getData()}\r\n                  />;\r\n                  return <SchemeDetails\r\n                    key={scheme.id}\r\n                    scheme={scheme}\r\n                    actions={actions}\r\n                    CardProps={{\r\n                      className: classes.schemesItem\r\n                    }} />\r\n                })}\r\n              </div>\r\n            </div>\r\n          );\r\n        }}\r\n      </UserService.WithApplicationMode>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  schemesRoot: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'space-between',\r\n    marginTop: '.3rem'\r\n  },\r\n  schemesItem: {\r\n    width: '49.5%',\r\n    marginBottom: '.3rem',\r\n    paddingBottom: '0',\r\n    [theme.breakpoints.down('xs')]: {\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(EditionView);","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\n\r\nimport EditionsList from './EditionsList';\r\nimport EditionView from './EditionView';\r\n\r\nclass EditionsRoot extends React.Component {\r\n  render() {\r\n    return (\r\n      <Switch>\r\n        <Route\r\n          path=\"/editions/:id\"\r\n          render={(props) => <EditionView {...props} />}\r\n        />\r\n        <Route\r\n          exact\r\n          path=\"/editions\"\r\n          render={(props) => <EditionsList {...props} />}\r\n        />\r\n      </Switch>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditionsRoot;","import React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Switch, Link, Route } from 'react-router-dom';\r\n\r\nimport TournamentView from './TournamentView';\r\nimport TournamentFormModal from './TournamentFormModal';\r\nimport ConfirmationDialog from '../components/ConfirmationDialog';\r\nimport QueryService from '../services/query.service';\r\nimport UserService from '../services/user.service';\r\nimport { ApplicationMode, Status } from '../enums';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nclass TournamentsRouting extends React.Component {\r\n  render() {\r\n    return (\r\n      <Switch>\r\n        <Route path=\"/leagues/:id\" component={TournamentView} />\r\n        <Route path=\"/leagues\" render={() => {\r\n          return (\r\n            <UserService.WithApplicationMode>\r\n              {mode => <TournamentsRoot {...this.props} mode={mode} />}\r\n            </UserService.WithApplicationMode>\r\n          );\r\n        }} />\r\n      </Switch>\r\n    );\r\n  }\r\n}\r\n\r\nclass TournamentsRoot extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      tournaments: [],\r\n      tournamentModel: null\r\n    };\r\n  }\r\n\r\n  refresh() {\r\n    this.setState({ tournamentModel: null });\r\n    this.getData();\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    return QueryService\r\n      .post('/tournaments/filter', {})\r\n      .then(tournaments => this.setState({ tournaments }));\r\n  }\r\n\r\n  openTournamentModal(model) {\r\n    if (!model)\r\n      this.setState({\r\n        tournamentModel: {\r\n          status: Status.DRAFT\r\n        }\r\n      });\r\n    else\r\n      this.setState({ tournamentModel: JSON.parse(JSON.stringify(model)) })\r\n  }\r\n\r\n  removeTournament(tournament) {\r\n    if (!tournament)\r\n      return;\r\n\r\n    return QueryService.delete(`/tournaments/${tournament.id}`)\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  render() {\r\n    const { classes, mode } = this.props;\r\n    const { tournaments, tournamentModel } = this.state;\r\n    let hasPermission = (mode == ApplicationMode.ADMIN || mode == ApplicationMode.TOURNAMENT);\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        {hasPermission && tournamentModel\r\n          && <TournamentFormModal\r\n            model={tournamentModel}\r\n            onChange={() => this.refresh()}\r\n            onClose={() => this.setState({ tournamentModel: null })}\r\n          />}\r\n\r\n        <div style={{ margin: '0 .5rem' }}>\r\n          <div>\r\n            {hasPermission && <Button variant=\"contained\" size=\"medium\" color=\"primary\" onClick={() => this.openTournamentModal()} >Нова лига</Button>}\r\n          </div>\r\n          <div className={classes.previewContainer}>\r\n            {tournaments.map(tournament => <TournamentPreview\r\n              {...this.props}\r\n              key={tournament.id}\r\n              tournament={tournament}\r\n              mode={mode}\r\n              onEdit={model => this.openTournamentModal(model)}\r\n              onRemove={tournament => this.removeTournament(tournament)}\r\n            />)}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass TournamentPreview extends React.Component {\r\n  edit(e) {\r\n    e.stopPropagation();\r\n    this.props.onEdit(this.props.tournament);\r\n  }\r\n\r\n  remove() {\r\n    this.props.onRemove(this.props.tournament);\r\n  }\r\n\r\n  navigate() {\r\n    this.props.history.push(`/tournaments/${this.props.tournament.id}`);\r\n  }\r\n\r\n  render() {\r\n    const { tournament, classes, mode } = this.props;\r\n    let hasPermission = (mode == ApplicationMode.ADMIN || mode == ApplicationMode.TOURNAMENT);\r\n\r\n    return (\r\n      <Paper className={classes.previewRoot} elevation={5} onClick={() => this.navigate()}>\r\n        {tournament.thumbnailId && <img src={QueryService.getFileUrl(tournament.thumbnailId)} className={classes.previewImage} />}\r\n\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n          <Typography variant=\"h4\" className={classes.previewBodyPart}>\r\n            {tournament.name}\r\n          </Typography>\r\n          {tournament.status == Status.DRAFT && <Typography className={classes.draftLabel}>чернова</Typography>}\r\n        </div>\r\n        <Typography variant=\"caption\" className={classes.previewBodyPart} style={{ flexGrow: 2 }}>{tournament.info}</Typography>\r\n\r\n        {hasPermission && <div className={classes.previewBodyPart}>\r\n          <Button variant=\"text\" size=\"small\" color=\"primary\" onClick={(e) => this.edit(e)}>Промяна</Button>\r\n\r\n          <ConfirmationDialog\r\n            title=\"Изтриване на лига\"\r\n            body={<Typography>Сигурни ли сте че искате да изтриете лигата {tournament.name}?</Typography>}\r\n            onAccept={() => this.remove()}\r\n          >\r\n            <Button variant=\"text\" size=\"small\" color=\"secondary\">Изтриване</Button>\r\n          </ConfirmationDialog>\r\n        </div>}\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  previewContainer: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    flexWrap: 'wrap'\r\n  },\r\n  previewRoot: {\r\n    margin: '.5rem 0 0 0',\r\n    width: '32%',\r\n    cursor: 'pointer',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    [theme.breakpoints.down('md')]: {\r\n      width: '49%'\r\n    },\r\n    [theme.breakpoints.down('sm')]: {\r\n      width: '100%'\r\n    }\r\n  },\r\n  draftLabel: {\r\n    borderRadius: '4px',\r\n    backgroundColor: '#3e3e3e',\r\n    color: 'white',\r\n    padding: '.2rem .5rem',\r\n    margin: '0 1rem 0 0',\r\n    fontSize: '.8rem'\r\n  },\r\n  previewImage: {\r\n    width: '100%',\r\n    borderTopLeftRadius: '5px',\r\n    borderTopRightRadius: '5px',\r\n    '&:hover': {\r\n      opacity: .9\r\n    }\r\n  },\r\n  previewBodyPart: {\r\n    padding: '0.5rem'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(TournamentsRouting);","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport FormModal from '../components/FormModal';\r\nimport QueryService from '../services/query.service';\r\n\r\nclass TeamStatisticsFormModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user1: {}\r\n    }\r\n\r\n    this.handleUpdate = (field) => (e) => {\r\n      let state = this.state;\r\n      state[field] = e.target.value;\r\n      this.setState(state);\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState(this.props.team);\r\n  }\r\n\r\n  componentDidUpdate(previousProps) {\r\n    if (previousProps.team != this.props.team)\r\n      this.setState(this.props.team);\r\n  }\r\n\r\n  save() {\r\n    return QueryService.post(`/teams/${this.state.id}`, this.state)\r\n      .then(res => this.props.onUpdate());\r\n  }\r\n\r\n  render() {\r\n    const handleUpdate = this.handleUpdate;\r\n    const { user1, user2, wonMatches, wonTournaments, totalMatches, totalTournaments } = this.state;\r\n    const { onClose } = this.props;\r\n\r\n    const title = `Промяна на статистиката за ${user2 ? `отбор ${user1.name} & ${user2.name}` : `играч ${user1.name}`}`;\r\n\r\n    const actions = <React.Fragment>\r\n      <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.save()}>\r\n        Запис\r\n      </Button>\r\n      <Button variant=\"outlined\" color=\"primary\" size=\"small\" onClick={onClose}>Отказ</Button>\r\n    </React.Fragment>;\r\n\r\n    const body = <div>\r\n      <TextField\r\n        fullWidth\r\n        label=\"Спечелени мачове\"\r\n        type=\"number\"\r\n        value={wonMatches}\r\n        onChange={handleUpdate('wonMatches')}\r\n      />\r\n\r\n      <TextField\r\n        fullWidth\r\n        label=\"Общо изиграни мачове\"\r\n        type=\"number\"\r\n        value={totalMatches}\r\n        onChange={handleUpdate('totalMatches')}\r\n      />\r\n\r\n      <TextField\r\n        fullWidth\r\n        label=\"Спечелени турнири\"\r\n        type=\"number\"\r\n        value={wonTournaments}\r\n        onChange={handleUpdate('wonTournaments')}\r\n      />\r\n\r\n      <TextField\r\n        fullWidth\r\n        label=\"Общо изиграни турнири\"\r\n        type=\"number\"\r\n        value={totalTournaments}\r\n        onChange={handleUpdate('totalTournaments')}\r\n      />\r\n    </div>;\r\n\r\n    return (\r\n      <FormModal\r\n        enableFullWidth={true}\r\n        onClose={onClose}\r\n        title={title}\r\n        body={body}\r\n        actions={actions}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default TeamStatisticsFormModal;","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport TeamStatisticsFormModal from './TeamStatisticsFormModal';\r\nimport QueryService from '../services/query.service';\r\nimport UserService from '../services/user.service';\r\nimport { ApplicationMode } from '../enums';\r\n\r\nclass PlayersRoot extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      teams: [],\r\n      teamsMode: 'single',\r\n      page: 0,\r\n      itemsPerPage: 10,\r\n      totalCount: 0,\r\n      searchTerm: '',\r\n      editTeamModel: null\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    const { teamsMode, searchTerm, page, itemsPerPage } = this.state;\r\n\r\n    return QueryService.get(`/teams?searchTerm=${searchTerm}&type=${teamsMode}&limit=${itemsPerPage}&offset=${page * itemsPerPage}`)\r\n      .then(({ count, rows }) => {\r\n        this.setState({\r\n          totalCount: count,\r\n          teams: rows\r\n        })\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { teams, totalCount, page, itemsPerPage, searchTerm, teamsMode, editTeamModel } = this.state;\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <UserService.WithApplicationMode>\r\n        {mode => {\r\n          let hasPermission = mode == ApplicationMode.ADMIN || mode == ApplicationMode.TOURNAMENT;\r\n\r\n          return (\r\n            <div className=\"container\">\r\n              {hasPermission && editTeamModel && <TeamStatisticsFormModal\r\n                team={editTeamModel}\r\n                onClose={() => this.setState({ editTeamModel: null })}\r\n                onUpdate={() => this.setState({ editTeamModel: null }, () => this.getData())}\r\n              />}\r\n\r\n              <Paper style={{ padding: '1rem' }}>\r\n                <Typography variant=\"headline\" color=\"primary\">Вечна класация на играчите</Typography>\r\n\r\n                <TextField\r\n                  label=\"Търсене\"\r\n                  fullWidth\r\n                  value={searchTerm}\r\n                  onChange={e => this.setState({ searchTerm: e.target.value }, () => this.getData())}\r\n                />\r\n\r\n                <Tabs\r\n                  value={teamsMode}\r\n                  onChange={(_, e) => this.setState({ teamsMode: e }, () => this.getData())}\r\n                  textColor=\"primary\"\r\n                  variant=\"fullWidth\">\r\n                  <Tab value=\"single\" label=\"Сингъл\"></Tab>\r\n                  <Tab value=\"double\" label=\"Двойки\"></Tab>\r\n                </Tabs>\r\n\r\n                <Hidden xsDown>\r\n                  <Table>\r\n                    <TableHead>\r\n                      <TableRow>\r\n                        <TableCell padding=\"dense\">#</TableCell>\r\n                        <TableCell>Име</TableCell>\r\n                        <TableCell>Спечелени мачове</TableCell>\r\n                        <TableCell>Общо мачове</TableCell>\r\n                        <TableCell>Спечелени турнири</TableCell>\r\n                        <TableCell>Общо турнири</TableCell>\r\n                        {hasPermission && <TableCell padding=\"none\"></TableCell>}\r\n                      </TableRow>\r\n\r\n                    </TableHead>\r\n                    <TableBody>\r\n                      {teams.map((team, i) => {\r\n                        let prefix = '';\r\n                        // if (team.globalRank === 1)\r\n                        //   prefix = 'gold'\r\n                        // else if (team.globalRank === 2)\r\n                        //   prefix = 'silver'\r\n                        // else if (team.globalRank === 3)\r\n                        //   prefix = 'bronze'\r\n\r\n                        return (\r\n                          <TableRow key={team.id} className={classes[prefix + 'Root']}>\r\n                            <TableCell padding=\"dense\">\r\n                              <Typography className={classes[prefix + 'Typography']}>\r\n                                {team.globalRank}\r\n                              </Typography>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              {!team.user2 && <Typography className={classes[prefix + 'Typography']}>{team.user1.name}</Typography>}\r\n                              {team.user2 && <React.Fragment>\r\n                                <Typography className={classes[prefix + 'Typography']}>{team.user1.name}</Typography>\r\n                                <Typography className={classes[prefix + 'Typography']}>{team.user2.name}</Typography>\r\n                              </React.Fragment>}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <Typography className={classes[prefix + 'Typography']}>\r\n                                {team.wonMatches} ({getWinRatio(team, 'Matches')}%)\r\n                              </Typography>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <Typography className={classes[prefix + 'Typography']}>\r\n                                {team.totalMatches}\r\n                              </Typography></TableCell>\r\n                            <TableCell>\r\n                              <Typography className={classes[prefix + 'Typography']}>\r\n                                {team.wonTournaments} ({getWinRatio(team, 'Tournaments')}%)\r\n                              </Typography>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <Typography className={classes[prefix + 'Typography']}>\r\n                                {team.totalTournaments}\r\n                              </Typography>\r\n                            </TableCell>\r\n                            {hasPermission && <TableCell padding=\"none\">\r\n                              <IconButton color=\"primary\" onClick={() => this.setState({ editTeamModel: team })}>\r\n                                <EditIcon />\r\n                              </IconButton></TableCell>}\r\n                          </TableRow>);\r\n                      })}\r\n                    </TableBody>\r\n                  </Table>\r\n                </Hidden>\r\n\r\n                <Hidden smUp>\r\n                  <List>\r\n                    {teams.map(team => {\r\n                      let prefix = 'basic';\r\n                      // if (team.globalRank === 1)\r\n                      //   prefix = 'gold'\r\n                      // else if (team.globalRank === 2)\r\n                      //   prefix = 'silver'\r\n                      // else if (team.globalRank === 3)\r\n                      //   prefix = 'bronze'\r\n\r\n                      return (\r\n                        <React.Fragment key={team.id}>\r\n                          <ListItem style={{ display: 'flex' }}>\r\n                            <div style={{ flexBasis: '34%', display: 'flex' }}>\r\n                              <div className={classes.badge + ' ' + classes[prefix + 'Badge']}>\r\n                                <Typography className={classes[prefix + 'Typography']}>#{team.globalRank}</Typography>\r\n                              </div>\r\n                            </div>\r\n                            <div style={{ flexBasis: '66%', display: 'flex', flexDirection: 'column', alignItems: 'flex-start' }}>\r\n                              <div style={{ display: 'flex', width: '100%' }}>\r\n                                <div style={{ flexBasis: '85%', display: 'flex', alignItems: 'center' }}>\r\n                                  <Typography>{team.user1.name}</Typography>\r\n                                  {team.user2 && <Typography>{team.user2.name}</Typography>}\r\n                                </div>\r\n                                {hasPermission && <div style={{ flexBasis: '15%' }}>\r\n                                  <IconButton color=\"primary\" onClick={() => this.setState({ editTeamModel: team })} >\r\n                                    <EditIcon />\r\n                                  </IconButton>\r\n                                </div>}\r\n                              </div>\r\n                              <div style={{ width: '100%' }}>\r\n                                <Typography variant=\"caption\">\r\n                                  <span>Мачове: {team.wonMatches}/{team.totalMatches}</span>\r\n                                  <span style={{ marginLeft: '.3em' }}>({getWinRatio(team, 'Matches')}% win ratio)</span>\r\n                                </Typography>\r\n                                <Typography variant=\"caption\">\r\n                                  <span>Турнири: {team.wonTournaments}/{team.totalTournaments}</span>\r\n                                  <span style={{ marginLeft: '.3em' }}>({getWinRatio(team, 'Tournaments')}% win ratio)</span>\r\n                                </Typography>\r\n                              </div>\r\n                            </div>\r\n                          </ListItem>\r\n                          <Divider />\r\n                        </React.Fragment>\r\n                      );\r\n                    })}\r\n                  </List>\r\n                </Hidden>\r\n\r\n                <TablePagination\r\n                  component=\"div\"\r\n                  count={totalCount}\r\n                  rowsPerPage={itemsPerPage}\r\n                  rowsPerPageOptions={[10, 25, 50]}\r\n                  labelRowsPerPage=\"Покажи:\"\r\n                  labelDisplayedRows={({ from, to, count }) => `${from}-${to} от ${count}`}\r\n                  page={page}\r\n                  onChangePage={(e, page) => this.setState({ page }, () => this.getData())}\r\n                  onChangeRowsPerPage={e => this.setState({ itemsPerPage: e.target.value, page: 0 }, () => this.getData())}\r\n                />\r\n              </Paper>\r\n            </div>\r\n          );\r\n        }}\r\n      </UserService.WithApplicationMode >\r\n    );\r\n  }\r\n}\r\n\r\nfunction getWinRatio(team, suffix) {\r\n  if (team['total' + suffix] == 0)\r\n    return 0;\r\n  return Math.round(100 * 100 * team['won' + suffix] / team['total' + suffix]) / 100;\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  mobileRoot: {\r\n    display: 'flex'\r\n  },\r\n  badge: {\r\n    borderRadius: '50%',\r\n    width: '50px',\r\n    height: '50px',\r\n    margin: 'auto',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center'\r\n  },\r\n  basicBadge: {\r\n    border: '1px solid lightgray'\r\n  },\r\n  goldBadge: {\r\n    backgroundColor: '#FFD200',\r\n    backgroundImage: 'linear-gradient(15deg, #FFD200 0%, #F7971E 74%);'\r\n  },\r\n  silverBadge: {\r\n    backgroundColor: '#b8c6db',\r\n    backgroundImage: 'linear-gradient(315deg, #8ba2c3 0%, #f5f7fa 74%)'\r\n  },\r\n  bronzeBadge: {\r\n    backgroundColor: '#772f1a',\r\n    backgroundImage: 'linear-gradient(315deg, #772f1a 0%, #f2a65a 74%)'\r\n  },\r\n  goldRoot: {\r\n    backgroundColor: '#FFD200',\r\n    backgroundImage: 'linear-gradient(15deg, #FFD200 0%, #F7971E 74%);',\r\n    border: 'none'\r\n  },\r\n  goldTypography: {\r\n    fontWeight: 700,\r\n    color: 'white'\r\n  },\r\n  silverRoot: {\r\n    backgroundColor: '#b8c6db',\r\n    backgroundImage: 'linear-gradient(315deg, #8ba2c3 0%, #f5f7fa 74%)',\r\n    border: 'none'\r\n  },\r\n  silverTypography: {\r\n    fontWeight: 700\r\n  },\r\n  bronzeRoot: {\r\n    backgroundColor: '#772f1a',\r\n    backgroundImage: 'linear-gradient(315deg, #772f1a 0%, #f2a65a 74%)',\r\n    border: 'none'\r\n  },\r\n  bronzeTypography: {\r\n    fontWeight: 700,\r\n    color: 'whitesmoke'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(PlayersRoot);","export function getHour(hour) {\r\n  if (hour < 10)\r\n    return `0${hour}:00`;\r\n  else return `${hour}:00`;\r\n}","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport EnumSelect from '../../components/EnumSelect';\r\nimport AsyncSelect from '../../components/select/AsyncSelect';\r\nimport { ReservationPayment, ReservationType } from '../../enums';\r\nimport { l10n_text } from '../../components/L10n';\r\nimport { getHour } from '../../utils';\r\n\r\nclass EditReservationModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      reservation: {\r\n        court: {},\r\n        type: '',\r\n        season: {},\r\n        payments: [],\r\n        administrator: {},\r\n        customer: {}\r\n      },\r\n      errors: []\r\n    }\r\n\r\n    this.handleChange = (prop) => (e) => {\r\n      const reservation = this.state.reservation;\r\n      reservation[prop] = e.target.value;\r\n      if (prop == 'type') {\r\n        reservation.customer = null;\r\n        reservation.customerId = null;\r\n        reservation.subscription = null;\r\n        reservation.subscriptionId = null;\r\n      }\r\n\r\n      this.setState({ reservation });\r\n    };\r\n\r\n    this.handleCustomChange = (prop) => (value) => {\r\n      const reservation = this.state.reservation;\r\n\r\n      if (prop == 'customer') {\r\n        reservation.customer = null;\r\n        reservation.customerId = (value || { id: null }).id;\r\n        reservation.subscription = null;\r\n        reservation.subscriptionId = null;\r\n      }\r\n\r\n      if (prop == 'subscription') {\r\n        reservation.subscription = null;\r\n        reservation.subscriptionId = (value || { id: null }).id;\r\n      }\r\n\r\n      reservation[prop] = value;\r\n\r\n      this.setState({ reservation });\r\n    };\r\n\r\n    this.handlePaymentChange = (prop, index) => (e) => {\r\n      this.state.reservation.payments[index][prop] = e.target.value;\r\n      this.setState({ reservation: this.state.reservation });\r\n    };\r\n\r\n    this.handlePaymentSubscriptionChange = (index) => (value) => {\r\n      this.state.reservation.payments[index].subscription = value;\r\n      if (value)\r\n        this.state.reservation.payments[index].subscriptionId = value.id;\r\n      else\r\n        this.state.reservation.payments[index].subscriptionId = null;\r\n      this.setState({ reservation: this.state.reservation });\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { reservation } = this.props;\r\n    this.setState({ reservation: JSON.parse(JSON.stringify(reservation)), errors: [] });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { reservation } = this.props;\r\n    if (prevProps.reservation != reservation)\r\n      this.setState({ reservation: JSON.parse(JSON.stringify(reservation)), errors: [] });\r\n  }\r\n\r\n  action() {\r\n    if (this.state.reservation.id)\r\n      return QueryService\r\n        .post(`/schedule/reservations/${this.state.reservation.id}`, this.state.reservation)\r\n        .then(_ => {\r\n          this.setState({ errors: [] });\r\n          this.props.onAction()\r\n        })\r\n        .catch(err => this.setState({ errors: err }));\r\n    else\r\n      return QueryService\r\n        .post(`/schedule/reservations`, this.state.reservation)\r\n        .then(_ => {\r\n          this.setState({ errors: [] });\r\n          this.props.onAction()\r\n        })\r\n        .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  cancelReservation() {\r\n    return QueryService\r\n      .delete(`/schedule/reservations/${this.state.reservation.id}/cancel`)\r\n      .then(_ => {\r\n        this.setState({ errors: [] });\r\n        this.props.onAction()\r\n      })\r\n      .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  addPayment() {\r\n    const reservation = this.state.reservation;\r\n    reservation.payments.unshift({\r\n      type: \"\",\r\n      amount: null,\r\n      reservationId: reservation.id || 0\r\n    });\r\n    this.setState({ reservation });\r\n  }\r\n\r\n  render() {\r\n    const { isOpen, onClose, classes } = this.props;\r\n    const { reservation } = this.state;\r\n\r\n    return (\r\n      <Dialog open={isOpen} onClose={onClose} fullWidth={true} classes={{ paper: classes.root }}>\r\n        <DialogTitle>\r\n          <DialogContentText variant=\"headline\">\r\n            Резервация на\r\n            <span style={{ marginLeft: '.5rem' }}>\r\n              {reservation.court.name}\r\n            </span>\r\n          </DialogContentText>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Typography variant=\"caption\">\r\n            Час\r\n            <Typography>{getHour(reservation.hour)} - {getHour(reservation.hour + 1)}</Typography>\r\n          </Typography>\r\n          {reservation.administrator && <Typography variant=\"caption\">\r\n            Администрирал\r\n            <Typography>{reservation.administrator.name}</Typography>\r\n          </Typography>}\r\n          {reservation.type == ReservationType.COMPETITOR\r\n            && reservation.customer\r\n            && <Typography variant=\"caption\">\r\n              Резервирал\r\n              <Typography>{reservation.customer.name}</Typography>\r\n            </Typography>}\r\n\r\n          <EnumSelect\r\n            label=\"Вид резервация\"\r\n            value={reservation.type}\r\n            fullWidth={false}\r\n            onChange={this.handleChange('type')}\r\n            EnumValues={ReservationType}\r\n            EnumName=\"ReservationType\" />\r\n\r\n          {(reservation.type == ReservationType.USER || reservation.type == ReservationType.SUBSCRIPTION)\r\n            && <AsyncSelect\r\n              label=\"Потребител\"\r\n              value={reservation.customer}\r\n              query=\"users\"\r\n              noOptionsMessage={() => 'Няма намерени потребители'}\r\n              formatOptionLabel={(option) => <Typography component=\"span\">\r\n                {option.name}\r\n                <Typography component=\"span\" variant=\"caption\">{option.email}</Typography>\r\n              </Typography>}\r\n              onChange={this.handleCustomChange('customer')}\r\n            />}\r\n\r\n          {reservation.type == ReservationType.SUBSCRIPTION && reservation.customer\r\n            && <AsyncSelect\r\n              disableSearch={true}\r\n              label=\"Абонамент\"\r\n              value={reservation.subscription}\r\n              query=\"subscriptions\"\r\n              filter={{\r\n                userId: reservation.customerId\r\n              }}\r\n              noOptionsMessage={() => 'Няма регистрирани абонаменти'}\r\n              formatOptionLabel={(option) => <Typography component=\"span\">\r\n                Абонамент {l10n_text(option.type, \"SubscriptionType\")}\r\n                <Typography component=\"span\" variant=\"caption\" style={{ display: 'inline', marginLeft: '1rem' }}>{option.season.name}</Typography>\r\n                <Typography component=\"span\" variant=\"caption\">{option.remainingHours} оставащи часа</Typography>\r\n              </Typography>}\r\n              onChange={this.handleCustomChange('subscription')}\r\n            />}\r\n\r\n          <Typography variant=\"subheading\" style={{ marginTop: '1rem', alignItems: 'center', display: 'flex' }}>\r\n            Плащания\r\n            <IconButton\r\n              color=\"primary\"\r\n              onClick={() => this.addPayment()}\r\n            >\r\n              <AddIcon />\r\n            </IconButton>\r\n          </Typography>\r\n\r\n          {reservation.payments && reservation.payments.map((payment, index) => {\r\n            return (\r\n              <div className={classes.paymentCell} key={index}>\r\n\r\n                <EnumSelect\r\n                  style={{ width: '100px' }}\r\n                  label=\"Вид плащане\"\r\n                  value={payment.type}\r\n                  onChange={this.handlePaymentChange('type', index)}\r\n                  EnumValues={ReservationPayment}\r\n                  EnumName=\"ReservationPayment\" />\r\n\r\n                {payment.type == ReservationPayment.CASH\r\n                  && <TextField\r\n                    label=\"Стойност\"\r\n                    value={payment.amount}\r\n                    InputProps={{\r\n                      endAdornment: <InputAdornment position=\"end\">Лв.</InputAdornment>\r\n                    }}\r\n                    onChange={this.handlePaymentChange('amount', index)}\r\n                  />}\r\n\r\n                {(payment.type == ReservationPayment.SUBS_ZONE_1 || payment.type == ReservationPayment.SUBS_ZONE_2)\r\n                  && reservation.customer\r\n                  && <AsyncSelect\r\n                    disableSearch={true}\r\n                    label=\"Абонамент\"\r\n                    value={payment.subscription}\r\n                    query=\"subscriptions\"\r\n                    filter={{\r\n                      userId: reservation.customerId,\r\n                      type: payment.type,\r\n                      onlyAvailable: true\r\n                    }}\r\n                    noOptionsMessage={() => 'Няма абонаменти с часове за отиграване'}\r\n                    formatOptionLabel={(option) => <Typography component=\"span\">\r\n                      Абонамент {l10n_text(option.type, \"SubscriptionType\")}\r\n                      <Typography component=\"span\" variant=\"caption\" style={{ display: 'inline', marginLeft: '1rem' }}>{option.season.name}</Typography>\r\n                      <Typography component=\"span\" variant=\"caption\">{option.remainingHours} оставащи часа</Typography>\r\n                    </Typography>}\r\n                    onChange={this.handlePaymentSubscriptionChange(index)}\r\n                  />}\r\n\r\n                {/* <span style={{ cursor: 'pointer' }} onClick={() => {\r\n                  this.state.reservation.payments.splice(index, 1);\r\n                  this.setState({ reservation: this.state.reservation });\r\n                }}>\r\n                  <ClearIcon style={{ color: 'darkred' }} />\r\n                </span> */}\r\n                <div style={{ margin: '1rem 0 .3rem 0' }}>\r\n                  <Button variant=\"contained\" color=\"secondary\" size=\"small\"\r\n                    onClick={() => {\r\n                      this.state.reservation.payments.splice(index, 1);\r\n                      this.setState({ reservation: this.state.reservation });\r\n                    }}\r\n                  >\r\n                    Премахване\r\n                </Button>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n\r\n          {reservation.payments.length == 0 && <Typography variant=\"caption\">Няма регистрирани плащания</Typography>}\r\n\r\n          <TextField\r\n            label=\"Бележка\"\r\n            value={reservation.info}\r\n            fullWidth={true}\r\n            multiline={true}\r\n            margin=\"none\"\r\n            onChange={this.handleChange('info')}\r\n          />\r\n\r\n          {this.state.errors && this.state.errors.length > 0\r\n            && <div style={{ margin: '1rem 0', color: 'red' }}>\r\n              {this.state.errors.map((err, index) => {\r\n                return (\r\n                  <div key={index}><em>{index + 1}. {ErrorTexts[err]}</em></div>\r\n                );\r\n              })}\r\n            </div>}\r\n\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => this.action()}\r\n          >\r\n            Запазване\r\n          </Button>\r\n          {this.state.reservation.id && <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            onClick={() => this.cancelReservation()}\r\n          >\r\n            Отмяна на резервацията\r\n          </Button>}\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={onClose}\r\n          >\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog >\r\n    );\r\n  }\r\n}\r\n\r\nconst ErrorTexts = {\r\n  'exist': 'Резервация за този ден, час и корт вече съществува.',\r\n  'typeRequired': '\"Вид резервация\" е задължително поле',\r\n  'customerRequired': '\"Потребител\" е задължително поле, когато вид резервация е \"Абонат\" или \"Потребител\".',\r\n  'subscriptionRequired': '\"Абонамент\" е задължително поле, когато вид резервация е \"Абонат\".',\r\n  'usedHoursExceedTotalHours': 'Абонаментът няма оставащи часове',\r\n  'paymentSubscriptionRequired': '\"Абонамент\" е задължително поле, когато вид плащане е \"Отиграване на абонамент\".',\r\n  'typeSubscriptionAndHasPaymentSubscription': 'Не може едновременно вид резервация да е \"Абонат\" и да има вид плащане \"Отиграване на абонамент\".',\r\n  'maxAllowedTimeDiff': 'Резервацията не може да бъде отказана, защото остават по-малко часове от минимално допустимите часове за отказ.',\r\n  'reservationInThePast': 'Часът за тази резервация вече е минал.'\r\n};\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: '800px'\r\n    }\r\n  },\r\n  paymentCell: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    border: `1px solid ${theme.palette.primary.light}`,\r\n    padding: '1rem',\r\n    marginBottom: '1rem',\r\n    borderRadius: '5%'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(EditReservationModal);","export const cell = {\r\n  padding: '.3rem',\r\n  fontSize: '.8em',\r\n  textAlign: 'center',\r\n  border: '1px solid lightgrey',\r\n  width: '50px',\r\n};\r\n\r\nexport const button = {\r\n  '&:hover': {\r\n    opacity: .8,\r\n    cursor: 'pointer'\r\n  }\r\n};\r\n\r\nexport const disabled = {\r\n  '&:hover': {\r\n    cursor: 'not-allowed'\r\n  }\r\n};","import React from 'react';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport EditReservationModal from './EditReservationModal';\r\nimport * as ReservationStyles from './styles';\r\nimport { ReservationType } from '../../enums';\r\nimport L10n from '../../components/L10n';\r\n\r\nclass AdminReservation extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      modal: false\r\n    }\r\n  }\r\n\r\n  getCellLabel(reservation) {\r\n    if (reservation.type == ReservationType.COMPETITOR)\r\n      return (<L10n translate=\"ReservationType\">{ReservationType.COMPETITOR}</L10n>);\r\n    else if (reservation.type == ReservationType.USER && reservation.customer)\r\n      return (<span>{reservation.customer.name}</span>);\r\n    else\r\n      return (<L10n translate=\"ReservationType\">{reservation.type}</L10n>);\r\n  }\r\n\r\n  render() {\r\n    const { reservation, onChange, classes } = this.props;\r\n    let type = classes.free;\r\n    if (reservation.id) {\r\n      if ((reservation.type != ReservationType.GUEST || reservation.payments.length > 0)\r\n        && (reservation.type != ReservationType.USER || reservation.payments.length > 0))\r\n        type = classes.paidReservation;\r\n      else\r\n        type = classes.unpaidReservation;\r\n    }\r\n\r\n    if (reservation.type == ReservationType.SERVICE)\r\n      type = classes.unavaliable;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <TableCell\r\n          padding=\"none\"\r\n          className={type}\r\n          onClick={() => this.setState({ modal: true })}\r\n        >\r\n          {this.getCellLabel(reservation)}\r\n        </TableCell>\r\n\r\n        <EditReservationModal\r\n          reservation={reservation}\r\n          isOpen={this.state.modal}\r\n          onAction={(e) => {\r\n            onChange(e);\r\n            this.setState({ modal: false });\r\n          }}\r\n          onClose={() => this.setState({ modal: false })}\r\n        />\r\n\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  free: {\r\n    ...ReservationStyles.cell,\r\n    backgroundColor: '#fff',\r\n    color: theme.palette.primary.main,\r\n    '&:hover': {\r\n      backgroundColor: '#F3FBF0',\r\n      cursor: 'pointer',\r\n    }\r\n  },\r\n  unpaidReservation: {\r\n    ...ReservationStyles.cell,\r\n    ...ReservationStyles.button,\r\n    backgroundColor: theme.palette.secondary.light,\r\n    color: theme.palette.secondary.contrastText,\r\n  },\r\n  paidReservation: {\r\n    ...ReservationStyles.cell,\r\n    ...ReservationStyles.button,\r\n    backgroundColor: theme.palette.primary.light,\r\n    color: theme.palette.primary.contrastText\r\n  },\r\n  unavaliable: {\r\n    ...ReservationStyles.cell,\r\n    cursor: 'pointer',\r\n    color: theme.palette.secondary.main,\r\n    fontWeight: '700',\r\n    background: 'url(assets/empty.png)'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(AdminReservation);","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport { getHour } from '../../utils';\r\n\r\n\r\nclass ViewReservationModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      errors: []\r\n    }\r\n  }\r\n  makeReservation() {\r\n    return QueryService\r\n      .post(`/schedule/reservations`, this.props.reservation)\r\n      .then(_ => this.props.onAction())\r\n      .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  cancelReservation() {\r\n    return QueryService\r\n      .delete(`/schedule/reservations/${this.props.reservation.id}/cancel`)\r\n      .then(_ => this.props.onAction())\r\n      .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  render() {\r\n    const { reservation, isOpen, onClose, classes } = this.props;\r\n\r\n    return (\r\n      <Dialog open={isOpen} onClose={onClose}>\r\n        <DialogTitle>\r\n          <DialogContentText variant=\"headline\">\r\n            Резервация на\r\n            <span style={{ marginLeft: '.5rem' }}>\r\n              {reservation.court.name}\r\n            </span>\r\n          </DialogContentText>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Typography variant=\"caption\">\r\n            Час:\r\n            <Typography>{getHour(reservation.hour)} - {getHour(reservation.hour + 1)}</Typography>\r\n          </Typography>\r\n          {!reservation.id && <Typography variant=\"caption\">\r\n            Поради възможността от възникване на премествания, запазването на\r\n            корт не ви гарантира на 100%, че ще играете точно на този корт.\r\n          </Typography>}\r\n          {reservation.id && <Typography variant=\"caption\">\r\n            Имате право да откажете часът до 4 часа (8 часа за абонамент) преди неговото начало.\r\n            След това системата отчита вашият час като използван.\r\n            Ако имате абонамент, часът ще ви се брои като използван.\r\n          </Typography>}\r\n\r\n          {this.state.errors && this.state.errors.length > 0\r\n            && <div style={{ margin: '1rem 0', color: 'red' }}>\r\n              {this.state.errors.map((err, index) => {\r\n                return (\r\n                  <div key={index}><em>{index + 1}. {ErrorTexts[err]}</em></div>\r\n                );\r\n              })}\r\n            </div>}\r\n        </DialogContent>\r\n\r\n        {!reservation.id && <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.makeReservation()}>\r\n            Резервиране\r\n          </Button>\r\n          <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>}\r\n\r\n        {reservation.id && <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"outlined\" color=\"secondary\" className={classes.btn} onClick={() => this.cancelReservation()}>\r\n            Отмяна на резервацията\r\n          </Button>\r\n          <Button variant=\"contained\" color=\"secondary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>}\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst ErrorTexts = {\r\n  'exist': 'Резервация за този ден, час и корт вече съществува.',\r\n  'maxAllowedTimeDiff': 'Резервацията не може да бъде отказана, защото остават по-малко часове от минимално допустимите часове за отказ.',\r\n  'reservationInThePast': 'Часът за тази резервация вече е минал.'\r\n};\r\n\r\nconst styles = (theme) => ({\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(ViewReservationModal);","import React from 'react';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport ViewReservationModal from './ViewReservationModal';\r\nimport * as ReservationStyles from './styles';\r\nimport L10n from '../../components/L10n';\r\n\r\nclass UserReservation extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      modal: false\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { reservation, onChange, classes } = this.props;\r\n    let type = classes.free;\r\n\r\n    if (reservation.id)\r\n      type = classes.reserved;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <TableCell\r\n          padding=\"none\"\r\n          className={type}\r\n          onClick={() => this.setState({ modal: true })}\r\n        >\r\n          {reservation.id && <L10n\r\n            translate=\"CustomReservationType\"\r\n          >\r\n            {reservation.type}\r\n          </L10n>}\r\n        </TableCell>\r\n\r\n        <ViewReservationModal\r\n          reservation={reservation}\r\n          isOpen={this.state.modal}\r\n          onAction={(e) => {\r\n            onChange(e);\r\n            this.setState({ modal: false });\r\n          }}\r\n          onClose={() => this.setState({ modal: false })}\r\n        />\r\n\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  free: {\r\n    ...ReservationStyles.cell,\r\n    backgroundColor: '#fff',\r\n    color: theme.palette.primary.main,\r\n    '&:hover': {\r\n      backgroundColor: '#F3FBF0',\r\n      cursor: 'pointer',\r\n    }\r\n  },\r\n  reserved: {\r\n    ...ReservationStyles.cell,\r\n    ...ReservationStyles.button,\r\n    backgroundColor: theme.palette.primary.light,\r\n    color: theme.palette.primary.contrastText,\r\n  },\r\n  unavaliable: {\r\n    ...ReservationStyles.cell,\r\n    background: 'url(assets/empty.png)',\r\n    '&:hover': {\r\n      cursor: 'not-allowed'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(UserReservation);","import React from 'react';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport * as ReservationStyles from './styles';\r\nimport { ReservationType } from '../../enums';\r\n\r\nclass GuestReservation extends React.Component {\r\n  render() {\r\n    const { reservation, available, classes } = this.props;\r\n    let type = classes.free;\r\n    if (reservation.id)\r\n      type = classes.taken;\r\n\r\n    if (!available || reservation.type == ReservationType.SERVICE)\r\n      type = classes.unavaliable;\r\n\r\n    return (\r\n      <TableCell padding=\"none\" className={type}></TableCell>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  free: {\r\n    ...ReservationStyles.cell,\r\n    backgroundColor: '#fff',\r\n    color: theme.palette.primary.main,\r\n  },\r\n  taken: {\r\n    ...ReservationStyles.cell,\r\n    backgroundColor: theme.palette.secondary.light,\r\n    color: theme.palette.secondary.contrastText,\r\n  },\r\n  unavaliable: {\r\n    ...ReservationStyles.cell,\r\n    background: 'url(assets/empty.png)',\r\n    '&:hover': {\r\n      cursor: 'not-allowed'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(GuestReservation);","import React from 'react';\r\n\r\nimport { ApplicationMode, ReservationType } from '../../enums';\r\nimport UserService from '../../services/user.service';\r\nimport AdminReservation from './AdminReservation';\r\nimport UserReservation from './UserReservation';\r\nimport GuestReservation from './GuestReservation';\r\n\r\nclass Reservation extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: null\r\n    };\r\n  }\r\n\r\n  setUser() {\r\n    UserService.getAuthenticatedUser()\r\n      .then(user => this.setState({ user }));\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setUser();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.mode != this.props.mode)\r\n      this.setUser();\r\n  }\r\n\r\n  render() {\r\n    const { reservation, mode } = this.props;\r\n    const { user } = this.state;\r\n\r\n    const available = reservation.hour <= reservation.court.workingHoursEnd - 1\r\n      && reservation.hour >= reservation.court.workingHoursStart;\r\n\r\n    if (!available)\r\n      return <GuestReservation {...this.props} available={available} />;\r\n\r\n    if (mode == ApplicationMode.ADMIN)\r\n      return <AdminReservation {...this.props} />;\r\n\r\n    if (mode == ApplicationMode.GUEST)\r\n      return <GuestReservation {...this.props} available={available} />\r\n\r\n    if (user && user.isTrainer && reservation.type == ReservationType.COMPETITOR)\r\n      return <UserReservation {...this.props} />\r\n\r\n    if (!reservation.id)\r\n      return <UserReservation {...this.props} />\r\n\r\n    if (reservation.customerId && user && reservation.customerId == user.id)\r\n      return <UserReservation {...this.props} />\r\n\r\n    return <GuestReservation {...this.props} available={available} />;\r\n  }\r\n}\r\n\r\nexport default Reservation;","import React from 'react';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport * as ReservationStyles from './styles';\r\nimport { l10n_text } from '../../components/L10n';\r\nimport { ReservationType } from '../../enums';\r\n\r\nclass ShuffleItem extends React.Component {\r\n\r\n  select() {\r\n    const { reservation, shuffle, onSelect, onUnselect } = this.props;\r\n    const index = this.findIndex(reservation, shuffle);\r\n\r\n    if (index != -1)\r\n      onUnselect(index);\r\n    else onSelect(reservation);\r\n  }\r\n\r\n  findIndex(reservation, shuffle) {\r\n    return shuffle.findIndex(e => e.date == reservation.date && e.hour == reservation.hour && e.courtId == reservation.courtId);\r\n  }\r\n\r\n  render() {\r\n    const { reservation, shuffle, classes } = this.props;\r\n    const available = reservation.hour <= reservation.court.workingHoursEnd - 1\r\n      && reservation.hour >= reservation.court.workingHoursStart;\r\n\r\n    if (!available)\r\n      return <TableCell padding=\"none\" className={classes.unavaliable}></TableCell>;\r\n\r\n    let type = classes.free;\r\n\r\n    if (this.findIndex(reservation, shuffle) != -1)\r\n      type = classes.selected;\r\n\r\n    if (!reservation.id)\r\n      return (\r\n        <TableCell padding=\"none\" className={type} onClick={() => this.select()}>\r\n        </TableCell>\r\n      );\r\n\r\n    if (type == classes.free)\r\n      type = classes.taken\r\n\r\n    if (reservation.type == ReservationType.USER || reservation.type == ReservationType.SUBSCRIPTION)\r\n      return (\r\n        <TableCell padding=\"none\" className={type} onClick={() => this.select()}>\r\n          {type != classes.free && reservation.customer && <span>{reservation.customer.name}</span>}\r\n        </TableCell>\r\n      );\r\n\r\n    return (\r\n      <TableCell padding=\"none\" className={type} onClick={() => this.select()}>\r\n        {type != classes.free\r\n          && <span>{l10n_text(reservation.type, \"ReservationType\")}</span>}\r\n      </TableCell>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst styles = (theme) => ({\r\n  free: {\r\n    ...ReservationStyles.cell,\r\n    ...ReservationStyles.button,\r\n    backgroundColor: '#fff',\r\n    color: theme.palette.primary.main,\r\n  },\r\n  taken: {\r\n    ...ReservationStyles.cell,\r\n    ...ReservationStyles.button,\r\n    backgroundColor: theme.palette.secondary.light,\r\n    color: theme.palette.secondary.contrastText,\r\n  },\r\n  unavaliable: {\r\n    ...ReservationStyles.cell,\r\n    background: 'url(assets/empty.png)',\r\n    '&:hover': {\r\n      cursor: 'not-allowed'\r\n    }\r\n  },\r\n  service: {\r\n    ...ReservationStyles.cell,\r\n    ...ReservationStyles.button,\r\n    color: theme.palette.secondary.main,\r\n    fontWeight: '700',\r\n    background: 'url(assets/empty.png)'\r\n  },\r\n  selected: {\r\n    ...ReservationStyles.cell,\r\n    ...ReservationStyles.button,\r\n    backgroundColor: theme.palette.primary.main,\r\n    color: theme.palette.primary.contrastText\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(ShuffleItem);","import moment from 'moment';\r\nimport React from 'react';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { ApplicationMode } from '../../enums';\r\n\r\nclass DateComponent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      selected: new Date().getDate() - 1,\r\n      previousSelected: null\r\n    };\r\n    this.weekDays = ['нед', 'пон', 'втор', 'ср', 'четв', 'пет', 'съб'];\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ selected: this.props.day - 1 });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.month != this.props.month || prevProps.year != this.props.year) {\r\n      if (this.state.previousSelected\r\n        && this.state.previousSelected.get('year') == this.props.year\r\n        && this.state.previousSelected.get('month') == this.props.month) {\r\n        this.props.onChange(this.state.previousSelected)\r\n        this.setState({\r\n          selected: this.state.previousSelected.get('date') - 1,\r\n          previousSelected: null\r\n        });\r\n      }\r\n\r\n      else if (this.state.previousSelected == null)\r\n        this.setState({\r\n          selected: false,\r\n          previousSelected: moment({ year: prevProps.year, month: prevProps.month, date: this.state.selected + 1 })\r\n        });\r\n      else\r\n        this.setState({ selected: false });\r\n    }\r\n  }\r\n\r\n  getLabel(day) {\r\n    let date = new Date(this.props.year, this.props.month, day);\r\n\r\n    return (\r\n      <div>\r\n        {day < 10 ? '0' : ''}\r\n        {day}\r\n        <div>{this.weekDays[date.getDay()]}</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getDays() {\r\n    const { year, month } = this.props;\r\n\r\n    const monthSizes = [31,\r\n      (year % 100 != 0\r\n        && (year % 4 == 0\r\n          || year % 400 == 0) ? 29 : 28),\r\n      31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\n\r\n    const start = 1;\r\n    const end = monthSizes[month];\r\n\r\n    return [...new Array(end - start + 1).keys()].map(k => k + start);\r\n  }\r\n\r\n  isDisabled(day) {\r\n    if (this.props.mode == ApplicationMode.ADMIN)\r\n      return false;\r\n    const { year, month, availiableDaysAhead } = this.props;\r\n    const MS_PER_DAY = 1000 * 60 * 60 * 24;\r\n\r\n    // Discard the time and time-zone information.\r\n    const targetDate = new Date(year, month, day);\r\n    const today = new Date();\r\n    const diff = Math.floor((today - targetDate) / MS_PER_DAY);\r\n    return diff > 0 || diff < -availiableDaysAhead;\r\n  }\r\n\r\n  isToday(day) {\r\n    const { year, month } = this.props;\r\n    const today = new Date();\r\n    return year == today.getFullYear() && month == today.getMonth() && day == today.getDate();\r\n  }\r\n\r\n  render() {\r\n    const { year, month, classes, onChange } = this.props;\r\n    const today = new Date().getDate();\r\n\r\n    return (\r\n      <Tabs\r\n        classes={{\r\n          root: classes.tabsRoot,\r\n          scroller: classes.tabsScroller,\r\n          indicator: classes.tabsIndicator,\r\n          scrollButtons: classes.tabsScrollButtons\r\n        }}\r\n        value={this.state.selected}\r\n        onChange={(_, value) => {\r\n          this.setState({ selected: value });\r\n          onChange(moment({ year, month, date: value + 1 }));\r\n        }}\r\n        variant=\"scrollable\"\r\n        scrollButtons=\"on\">\r\n        {this.getDays().map(day => {\r\n          let rootClass = classes.tab;\r\n          if (this.isToday(day) && this.state.selected != (today - 1))\r\n            rootClass = rootClass + ` ${classes.todayTab}`;\r\n\r\n          return (\r\n            <Tab\r\n              classes={{\r\n                root: rootClass,\r\n                selected: classes.selectedTab,\r\n                disabled: classes.disabledTab,\r\n                labelContainer: classes.labelContainer\r\n              }}\r\n              disabled={this.isDisabled(day)}\r\n              key={day}\r\n              label={this.getLabel(day)}\r\n            />\r\n          );\r\n        })}\r\n      </Tabs>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => {\r\n  return {\r\n    tabsRoot: {\r\n    },\r\n    labelContainer: {\r\n      padding: '.5rem 0'\r\n    },\r\n    tab: {\r\n      backgroundColor: 'white',\r\n      color: theme.palette.primary.dark,\r\n      [theme.breakpoints.down('xl')]: {\r\n        width: '60px',\r\n        minWidth: '0px',\r\n        minHeight: '0px',\r\n        fontWeight: 700,\r\n        border: '.5px solid lightgrey',\r\n      }\r\n    },\r\n    selectedTab: {\r\n      backgroundColor: theme.palette.primary.main,\r\n      color: theme.palette.primary.contrastText,\r\n      border: 'none'\r\n    },\r\n    todayTab: {\r\n      backgroundColor: theme.palette.secondary.main,\r\n      color: theme.palette.primary.contrastText,\r\n      border: 'none'\r\n    },\r\n    disabledTab: {\r\n      color: 'grey',\r\n      fontWeight: 500,\r\n      backgroundColor: 'whitesmoke'\r\n    },\r\n    tabsScroller: {\r\n      [theme.breakpoints.up('md')]: {\r\n        overflow: 'hidden'\r\n      }\r\n    },\r\n    tabsIndicator: {\r\n      backgroundColor: theme.palette.primary.main\r\n    },\r\n    tabsScrollButtons: {\r\n      color: theme.palette.primary.main,\r\n      flexBasis: '30px'\r\n    }\r\n  };\r\n};\r\n\r\nexport default withStyles(styles)(DateComponent);","import moment from 'moment';\r\nimport React from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport UserService from '../../services/user.service';\r\nimport DateComponent from './DateComponent';\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    paddingLeft: '1.3rem',\r\n    paddingRight: '2.3rem',\r\n    display: 'flex',\r\n    [theme.breakpoints.down('xs')]: {\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  formControl: {\r\n    width: '120px',\r\n    margin: '.5rem',\r\n    [theme.breakpoints.down('xs')]: {\r\n      margin: '.5rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nclass Calendar extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const today = moment().startOf('date');\r\n    this.state = {\r\n      year: today.get('year'),\r\n      month: today.get('month'),\r\n      day: today.get('date'),\r\n      date: today\r\n    };\r\n    this.years = [2016, 2017, 2018, 2019];\r\n    this.monts = ['Януари', 'Февруари', 'Март', 'Април', 'Май', 'Юни', 'Юли', 'Август', 'Септември', 'Октомври', 'Ноември', 'Декември'];\r\n\r\n    this.handleChange = (prop) => (e) => {\r\n      const state = this.state;\r\n      state[prop] = e.target.value;\r\n      this.setState(state);\r\n      if (this.props.emitDateOnAnyChange)\r\n        this.props.onChange(moment(state.date).set(prop, state[prop]));\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      year: this.props.value.get('year'),\r\n      month: this.props.value.get('month'),\r\n      day: this.props.value.get('date')\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { classes, onChange } = this.props;\r\n    const { year, month, day } = this.state;\r\n\r\n    return (\r\n      <div style={{ marginBottom: '1rem' }}>\r\n        <div className={classes.root}>\r\n          <FormControl className={classes.formControl}>\r\n            <Select\r\n              value={month}\r\n              onChange={this.handleChange('month')}\r\n            >\r\n              {this.monts.map((month, index) => {\r\n                return (\r\n                  <MenuItem key={index} value={index}>{month}</MenuItem>\r\n                );\r\n              })}\r\n            </Select>\r\n          </FormControl>\r\n          <FormControl className={classes.formControl}>\r\n            <Select\r\n              value={year}\r\n              onChange={this.handleChange('year')}\r\n            >\r\n              {this.years.map(year => {\r\n                return (\r\n                  <MenuItem key={year} value={year}>{year}</MenuItem>\r\n                );\r\n              })}\r\n            </Select>\r\n          </FormControl>\r\n        </div>\r\n\r\n        <UserService.WithApplicationMode>\r\n          {mode => <DateComponent\r\n            year={year}\r\n            month={month}\r\n            day={day}\r\n            availiableDaysAhead={14}\r\n            mode={mode}\r\n            onChange={(date) => {\r\n              this.setState({ date });\r\n              return onChange(date);\r\n            }}\r\n          />}\r\n        </UserService.WithApplicationMode>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(Calendar);","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    display: 'inline-flex',\r\n    flexDirection: 'column'\r\n  },\r\n  item: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    marginBottom: '.3rem',\r\n    '& div': {\r\n      width: '100px',\r\n      height: '20px',\r\n      border: '1px solid lightgrey'\r\n    }\r\n  },\r\n  reserved: {\r\n    backgroundColor: theme.palette.primary.light\r\n  },\r\n  taken: {\r\n    backgroundColor: theme.palette.secondary.light\r\n  },\r\n  unavailiable: {\r\n    background: 'url(assets/empty.png)'\r\n  }\r\n});\r\n\r\nclass Legend extends React.Component {\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        <div className={classes.item}>\r\n          <div></div>\r\n          <Typography variant=\"caption\"> - свободен час</Typography>\r\n        </div>\r\n        <div className={classes.item}>\r\n          <div className={classes.reserved}></div>\r\n          <Typography variant=\"caption\"> - резервиран от потребителя</Typography>\r\n        </div>\r\n        <div className={classes.item}>\r\n          <div className={classes.taken}></div>\r\n          <Typography variant=\"caption\"> - зает час</Typography>\r\n        </div>\r\n        <div className={classes.item}>\r\n          <div className={classes.unavailiable}></div>\r\n          <Typography variant=\"caption\"> - затворено игрище</Typography>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(Legend);","import moment from 'moment';\r\nimport React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport ReplayIcon from '@material-ui/icons/Replay';\r\nimport ShuffleIcon from '@material-ui/icons/Shuffle';\r\nimport { Button } from '@material-ui/core';\r\n\r\nimport QueryService from '../services/query.service';\r\nimport UserService from '../services/user.service';\r\nimport Reservation from './reservation/Reservation';\r\nimport ShuffleItem from './reservation/ShuffleItem';\r\nimport Calendar from '../components/calendar/Calendar';\r\nimport Legend from './Legend';\r\nimport ConfirmationDialog from '../components/ConfirmationDialog';\r\nimport AsyncSelect from '../components/select/AsyncSelect';\r\nimport { getHour } from '../utils';\r\nimport { ApplicationMode } from '../enums';\r\nimport { catchEvent } from '../services/events.service';\r\n\r\nconst scrollButton = (theme) => ({\r\n  zIndex: 1100,\r\n  backgroundColor: theme.palette.primary.main,\r\n  color: theme.palette.primary.contrastText,\r\n  position: 'absolute',\r\n  boxShadow: `0 0 20px ${theme.palette.primary.dark}`,\r\n  borderRadius: '50%',\r\n  padding: '8px',\r\n  display: 'flex',\r\n  alignItems: 'center',\r\n  opacity: '.9'\r\n});\r\n\r\nconst styles = (theme) => ({\r\n  hours: {\r\n    width: '10px',\r\n    textAlign: 'center'\r\n  },\r\n  disabled: {\r\n    cursor: 'not-allowed',\r\n    opacity: .5\r\n  },\r\n  scrollLeft: {\r\n    ...scrollButton(theme),\r\n    top: '50%',\r\n    left: '5px'\r\n  },\r\n  scrollRight: {\r\n    ...scrollButton(theme),\r\n    top: '50%',\r\n    right: '5px'\r\n  }\r\n});\r\n\r\n\r\nclass Schedule extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      administrator: null,\r\n      counter: 0,\r\n      season: null,\r\n      courts: [],\r\n      reservations: [],\r\n      date: moment().startOf('date'),\r\n      shuffle: null\r\n    };\r\n\r\n    const rootRef = document.getElementById('root');\r\n    rootRef.onscroll = () => {\r\n      if (!this.tableRef)\r\n        return;\r\n\r\n      const needScrollBtns = rootRef.clientWidth <= 600;\r\n      const tableInViewport = rootRef.scrollTop + 200 >= this.tableRef.offsetTop;\r\n\r\n      if (needScrollBtns && tableInViewport)\r\n        this.btnContainerRef.style.display = 'block';\r\n      else\r\n        this.btnContainerRef.style.display = 'none';\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    catchEvent('login', () => this.getAdministrator());\r\n    this.getAdministrator();\r\n    this.getConfig();\r\n    this.getData(this.state.date);\r\n  }\r\n\r\n  getAdministrator() {\r\n    return UserService.getAuthenticatedUser()\r\n      .then(user => this.setState({ administrator: user }));\r\n  }\r\n\r\n  getConfig() {\r\n    return QueryService\r\n      .get(`/schedule/config`)\r\n      .then(config => this.setState(config));\r\n  }\r\n\r\n  getData(date) {\r\n    return QueryService\r\n      .post(`/schedule/reservations/filter`, { date: date.format('YYYY-MM-DD') })\r\n      .then(reservations => this.setState({ reservations }));\r\n  }\r\n\r\n  getReservation(hour, court) {\r\n    const sameReservation = (e) => {\r\n      return e.courtId == court.id && e.hour == hour\r\n    };\r\n\r\n    const existing = this.state.reservations.find(e => sameReservation(e));\r\n    return (existing || this.constructReservation(this.state.date, hour, court));\r\n  }\r\n\r\n  shuffle() {\r\n    const shuffle = this.state.shuffle;\r\n    if (!shuffle || shuffle.length < 2)\r\n      return;\r\n\r\n    this.setState({ shuffleErrors: null });\r\n\r\n    return QueryService\r\n      .post('/schedule/shuffle', shuffle)\r\n      .then(_ => {\r\n        this.getData(this.state.date);\r\n        this.setState({ shuffle: null });\r\n      })\r\n      .catch(err => this.setState({ shuffleErrors: err }));\r\n  }\r\n\r\n  shuffleOnSelect(item) {\r\n    //console.log('select', item);\r\n    const shuffle = this.state.shuffle;\r\n    shuffle.unshift(item);\r\n    shuffle.splice(2, 1);\r\n    this.setState({ shuffle });\r\n  }\r\n\r\n  shuffleOnUnselect(index) {\r\n    //console.log('unselect', index);\r\n    const shuffle = this.state.shuffle;\r\n    shuffle.splice(index, 1);\r\n    this.setState({ shuffle });\r\n  }\r\n\r\n  constructReservation(date, hour, court) {\r\n    return {\r\n      date: date.format('YYYY-MM-DD'),\r\n      hour: hour,\r\n      court: court,\r\n      courtId: court.id,\r\n      season: this.state.season,\r\n      seasonId: this.state.season.id,\r\n      administrator: this.state.administrator,\r\n      info: '',\r\n      type: '',\r\n      payments: []\r\n    }\r\n  }\r\n\r\n  scroll(mode) {\r\n    if (mode === 'left')\r\n      this.tableRef.scrollLeft = this.tableRef.scrollLeft - 300;\r\n    if (mode === 'right')\r\n      this.tableRef.scrollLeft = this.tableRef.scrollLeft + 300;\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { season, courts, date } = this.state;\r\n\r\n    if (!season)\r\n      return <Paper style={{ padding: '1rem' }} className=\"container\">\r\n        <Typography variant=\"headline\" align=\"center\" color=\"secondary\">Няма текущ сезон</Typography>\r\n      </Paper>\r\n\r\n    return (\r\n      <UserService.WithApplicationMode>\r\n        {mode => <div className=\"container\">\r\n          <Paper style={{ padding: '1rem' }}>\r\n            <Typography align=\"center\" variant=\"headline\" gutterBottom={true}>\r\n              График - {date.format('DD.MM.YYYY')}\r\n            </Typography>\r\n            <Calendar\r\n              value={date}\r\n              onChange={date => {\r\n                this.setState({ date, shuffle: null });\r\n                this.getData(date);\r\n              }}\r\n            />\r\n\r\n            <Legend />\r\n            <div>\r\n              <Button variant=\"outlined\" color=\"primary\" size=\"small\"\r\n                style={{ marginRight: '.3rem' }}\r\n                onClick={() => this.getData(date)}\r\n              >\r\n                <ReplayIcon />\r\n                <span style={{ marginLeft: '.3rem' }}>Презареди</span>\r\n              </Button>\r\n\r\n              {mode == ApplicationMode.ADMIN\r\n                && <React.Fragment>\r\n                  {this.state.shuffle\r\n                    && <React.Fragment>\r\n                      <ConfirmationDialog\r\n                        title=\"Разместване на резервации\"\r\n                        body={<Typography>Сигурни ли сте че искате да направите разместването?</Typography>}\r\n                        onAccept={() => this.shuffle()}\r\n                      >\r\n                        <Button variant=\"contained\" color=\"primary\">\r\n                          Запис\r\n                      </Button>\r\n                      </ConfirmationDialog>\r\n                      <Button variant=\"outlined\" color=\"primary\"\r\n                        style={{ marginLeft: '.3rem' }}\r\n                        onClick={() => this.setState({ shuffle: null, shuffleErrors: null })}\r\n                      >\r\n                        Отказ\r\n                      </Button>\r\n                    </React.Fragment>}\r\n                  {!this.state.shuffle && <Button variant=\"outlined\" color=\"primary\" size=\"small\" onClick={() => this.setState({ shuffle: [] })}>\r\n                    <ShuffleIcon />\r\n                    Разместване\r\n                  </Button>}\r\n                  <div style={{ position: 'relative' }}>\r\n                    <AsyncSelect\r\n                      label=\"Сезон\"\r\n                      disableClear={true}\r\n                      disableSearch={true}\r\n                      value={season}\r\n                      query=\"seasons\"\r\n                      formatOptionLabel={(option) => <Typography component=\"span\">\r\n                        {option.name}\r\n                      </Typography>}\r\n                      onChange={season => this.setState({ season })}\r\n                    />\r\n                  </div>\r\n\r\n                </React.Fragment>}\r\n            </div>\r\n\r\n            {this.state.shuffleErrors\r\n              && <div style={{ margin: '1rem 0', color: 'red' }}>\r\n                <span><em>{ErrorTexts[this.state.shuffleErrors.message]}</em></span>\r\n              </div>}\r\n\r\n\r\n\r\n            <div style={{ overflowX: 'auto', scrollBehavior: 'smooth' }} ref={ref => this.tableRef = ref}>\r\n\r\n              <div ref={ref => this.btnContainerRef = ref} style={{ display: 'none' }}>\r\n                <div className={classes.scrollLeft} onClick={() => this.scroll('left')} >\r\n                  <ChevronLeftIcon />\r\n                </div>\r\n\r\n                <div className={classes.scrollRight} onClick={() => this.scroll('right')}>\r\n                  <ChevronRightIcon />\r\n                </div>\r\n              </div>\r\n\r\n              <Table style={{ minWidth: '600px' }} >\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell padding=\"none\" style={{ textAlign: 'center' }}>Час\\Корт</TableCell>\r\n                    {courts.map(court => {\r\n                      return (\r\n                        <TableCell\r\n                          padding=\"none\"\r\n                          style={{ textAlign: 'center' }}\r\n                          key={court.id}\r\n                        >\r\n                          {court.name}\r\n                        </TableCell>\r\n                      );\r\n                    })}\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {getRange(season.workingHoursStart, season.workingHoursEnd - 1).map(hour => {\r\n                    return (\r\n                      <TableRow key={hour}>\r\n                        <TableCell padding=\"none\"\r\n                          classes={{\r\n                            root: classes.hours\r\n                          }}\r\n                        >\r\n                          {getHour(hour)}\r\n                        </TableCell>\r\n\r\n                        {courts.map(court => {\r\n                          if (!this.state.shuffle)\r\n                            return (\r\n                              <Reservation\r\n                                mode={mode}\r\n                                key={court.id}\r\n                                season={this.state.season}\r\n                                reservation={this.getReservation(hour, court)}\r\n                                onChange={_ => this.getData(date)}\r\n                              />\r\n                            );\r\n                          else\r\n                            return (\r\n                              <ShuffleItem\r\n                                key={court.id}\r\n                                shuffle={this.state.shuffle}\r\n                                reservation={this.getReservation(hour, court)}\r\n                                onSelect={(e) => this.shuffleOnSelect(e)}\r\n                                onUnselect={(e) => this.shuffleOnUnselect(e)}\r\n                              />\r\n                            )\r\n                        })}\r\n                      </TableRow>\r\n                    );\r\n                  })}\r\n                </TableBody>\r\n              </Table>\r\n            </div>\r\n          </Paper>\r\n        </div>}\r\n      </UserService.WithApplicationMode>\r\n    );\r\n  }\r\n}\r\n\r\nfunction getRange(start, end) {\r\n  if (!start || !end)\r\n    return [];\r\n  return [...new Array(end - start + 1).keys()].map(e => e + start);\r\n}\r\n\r\nconst ErrorTexts = {\r\n  'invalid': 'Моля изберете две полета за резервация',\r\n  'invalidTime': 'Не може да резмествате вече минали резервации'\r\n};\r\n\r\nexport default withStyles(styles)(Schedule);","import React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport { getHour } from '../../utils';\r\n\r\nconst styles = () => ({\r\n  card: {\r\n    width: '250px',\r\n    margin: '1rem',\r\n    padding: '1rem',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between'\r\n  },\r\n  cardActions: {\r\n    display: 'flex',\r\n    justifyContent: 'flex-start'\r\n  },\r\n  cardContent: {\r\n    paddingBottom: '0'\r\n  }\r\n});\r\n\r\nclass CourtItem extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      mode: 'view'\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.props.court.id)\r\n      this.setState({ mode: 'create' });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.court != this.props.court)\r\n      if (!this.props.court.id)\r\n        this.setState({ mode: 'create' });\r\n  }\r\n\r\n  handleCancel() {\r\n    if (this.state.mode == 'edit')\r\n      this.setState({ mode: 'view' });\r\n    else this.props.onCreateCancel();\r\n  }\r\n\r\n  render() {\r\n    const { mode } = this.state;\r\n    const { classes, court } = this.props;\r\n\r\n    if (mode != 'view')\r\n      return <CourtEdit\r\n        mode={mode}\r\n        court={court}\r\n        onChange={model => {\r\n          this.setState({ mode: 'view' });\r\n          this.props.onChange(model);\r\n        }}\r\n        onCancel={() => this.handleCancel()}\r\n      />;\r\n    else\r\n      return (\r\n        <Card classes={{ root: classes.card }} style={{ opacity: court.isActive ? 1 : .5 }}>\r\n          <CardContent classes={{ root: classes.cardContent }}>\r\n            <Typography variant=\"title\" style={{ display: 'flex', alignItems: 'center' }}>\r\n              {court.name}\r\n              {!court.isActive && <Typography variant=\"caption\">(неактивен)</Typography>}\r\n            </Typography>\r\n            <Typography variant=\"caption\">{court.info}</Typography>\r\n            <Typography variant=\"subheading\" style={{ paddingRight: '1rem' }}>\r\n              Работно време:\r\n              <Typography>{getHour(court.workingHoursStart)} - {getHour(court.workingHoursEnd)}</Typography>\r\n            </Typography>\r\n          </CardContent>\r\n          <CardActions classes={{ root: classes.cardActions }}>\r\n            <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.setState({ mode: 'edit' })}>Промяна</Button>\r\n          </CardActions>\r\n        </Card >\r\n      );\r\n  }\r\n}\r\n\r\nclass CourtEdit extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: null,\r\n      name: '',\r\n      info: '',\r\n      isActive: true,\r\n      workingHoursStart: '',\r\n      workingHoursEnd: ''\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState(this.props.court);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.court != this.props.court)\r\n      this.setState(this.props.court);\r\n  }\r\n\r\n  cancel() {\r\n    this.setState(this.props.court);\r\n    this.props.onCancel();\r\n  }\r\n\r\n  save() {\r\n    if (this.state.id)\r\n      return QueryService\r\n        .post(`/schedule/courts/${this.state.id}`, this.state)\r\n        .then(e => this.props.onChange(e))\r\n        .catch(err => console.log('ERR:', err));\r\n    else\r\n      return QueryService\r\n        .post(`/schedule/courts`, this.state)\r\n        .then(e => this.props.onChange(e))\r\n        .catch(err => console.log('ERR:', err));\r\n  }\r\n\r\n  render() {\r\n    const { mode } = this.props;\r\n\r\n    return (\r\n      <Paper style={{ flexBasis: '250px', display: 'flex', flexDirection: 'column', padding: '2rem' }}>\r\n        {mode == 'create' && <Typography align=\"center\" variant=\"headline\">Нов корт</Typography>}\r\n        {mode == 'edit' && <Typography align=\"center\" variant=\"headline\">Промяна на корт</Typography>}\r\n\r\n\r\n        <FormControlLabel\r\n          control={\r\n            <Switch\r\n              checked={this.state.isActive}\r\n              onChange={e => this.setState({ isActive: e.target.value === 'true' })}\r\n              value={this.state.isActive ? 'false' : 'true'}\r\n              color=\"primary\"\r\n            />\r\n          }\r\n          label=\"Активен\"\r\n        />\r\n\r\n        <TextField\r\n          id=\"name\"\r\n          label=\"Наименование\"\r\n          value={this.state.name}\r\n          onChange={(e) => this.setState({ name: e.target.value })}\r\n        />\r\n        <TextField\r\n          id=\"info\"\r\n          label=\"Информация\"\r\n          multiline\r\n          rowsMax=\"4\"\r\n          value={this.state.info}\r\n          onChange={(e) => this.setState({ info: e.target.value })}\r\n        />\r\n\r\n        <TextField\r\n          id=\"workingHoursStart\"\r\n          label=\"Работно време ОТ\"\r\n          type=\"number\"\r\n          value={this.state.workingHoursStart}\r\n          onChange={(e) => this.setState({ workingHoursStart: e.target.value })}\r\n        />\r\n\r\n        <TextField\r\n          id=\"workingHoursEnd\"\r\n          label=\"Работно време ДО\"\r\n          type=\"number\"\r\n          value={this.state.workingHoursEnd}\r\n          onChange={(e) => this.setState({ workingHoursEnd: e.target.value })}\r\n        />\r\n\r\n        {this.props.mode == 'create' && <div style={{ margin: '1rem 0 0 0' }}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem .5rem 0 0' }}\r\n            onClick={() => this.save()}\r\n          >\r\n            Създаване\r\n          </Button>\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem 0 0 0' }}\r\n            onClick={() => this.cancel()}\r\n          >\r\n            Отказ\r\n          </Button>\r\n        </div>}\r\n\r\n        {this.props.mode == 'edit' && <div>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem .5rem 0 0' }}\r\n            onClick={() => this.save()}\r\n          >\r\n            Запис\r\n          </Button>\r\n\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem 0 0 0' }}\r\n            onClick={() => this.cancel()}\r\n          >\r\n            Отказ\r\n          </Button>\r\n        </div>}\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(CourtItem);","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport CourtItem from './CourtItem';\r\n\r\nconst styles = () => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'center'\r\n  }\r\n});\r\n\r\nclass Courts extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      courts: []\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    return QueryService\r\n      .get(`/schedule/courts`)\r\n      .then(e => this.setState({ courts: e }));\r\n  }\r\n\r\n  updateModel(model, index) {\r\n    const courts = this.state.courts;\r\n    courts[index] = model;\r\n    this.setState({ courts });\r\n  }\r\n\r\n  addCourt() {\r\n    const courts = this.state.courts;\r\n    if (courts.length > 0 && !courts[0].id)\r\n      return;\r\n    const court = {\r\n      info: '',\r\n      name: '',\r\n      isActive: true,\r\n      workingHoursStart: '',\r\n      workingHoursEnd: ''\r\n    };\r\n\r\n\r\n    courts.unshift(court);\r\n\r\n    this.setState({ courts: courts });\r\n  }\r\n\r\n  removeCourt(index) {\r\n    const courts = this.state.courts;\r\n    courts.splice(index, 1);\r\n    this.setState({ courts: courts });\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <Button variant=\"contained\" size=\"medium\" color=\"primary\" onClick={() => this.addCourt()} style={{ marginBottom: '.5rem' }}>\r\n          Добави корт\r\n        </Button>\r\n        <div className={classes.root}>\r\n          {this.state.courts.map((court, index) => {\r\n            return (\r\n              <CourtItem\r\n                key={court.id || 0}\r\n                court={court}\r\n                onChange={model => this.updateModel(model, index)}\r\n                onCreateCancel={() => this.removeCourt(index)}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(Courts);","import React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport DatePicker from 'material-ui-pickers/DatePicker';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport ConfirmationDialog from '../../components/ConfirmationDialog';\r\nimport QueryService from '../../services/query.service';\r\nimport { getHour } from '../../utils';\r\n\r\nconst styles = () => ({\r\n  card: {\r\n    width: '250px',\r\n    margin: '1rem',\r\n    padding: '1rem',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between'\r\n  },\r\n  cardActions: {\r\n    display: 'flex',\r\n    justifyContent: 'flex-start'\r\n  },\r\n  cardContent: {\r\n    paddingBottom: '0'\r\n  }\r\n});\r\n\r\nclass SeasonItem extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      mode: 'view',\r\n      loading: false,\r\n      error: null\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.props.season.id)\r\n      this.setState({ mode: 'create' });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.season != this.props.season)\r\n      if (!this.props.season.id)\r\n        this.setState({ mode: 'create' });\r\n  }\r\n\r\n  handleCancel() {\r\n    if (this.state.mode == 'edit')\r\n      this.setState({ mode: 'view' });\r\n    else this.props.onCreateCancel();\r\n  }\r\n\r\n  onDelete() {\r\n    this.setState({ loading: true });\r\n\r\n    QueryService.delete(`/schedule/seasons/${this.props.season.id}`)\r\n      .then(() => {\r\n        this.setState({ loading: false });\r\n        this.props.onDelete()\r\n      })\r\n      .catch(error => {\r\n        this.setState({ loading: false, error });\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { mode } = this.state;\r\n    const { classes, season } = this.props;\r\n\r\n    if (mode != 'view')\r\n      return <SeasonEdit\r\n        mode={mode}\r\n        season={season}\r\n        onChange={model => {\r\n          this.setState({ mode: 'view' });\r\n          this.props.onChange(model);\r\n        }}\r\n        onCancel={() => this.handleCancel()}\r\n      />;\r\n    else\r\n      return (\r\n        <Card classes={{ root: classes.card }}>\r\n          <CardContent classes={{ root: classes.cardContent }}>\r\n            <Typography variant=\"title\" style={{ display: 'flex', alignItems: 'center' }}>\r\n              {season.name}\r\n            </Typography>\r\n            <Typography variant=\"caption\">{season.info}</Typography>\r\n            <Typography style={{ margin: '.3rem 0' }}>\r\n              {new Date(season.seasonStart).toLocaleDateString()} - {new Date(season.seasonEnd).toLocaleDateString()}\r\n            </Typography>\r\n            <Typography variant=\"subheading\" style={{ paddingRight: '1rem' }}>\r\n              Работно време:\r\n              <Typography>{getHour(season.workingHoursStart)} - {getHour(season.workingHoursEnd)}</Typography>\r\n            </Typography>\r\n          </CardContent>\r\n          <CardActions classes={{ root: classes.cardActions }}>\r\n            <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.setState({ mode: 'edit' })}>Промяна</Button>\r\n            <ConfirmationDialog\r\n              title=\"Изтриване на сезон\"\r\n              body={\r\n                <React.Fragment>\r\n                  <Typography>Сигурни ли сте че искате да изтриете сезон \"{season.name}\"</Typography>\r\n                  <Typography variant=\"caption\">Това ще доведе до изтриване на всички данни за резервации,\r\n                  плащания на часове и абонаменти свързани с този сезон.\r\n                  Информацията която ще бъде изтрита няма да може да бъде възвърната</Typography>\r\n                </React.Fragment>\r\n              }\r\n              onAccept={() => this.onDelete()}\r\n            >\r\n              {!this.state.loading && <Button variant=\"contained\" color=\"secondary\" size=\"small\" >Изтриване</Button>}\r\n              {this.state.loading && <CircularProgress color=\"secondary\" />}\r\n            </ConfirmationDialog>\r\n          </CardActions>\r\n          <Snackbar\r\n            anchorOrigin={{\r\n              vertical: 'bottom',\r\n              horizontal: 'left',\r\n            }}\r\n            open={Boolean(this.state.error)}\r\n            autoHideDuration={6000}\r\n            onClose={() => this.setState({ error: null })}\r\n            message={typeof this.state.error === 'string' ? <span>{this.state.error}</span> : \"Възникна грешка\"}\r\n            action={[\r\n              <IconButton\r\n                key=\"close\"\r\n                aria-label=\"close\"\r\n                color=\"inherit\"\r\n                onClick={() => this.setState({ error: null })}\r\n              >\r\n                <CloseIcon />\r\n              </IconButton>\r\n            ]}\r\n          />\r\n        </Card >\r\n      );\r\n  }\r\n}\r\n\r\nclass SeasonEdit extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: null,\r\n      name: '',\r\n      info: '',\r\n      seasonStart: null,\r\n      seasonEnd: null,\r\n      workingHoursStart: '',\r\n      workingHoursEnd: '',\r\n      isActive: true\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState(this.props.season);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.season != this.props.season)\r\n      this.setState(this.props.season);\r\n  }\r\n\r\n  cancel() {\r\n    this.setState(this.props.season);\r\n    this.props.onCancel();\r\n  }\r\n\r\n  save() {\r\n    if (this.state.id)\r\n      return QueryService\r\n        .post(`/schedule/seasons/${this.state.id}`, this.state)\r\n        .then(e => this.props.onChange(e))\r\n        .catch(err => console.log('ERR:', err));\r\n    else\r\n      return QueryService\r\n        .post(`/schedule/seasons`, this.state)\r\n        .then(e => this.props.onChange(e))\r\n        .catch(err => console.log('ERR:', err));\r\n  }\r\n\r\n  render() {\r\n    const { mode } = this.props;\r\n\r\n    return (\r\n      <Paper style={{ flexBasis: '250px', display: 'flex', flexDirection: 'column', padding: '2rem' }}>\r\n        {mode == 'create' && <Typography align=\"center\" variant=\"headline\">Нов сезон</Typography>}\r\n        {mode == 'edit' && <Typography align=\"center\" variant=\"headline\">Промяна на сезон</Typography>}\r\n\r\n        <TextField\r\n          id=\"name\"\r\n          label=\"Наименование\"\r\n          value={this.state.name}\r\n          onChange={(e) => this.setState({ name: e.target.value })}\r\n        />\r\n        <TextField\r\n          id=\"info\"\r\n          label=\"Информация\"\r\n          multiline\r\n          rowsMax=\"4\"\r\n          value={this.state.info}\r\n          onChange={(e) => this.setState({ info: e.target.value })}\r\n        />\r\n\r\n        <DatePicker\r\n          autoOk\r\n          label=\"Начало на сезона\"\r\n          labelFunc={(date) => date ? new Date(date).toLocaleDateString() : ''}\r\n          clearable\r\n          fullWidth={true}\r\n          value={this.state.seasonStart}\r\n          onChange={value => this.setState({ seasonStart: value })}\r\n        />\r\n\r\n        <DatePicker\r\n          autoOk\r\n          label=\"Край на сезона\"\r\n          labelFunc={(date) => date ? new Date(date).toLocaleDateString() : ''}\r\n          clearable\r\n          fullWidth={true}\r\n          value={this.state.seasonEnd}\r\n          onChange={value => this.setState({ seasonEnd: value })}\r\n        />\r\n\r\n        <TextField\r\n          id=\"workingHoursStart\"\r\n          label=\"Работно време ОТ\"\r\n          type=\"number\"\r\n          value={this.state.workingHoursStart}\r\n          onChange={(e) => this.setState({ workingHoursStart: e.target.value })}\r\n        />\r\n\r\n        <TextField\r\n          id=\"workingHoursEnd\"\r\n          label=\"Работно време ДО\"\r\n          type=\"number\"\r\n          value={this.state.workingHoursEnd}\r\n          onChange={(e) => this.setState({ workingHoursEnd: e.target.value })}\r\n        />\r\n\r\n        {this.props.mode == 'create' && <div style={{ margin: '1rem 0 0 0' }}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem .5rem 0 0' }}\r\n            onClick={() => this.save()}\r\n          >\r\n            Създаване\r\n          </Button>\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem 0 0 0' }}\r\n            onClick={() => this.cancel()}\r\n          >\r\n            Отказ\r\n          </Button>\r\n        </div>}\r\n\r\n        {this.props.mode == 'edit' && <div>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem .5rem 0 0' }}\r\n            onClick={() => this.save()}\r\n          >\r\n            Запис\r\n          </Button>\r\n\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            style={{ margin: '.5rem 0 0 0' }}\r\n            onClick={() => this.cancel()}\r\n          >\r\n            Отказ\r\n          </Button>\r\n        </div>}\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(SeasonItem);","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport SeasonItem from './SeasonItem';\r\nimport QueryService from '../../services/query.service';\r\n\r\nconst styles = () => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'center'\r\n  }\r\n});\r\n\r\nclass Seasons extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      seasons: []\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    return QueryService\r\n      .get(`/schedule/seasons`)\r\n      .then(e => this.setState({ seasons: e }));\r\n  }\r\n\r\n  updateModel(model, index) {\r\n    const seasons = this.state.seasons;\r\n    seasons[index] = model;\r\n    this.setState({ seasons });\r\n  }\r\n\r\n  addSeason() {\r\n    const seasons = this.state.seasons;\r\n    if (seasons.length > 0 && !seasons[0].id)\r\n      return;\r\n\r\n    const season = {\r\n      info: '',\r\n      name: '',\r\n      workingHoursStart: '',\r\n      workingHoursEnd: ''\r\n    };\r\n\r\n    seasons.unshift(season);\r\n    this.setState({ seasons });\r\n  }\r\n\r\n  removeSeason(index) {\r\n    const seasons = this.state.seasons;\r\n    seasons.splice(index, 1);\r\n    this.setState({ seasons });\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <Button variant=\"contained\" size=\"medium\" color=\"primary\" onClick={() => this.addSeason()} style={{ marginBottom: '.5rem' }}>\r\n          Добави сезон\r\n        </Button>\r\n        <div className={classes.root}>\r\n          {this.state.seasons.map((season, index) => {\r\n            return (\r\n              <SeasonItem\r\n                key={season.id || 0}\r\n                season={season}\r\n                onChange={model => this.updateModel(model, index)}\r\n                onCreateCancel={() => this.removeSeason(index)}\r\n                onDelete={() => this.removeSeason(index)}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(Seasons);","import React from 'react';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\r\n\r\nexport class SortableTableCell extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      active: false,\r\n      direction: 'desc'\r\n    };\r\n\r\n    this.handleClick = () => {\r\n      let { direction, active } = this.state;\r\n\r\n      if (!active)\r\n        active = true;\r\n      else if (direction === 'desc')\r\n        direction = 'asc';\r\n      else\r\n        direction = 'desc';\r\n\r\n\r\n      this.setState({ direction, active });\r\n      this.props.orderHandler(direction);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <TableCell onClick={this.handleClick}>\r\n        <TableSortLabel\r\n          active={this.state.active}\r\n          direction={this.state.direction}\r\n        >\r\n          {this.props.children}\r\n        </TableSortLabel>\r\n      </TableCell>\r\n    );\r\n  }\r\n}\r\n\r\nexport function orderData(data, ordering) {\r\n  if (!ordering)\r\n    return;\r\n\r\n  if (ordering[1] === 'asc')\r\n    data.sort((a, b) => b[ordering[0]] - a[ordering[0]]);\r\n  else\r\n    data.sort((a, b) => a[ordering[0]] - b[ordering[0]]);\r\n}\r\n\r\nexport function transformDailyData(data, classifier) {\r\n  const reduced = data\r\n    .reduce((acc, curr) => acc.concat(curr.payments), []);\r\n\r\n  const result = {};\r\n\r\n  Object.keys(classifier).forEach(key => {\r\n    result[classifier[key]] = 0\r\n  });\r\n\r\n  reduced.forEach(e => {\r\n    result[e.type]++\r\n  });\r\n\r\n  return Object.keys(result).map(key => {\r\n    return {\r\n      key,\r\n      count: result[key]\r\n    }\r\n  });\r\n}\r\n\r\nexport function transformMonthlyData(data, classifier) {\r\n  const users = {};\r\n\r\n  data.forEach(e => {\r\n    if (!users[e.customerId]) {\r\n      users[e.customerId] = {\r\n        customer: e.customer,\r\n        payments: {}\r\n      };\r\n\r\n      Object.keys(classifier).forEach(key => {\r\n        users[e.customerId].payments[classifier[key]] = 0\r\n      });\r\n    }\r\n\r\n    e.payments.forEach(payment => users[e.customerId].payments[payment.type]++)\r\n  });\r\n\r\n  return Object.keys(users).map(key => {\r\n    return {\r\n      user: users[key].customer,\r\n      payments: users[key].payments,\r\n      totalCount: Object.keys(users[key].payments).reduce((acc, pKey) => acc + users[key].payments[pKey], 0)\r\n    }\r\n  });\r\n}\r\n\r\nexport function transformToUserPlayedHours(data) {\r\n  const users = {};\r\n\r\n  data.forEach(e => {\r\n    if (!e.customerId)\r\n      return;\r\n\r\n    if (!users[e.customerId]) {\r\n      users[e.customerId] = {\r\n        customer: e.customer,\r\n        totalHours: 0\r\n      };\r\n    }\r\n\r\n    users[e.customerId].totalHours++;\r\n  });\r\n\r\n  return Object.keys(users).map(key => users[key]);\r\n}\r\n\r\nexport function transformByClassifier(data, classifier, customFn = () => null) {\r\n  const result = {};\r\n  const customValue = {};\r\n\r\n  Object.keys(classifier).forEach(key => {\r\n    result[classifier[key]] = 0\r\n  });\r\n\r\n  data.forEach(e => {\r\n    result[e.type]++;\r\n    customValue[e.type] = customFn(customValue[e.type], e);\r\n  });\r\n\r\n  return Object.keys(result).map(key => {\r\n    return {\r\n      key,\r\n      count: result[key],\r\n      custom: customValue[key]\r\n    }\r\n  });\r\n}","import React from 'react';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableCell from '@material-ui/core/TableCell';\r\n\r\nimport { l10n_text } from '../../components/L10n';\r\nimport { SortableTableCell, orderData, transformToUserPlayedHours, transformByClassifier } from './utils';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nexport class UserPlayedHours extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      order: null\r\n    };\r\n\r\n    this.handleOrder = (prop) => (direction) => {\r\n      this.setState({ order: [prop, direction] });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const data = transformToUserPlayedHours(this.props.data);\r\n    orderData(data, this.state.order);\r\n\r\n    return (\r\n      <Table>\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell style={{ width: '50%' }}>Потребител</TableCell>\r\n            <SortableTableCell orderHandler={this.handleOrder('totalHours')}>\r\n              Изиграни часове\r\n            </SortableTableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {data.map(e => {\r\n            return (\r\n              <TableRow key={e.customer.id}>\r\n                <TableCell>\r\n                  <Typography>\r\n                    {e.customer.name}\r\n                    <Typography variant=\"caption\">{e.customer.email}</Typography>\r\n                  </Typography>\r\n                </TableCell>\r\n                <TableCell>{e.totalHours}</TableCell>\r\n              </TableRow>\r\n            );\r\n          })}\r\n          <TableRow>\r\n            <TableCell>ОБЩО</TableCell>\r\n            <TableCell>{data.reduce((acc, curr) => acc + curr.totalHours, 0)}</TableCell>\r\n          </TableRow>\r\n        </TableBody>\r\n      </Table>\r\n    );\r\n  }\r\n}\r\n\r\nexport class StatisticByClassifier extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      order: null\r\n    };\r\n\r\n    this.handleOrder = (prop) => (direction) => {\r\n      this.setState({ order: [prop, direction] });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { data, classifier, translation, label1, label2, customFn, customValueSuffix } = this.props;\r\n    const transformed = transformByClassifier(data, classifier, customFn || (() => null));\r\n    orderData(transformed, this.state.order);\r\n\r\n    return (\r\n      <Table>\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell style={{ width: '50%' }}>{label1}</TableCell>\r\n            <SortableTableCell orderHandler={this.handleOrder('count')}>\r\n              {label2}\r\n            </SortableTableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {transformed.map(e => {\r\n            return (\r\n              <TableRow key={e.key}>\r\n                <TableCell>{l10n_text(e.key, translation)}</TableCell>\r\n                <TableCell>\r\n                  {e.count}\r\n                  {e.custom && <span style={{ marginLeft: '.3rem' }}>({e.custom}{customValueSuffix})</span>}\r\n                </TableCell>\r\n              </TableRow>\r\n            );\r\n          })}\r\n          <TableRow>\r\n            <TableCell>ОБЩО</TableCell>\r\n            <TableCell>{transformed.reduce((acc, curr) => acc + curr.count, 0)}</TableCell>\r\n          </TableRow>\r\n        </TableBody>\r\n      </Table>\r\n    );\r\n  }\r\n}\r\n","import moment from 'moment';\r\nimport React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\n\r\nimport Calendar from '../../components/calendar/Calendar';\r\nimport QueryService from '../../services/query.service';\r\nimport { StatisticsType, ReservationPayment, ReservationType } from '../../enums';\r\nimport { UserPlayedHours, StatisticByClassifier } from './MonthlyStatistics';\r\n\r\nclass StatisticsRoot extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      date: moment().startOf('date'),\r\n      type: StatisticsType.MONTHLY,\r\n      data: []\r\n    };\r\n\r\n    this.handleCalendarChange = (date) => {\r\n      this.setState({ date });\r\n      this.getData(date, this.state.type);\r\n    }\r\n\r\n    this.handleStatisticsChange = (_, value) => {\r\n      this.setState({ type: value });\r\n      this.getData(this.state.date, value);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData(this.state.date, this.state.type);\r\n  }\r\n\r\n  getData(date, type) {\r\n    return QueryService\r\n      .post('/statistics', { date: date.format('YYYY-MM-DD'), type })\r\n      .then(data => this.setState({ data }));\r\n  }\r\n\r\n  render() {\r\n    const { date, type, data } = this.state;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <Paper style={{ padding: '1rem' }}>\r\n          <Typography></Typography>\r\n          <Typography align=\"center\" variant=\"headline\" gutterBottom={true}>\r\n            Справки\r\n          </Typography>\r\n          <Calendar\r\n            emitDateOnAnyChange={true}\r\n            value={date}\r\n            onChange={this.handleCalendarChange}\r\n          />\r\n\r\n          <Tabs value={type} onChange={this.handleStatisticsChange} textColor=\"primary\">\r\n            <Tab value={StatisticsType.MONTHLY} label=\"Месечна\"></Tab>\r\n            <Tab value={StatisticsType.DAILY} label=\"Дневна\"></Tab>\r\n          </Tabs>\r\n\r\n          {type == StatisticsType.MONTHLY && <div style={{ margin: '2rem 0' }}>\r\n            <Typography variant=\"subheading\">Справка по потребители</Typography>\r\n            <UserPlayedHours data={data} />\r\n          </div>}\r\n\r\n          {type == StatisticsType.MONTHLY && <div style={{ margin: '2rem 0' }}>\r\n            <Typography variant=\"subheading\">Справка по вид резервация</Typography>\r\n            <StatisticByClassifier\r\n              label1=\"Вид резервация\"\r\n              label2=\"Регистрирани резервации\"\r\n              classifier={ReservationType}\r\n              translation=\"ReservationType\"\r\n              data={data} />\r\n          </div>}\r\n\r\n          <div style={{ margin: '2rem 0' }}>\r\n            <Typography variant=\"subheading\">Справка по регистрирани плащания</Typography>\r\n            <StatisticByClassifier\r\n              label1=\"Метод на плащане\"\r\n              label2=\"Регистрирани плащания\"\r\n              classifier={ReservationPayment}\r\n              translation=\"ReservationPayment\"\r\n              customFn={paymentsAmountAccumulator}\r\n              customValueSuffix=\" лв.\"\r\n              data={reduceToPayments(data)} />\r\n          </div>\r\n        </Paper>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction reduceToPayments(data) {\r\n  return data.reduce((acc, curr) => acc.concat(curr.payments), []);\r\n}\r\n\r\nfunction paymentsAmountAccumulator(current, payment) {\r\n  if (payment.amount)\r\n    return (current || 0) + parseFloat(payment.amount);\r\n  else return current;\r\n}\r\n\r\nexport default StatisticsRoot;","import React from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport DatePicker from 'material-ui-pickers/DatePicker';\r\n\r\nimport EnumSelect from '../components/EnumSelect';\r\nimport { Gender, CourtType, PlayStyle, BackhandType } from '../enums';\r\n\r\nclass UserModel {\r\n  constructor(props) {\r\n    this.UserAccountData = this.UserAccountData.bind(this);\r\n    this.UserAccountSecondaryData = this.UserAccountSecondaryData.bind(this);\r\n    this.UserPlayerMainData = this.UserPlayerMainData.bind(this);\r\n    this.UserPlayerSecondaryData = this.UserPlayerSecondaryData.bind(this);\r\n  }\r\n\r\n  get() {\r\n    return {\r\n      email: '',\r\n      password: '',\r\n      confirmPassword: '',\r\n      firstName: '',\r\n      lastName: '',\r\n      telephone: '',\r\n      gender: '',\r\n      birthDate: null,\r\n      startedPlaying: '',\r\n      playStyle: '',\r\n      courtType: '',\r\n      backhandType: '',\r\n      reservationDebt: 0,\r\n      subscriptionDebt: 0\r\n    };\r\n  }\r\n\r\n  getErrorsModel() {\r\n    return {\r\n      email: [],\r\n      password: [],\r\n      confirmPassword: [],\r\n      firstName: [],\r\n      lastName: [],\r\n      telephone: [],\r\n      gender: [],\r\n      birthDate: [],\r\n      startedPlaying: [],\r\n      playStyle: [],\r\n      courtType: [],\r\n      backhandType: [],\r\n      reservationDebt: [],\r\n      subscriptionDebt: []\r\n    };\r\n  }\r\n\r\n  composeErrors(errors, name) {\r\n    if (errors[name].length > 0)\r\n      return <span>\r\n        {errors[name].map((err, i) => {\r\n          return (\r\n            <span\r\n              key={i}\r\n              style={{ display: 'block' }}\r\n            >\r\n              {UET[name][err]}\r\n            </span>\r\n          );\r\n        })}\r\n      </span>\r\n    else\r\n      return null;\r\n  }\r\n\r\n  UserAccountData(props) {\r\n    const { user, onChange, errors } = props;\r\n    return (\r\n      <React.Fragment>\r\n        <TextField\r\n          id=\"email\"\r\n          label=\"Email\"\r\n          value={user.email}\r\n          required={true}\r\n          fullWidth={true}\r\n          error={errors.email.length > 0}\r\n          helperText={this.composeErrors(errors, 'email')}\r\n          onChange={onChange('email')}\r\n        />\r\n\r\n        {!user.id && <TextField\r\n          id=\"password\"\r\n          label=\"Парола\"\r\n          type=\"password\"\r\n          value={user.password}\r\n          required={true}\r\n          fullWidth={true}\r\n          error={errors.password.length > 0}\r\n          helperText={this.composeErrors(errors, 'password')}\r\n          onChange={onChange('password')}\r\n        />}\r\n\r\n        {!user.id && <TextField\r\n          id=\"confirmPassword\"\r\n          label=\"Повтори парола\"\r\n          type=\"password\"\r\n          value={user.confirmPassword}\r\n          required={true}\r\n          fullWidth={true}\r\n          error={errors.confirmPassword.length > 0}\r\n          helperText={this.composeErrors(errors, 'confirmPassword')}\r\n          onChange={onChange('confirmPassword')}\r\n        />}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  UserAccountSecondaryData(props) {\r\n    const { user, onChange, errors } = props;\r\n    return (\r\n      <React.Fragment>\r\n        <TextField\r\n          id=\"reservationDebt\"\r\n          label=\"Дължим брой часове\"\r\n          type=\"number\"\r\n          value={user.reservationDebt}\r\n          fullWidth={true}\r\n          error={errors.reservationDebt.length > 0}\r\n          helperText={this.composeErrors(errors, 'reservationDebt')}\r\n          onChange={onChange('reservationDebt')}\r\n        />\r\n\r\n        <TextField\r\n          id=\"reservationDebt\"\r\n          label=\"Дължим членски внос\"\r\n          type=\"number\"\r\n          value={user.subscriptionDebt}\r\n          fullWidth={true}\r\n          InputProps={{\r\n            endAdornment: <InputAdornment position=\"end\">Лв.</InputAdornment>\r\n          }}\r\n          error={errors.subscriptionDebt.length > 0}\r\n          helperText={this.composeErrors(errors, 'subscriptionDebt')}\r\n          onChange={onChange('subscriptionDebt')}\r\n        />\r\n\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  UserPlayerMainData(props) {\r\n    const { user, onChange, errors } = props;\r\n    return (\r\n      <React.Fragment>\r\n        <TextField\r\n          label=\"Име\"\r\n          value={user.firstName}\r\n          required={true}\r\n          fullWidth={true}\r\n          error={errors.firstName.length > 0}\r\n          helperText={this.composeErrors(errors, 'firstName')}\r\n          onChange={onChange('firstName')}\r\n        />\r\n\r\n        <TextField\r\n          label=\"Фамилия\"\r\n          value={user.lastName}\r\n          required={true}\r\n          fullWidth={true}\r\n          error={errors.lastName.length > 0}\r\n          helperText={this.composeErrors(errors, 'lastName')}\r\n          onChange={onChange('lastName')}\r\n        />\r\n\r\n        <TextField\r\n          label=\"Телефон\"\r\n          required={true}\r\n          fullWidth={true}\r\n          value={user.telephone}\r\n          error={errors.telephone.length > 0}\r\n          helperText={this.composeErrors(errors, 'telephone')}\r\n          onChange={onChange('telephone')}\r\n        />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  UserPlayerSecondaryData(props) {\r\n    const { user, onChange, errors } = props;\r\n    return (\r\n      <React.Fragment>\r\n        <DatePicker\r\n          autoOk\r\n          openToYearSelection\r\n          label=\"Дата на раждане\"\r\n          labelFunc={(date) => date ? new Date(date).toLocaleDateString() : ''}\r\n          clearable\r\n          fullWidth={true}\r\n          value={user.birthDate}\r\n          error={errors.birthDate.length > 0}\r\n          helperText={this.composeErrors(errors, 'birthDate')}\r\n          onChange={onChange('birthDate', true)}\r\n        />\r\n\r\n        <EnumSelect\r\n          label=\"Пол\"\r\n          value={user.gender}\r\n          error={errors.gender.length > 0}\r\n          errorText={this.composeErrors(errors, 'gender')}\r\n          onChange={onChange('gender')}\r\n          EnumValues={Gender}\r\n          EnumName=\"Gender\"\r\n          allowClear={true} />\r\n\r\n        <TextField\r\n          id=\"startedPlaying\"\r\n          label=\"Започнах да играя през\"\r\n          fullWidth={true}\r\n          value={user.startedPlaying}\r\n          error={errors.startedPlaying.length > 0}\r\n          helperText={this.composeErrors(errors, 'startedPlaying')}\r\n          onChange={onChange('startedPlaying')}\r\n          type=\"number\"\r\n        />\r\n\r\n        <EnumSelect\r\n          label=\"Играя със\"\r\n          value={user.playStyle}\r\n          error={errors.playStyle.length > 0}\r\n          errorText={this.composeErrors(errors, 'playStyle')}\r\n          onChange={onChange('playStyle')}\r\n          EnumValues={PlayStyle}\r\n          EnumName=\"PlayStyle\"\r\n          allowClear={true} />\r\n\r\n        <EnumSelect\r\n          label=\"Бекхенд\"\r\n          value={user.backhandType}\r\n          error={errors.backhandType.length > 0}\r\n          errorText={this.composeErrors(errors, 'backhandType')}\r\n          onChange={onChange('backhandType')}\r\n          EnumValues={BackhandType}\r\n          EnumName=\"BackhandType\"\r\n          allowClear={true} />\r\n\r\n        <EnumSelect\r\n          label=\"Любима настилка\"\r\n          value={user.courtType}\r\n          error={errors.courtType.length > 0}\r\n          errorText={this.composeErrors(errors, 'courtType')}\r\n          onChange={onChange('courtType')}\r\n          EnumValues={CourtType}\r\n          EnumName=\"CourtType\"\r\n          allowClear={true} />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\n//User Errors Transliteration\r\nconst UET = {\r\n  email: {\r\n    required: 'Задължително поле',\r\n    invalid: 'Невалиден имейл',\r\n    unique: 'Съществува потребител с такъв имейл'\r\n  },\r\n  password: {\r\n    required: 'Задължително поле',\r\n    short: 'Паролата трябва да бъде поне 6 символа'\r\n  },\r\n  confirmPassword: {\r\n    required: 'Задължително поле',\r\n    mismatch: 'Паролите не свъпадат'\r\n  },\r\n  firstName: {\r\n    required: 'Задължително поле',\r\n  },\r\n  lastName: {\r\n    required: 'Задължително поле',\r\n  },\r\n  telephone: {\r\n    required: 'Задължително поле',\r\n    invalid: 'Невалиден телефонен номер'\r\n  },\r\n  gender: {\r\n    required: 'Задължително поле',\r\n    invalid: 'Невалиден пол'\r\n  },\r\n  birthDate: {\r\n    invalid: 'Невалидна дата на раждане',\r\n    required: 'Задължително поле',\r\n  },\r\n  startedPlaying: {\r\n    invalid: 'Невалидна година',\r\n    future: 'Годината не може да е в бъдещето',\r\n    range: 'Годината не може да е преди датата на раждане'\r\n  },\r\n  playStyle: {\r\n    invalid: 'Невалидно поле'\r\n  },\r\n  courtType: {\r\n    invalid: 'Невалидно поле'\r\n  },\r\n  backhandType: {\r\n    invalid: 'Невалидно поле'\r\n  }\r\n};\r\n\r\nexport default new UserModel();","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../../services/query.service';\r\nimport UserModel from '../../users/user.model';\r\n\r\nclass UserDetailsModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: UserModel.get(),\r\n      errors: UserModel.getErrorsModel()\r\n    }\r\n\r\n    this.handleChange = (prop, custom = false) => (event) => {\r\n      let user = this.state.user;\r\n      user[prop] = (custom ? event : event.target.value);\r\n      this.setState({ user });\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.user)\r\n      this.setState({ user: this.props.user });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.user != this.props.user && this.props.user)\r\n      this.setState({ user: this.props.user, errors: UserModel.getErrorsModel() });\r\n  }\r\n\r\n  save() {\r\n    const { user } = this.state;\r\n\r\n    if (user.id)\r\n      return QueryService\r\n        .post(`/users/${user.id}`, user)\r\n        .then(_ => this.props.onChange())\r\n        .catch(err => this.setState({ errors: err }));\r\n    else\r\n      return QueryService\r\n        .post(`/users`, user)\r\n        .then(_ => this.props.onChange())\r\n        .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  render() {\r\n    const { isOpen, onClose, classes, fullScreen } = this.props;\r\n    const { user, errors } = this.state;\r\n    if (!this.props.user)\r\n      return null;\r\n\r\n    return (\r\n      <Dialog\r\n        open={isOpen}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        classes={{ paper: classes.root }}\r\n      >\r\n        <DialogTitle>\r\n          <DialogContentText variant=\"headline\">\r\n            {user.name || 'Нов потребител'}\r\n          </DialogContentText>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <FormControlLabel\r\n            control={\r\n              <Switch\r\n                color=\"primary\"\r\n                checked={user.isActive}\r\n                onClick={() => this.handleChange('isActive', true)(!user.isActive)}\r\n              />\r\n            }\r\n            label=\"Активен\"\r\n          />\r\n\r\n          <FormControlLabel\r\n            control={\r\n              <Switch\r\n                color=\"primary\"\r\n                checked={user.isTrainer}\r\n                onClick={() => this.handleChange('isTrainer', true)(!user.isTrainer)}\r\n              />\r\n            }\r\n            label=\"Треньор\"\r\n          />\r\n\r\n          <FormControlLabel\r\n            control={\r\n              <Switch\r\n                color=\"primary\"\r\n                checked={user.isTournamentAdmin}\r\n                onClick={() => this.handleChange('isTournamentAdmin', true)(!user.isTournamentAdmin)}\r\n              />\r\n            }\r\n            label=\"Турнири\"\r\n          />\r\n\r\n          <UserModel.UserAccountData user={user} onChange={this.handleChange} errors={errors} />\r\n          <UserModel.UserPlayerMainData user={user} onChange={this.handleChange} errors={errors} />\r\n\r\n          <Typography\r\n            style={{ margin: '1rem 0 .3rem 0' }}\r\n            variant=\"subheading\"\r\n            color=\"primary\">Допълнителна информация за акаунт</Typography>\r\n          <UserModel.UserAccountSecondaryData user={user} onChange={this.handleChange} errors={errors} />\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.save()}>\r\n            Запис\r\n          </Button>\r\n          <Button variant=\"outlined\" color=\"primary\" className={classes.btn} onClick={onClose}>\r\n            Отказ\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(UserDetailsModal)\r\n);","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport UserService from '../../services/user.service';\r\nimport L10n from '../../components/L10n';\r\nimport QueryService from '../../services/query.service';\r\nimport { SubscriptionType } from '../../enums';\r\nimport ConfirmationDialog from '../../components/ConfirmationDialog';\r\nimport AsyncSelect from '../../components/select/AsyncSelect';\r\nimport EnumSelect from '../../components/EnumSelect';\r\n\r\nclass UserSubscriptionsModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      administrator: null,\r\n      subscriptions: []\r\n    };\r\n\r\n    this.handleChange = (index) => (newValue) => {\r\n      const subscriptions = this.state.subscriptions;\r\n      subscriptions[index] = newValue\r\n      this.setState({ subscriptions });\r\n      this.props.onChange(subscriptions);\r\n    }\r\n\r\n    this.handleDelete = (index) => () => {\r\n      const subscriptions = this.state.subscriptions;\r\n      subscriptions.splice(index, 1);\r\n      this.setState({ subscriptions });\r\n      this.props.onChange(subscriptions);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    UserService.getAuthenticatedUser()\r\n      .then(user => this.setState({ administrator: user }));\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.user != this.props.user && this.props.user != null)\r\n      this.init();\r\n  }\r\n\r\n  init() {\r\n    this.setState({\r\n      subscriptions: JSON.parse(JSON.stringify(this.props.user.subscriptions))\r\n    });\r\n  }\r\n\r\n  addSubscription() {\r\n    const { subscriptions } = this.state;\r\n    if (subscriptions.length > 0 && !subscriptions[0].id)\r\n      return;\r\n\r\n    subscriptions.unshift({\r\n      customerId: this.props.user.id,\r\n      season: this.props.season,\r\n      seasonId: this.props.season.id,\r\n      administrator: this.state.administrator,\r\n      totalHours: 0,\r\n      remainingHours: 0,\r\n      type: ''\r\n    });\r\n\r\n    this.setState(subscriptions);\r\n  }\r\n\r\n  render() {\r\n    const { isOpen, user, onClose, classes, fullScreen } = this.props;\r\n    const { subscriptions } = this.state;\r\n\r\n    if (!this.props.user)\r\n      return null;\r\n\r\n    return (\r\n      <Dialog\r\n        open={isOpen}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        classes={{ paper: classes.root }}\r\n      >\r\n        <DialogTitle>\r\n          <DialogContentText variant=\"headline\">\r\n            Абонаменти на {user.name}\r\n          </DialogContentText>\r\n        </DialogTitle>\r\n        <DialogContent >\r\n          <Button variant=\"contained\" color=\"primary\" size=\"small\"\r\n            style={{ marginBottom: '1rem' }}\r\n            onClick={() => this.addSubscription()}\r\n          >\r\n            Добави абонамент\r\n          </Button>\r\n\r\n          {subscriptions.map((sub, index) => <Subscription\r\n            key={sub.id || 0}\r\n            model={sub}\r\n            onChange={this.handleChange(index)}\r\n            onDelete={this.handleDelete(index)}\r\n          />)}\r\n\r\n          {subscriptions.length == 0 && <Typography variant=\"caption\">Няма регистрирани абонаменти</Typography>}\r\n        </DialogContent>\r\n\r\n        <DialogActions className={classes.btnContainer}>\r\n          {/* <Button variant=\"contained\" color=\"primary\" className={classes.btn} onClick={() => this.save()}>\r\n            Запис\r\n          </Button> */}\r\n          <Button variant=\"outlined\" color=\"primary\" size=\"small\" className={classes.btn} onClick={onClose}>\r\n            <ArrowBackIcon />\r\n            Назад\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nclass Subscription extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      administrator: {},\r\n      season: {},\r\n      seasonId: null,\r\n      type: '',\r\n      totalHours: 0,\r\n      remainingHours: 0,\r\n      isEditMode: false,\r\n      expanded: false\r\n    }\r\n  }\r\n\r\n  changeSeason(season) {\r\n    if (!season)\r\n      return;\r\n\r\n    this.setState({\r\n      season: season,\r\n      seasonId: season.id\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      ...JSON.parse(JSON.stringify(this.props.model)),\r\n      isEditMode: !this.props.model.id,\r\n      expanded: !this.props.model.id\r\n    });\r\n  }\r\n\r\n  save() {\r\n    let query = null\r\n    if (this.state.id)\r\n      query = QueryService\r\n        .post(`/subscriptions/${this.state.id}`, this.state);\r\n    else\r\n      query = QueryService\r\n        .post(`/subscriptions`, this.state)\r\n\r\n    return query\r\n      .then(e => {\r\n        this.props.onChange(e);\r\n        this.setState({ ...e, isEditMode: false });\r\n      })\r\n      .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  remove() {\r\n    return QueryService\r\n      .delete(`/subscriptions/${this.state.id}`)\r\n      .then(_ => this.props.onDelete())\r\n      .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  cancelEdit() {\r\n    if (!this.state.id)\r\n      return this.props.onDelete();\r\n    else\r\n      return this.setState({\r\n        ...JSON.parse(JSON.stringify(this.props.model)),\r\n        isEditMode: false\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const model = this.state;\r\n\r\n    return (\r\n      <ExpansionPanel expanded={model.expanded}>\r\n        <ExpansionPanelSummary\r\n          expandIcon={<ExpandMoreIcon />}\r\n          onClick={() => this.setState({ expanded: !model.expanded })}\r\n        >\r\n          <Typography color=\"primary\" style={{ flexBasis: '50%' }}>\r\n            Абонамент\r\n            <L10n\r\n              style={{ marginLeft: '.3rem' }}\r\n              translate=\"SubscriptionType\"\r\n            >\r\n              {model.type}\r\n            </L10n>\r\n          </Typography>\r\n          <Typography color=\"textSecondary\">{model.season.name}</Typography>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails style={{ flexDirection: 'column' }}>\r\n          <Typography variant=\"caption\">\r\n            Администрирал:\r\n            <Typography>{model.administrator.name}</Typography>\r\n          </Typography>\r\n\r\n          <AsyncSelect\r\n            label=\"Сезон\"\r\n            disableClear={true}\r\n            disableSearch={true}\r\n            disabled={!model.isEditMode}\r\n            value={model.season}\r\n            query=\"seasons\"\r\n            formatOptionLabel={(option) => <Typography component=\"span\">\r\n              {option.name}\r\n            </Typography>}\r\n            onChange={season => this.changeSeason(season)}\r\n          />\r\n\r\n          {!this.state.isEditMode && <React.Fragment>\r\n            <Typography variant=\"caption\">\r\n              Тип абонамент:\r\n              <Typography>\r\n                <L10n\r\n                  translate=\"SubscriptionType\"\r\n                >\r\n                  {model.type}\r\n                </L10n>\r\n              </Typography>\r\n            </Typography>\r\n\r\n            <Typography variant=\"caption\">\r\n              Общо часове:\r\n              <Typography>{model.totalHours}</Typography>\r\n            </Typography>\r\n\r\n            <Typography variant=\"caption\">\r\n              Оставащи часове\r\n              <Typography>{model.remainingHours}</Typography>\r\n            </Typography>\r\n          </React.Fragment>}\r\n\r\n          {this.state.isEditMode && <React.Fragment>\r\n            <EnumSelect\r\n              label=\"Тип абонамент\"\r\n              value={model.type}\r\n              fullWidth={true}\r\n              onChange={(e) => this.setState({ type: e.target.value })}\r\n              EnumValues={SubscriptionType}\r\n              EnumName=\"SubscriptionType\"\r\n            />\r\n\r\n            <TextField\r\n              label=\"Общо часове\"\r\n              type=\"number\"\r\n              value={model.totalHours}\r\n              onChange={(e) => this.setState({ totalHours: e.target.value })}\r\n              fullWidth={true}\r\n            />\r\n\r\n            <Typography variant=\"caption\" style={{ marginTop: '.5rem' }}>\r\n              Оставащи часове (ще бъде обновено след запис)\r\n              <Typography>{model.remainingHours}</Typography>\r\n            </Typography>\r\n          </React.Fragment>}\r\n\r\n          {this.state.isEditMode && <div style={{ marginTop: '.5rem' }}>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              style={{ marginRight: '.3rem' }}\r\n              onClick={() => this.save()}\r\n            >\r\n              Запис\r\n            </Button>\r\n\r\n            <Button\r\n              variant=\"outlined\"\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => this.cancelEdit()}\r\n            >\r\n              Отказ\r\n            </Button>\r\n          </div>}\r\n\r\n          {!this.state.isEditMode && <div style={{ marginTop: '.5rem' }}>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              style={{ marginRight: '.3rem' }}\r\n              onClick={() => this.setState({ isEditMode: true })}\r\n            >\r\n              Редакция\r\n            </Button>\r\n\r\n            <ConfirmationDialog\r\n              title=\"Изтриване на абонамент\"\r\n              body={<Typography>Сигурни ли сте че искате да изтриете абонамента</Typography>}\r\n              onAccept={() => this.remove()}\r\n              style={{ marginTop: '.5rem' }}\r\n            >\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                size=\"small\"\r\n              >\r\n                Изтриване\r\n            </Button>\r\n            </ConfirmationDialog>\r\n          </div>}\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: '600px',\r\n    padding: '0'\r\n  },\r\n  btnContainer: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  btn: {\r\n    [theme.breakpoints.down('sm')]: {\r\n      marginBottom: '.3rem',\r\n      width: '100%'\r\n    }\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(UserSubscriptionsModal)\r\n);","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Button from '@material-ui/core/Button';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Zoom from '@material-ui/core/Zoom';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport DescriptionOutlinedIcon from '@material-ui/icons/DescriptionOutlined';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport BuildIcon from '@material-ui/icons/Build';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport ConfirmationDialog from '../../components/ConfirmationDialog';\r\nimport QueryService from '../../services/query.service';\r\nimport UserModel from '../../users/user.model';\r\nimport UserDetailsModal from './UserDetailsModal';\r\nimport UserSubscriptionsModal from './UserSubscriptionsModal';\r\n\r\nclass Users extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      currentSeason: null,\r\n      page: 0,\r\n      rowsPerPage: 10,\r\n      users: [],\r\n      usersFilter: '',\r\n      editUser: null,\r\n      subsUser: null\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    QueryService\r\n      .get('/schedule/config')\r\n      .then(({ season }) => this.setState({ currentSeason: season }));\r\n\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    return QueryService\r\n      .get('/users')\r\n      .then(e => this.setState({ users: e }));\r\n  }\r\n\r\n  filterUsers() {\r\n    if (this.state.usersFilter.length > 0)\r\n      return this.state.users.filter(e => {\r\n        return e.name.toLowerCase().includes(this.state.usersFilter) \r\n          || e.email.toLowerCase().includes(this.state.usersFilter);\r\n      });\r\n    else return this.state.users;\r\n  }\r\n\r\n  prepareForEdit(user) {\r\n    const names = user.name.split(' ');\r\n    user.firstName = names[0];\r\n    user.lastName = names[1];\r\n    user.startedPlaying = parseInt(user.startedPlaying) || '';\r\n    return user;\r\n  }\r\n\r\n  updateSubscriptions(user, subscriptions) {\r\n    const index = this.state.users.findIndex(e => e.id == user.id);\r\n    const users = this.state.users;\r\n    users[index].subscriptions = subscriptions;\r\n    this.setState({ users, subsUser: users[index] });\r\n  }\r\n\r\n  remove(index) {\r\n    const users = this.state.users;\r\n\r\n    return QueryService\r\n      .delete(`/users/${users[index].id}`)\r\n      .then(_ => {\r\n        users.splice(index, 1);\r\n        this.setState({ users });\r\n      })\r\n      .catch(err => null);\r\n  }\r\n\r\n  render() {\r\n    const { usersFilter, page, rowsPerPage } = this.state;\r\n    const users = this.filterUsers(usersFilter);\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <Paper style={{ padding: '1rem' }}>\r\n          <Typography variant=\"headline\">Потребители</Typography>\r\n          <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={() => this.setState({ editUser: UserModel.get() })}>\r\n            Нов потребител\r\n          </Button>\r\n          <TextField\r\n            label=\"Търсене по име\"\r\n            value={usersFilter}\r\n            fullWidth={true}\r\n            onChange={(e) => this.setState({ usersFilter: e.target.value })}\r\n          />\r\n\r\n          <UserDetailsModal\r\n            user={this.state.editUser}\r\n            isOpen={this.state.editUser != null}\r\n            onChange={() => {\r\n              this.setState({ editUser: null })\r\n              this.getData();\r\n            }}\r\n            onClose={() => this.setState({ editUser: null })}\r\n          />\r\n\r\n          <UserSubscriptionsModal\r\n            user={this.state.subsUser}\r\n            season={this.state.currentSeason}\r\n            isOpen={this.state.subsUser != null}\r\n            onChange={(subscriptions) => this.updateSubscriptions(this.state.subsUser, subscriptions)}\r\n            onClose={() => this.setState({ subsUser: null })}\r\n          />\r\n\r\n          <Hidden xsDown>\r\n            <Table padding=\"none\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell>Име</TableCell>\r\n                  <TableCell>Създаден</TableCell>\r\n                  <TableCell style={{ textAlign: 'center' }}>Активен</TableCell>\r\n                  <TableCell style={{ textAlign: 'center' }}>Треньор</TableCell>\r\n                  <TableCell style={{ textAlign: 'center' }}>Турнири</TableCell>\r\n                  <TableCell style={{ textAlign: 'center' }}>Админ</TableCell>\r\n                  <TableCell></TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {users.slice(page * rowsPerPage, (page + 1) * rowsPerPage).map((user, index) => {\r\n                  return (\r\n                    <TableRow key={user.id}>\r\n                      <TableCell>\r\n                        <Link to={`/users/${user.id}`}>\r\n                          <Typography variant=\"body2\">{user.name}</Typography>\r\n                        </Link>\r\n                        <Typography style={{ fontStyle: 'italic' }}>\r\n                          {user.email}\r\n                        </Typography>\r\n                      </TableCell>\r\n\r\n                      <TableCell>{new Date(user.createdAt).toLocaleDateString()}</TableCell>\r\n                      <TableCell style={{ textAlign: 'center' }}>{user.isActive && <DoneIcon color=\"action\" />}</TableCell>\r\n                      <TableCell style={{ textAlign: 'center' }}>{user.isTrainer && <DoneIcon color=\"action\" />}</TableCell>\r\n                      <TableCell style={{ textAlign: 'center' }}>{user.isTournamentAdmin && <DoneIcon color=\"action\" />}</TableCell>\r\n                      <TableCell style={{ textAlign: 'center' }}>{user.isAdmin && <DoneIcon color=\"action\" />}</TableCell>\r\n                      <TableCell>\r\n                        <Tooltip title=\"редакция\" placement=\"top-start\" TransitionComponent={Zoom} enterDelay={500}>\r\n                          <IconButton color=\"primary\" onClick={() => this.setState({ editUser: this.prepareForEdit(user) })}>\r\n                            {/* <BuildIcon /> */}\r\n                            <EditIcon />\r\n                          </IconButton>\r\n                        </Tooltip>\r\n                        <Tooltip title=\"абонаменти\" placement=\"top-start\" TransitionComponent={Zoom} enterDelay={500}>\r\n                          <IconButton color=\"primary\" onClick={() => this.setState({ subsUser: user })}>\r\n                            <DescriptionOutlinedIcon />\r\n                          </IconButton>\r\n                        </Tooltip>\r\n                        <ConfirmationDialog\r\n                          title=\"Изтриване на потребител\"\r\n                          body={<Typography>Сигурни ли сте че искате да изтриете {user.name}</Typography>}\r\n                          onAccept={() => this.remove(index)}\r\n                        >\r\n                          <Tooltip title=\"изтриване\" placement=\"top-start\" TransitionComponent={Zoom} enterDelay={500}>\r\n                            <IconButton color=\"secondary\">\r\n                              <DeleteForeverIcon />\r\n                            </IconButton>\r\n                          </Tooltip>\r\n                        </ConfirmationDialog>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  );\r\n                })}\r\n              </TableBody>\r\n            </Table>\r\n            <TablePagination\r\n              component=\"div\"\r\n              count={users.length}\r\n              rowsPerPage={rowsPerPage}\r\n              rowsPerPageOptions={[10, 25, 50]}\r\n              labelRowsPerPage=\"Покажи:\"\r\n              labelDisplayedRows={({ from, to, count }) => `${from}-${to} от ${count}`}\r\n              page={page}\r\n              onChangePage={(e, page) => this.setState({ page })}\r\n              onChangeRowsPerPage={e => this.setState({ rowsPerPage: e.target.value, page: 0 })}\r\n            />\r\n          </Hidden>\r\n\r\n          <Hidden smUp>\r\n            <List>\r\n              {users.map((user, index) => {\r\n                return (\r\n                  <React.Fragment key={index}>\r\n                    <ListItem style={{ padding: '0', justifyContent: 'space-between' }}>\r\n                      <div>\r\n                        <Link to={`/users/${user.id}`}>\r\n                          <Typography variant=\"body2\">{user.name}</Typography>\r\n                        </Link>\r\n                        <Typography style={{ fontStyle: 'italic' }}>\r\n                          {user.email}\r\n                        </Typography>\r\n                      </div>\r\n\r\n                      <div>\r\n                        <IconButton color=\"primary\" onClick={() => this.setState({ editUser: this.prepareForEdit(user) })}>\r\n                          <BuildIcon />\r\n                        </IconButton>\r\n                        <IconButton color=\"primary\" onClick={() => this.setState({ subsUser: user })}>\r\n                          <DescriptionOutlinedIcon />\r\n                        </IconButton>\r\n                        <ConfirmationDialog\r\n                          title=\"Изтриване на потребител\"\r\n                          body={<Typography>Сигурни ли сте че искате да изтриете {user.name}</Typography>}\r\n                          onAccept={() => this.remove(index)}\r\n                        >\r\n                          <IconButton color=\"secondary\">\r\n                            <DeleteForeverIcon />\r\n                          </IconButton>\r\n                        </ConfirmationDialog>\r\n                      </div>\r\n                    </ListItem>\r\n                    <Divider />\r\n                  </React.Fragment>\r\n                );\r\n              })}\r\n            </List>\r\n          </Hidden>\r\n\r\n        </Paper>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Users;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport FormModal from '../components/FormModal';\r\nimport UserModel from './user.model';\r\nimport QueryService from '../services/query.service';\r\n\r\nclass UserProfileFormModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      model: UserModel.get(),\r\n      errors: UserModel.getErrorsModel()\r\n    }\r\n\r\n    this.handleChange = (prop, custom = false) => (event) => {\r\n      let model = this.state.model;\r\n      model[prop] = (custom ? event : event.target.value);\r\n      this.setState({ model });\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ model: this.props.model });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.model != this.props.model)\r\n      this.setState({ model: this.props.model });\r\n  }\r\n\r\n  save() {\r\n    const { model } = this.state;\r\n\r\n    return QueryService\r\n      .post('/users/updateSecondaryData', model)\r\n      .then(() => this.props.onChange())\r\n      .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  render() {\r\n    const { model, errors } = this.state;\r\n    const { onClose } = this.props;\r\n\r\n    const title = 'Промяна на допълнителна информация за акаунт';\r\n    const actions = <React.Fragment>\r\n      <Button variant=\"contained\" color=\"primary\" onClick={() => this.save()}>Запис</Button>\r\n      <Button variant=\"outlined\" color=\"primary\" onClick={onClose}>Отказ</Button>\r\n    </React.Fragment>;\r\n    const body = <UserModel.UserPlayerSecondaryData user={model} onChange={this.handleChange} errors={errors} />\r\n\r\n    return (\r\n      <FormModal\r\n        enableFullWidth={true}\r\n        onClose={onClose}\r\n        title={title}\r\n        body={body}\r\n        actions={actions}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default UserProfileFormModal;","import React from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport QueryService from '../services/query.service';\r\nimport FormModal from '../components/FormModal';\r\n\r\nclass ChangePasswordModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      currentPassword: '',\r\n      newPassword: '',\r\n      confirmNewPassword: '',\r\n      errors: null\r\n    };\r\n\r\n    this.handleChange = (prop) => (event) => {\r\n      const state = this.state;\r\n      state[prop] = event.target.value;\r\n      this.setState(state);\r\n    }\r\n  }\r\n\r\n  save() {\r\n    return QueryService\r\n      .post('/users/changePassword', this.state)\r\n      .then(() => this.props.onClose())\r\n      .catch(err => this.setState({ errors: err.name }));\r\n  }\r\n\r\n  render() {\r\n    const { currentPassword, newPassword, confirmNewPassword, errors } = this.state;\r\n    const { onClose } = this.props;\r\n\r\n    const title = 'Промяна на парола';\r\n    const actions = <React.Fragment>\r\n      <Button variant=\"contained\" color=\"primary\" onClick={() => this.save()}>Запис</Button>\r\n      <Button variant=\"outlined\" color=\"primary\" onClick={onClose}>Отказ</Button>\r\n    </React.Fragment>;\r\n    const body = <React.Fragment>\r\n      <TextField\r\n        fullWidth\r\n        label=\"Текуща парола\"\r\n        type=\"password\"\r\n        value={currentPassword}\r\n        onChange={this.handleChange('currentPassword')}\r\n        error={errors == 'InvalidCredentialsException'}\r\n        helperText={errorTexts[errors]}\r\n      />\r\n      <TextField\r\n        fullWidth\r\n        label=\"Нова парола\"\r\n        type=\"password\"\r\n        value={newPassword}\r\n        onChange={this.handleChange('newPassword')}\r\n        error={errors == 'PasswordRequired'}\r\n        helperText={errorTexts[errors]}\r\n      />\r\n      <TextField\r\n        fullWidth\r\n        label=\"Повтори новата парола\"\r\n        type=\"password\"\r\n        value={confirmNewPassword}\r\n        onChange={this.handleChange('confirmNewPassword')}\r\n        error={errors == 'PasswordDoesntMatch'}\r\n        helperText={errorTexts[errors]}\r\n      />\r\n    </React.Fragment>;\r\n\r\n    return (\r\n      <FormModal\r\n        enableFullWidth={true}\r\n        onClose={onClose}\r\n        title={title}\r\n        body={body}\r\n        actions={actions}\r\n        hasError={errors}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst errorTexts = {\r\n  'InvalidCredentialsException': 'Неправилна парола',\r\n  'PasswordRequired': 'Задължително поле',\r\n  'PasswordDoesntMatch': 'Паролите не съвпадат'\r\n}\r\n\r\nexport default ChangePasswordModal;","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { l10n_text } from '../../components/L10n';\r\n\r\nclass PlayerInfoComponent extends React.Component {\r\n  render() {\r\n    const { user, style } = this.props;\r\n    return (\r\n      <div style={style}>\r\n        <Typography variant=\"caption\">\r\n          Играе от\r\n          <Typography>{user.startedPlaying ? user.startedPlaying + 'г.' : 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Играе с\r\n          <Typography>{l10n_text(user.playStyle, \"PlayStyle\") || 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Бекхенд\r\n          <Typography>{l10n_text(user.backhandType, \"BackhandType\") || 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Любима настилка\r\n          <Typography>{l10n_text(user.courtType, \"CourtType\") || 'няма'}</Typography>\r\n        </Typography>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PlayerInfoComponent;","import React from 'react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport List from '@material-ui/core/List';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport UserService from '../services/user.service';\r\nimport QueryService from '../services/query.service';\r\nimport { l10n_text } from '../components/L10n';\r\nimport { getHour } from '../utils';\r\nimport UserProfileFormModal from './UserProfileFormModal';\r\nimport ChangePasswordModal from './ChangePasswordModal'\r\nimport InvitationsComponent from './InvitationsComponent';\r\n\r\nimport PlayerInfoComponent from './components/PlayerInfoComponent';\r\n\r\nclass TeamView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: null\r\n    }\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    QueryService\r\n      .get(`/users/${this.props.match.params.id}/playerInfo`)\r\n      .then(user => this.setState({ user }));\r\n  }\r\n\r\n  render() {\r\n    const { user } = this.state;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        {user &&\r\n          <Card>\r\n            <CardContent>\r\n              <Typography variant=\"headline\">{user.name}</Typography>\r\n              <PlayerInfoComponent user={user} />\r\n            </CardContent>\r\n          </Card>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TeamView;","import React from 'react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport List from '@material-ui/core/List';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport UserService from '../services/user.service';\r\nimport QueryService from '../services/query.service';\r\nimport { l10n_text } from '../components/L10n';\r\nimport { getHour } from '../utils';\r\nimport UserProfileFormModal from './UserProfileFormModal';\r\nimport ChangePasswordModal from './ChangePasswordModal'\r\nimport InvitationsComponent from './InvitationsComponent';\r\n\r\nclass UserProfile extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loggedInUser: null,\r\n      user: {},\r\n      subscriptions: null,\r\n      reservations: null,\r\n      invitations: null,\r\n      subsCollapsed: true,\r\n      resCollapsed: true,\r\n      invCollapsed: true,\r\n      userModel: null,\r\n      changePassword: false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setUser()\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  setUser() {\r\n    return UserService.getAuthenticatedUser()\r\n      .then(user => this.setState({ loggedInUser: user }));\r\n  }\r\n\r\n  getData() {\r\n    const id = this.props.match.params.id || this.state.loggedInUser.id;\r\n\r\n    if (!this.props.match.params.id || this.props.match.params.id == this.state.loggedInUser.id)\r\n      QueryService.get('/invitations')\r\n        .then(invitations => this.setState({ invitations }));\r\n\r\n    QueryService\r\n      .get(`/users/${id}`)\r\n      .then(e => this.setState(e));\r\n  }\r\n\r\n  identity() {\r\n    return this.props.match.params.id && this.state.loggedInUser && this.props.match.params.id == this.state.loggedInUser.id;\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      user,\r\n      userModel,\r\n      reservations,\r\n      subscriptions,\r\n      invitations,\r\n      subsCollapsed,\r\n      resCollapsed,\r\n      invCollapsed,\r\n      changePassword\r\n    } = this.state;\r\n    const { mode, classes } = this.props;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        {userModel\r\n          && <UserProfileFormModal\r\n            model={userModel}\r\n            onChange={() => { this.getData(); this.setState({ userModel: null }) }}\r\n            onClose={() => this.setState({ userModel: null })}\r\n          />}\r\n\r\n        {changePassword && <ChangePasswordModal onClose={() => this.setState({ changePassword: false })} />}\r\n\r\n        <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography classes={{ root: classes.sectionHeadline }} variant=\"headline\">{user.name}</Typography>\r\n            <div style={{ display: 'flex', justifyContent: 'flex-start' }}>\r\n              <UserPersonalInfo user={user} />\r\n              <UserPlayerInfo user={user} style={{ marginLeft: '2rem' }} />\r\n            </div>\r\n          </CardContent>\r\n          <CardActions>\r\n          </CardActions>\r\n        </Card>\r\n\r\n        {invitations && <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography\r\n              variant=\"headline\"\r\n              classes={{ root: classes.sectionHeadline }}\r\n              onClick={() => this.setState({ invCollapsed: !invCollapsed })}\r\n            >\r\n              <span>Покани за турнири</span>\r\n              {invCollapsed && <ExpandLessIcon />}\r\n              {!invCollapsed && <ExpandMoreIcon />}\r\n            </Typography>\r\n            {invCollapsed && <InvitationsComponent invitations={this.state.invitations} onChange={() => this.getData()} />}\r\n          </CardContent>\r\n        </Card>}\r\n\r\n        {reservations != null && <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography\r\n              variant=\"headline\"\r\n              classes={{ root: classes.sectionHeadline }}\r\n              onClick={() => this.setState({ resCollapsed: !resCollapsed })}\r\n            >\r\n              <span>Резервации</span>\r\n              <Typography component=\"em\">\r\n                Дължим брой часове: {user.reservationDebt}\r\n              </Typography>\r\n              {resCollapsed && <ExpandLessIcon />}\r\n              {!resCollapsed && <ExpandMoreIcon />}\r\n            </Typography>\r\n            {resCollapsed\r\n              && <React.Fragment>\r\n                <List>\r\n                  {reservations.map(reservation => {\r\n                    return (\r\n                      <Typography classes={{ root: classes.listItemRoot }} key={reservation.id}>\r\n                        {l10n_text(reservation.type, \"CustomReservationType\")}\r\n                        <Typography component=\"span\" variant=\"caption\" style={{ display: 'inline', marginLeft: '1rem' }}>{reservation.court.name}</Typography>\r\n                        {!reservation.isActive && <Typography component=\"span\" color=\"secondary\">ОТМЕНЕНО</Typography>}\r\n                        <Typography component=\"span\" variant=\"caption\">\r\n                          {reservation.season.name}\r\n                          <span style={{ marginLeft: '1rem' }}>{new Date(reservation.date).toLocaleDateString()}</span>\r\n                          <span style={{ marginLeft: '1rem' }}>\r\n                            {getHour(reservation.hour)} - {getHour(reservation.hour + 1)}\r\n                          </span>\r\n                        </Typography>\r\n                      </Typography>\r\n                    );\r\n                  })}\r\n                </List>\r\n                {reservations.length == 0 && <Typography variant=\"caption\">Няма регистрирани резервации.</Typography>}\r\n              </React.Fragment>}\r\n          </CardContent>\r\n        </Card>}\r\n\r\n        {subscriptions != null && <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography\r\n              variant=\"headline\"\r\n              classes={{ root: classes.sectionHeadline }}\r\n              onClick={() => this.setState({ subsCollapsed: !subsCollapsed })}\r\n            >\r\n              <span>Абонаменти</span>\r\n              <Typography component=\"em\">\r\n                Дължим членски внос: {user.subscriptionDebt}лв.\r\n              </Typography>\r\n              {subsCollapsed && <ExpandLessIcon />}\r\n              {!subsCollapsed && <ExpandMoreIcon />}\r\n            </Typography>\r\n            {subsCollapsed\r\n              && <React.Fragment>\r\n                <List>\r\n                  {subscriptions.map(subscription => {\r\n                    return (\r\n                      <Typography classes={{ root: classes.listItemRoot }} key={subscription.id}>\r\n                        Абонамент {l10n_text(subscription.type, \"SubscriptionType\")}\r\n                        <Typography component=\"span\" variant=\"caption\" style={{ display: 'inline', marginLeft: '1rem' }}>{subscription.season.name}</Typography>\r\n                        <Typography component=\"span\" variant=\"caption\">{subscription.remainingHours} оставащи часове</Typography>\r\n                      </Typography>\r\n                    );\r\n                  })}\r\n                </List>\r\n                {subscriptions.length == 0 && <Typography variant=\"caption\">Няма регистрирани абонаменти.</Typography>}\r\n              </React.Fragment>}\r\n          </CardContent>\r\n        </Card>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport class UserPersonalInfo extends React.Component {\r\n  render() {\r\n    const { user } = this.props;\r\n    return (\r\n      <div>\r\n        <Typography variant=\"caption\">\r\n          Email\r\n          <Typography>{user.email}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Телефон\r\n          <Typography>{user.telephone || 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Рожденна дата\r\n          <Typography>{user.birthDate || 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Пол\r\n          <Typography>{l10n_text(user.gender, \"Gender\") || 'няма'}</Typography>\r\n        </Typography>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport class UserPlayerInfo extends React.Component {\r\n  render() {\r\n    const { user, style } = this.props;\r\n    return (\r\n      <div style={style}>\r\n        <Typography variant=\"caption\">\r\n          Играе от\r\n          <Typography>{user.startedPlaying ? user.startedPlaying + 'г.' : 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Играе с\r\n          <Typography>{l10n_text(user.playStyle, \"PlayStyle\") || 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Бекхенд\r\n          <Typography>{l10n_text(user.backhandType, \"BackhandType\") || 'няма'}</Typography>\r\n        </Typography>\r\n\r\n        <Typography variant=\"caption\">\r\n          Любима настилка\r\n          <Typography>{l10n_text(user.courtType, \"CourtType\") || 'няма'}</Typography>\r\n        </Typography>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  sectionRoot: {\r\n    marginBottom: '1rem'\r\n  },\r\n  cardContentRoot: {\r\n    '&:last-child': {\r\n    }\r\n  },\r\n  sectionHeadline: {\r\n    cursor: 'pointer',\r\n    display: 'flex',\r\n    justifyContent: 'space-between'\r\n  },\r\n  listItemRoot: {\r\n    padding: '.3rem 0',\r\n    borderBottom: '1px solid lightgrey'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(UserProfile);","import React from 'react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport List from '@material-ui/core/List';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport UserService from '../services/user.service';\r\nimport QueryService from '../services/query.service';\r\nimport { l10n_text } from '../components/L10n';\r\nimport { getHour } from '../utils';\r\nimport { UserPersonalInfo, UserPlayerInfo } from './UserProfile';\r\nimport UserProfileFormModal from './UserProfileFormModal';\r\nimport ChangePasswordModal from './ChangePasswordModal'\r\nimport InvitationsComponent from './InvitationsComponent';\r\n\r\nclass AccountView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loggedInUser: null,\r\n      user: {},\r\n      subscriptions: null,\r\n      reservations: null,\r\n      invitations: null,\r\n      subsCollapsed: true,\r\n      resCollapsed: true,\r\n      invCollapsed: true,\r\n      userModel: null,\r\n      changePassword: false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setUser()\r\n      .then(() => this.getData());\r\n  }\r\n\r\n  setUser() {\r\n    return UserService.getAuthenticatedUser()\r\n      .then(user => this.setState({ loggedInUser: user }));\r\n  }\r\n\r\n  getData() {\r\n    const id = this.props.match.params.id || this.state.loggedInUser.id;\r\n\r\n    if (!this.props.match.params.id || this.props.match.params.id == this.state.loggedInUser.id)\r\n      QueryService.get('/invitations')\r\n        .then(invitations => this.setState({ invitations }));\r\n\r\n    QueryService\r\n      .get(`/users/${id}`)\r\n      .then(e => this.setState(e));\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      user,\r\n      userModel,\r\n      reservations,\r\n      subscriptions,\r\n      invitations,\r\n      subsCollapsed,\r\n      resCollapsed,\r\n      invCollapsed,\r\n      changePassword\r\n    } = this.state;\r\n    const { mode, classes } = this.props;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        {userModel\r\n          && <UserProfileFormModal\r\n            model={userModel}\r\n            onChange={() => { this.getData(); this.setState({ userModel: null }) }}\r\n            onClose={() => this.setState({ userModel: null })}\r\n          />}\r\n\r\n        {changePassword && <ChangePasswordModal onClose={() => this.setState({ changePassword: false })} />}\r\n\r\n        <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography classes={{ root: classes.sectionHeadline }} variant=\"headline\">{user.name}</Typography>\r\n            <div style={{ display: 'flex', justifyContent: 'flex-start' }}>\r\n              <UserPersonalInfo user={user} />\r\n              <UserPlayerInfo user={user} style={{ marginLeft: '2rem' }} />\r\n            </div>\r\n            <div>\r\n              <Button variant=\"contained\" size=\"small\" color=\"primary\" onClick={() => this.setState({ userModel: Object.assign({}, user) })}>Промяна</Button>\r\n              <Button variant=\"contained\" size=\"small\" color=\"primary\" style={{ marginLeft: '.3rem' }} onClick={() => this.setState({ changePassword: true })}>Смяна на парола</Button>\r\n            </div>\r\n          </CardContent>\r\n          <CardActions>\r\n          </CardActions>\r\n        </Card>\r\n\r\n        {invitations && <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography\r\n              variant=\"headline\"\r\n              classes={{ root: classes.sectionHeadline }}\r\n              onClick={() => this.setState({ invCollapsed: !invCollapsed })}\r\n            >\r\n              <span>Покани за турнири</span>\r\n              {invCollapsed && <ExpandLessIcon />}\r\n              {!invCollapsed && <ExpandMoreIcon />}\r\n            </Typography>\r\n            {invCollapsed && <InvitationsComponent invitations={this.state.invitations} onChange={() => this.getData()} />}\r\n          </CardContent>\r\n        </Card>}\r\n\r\n        {reservations != null && <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography\r\n              variant=\"headline\"\r\n              classes={{ root: classes.sectionHeadline }}\r\n              onClick={() => this.setState({ resCollapsed: !resCollapsed })}\r\n            >\r\n              <span>Резервации</span>\r\n              <Typography component=\"em\">\r\n                Дължим брой часове: {user.reservationDebt}\r\n              </Typography>\r\n              {resCollapsed && <ExpandLessIcon />}\r\n              {!resCollapsed && <ExpandMoreIcon />}\r\n            </Typography>\r\n            {resCollapsed\r\n              && <React.Fragment>\r\n                <List>\r\n                  {reservations.map(reservation => {\r\n                    return (\r\n                      <Typography classes={{ root: classes.listItemRoot }} key={reservation.id}>\r\n                        {l10n_text(reservation.type, \"CustomReservationType\")}\r\n                        <Typography component=\"span\" variant=\"caption\" style={{ display: 'inline', marginLeft: '1rem' }}>{reservation.court.name}</Typography>\r\n                        {!reservation.isActive && <Typography component=\"span\" color=\"secondary\">ОТМЕНЕНО</Typography>}\r\n                        <Typography component=\"span\" variant=\"caption\">\r\n                          {reservation.season.name}\r\n                          <span style={{ marginLeft: '1rem' }}>{new Date(reservation.date).toLocaleDateString()}</span>\r\n                          <span style={{ marginLeft: '1rem' }}>\r\n                            {getHour(reservation.hour)} - {getHour(reservation.hour + 1)}\r\n                          </span>\r\n                        </Typography>\r\n                      </Typography>\r\n                    );\r\n                  })}\r\n                </List>\r\n                {reservations.length == 0 && <Typography variant=\"caption\">Няма регистрирани резервации.</Typography>}\r\n              </React.Fragment>}\r\n          </CardContent>\r\n        </Card>}\r\n\r\n        {subscriptions != null && <Card classes={{ root: classes.sectionRoot }}>\r\n          <CardContent classes={{ root: classes.cardContentRoot }}>\r\n            <Typography\r\n              variant=\"headline\"\r\n              classes={{ root: classes.sectionHeadline }}\r\n              onClick={() => this.setState({ subsCollapsed: !subsCollapsed })}\r\n            >\r\n              <span>Абонаменти</span>\r\n              <Typography component=\"em\">\r\n                Дължим членски внос: {user.subscriptionDebt}лв.\r\n              </Typography>\r\n              {subsCollapsed && <ExpandLessIcon />}\r\n              {!subsCollapsed && <ExpandMoreIcon />}\r\n            </Typography>\r\n            {subsCollapsed\r\n              && <React.Fragment>\r\n                <List>\r\n                  {subscriptions.map(subscription => {\r\n                    return (\r\n                      <Typography classes={{ root: classes.listItemRoot }} key={subscription.id}>\r\n                        Абонамент {l10n_text(subscription.type, \"SubscriptionType\")}\r\n                        <Typography component=\"span\" variant=\"caption\" style={{ display: 'inline', marginLeft: '1rem' }}>{subscription.season.name}</Typography>\r\n                        <Typography component=\"span\" variant=\"caption\">{subscription.remainingHours} оставащи часове</Typography>\r\n                      </Typography>\r\n                    );\r\n                  })}\r\n                </List>\r\n                {subscriptions.length == 0 && <Typography variant=\"caption\">Няма регистрирани абонаменти.</Typography>}\r\n              </React.Fragment>}\r\n          </CardContent>\r\n        </Card>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  sectionRoot: {\r\n    marginBottom: '1rem'\r\n  },\r\n  cardContentRoot: {\r\n    '&:last-child': {\r\n    }\r\n  },\r\n  sectionHeadline: {\r\n    cursor: 'pointer',\r\n    display: 'flex',\r\n    justifyContent: 'space-between'\r\n  },\r\n  listItemRoot: {\r\n    padding: '.3rem 0',\r\n    borderBottom: '1px solid lightgrey'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(AccountView);","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../services/query.service';\r\n\r\nclass AccountActivation extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      err: false,\r\n      success: false,\r\n      timer: 5\r\n    };\r\n    this.interval = null;\r\n  }\r\n\r\n  componentDidMount() {\r\n    const token = this.props.location.search.split('?token=')[1];\r\n    return QueryService\r\n      .get(`/users/activation?token=${token}`)\r\n      .then(_ => {\r\n        this.setState({ success: true, err: false });\r\n        this.interval = setInterval(() => {\r\n          if (this.state.timer === 0) {\r\n            clearInterval(this.interval);\r\n            this.props.history.replace('/');\r\n          } else {\r\n            this.setState({ timer: this.state.timer - 1 });\r\n          }\r\n        }, 1000);\r\n      })\r\n      .catch(_ => this.setState({ err: true, success: false }));\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <Paper className={classes.root}>\r\n          <Typography align=\"center\" variant=\"headline\">Активация на акунт</Typography>\r\n          {!this.state.success && !this.state.err && <Typography align=\"center\" variant=\"subheading\">\r\n            Проверка на ключ за активация...\r\n          </Typography>}\r\n\r\n          {this.state.success && <Typography align=\"center\" variant=\"subheading\" color=\"primary\" className={classes.success}>\r\n            Активацията на Вашият акаунт беше успешна!\r\n          </Typography>}\r\n          {this.state.success && <Typography align=\"center\" variant=\"headline\" style={{ fontWeight: 700, fontSize: '1.3em' }}>{this.state.timer}</Typography>}\r\n\r\n          {this.state.err && <Typography align=\"center\" variant=\"subheading\" color=\"secondary\" className={classes.error}>\r\n            Невалиден или изтекъл ключ за активация.\r\n        </Typography>}\r\n        </Paper>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    padding: '3rem',\r\n    [theme.breakpoints.down('sm')]: {\r\n      height: '100vh'\r\n    }\r\n  },\r\n  success: {\r\n    marginTop: '2rem',\r\n    color: theme.palette.primary.dark,\r\n    fontWeight: '700'\r\n  },\r\n  error: {\r\n    marginTop: '2rem',\r\n    color: theme.palette.secondary.dark,\r\n    fontWeight: '700'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(AccountActivation);","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../services/query.service';\r\n\r\nclass RecoveryStep1 extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      email: '',\r\n      error: null,\r\n      success: false\r\n    };\r\n  }\r\n\r\n  issueRecoverEmail() {\r\n    this.setState({ error: null, success: false });\r\n    return QueryService\r\n      .get(`/users/recovery/step1?email=${this.state.email}`)\r\n      .then(_ => {\r\n        this.setState({ success: true })\r\n        setTimeout(() => this.props.history.replace('/'), 5000);\r\n      })\r\n      .catch(err => this.setState({ error: err }));\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return <div className=\"container\">\r\n      <Paper elevation={0} className={classes.root}>\r\n        <Typography variant=\"headline\">Възстановяване на забравена парола</Typography>\r\n        <TextField\r\n          id=\"email\"\r\n          label=\"E-mail\"\r\n          type=\"text\"\r\n          value={this.state.email}\r\n          fullWidth={true}\r\n          error={this.state.error}\r\n          onChange={e => this.setState({ email: e.target.value })}\r\n        />\r\n\r\n        {this.state.success && <Typography\r\n          variant=\"subheading\"\r\n          color=\"primary\"\r\n          className={classes.success}>\r\n          Успешно изпратен имейл с инструкции за възстановяване на парола.\r\n        </Typography>}\r\n\r\n        {this.state.error && <Typography\r\n          variant=\"subheading\"\r\n          color=\"secondary\"\r\n          className={classes.error}>\r\n          {this.state.error.message}\r\n        </Typography>}\r\n\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          size=\"small\"\r\n          style={{ marginTop: '1rem' }}\r\n          onClick={() => this.issueRecoverEmail()}\r\n        >\r\n          Изпрати\r\n        </Button>\r\n      </Paper>\r\n    </div>\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    padding: '3rem',\r\n    [theme.breakpoints.down('sm')]: {\r\n      height: '100vh'\r\n    }\r\n  },\r\n  success: {\r\n    marginTop: '2rem',\r\n    color: theme.palette.primary.dark,\r\n    fontWeight: '700'\r\n  },\r\n  error: {\r\n    marginTop: '2rem',\r\n    color: theme.palette.secondary.dark,\r\n    fontWeight: '700'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(RecoveryStep1);","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../services/query.service';\r\n\r\nclass RecoveryStep2 extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      token: '',\r\n      password: '',\r\n      confirmPassword: '',\r\n      error: null,\r\n      success: false\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ token: this.props.location.search.split('?token=')[1] });\r\n  }\r\n\r\n  recover() {\r\n    this.setState({ error: null, success: false });\r\n    return QueryService\r\n      .post(`/users/recovery/step2`, { token: this.state.token, password: this.state.password, confirmPassword: this.state.confirmPassword })\r\n      .then(_ => {\r\n        this.setState({ success: true });\r\n        setTimeout(() => this.props.history.replace('/'), 5000);\r\n      })\r\n      .catch(err => this.setState({ error: err }));\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return <div className=\"container\">\r\n      <Paper elevation={0} className={classes.root}>\r\n        <Typography variant=\"headline\">Възстановяване на забравена парола</Typography>\r\n\r\n        <TextField\r\n          id=\"password\"\r\n          label=\"Парола\"\r\n          type=\"password\"\r\n          value={this.state.password}\r\n          fullWidth={true}\r\n          error={this.state.error}\r\n          onChange={e => this.setState({ password: e.target.value })}\r\n        />\r\n\r\n        <TextField\r\n          id=\"confirmPassword\"\r\n          label=\"Повтори парола\"\r\n          type=\"password\"\r\n          value={this.state.confirmPassword}\r\n          fullWidth={true}\r\n          error={this.state.error}\r\n          onChange={e => this.setState({ confirmPassword: e.target.value })}\r\n        />\r\n\r\n        {this.state.success && <Typography\r\n          variant=\"subheading\"\r\n          color=\"primary\"\r\n          className={classes.success}>\r\n          Смяната на паролата ви беше успешна!\r\n        </Typography>}\r\n\r\n        {this.state.error && <Typography\r\n          variant=\"subheading\"\r\n          color=\"secondary\"\r\n          className={classes.error}>\r\n          {this.state.error.message}\r\n        </Typography>}\r\n\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          size=\"small\"\r\n          style={{ marginTop: '1rem' }}\r\n          onClick={() => this.recover()}\r\n        >\r\n          Потвърждаване\r\n        </Button>\r\n      </Paper>\r\n    </div>\r\n  }\r\n}\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    padding: '3rem',\r\n    [theme.breakpoints.down('sm')]: {\r\n      height: '100vh'\r\n    }\r\n  },\r\n  success: {\r\n    marginTop: '2rem',\r\n    color: theme.palette.primary.dark,\r\n    fontWeight: '700'\r\n  },\r\n  error: {\r\n    marginTop: '2rem',\r\n    color: theme.palette.secondary.dark,\r\n    fontWeight: '700'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(RecoveryStep2);","import BuildRoundedIcon from '@material-ui/icons/BuildRounded';\r\nimport ViewQuiltRoundedIcon from '@material-ui/icons/ViewQuiltRounded';\r\nimport WbSunnyRoundedIcon from '@material-ui/icons/WbSunnyRounded';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport LoyaltyIcon from '@material-ui/icons/Loyalty';\r\nimport AssessmentIcon from '@material-ui/icons/Assessment';\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\n\r\nexport const desktopRoutes = [\r\n  { id: 1, to: '/schedule', name: 'График', Icon: CalendarTodayIcon },\r\n  { id: 2, to: '/editions', name: 'Турнири', faIcon: 'trophy' }\r\n];\r\n\r\nexport const adminRoutes = [\r\n  { id: 4, to: '/admin/users', name: 'Потребители', Icon: PersonIcon },\r\n  { id: 5, to: '/admin/seasons', name: 'Сезони', Icon: WbSunnyRoundedIcon },\r\n  { id: 6, to: '/admin/courts', name: 'Кортове', Icon: ViewQuiltRoundedIcon },\r\n  { id: 7, to: '/admin/statistics', name: 'Справки', Icon: AssessmentIcon }\r\n];\r\n\r\nexport const tournamentAdditional = [\r\n  { id: 8, to: '/players', name: 'Играчи', faIcon: 'user-friends' },\r\n  { id: 9, to: '/leagues', name: 'Ранглисти', faIcon: 'list-ol' },\r\n  //{ id: 10, to: '/champions', name: 'Шампиони', faIcon: 'medal' },\r\n];\r\n\r\nexport const userRoutes = [\r\n  { id: 3, to: '/account', name: 'Профил', Icon: PersonIcon }\r\n];","import React from 'react';\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\n\r\nimport NotFoundPage from './NotFoundPage';\r\nimport TournamentView from '../tournaments/TournamentView';\r\nimport SchemesRoot from '../schemes/SchemesRoot';\r\nimport GroupsBracket from '../schemes/brackets/GroupsBracket';\r\nimport EliminationBracket from '../schemes/brackets/EliminationBracket';\r\nimport EditionsRoot from '../editions/EditionsRoot';\r\nimport TournamentsRoot from '../tournaments/TournamentsRoot';\r\nimport PlayersRoot from '../tournaments/PlayersRoot';\r\n\r\nimport Schedule from '../schedule/Schedule';\r\nimport Courts from '../admin/courts/Courts';\r\nimport Seasons from '../admin/seasons/Seasons';\r\nimport Statistics from '../admin/statistics/Statistics';\r\nimport Users from '../admin/users/Users';\r\nimport TeamView from '../users/TeamView';\r\nimport UserService from '../services/user.service';\r\nimport UserProfile from '../users/UserProfile';\r\nimport AccountView from '../users/AccountView';\r\nimport AccountActivation from '../login/Activation';\r\nimport RecoveryStep1 from '../login/RecoveryStep1';\r\nimport RecoveryStep2 from '../login/RecoveryStep2';\r\nimport { ApplicationMode } from '../enums';\r\n\r\nimport {\r\n  adminRoutes,\r\n  tournamentAdditional,\r\n  desktopRoutes,\r\n  userRoutes\r\n} from '../menu/menu.configuration';\r\n\r\nconst routeMapping = {\r\n  '/schedule': Schedule,\r\n  '/editions': EditionsRoot,\r\n\r\n  //tournament routes\r\n  '/players': PlayersRoot,\r\n  '/leagues': TournamentsRoot,\r\n  //'/champions': ChampionsRoot,\r\n\r\n  //admin routes\r\n  '/admin/courts': Courts,\r\n  '/admin/seasons': Seasons,\r\n  '/admin/users': Users,\r\n  '/admin/statistics': Statistics,\r\n\r\n  //user routes\r\n  '/account': AccountView\r\n};\r\n\r\nconst AppRouting = () => (\r\n  <UserService.WithApplicationMode>\r\n    {mode => <Switch>\r\n      <Route path=\"/tournaments/:id\" component={TournamentView} />\r\n      <Route path=\"/schemes/:id/groups\" component={GroupsBracket} />\r\n      <Route path=\"/schemes/:id/elimination\" component={EliminationBracket} />\r\n      <Route path=\"/schemes\" component={SchemesRoot} />\r\n      <Route path=\"/teams/:id\" component={TeamView} />\r\n\r\n      {desktopRoutes.map(route => {\r\n        return (\r\n          <Route key={route.id} path={route.to} component={routeMapping[route.to]} mode={mode} />\r\n        );\r\n      })}\r\n\r\n      {tournamentAdditional.map(route => {\r\n        return (\r\n          <Route key={route.id} path={route.to} component={routeMapping[route.to]} mode={mode} />\r\n        );\r\n      })}\r\n\r\n      {mode == ApplicationMode.ADMIN && adminRoutes.map(route => {\r\n        return (\r\n          <Route key={route.id} path={route.to} component={routeMapping[route.to]} mode={mode} />\r\n        );\r\n      })}\r\n\r\n      {mode != ApplicationMode.GUEST && userRoutes.map(route => {\r\n        return (\r\n          <Route key={route.id} path={route.to} component={routeMapping[route.to]} mode={mode} />\r\n        );\r\n      })}\r\n\r\n      {(mode == ApplicationMode.USER || mode == ApplicationMode.ADMIN)\r\n        && <Route path=\"/users/:id\" render={(props) => <UserProfile {...props} mode={mode} />} />}\r\n\r\n      <Route path=\"/oops\" component={NotFoundPage} />\r\n      <Route path=\"/account/activation\" render={(props) => <AccountActivation {...props} />} />\r\n      <Route path=\"/recovery/step1\" render={(props) => <RecoveryStep1 {...props} />} />\r\n      <Route path=\"/recovery/step2\" render={(props) => <RecoveryStep2 {...props} />} />\r\n      <Route exact path=\"/\">\r\n        <Redirect to=\"/schedule\" />\r\n      </Route>\r\n      <Route component={NotFoundPage} />\r\n    </Switch>\r\n    }\r\n  </UserService.WithApplicationMode>\r\n);\r\n\r\nexport default AppRouting;\r\n\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport QueryService from '../services/query.service';\r\nimport UserService from '../services/user.service';\r\nimport { dispatchEvent } from '../services/events.service';\r\n\r\nconst styles = (theme) => ({\r\n  form: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    //width: 250,\r\n    //margin: '1.5rem auto'\r\n  },\r\n  link: {\r\n    color: theme.palette.primary.main,\r\n    padding: '.3rem 0',\r\n    '&:hover': {\r\n      color: theme.palette.primary.dark,\r\n      borderBottom: '1px solid',\r\n      borderColor: theme.palette.primary.main,\r\n    }\r\n  }\r\n});\r\n\r\nclass Login extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      email: '',\r\n      password: '',\r\n      hasError: false\r\n    };\r\n\r\n    this.handleChange = (name) => (event) => {\r\n      this.setState({\r\n        [name]: event.target.value\r\n      });\r\n    }\r\n  }\r\n\r\n  login() {\r\n    QueryService\r\n      .post(`/login`, this.state)\r\n      .then(({ token }) => {\r\n        UserService.login(token);\r\n        dispatchEvent('logged-in');\r\n        this.props.onClose();\r\n      })\r\n      .catch(() => {\r\n        this.setState({ hasError: true });\r\n        //setTimeout(() => this.setState({ hasError: false }), 10 * 1000);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <form className={classes.form} onKeyDown={e => e.key === 'Enter' ? this.login() : null}>\r\n        <TextField\r\n          label=\"Email\"\r\n          fullWidth={true}\r\n          value={this.state.email}\r\n          onChange={this.handleChange('email')}\r\n        />\r\n\r\n        <TextField\r\n          label=\"Парола\"\r\n          fullWidth={true}\r\n          type=\"password\"\r\n          value={this.state.password}\r\n          onChange={this.handleChange('password')}\r\n        />\r\n\r\n        <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n          <Button variant=\"contained\" color=\"primary\" style={{ marginTop: '1rem', padding: '.3rem  4rem' }}\r\n            onClick={() => this.login()}\r\n          >\r\n            Вход\r\n        </Button>\r\n        </div>\r\n        {this.state.hasError && <em style={{ color: 'red', marginTop: '.5rem' }}>Невалидна комбинация от потребителско име и парола</em>}\r\n        <div style={{ marginTop: '.5rem', display: 'flex', justifyContent: 'center' }}>\r\n          <Link to=\"/recovery/step1\" className={classes.link} onClick={this.props.onClose}>\r\n            Забравена парола?\r\n        </Link>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(Login);","import React from 'react';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\nimport StepContent from '@material-ui/core/StepContent';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport UserModel from '../users/user.model';\r\nimport QueryService from '../services/query.service';\r\n\r\nconst styles = (theme) => ({\r\n  action: {\r\n    marginTop: '1rem',\r\n    display: 'flex',\r\n    justifyContent: 'center'\r\n  },\r\n  focused: {\r\n    marginTop: '.5rem',\r\n    color: 'orange'\r\n  }\r\n});\r\n\r\nclass RegistrationStepper extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      activeStep: 0,\r\n      completed: [false, false, false],\r\n      user: UserModel.get(),\r\n      errors: UserModel.getErrorsModel()\r\n    }\r\n\r\n    this.handleChange = (prop, custom = false) => (event) => {\r\n      let user = this.state.user;\r\n      user[prop] = (custom ? event : event.target.value);\r\n      this.setState({\r\n        user: user\r\n      });\r\n    }\r\n\r\n    this.changeStep = (value) => () => {\r\n      let completed = this.state.completed;\r\n      completed[this.state.activeStep] = true;\r\n      this.setState({ activeStep: value, completed: completed });\r\n    }\r\n  }\r\n\r\n  register() {\r\n    this.setState({ errors: UserModel.getErrorsModel() });\r\n    return QueryService\r\n      .post(`/users`, this.state.user)\r\n      .then(_ => this.props.onSuccess())\r\n      .catch(err => this.setState({ errors: err }));\r\n  }\r\n\r\n  render() {\r\n    const { user, activeStep, completed, errors } = this.state;\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <React.Fragment>\r\n\r\n        <UserModel.UserAccountData\r\n          user={user}\r\n          errors={errors}\r\n          onChange={this.handleChange} />\r\n\r\n        <UserModel.UserPlayerMainData\r\n          user={user}\r\n          errors={errors}\r\n          onChange={this.handleChange} />\r\n\r\n        {/* <UserModel.UserPlayerSecondaryData\r\n          user={user}\r\n          errors={errors}\r\n          onChange={this.handleChange} /> */}\r\n\r\n        <div style={{ margin: '1rem 0' }}>\r\n          <em>\r\n            Натискайки бутонът \"Регистрация\", Вие се съгласявате при нужда да бъдете потърсени по\r\n            телефонния номер, който сте предоставили.\r\n          </em>\r\n          <div className={classes.action}>\r\n            <Button style={{ marginRight: '.3rem', padding: '.3rem 2rem' }} variant=\"contained\" color=\"primary\" onClick={() => this.register()}>\r\n              Регистрация\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nclass StepActions extends React.Component {\r\n  render() {\r\n    const { activeStep, changeStep, finalStep, className } = this.props;\r\n\r\n    return (\r\n      <div className={className}>\r\n        {activeStep != 0 && <Button\r\n          variant=\"outlined\"\r\n          color=\"primary\"\r\n          size=\"small\"\r\n          disabled={activeStep === 0}\r\n          onClick={changeStep(activeStep - 1)}\r\n        >\r\n          Назад\r\n          </Button>}\r\n\r\n        <Button\r\n          style={{ marginLeft: '.3rem' }}\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          size=\"small\"\r\n          onClick={changeStep(activeStep + 1)}\r\n        >\r\n          {activeStep === finalStep ? 'Приключване' : 'Продължи'}\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default withStyles(styles)(RegistrationStepper);\r\n\r\n// render() {\r\n//   const { user, activeStep, completed, errors } = this.state;\r\n//   const { classes } = this.props;\r\n\r\n//   return (\r\n//     <React.Fragment>\r\n//       <Stepper\r\n//         nonLinear\r\n//         activeStep={activeStep}\r\n//         orientation=\"vertical\"\r\n//       >\r\n//         <Step>\r\n//           <StepLabel\r\n//             style={{ cursor: 'pointer' }}\r\n//             onClick={this.changeStep(0)}\r\n//             completed={completed[0]}\r\n//             error={errors.email.length\r\n//               + errors.password.length\r\n//               + errors.confirmPassword.length > 0}\r\n//           >\r\n//             Данни за акаунт\r\n//             </StepLabel>\r\n//           <StepContent>\r\n//             <UserModel.UserAccountData\r\n//               user={user}\r\n//               errors={errors}\r\n//               onChange={this.handleChange} />\r\n\r\n//             <StepActions\r\n//               activeStep={activeStep}\r\n//               finalStep={2}\r\n//               className={classes.action}\r\n//               changeStep={this.changeStep} />\r\n//           </StepContent>\r\n//         </Step>\r\n//         <Step>\r\n//           <StepLabel\r\n//             style={{ cursor: 'pointer' }}\r\n//             completed={completed[1]}\r\n//             onClick={this.changeStep(1)}\r\n//             error={errors.firstName.length\r\n//               + errors.lastName.length\r\n//               + errors.telephone.length\r\n//               + errors.gender.length\r\n//               + errors.birthDate.length > 0}\r\n//           >\r\n//             Основни данни за играч\r\n//             </StepLabel>\r\n//           <StepContent>\r\n//             <UserModel.UserPlayerMainData\r\n//               user={user}\r\n//               errors={errors}\r\n//               onChange={this.handleChange} />\r\n\r\n//             <StepActions\r\n//               activeStep={activeStep}\r\n//               finalStep={2}\r\n//               className={classes.action}\r\n//               changeStep={this.changeStep} />\r\n//           </StepContent>\r\n//         </Step>\r\n//         <Step>\r\n//           <StepLabel\r\n//             style={{ cursor: 'pointer' }}\r\n//             onClick={this.changeStep(2)}\r\n//             completed={completed[2]}\r\n//             error={errors.startedPlaying.length\r\n//               + errors.playStyle.length\r\n//               + errors.courtType.length\r\n//               + errors.backhandType.length > 0}\r\n//           >\r\n//             Допълнителни данни за играч\r\n//             </StepLabel>\r\n//           <StepContent>\r\n//             <UserModel.UserPlayerSecondaryData\r\n//               user={user}\r\n//               errors={errors}\r\n//               onChange={this.handleChange} />\r\n\r\n//             <StepActions\r\n//               activeStep={activeStep}\r\n//               finalStep={2}\r\n//               className={classes.action}\r\n//               changeStep={this.changeStep} />\r\n//           </StepContent>\r\n//         </Step>\r\n//       </Stepper>\r\n\r\n//       {activeStep === 3 && <div>\r\n//         <em>\r\n//           Натискайки бутонът \"Регистрация\" Вие се съгласявате да получавате съобщения относно\r\n//           статуса на турнири за които сте записани, както и при нужда да бъдете потърсени по\r\n//           телефонния номер който сте задали.\r\n//           </em>\r\n//         <div className={classes.action}>\r\n//           <Button variant=\"outlined\" color=\"primary\" size=\"small\" onClick={this.changeStep(0)}>\r\n//             Промяна\r\n//           </Button>\r\n\r\n//           <Button style={{ marginLeft: '.3rem' }} variant=\"contained\" size=\"small\" color=\"primary\" onClick={() => this.register()}>\r\n//             Регистрация\r\n//           </Button>\r\n//         </div>\r\n//       </div>\r\n//       }\r\n//     </React.Fragment>\r\n//   );\r\n// }","import React from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport SwipeableViews from 'react-swipeable-views';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport Button from '@material-ui/core/Button';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Login from './Login';\r\nimport Registration from './Registration';\r\nimport EventService from '../services/events.service';\r\n\r\nconst styles = (theme) => ({\r\n  centered: {\r\n    display: 'flex',\r\n    justifyContent: 'center'\r\n  },\r\n  smallContainer: {\r\n    width: 320\r\n  },\r\n  closeBtn: {\r\n    position: 'absolute',\r\n    color: theme.palette.primary.main,\r\n    top: '5px',\r\n    right: '5px',\r\n    cursor: 'pointer',\r\n    '&:hover': {\r\n      color: theme.palette.primary.dark\r\n    }\r\n  }\r\n});\r\n\r\nclass SignIn extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      index: 0,\r\n      open: false,\r\n      successfulRegistration: false\r\n    };\r\n\r\n    this.handleTabChange = (event, index) => {\r\n      this.setState({ index });\r\n    };\r\n\r\n    this.handleRegistration = () => {\r\n      this.setState({ successfulRegistration: true, open: false });\r\n      setTimeout(() => this.setState({ successfulRegistration: false }), 5000);\r\n    }\r\n  }\r\n\r\n  componentWillMount() {\r\n    EventService.catchEvent('menu-login', () => this.setState({ open: true }));\r\n  }\r\n\r\n  render() {\r\n    const { index, open, successfulRegistration } = this.state;\r\n    const { classes, fullScreen } = this.props;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <Dialog\r\n          open={open}\r\n          fullScreen={fullScreen}\r\n          onClose={() => this.setState({ open: false, index: 0 })}\r\n          aria-labelledby=\"login-dialog\"\r\n        >\r\n          <DialogTitle id=\"login-dialog\"\r\n            className={classes.centered}\r\n          >\r\n            <Tabs\r\n              className={classes.smallContainer}\r\n              centered={true}\r\n              value={index}\r\n              onChange={this.handleTabChange}\r\n              indicatorColor=\"primary\"\r\n              textColor=\"primary\"\r\n            >\r\n              <Tab label=\"Вход\" key=\"1\" />\r\n              <Tab label=\"Регистрация\" key=\"2\" />\r\n            </Tabs>\r\n            <span className={classes.closeBtn} onClick={() => this.setState({ open: false, index: 0 })}>\r\n              <ClearIcon />\r\n            </span>\r\n          </DialogTitle>\r\n          <DialogContent\r\n            className={classes.centered}>\r\n            <SwipeableViews\r\n              className={classes.smallContainer}\r\n              index={index}\r\n              onChangeIndex={(index) => this.handleTabChange(null, index)}\r\n            >\r\n              <Login onClose={() => this.setState({ open: false, index: 0 })} />\r\n              <Registration onSuccess={this.handleRegistration} />\r\n            </SwipeableViews>\r\n          </DialogContent>\r\n          <DialogActions>\r\n\r\n          </DialogActions>\r\n        </Dialog>\r\n\r\n        <Dialog\r\n          open={successfulRegistration}\r\n          fullScreen={fullScreen}\r\n          onClose={() => this.setState({ successfulRegistration: false })}\r\n          aria-labelledby=\"successful-registration\"\r\n        >\r\n          <DialogContent>\r\n            <Typography variant=\"headline\" color=\"primary\" align=\"center\">\r\n              Регистрацията Ви беше успешна!\r\n            </Typography>\r\n            <Typography variant=\"subheading\" align=\"center\">\r\n              На зададеният от Вас имейл е изпратено съобщение, с което може да активирате вашият акаунт.</Typography>\r\n            <Typography variant=\"caption\" color=\"secondary\" align=\"center\">\r\n              В случай, че не получавате имейл за активация, моля потърсете някой\r\n              от администраторите на системата, който да активира вашият акаунт.\r\n            </Typography>\r\n          </DialogContent>\r\n          <DialogActions style={{ justifyContent: 'center' }}>\r\n            <Button variant=\"contained\" color=\"primary\" size=\"small\"\r\n              onClick={() => this.setState({ successfulRegistration: false })}\r\n            >\r\n              Добре\r\n          </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(\r\n  withMobileDialog({ breakpoint: 'xs' })(SignIn)\r\n);","import React from 'react';\r\n\r\nclass MenuContext {\r\n  constructor() {\r\n    const { Provider, Consumer } = React.createContext(0);\r\n    this.SetCurrentRoute = Provider;\r\n    this.WithCurrentRoute = Consumer;\r\n  }\r\n}\r\n\r\nexport default new MenuContext();","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Link } from 'react-router-dom';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Button from '@material-ui/core/Button';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport PowerSettingsNewIcon from '@material-ui/icons/PowerSettingsNew';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport UserService from '../services/user.service';\r\nimport MenuContext from './menu.context';\r\nimport { dispatchEvent } from '../services/events.service';\r\nimport { ApplicationMode } from '../enums';\r\nimport {\r\n  adminRoutes,\r\n  desktopRoutes,\r\n  userRoutes,\r\n  tournamentAdditional\r\n} from './menu.configuration';\r\n\r\nclass Menu extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      drawerOpen: false\r\n    }\r\n\r\n    this.login = () => {\r\n      this.setState({ drawerOpen: false });\r\n      dispatchEvent('menu-login');\r\n    };\r\n\r\n    this.logout = () => {\r\n      this.setState({ drawerOpen: false });\r\n      UserService.logout();\r\n    }\r\n  }\r\n\r\n  mapToolbarRoute(route, currentRoute) {\r\n    return (\r\n      <Link to={route.to} key={route.id}>\r\n        <Button color=\"primary\" size=\"large\" variant={route.id == currentRoute ? 'outlined' : 'text'}>\r\n          {route.name}\r\n        </Button>\r\n      </Link>\r\n    );\r\n  }\r\n\r\n  mapDrawerRoute(route) {\r\n    return (\r\n      <Link to={route.to} key={route.id}>\r\n        <ListItem button onClick={() => this.setState({ drawerOpen: false })}>\r\n          {route.Icon && <ListItemIcon style={{ width: '25px' }}>\r\n            <route.Icon />\r\n          </ListItemIcon>}\r\n          {route.faIcon && <ListItemIcon style={{ width: '25px' }}>\r\n            <FontAwesomeIcon icon={route.faIcon} style={{ marginLeft: '.2rem' }} />\r\n          </ListItemIcon>}\r\n          <ListItemText primary={route.name} />\r\n        </ListItem>\r\n      </Link>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <MenuContext.WithCurrentRoute>\r\n        {currentRoute => (<UserService.WithApplicationMode>\r\n          {mode => (\r\n            <div className={\"container \" + classes.root}>\r\n              <img src=\"assets/logo3.png\" />\r\n              <Toolbar className={classes.toolbar} >\r\n                <Hidden smDown>\r\n                  {desktopRoutes.map(route => this.mapToolbarRoute(route, currentRoute))}\r\n                </Hidden>\r\n\r\n                <IconButton color=\"primary\" onClick={() => this.setState({ drawerOpen: true })}>\r\n                  <MenuIcon />\r\n                </IconButton>\r\n\r\n                <Drawer\r\n                  anchor=\"right\"\r\n                  open={this.state.drawerOpen}\r\n                  onClose={() => this.setState({ drawerOpen: false })}\r\n                >\r\n                  <div className={classes.drawerIcon}>\r\n                    <Hidden mdUp>\r\n                      <IconButton onClick={() => this.setState({ drawerOpen: false })}>\r\n                        <MenuIcon />\r\n                      </IconButton>\r\n                    </Hidden>\r\n                  </div>\r\n\r\n                  <List >\r\n                    <Hidden mdUp>\r\n                      {desktopRoutes.map(route => this.mapDrawerRoute(route))}\r\n                    </Hidden>\r\n                    {tournamentAdditional.map(route => this.mapDrawerRoute(route))}\r\n                    <Divider />\r\n                    {mode == ApplicationMode.ADMIN && <React.Fragment>\r\n                      {adminRoutes.map(route => this.mapDrawerRoute(route))}\r\n                      <Divider />\r\n                    </React.Fragment>}\r\n\r\n                    {mode == ApplicationMode.GUEST && <a>\r\n                      <ListItem button onClick={this.login} >\r\n                        <ListItemIcon>\r\n                          <PowerSettingsNewIcon />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"Вход\" />\r\n                      </ListItem>\r\n                    </a>}\r\n\r\n                    {mode != ApplicationMode.GUEST && <React.Fragment>\r\n                      {userRoutes.map(route => this.mapDrawerRoute(route))}\r\n                      <a>\r\n                        <ListItem button onClick={this.logout} >\r\n                          <ListItemIcon>\r\n                            <PowerSettingsNewIcon />\r\n                          </ListItemIcon>\r\n                          <ListItemText primary=\"Изход\" />\r\n                        </ListItem>\r\n                      </a>\r\n                    </React.Fragment>}\r\n                  </List>\r\n                </Drawer>\r\n              </Toolbar>\r\n            </div>\r\n          )}\r\n        </UserService.WithApplicationMode>)}\r\n      </MenuContext.WithCurrentRoute>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = () => ({\r\n  root: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    marginBottom: '1.5rem',\r\n    alignItems: 'center'\r\n  },\r\n  toolbar: {\r\n    justifyContent: 'flex-end',\r\n    paddingRight: 0\r\n  },\r\n  drawerIcon: {\r\n    display: 'flex',\r\n    justifyContent: 'flex-end',\r\n    marginTop: '1rem'\r\n  },\r\n  list: {\r\n    width: '250px'\r\n  }\r\n});\r\n\r\nexport default withStyles(styles)(Menu);","import { createMuiTheme } from '@material-ui/core/styles';\r\n\r\nexport default createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#828A00',\r\n      // '#629900'\r\n      contrastText: '#fff'\r\n    },\r\n    secondary: {\r\n      // main: '#E87114',\r\n      main: '#f47521',\r\n      contrastText: '#fff'\r\n    }\r\n  },\r\n  overrides: {\r\n    MuiFormControl: {\r\n      root: {\r\n        marginTop: '.5rem'\r\n      }\r\n    },\r\n    MuiDialog: {\r\n      paper: {\r\n        overflowY: 'visible'\r\n      }\r\n    },\r\n    MuiTypography: {\r\n      caption: {\r\n        fontStyle: 'italic'\r\n      },\r\n      body2: {\r\n        color: '#828A00'\r\n      },\r\n      display1: {\r\n        color: '#828A00',\r\n        display: 'inline',\r\n        fontSize: '1.5rem',\r\n        margin: '0 0.3rem'\r\n      },\r\n      display2: {\r\n        fontSize: '1rem',\r\n        color: '#828A00',\r\n        fontWeight: 700\r\n      },\r\n      h4: {\r\n        color: '#828A00'\r\n      }\r\n    },\r\n    MuiCardActions: {\r\n      root: {\r\n        padding: 0\r\n      }\r\n    },\r\n    MuiDrawer: {\r\n      modal: {\r\n        zIndex: 1200\r\n      }\r\n    }\r\n  }\r\n});","import React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport MuiPickersUtilsProvider from 'material-ui-pickers/MuiPickersUtilsProvider';\r\nimport DateFnsUtils from 'material-ui-pickers/utils/date-fns-utils';\r\nimport { MuiThemeProvider } from '@material-ui/core/styles';\r\n\r\nimport AppRouting from './app.routing';\r\nimport SignIn from '../login/SignIn';\r\nimport Menu from '../menu';\r\nimport MenuContext from '../menu/menu.context';\r\nimport { catchEvent } from '../services/events.service';\r\nimport UserService from '../services/user.service';\r\nimport { ApplicationMode } from '../enums';\r\nimport theme from '../theme';\r\nimport './app.styles.scss';\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      applicationMode: ApplicationMode.GUEST,\r\n      currentRoute: 0\r\n    }\r\n\r\n    this.handleLoginTab = (event, index) => {\r\n      this.setState({ index });\r\n    };\r\n  }\r\n\r\n  setApplicationMode() {\r\n    UserService.getAuthenticatedUser()\r\n      .then(user => {\r\n        let mode = ApplicationMode.GUEST\r\n        if (user)\r\n          mode = ApplicationMode.USER;\r\n\r\n        if (user && user.isAdmin)\r\n          mode = ApplicationMode.ADMIN;\r\n\r\n        if (user && user.isTournamentAdmin)\r\n          mode = ApplicationMode.TOURNAMENT;\r\n\r\n        this.setState({ applicationMode: mode });\r\n      });\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.body.classList.add('background');\r\n    this.setApplicationMode();\r\n\r\n    catchEvent('not-found', () => this.props.history.replace('/oops'));\r\n    catchEvent('login', () => this.setApplicationMode());\r\n    catchEvent('logout', () => {\r\n      this.setState({\r\n        applicationMode: ApplicationMode.GUEST\r\n      });\r\n      this.props.history.replace('/');\r\n    });\r\n    this.onRouteChanged(this.props.location);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.location.pathname !== prevProps.location.pathname) {\r\n      this.onRouteChanged(this.props.location);\r\n    }\r\n  }\r\n\r\n  onRouteChanged(location) {\r\n    // var route = (NavigationModel.routes\r\n    //   .find(route => location.pathname.indexOf(route.to) != -1)\r\n    //   || NavigationModel.adminRoutes\r\n    //     .find(route => location.pathname.indexOf(route.to) != -1));\r\n    // if (route)\r\n    //   this.setState({ currentRoute: route.id });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n        <MuiThemeProvider theme={theme}>\r\n          <UserService.SetApplicationMode value={this.state.applicationMode}>\r\n            <MenuContext.SetCurrentRoute value={this.state.currentRoute}>\r\n              <div className=\"wrapper\">\r\n                {/* <Navigation /> */}\r\n                <Menu />\r\n                {/* <Home /> */}\r\n                <SignIn />\r\n                <AppRouting />\r\n              </div>\r\n            </MenuContext.SetCurrentRoute>\r\n          </UserService.SetApplicationMode>\r\n        </MuiThemeProvider>\r\n      </MuiPickersUtilsProvider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(App);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './app';\r\n\r\nimport { library } from '@fortawesome/fontawesome-svg-core';\r\nimport { faTrophy, faMedal, faUserFriends, faListOl } from '@fortawesome/free-solid-svg-icons';\r\nlibrary.add(faTrophy, faMedal, faUserFriends, faListOl);\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById(\"root\")\r\n);","import React from 'react';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport App from './App';\r\n\r\nexport default () => {\r\n  return (\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\n"],"sourceRoot":""}